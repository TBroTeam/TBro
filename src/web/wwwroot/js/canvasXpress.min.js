/*
sprintf.js 1.0.2 from https://github.com/alexei/sprintf.js

Copyright (c) 2007-2014, Alexandru Marasteanu <hello [at) alexei (dot] ro>
All rights reserved.
Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
* Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.
* Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.
* Neither the name of this software nor the names of its contributors may be
used to endorse or promote products derived from this software without
specific prior written permission.
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
!function(e){function n(){var e=arguments[0],r=n.cache;return r[e]&&r.hasOwnProperty(e)||(r[e]=n.parse(e)),n.format.call(null,r[e],arguments)}function r(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,n){return Array(n+1).join(e)}var i={not_string:/[^s]/,number:/[dief]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fiosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};n.format=function(e,s){var a,o,l,f,c,p,u,d=1,g=e.length,h="",x=[],b=!0,y="";for(o=0;g>o;o++)if(h=r(e[o]),"string"===h)x[x.length]=e[o];else if("array"===h){if(f=e[o],f[2])for(a=s[d],l=0;l<f[2].length;l++){if(!a.hasOwnProperty(f[2][l]))throw new Error(n("[sprintf] property '%s' does not exist",f[2][l]));a=a[f[2][l]]}else a=f[1]?s[f[1]]:s[d++];if("function"==r(a)&&(a=a()),i.not_string.test(f[8])&&"number"!=r(a)&&isNaN(a))throw new TypeError(n("[sprintf] expecting number but found %s",r(a)));switch(i.number.test(f[8])&&(b=a>=0),f[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":case"i":a=parseInt(a,10);break;case"e":a=f[7]?a.toExponential(f[7]):a.toExponential();break;case"f":a=f[7]?parseFloat(a).toFixed(f[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&f[7]?a.substring(0,f[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}!i.number.test(f[8])||b&&!f[3]?y="":(y=b?"+":"-",a=a.toString().replace(i.sign,"")),p=f[4]?"0"===f[4]?"0":f[4].charAt(1):" ",u=f[6]-(y+a).length,c=f[6]&&u>0?t(p,u):"",x[x.length]=f[5]?y+a+c:"0"===p?y+c+a:c+y+a}return x.join("")},n.cache={},n.parse=function(e){for(var n=e,r=[],t=[],s=0;n;){if(null!==(r=i.text.exec(n)))t[t.length]=r[0];else if(null!==(r=i.modulo.exec(n)))t[t.length]="%";else{if(null===(r=i.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){s|=1;var a=[],o=r[2],l=[];if(null===(l=i.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=l[1];""!==(o=o.substring(l[0].length));)if(null!==(l=i.key_access.exec(o)))a[a.length]=l[1];else{if(null===(l=i.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=l[1]}r[2]=a}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");t[t.length]=r}n=n.substring(r[0].length)}return t};var s=function(e,r,t){return t=(r||[]).slice(0),t.splice(0,0,e),n.apply(null,t)};"undefined"!=typeof exports?(exports.sprintf=n,exports.vsprintf=s):(e.sprintf=n,e.vsprintf=s,"function"==typeof define&&define.amd&&define(function(){return{sprintf:n,vsprintf:s}}))}("undefined"==typeof window?this:window);
/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 */

var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,c=function(f,e){f=String(f);e=e||2;while(f.length<e){f="0"+f}return f};return function(i,v,q){var g=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(i)=="[object String]"&&!/\d/.test(i)){v=i;i=undefined}i=i?new Date(i):new Date;if(isNaN(i)){throw SyntaxError("invalid date")}v=String(g.masks[v]||v||g.masks["default"]);if(v.slice(0,4)=="UTC:"){v=v.slice(4);q=true}var t=q?"getUTC":"get",l=i[t+"Date"](),e=i[t+"Day"](),j=i[t+"Month"](),p=i[t+"FullYear"](),r=i[t+"Hours"](),k=i[t+"Minutes"](),u=i[t+"Seconds"](),n=i[t+"Milliseconds"](),f=q?0:i.getTimezoneOffset(),h={d:l,dd:c(l),ddd:g.i18n.dayNames[e],dddd:g.i18n.dayNames[e+7],m:j+1,mm:c(j+1),mmm:g.i18n.monthNames[j],mmmm:g.i18n.monthNames[j+12],yy:String(p).slice(2),yyyy:p,h:r%12||12,hh:c(r%12||12),H:r,HH:c(r),M:k,MM:c(k),s:u,ss:c(u),l:c(n,3),L:c(n>99?Math.round(n/10):n),t:r<12?"a":"p",tt:r<12?"am":"pm",T:r<12?"A":"P",TT:r<12?"AM":"PM",Z:q?"UTC":(String(i).match(b)||[""]).pop().replace(d,""),o:(f>0?"-":"+")+c(Math.floor(Math.abs(f)/60)*100+Math.abs(f)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return v.replace(a,function(m){return m in h?h[m]:m.slice(1,m.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(a,b){return dateFormat(this,a,b)};
/*
 * CanvasXpress 7.1 - JavaScript Canvas Library
 *
 * Copyright (c) 2009-2012 Isaac Neuhaus
 *
 * imnphd@gmail.com
 *
 *
 * Redistributions of this source code must retain this copyright
 * notice and the following disclaimer.
 *
 * CanvasXpress is licensed under the terms of the Open Source
 * LGPL 3.0 license.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Commercial use is permitted to the extent that this source code
 * do NOT become part of any other Open Source or Commercially licensed
 * development library or toolkit without explicit permission.
 *
 * Network graphs were implemented based on the HeyGraph by Tom Martin
 * <http://www.heychinaski.com>.
 *
 * Thanks to Mingyi Liu for his contributions with the Ext-JS panel and
 * network graphs and Charles Tilford for his input to the Genome Browser.
 *
 */
"undefined"==typeof CanvasXpress&&(CanvasXpress={});var CanvasXpress=function(t,e,i,s,a,r,h){this.$=function(t){return document.getElementById(t)},this.$cX=function(t,e,i){var s=document.createElement(t);if(e)for(var a in e)s[a]=e[a];if(i)for(var a in i)s.style[a]=i[a];return s},t?"object"==typeof t&&(e=t.data||!1,i=t.config||!1,s=t.events||!1,a=t.hidden||!1,r=t.info||!1,h=t.check||!1,t=t.renderTo||this.createNewTarget()):t=this.createNewTarget(),this.setInit=function(){this.version=7.1,this.target=t,this.events=s,this.info=r,this.userId=481711921136670,this.startTime=(new Date).getTime()},this.validateParameters=function(){this.validateData(),this.validateConfig(),this.validateEvents(),this.validateInfo()},this.validateData=function(){if(e&&!this.subBrowser)try{JSON.stringify(e)}catch(t){alert("Data object malformed:\n"+t)}},this.validateConfig=function(){if(this.addConfigLocation(),i){if(!this.subBrowser)try{JSON.stringify(i)}catch(t){alert("Config object malformed:\n"+t)}}else i={};this.userConfig=i},this.validateEvents=function(){},this.validateInfo=function(){r||(r="")},this.addConfigLocation=function(){var t=window.location.href.split(/&/);if(t&&t.length>0)for(var e=0;e<t.length;e++){var s=t[e].match(/canvasXpress=(\{.+\})/);if(s&&s.length>1){var a,r=decodeURIComponent(JSON.stringify(s[1]).replace(/^\"/,"").replace(/\"$/,""));try{a=JSON.parse(r)}catch(h){alert("Location parameters malformed:\n"+h)}if(a){i||(i={});for(var n in a)i[n]||(i[n]=a[n])}}}},this.newId=function(t){for(var e=0,i=this.target+t+e,s=this.$(i);s;)e++,i=this.target+t+e,s=this.$(i);return i},this.createNewTarget=function(){var t=this.$cX("canvas",{id:this.newId("canvasXpress")});return document.body.appendChild(t),t.id},this.insertTarget=function(t,e,i,s,a){if(t&&e){var r=this.$(t);if(r)return;r=this.$cX("canvas",{id:t,width:i,height:s}),a?e.parentNode.insertBefore(r,e.nextSibling):e.parentNode.insertBefore(r,e)}},this.removeTarget=function(t){var e=this.$(t);e&&e.parentNode.removeChild(e)},this.save=function(){return{renderTo:this.target,data:this.data,config:this.getConfig(),events:this.events}},this.print=function(t){return function(){if(t.resetConfigurator(),alert("A new window will open so you can right click on the graph and save it"),t.isIE){var e=t.canvas.parentNode.childNodes[0];return window.open().document.write("<html><body>"+e.innerHTML+"</body></html>")}var i=t.canvas.toDataURL("image/png");return window.open().document.write('<html><body><img src="'+i+'" /></body></html>')}}(this),this.exportToExcel=function(t){for(var e="",i=0;i<t.length;i++)e+=t[i].join("%09")+"%0D";return window.open("data:text/tab-separeted-values,"+e)},this.exporttoHTML=function(t){for(var e="<table>",i=0;i<t.length;i++)e+="<tr><td>",e+=t[i].join("</td><td>"),e+="</td></tr>";return e+="</table>",window.open().document.write(e)},this.prettyJSON=function(t,e){var i=function(t){return"object"==typeof t?null===t?"null":t.constructor==(new Array).constructor?"array":t.constructor==(new Date).constructor?"date":t.constructor==(new RegExp).constructor?"regex":"object":typeof t};e||(e="");var s,a="  ",r=i(t),h=0;if("array"==r){if(0==t.length)return"[]";s="["}else{for(var n in t){h++;break}if(0==h)return"{}";s="{"}h=0;for(var o in t){switch(v=t[o],h>0&&(s+=","),s+="array"==r?"\n"+e+a:"\n"+e+a+'"'+o+'": ',i(v)){case"array":case"object":s+=this.prettyJSON(v,e+a);break;case"boolean":case"number":s+=v.toString();break;case"null":s+="null";break;case"string":s+='"'+v+'"'}h++}return s+="array"==r?"\n"+e+"]":"\n"+e+"}"},this.dumpToConsole=function(t){console.log(this.target),console.log(this.prettyJSON(t))},this.profile=function(t){var e=(new Date).getTime(),i=this.profileTime||this.startTime;t||(t=""),console.log(this.target+": "+t+": "+(e-i)),this.profileTime=e},this.stack=function(){if(this.debug)for(var t in this)if(arguments.callee.caller===this[t])return void CanvasXpress.stack[this.target].push(t)},this.initialize=function(){this.initCSS(),this.setInit(),this.initCrossBrowser(h),this.validateParameters(),this.initConfig(i),this.initViewport(a),this.initUtils(),this.initPrimitives(),this.initExample(),this.initData(e),this.initLayout(),this.initEvents(),this.initAnimation(),this.initRemote(),this.initGraph(),this.showToolbar(!0)},this.initialize(),CanvasXpress.references.push(this),CanvasXpress.stack[this.target]=[]};CanvasXpress.references=[],CanvasXpress.cacheImages={},CanvasXpress.cacheText={},CanvasXpress.stack={},CanvasXpress.current=!1,CanvasXpress.resizing=!1,CanvasXpress.getObject=function(t){for(var e=0;e<CanvasXpress.references.length;e++)if(CanvasXpress.references[e].target==t)return CanvasXpress.references[e]},CanvasXpress.prototype.initCrossBrowser=function(t){this.hasClass=function(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.className)},this.addClass=function(t,e){hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},this.removeClass=function(t,e){hasClass(t,e)&&(t.className=t.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},this.cancelEvent=function(t){t||(t=window.event),t.preventDefault?t.preventDefault():t.returnValue=!1},this.stopEvent=function(t){t||(t=window.event),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},this.normalizeEvtName=function(t){return this.isIE?"on"+t:t},this.addEvtListener=function(t,e,i,s){t&&e&&i&&(this.registeredEvents||(this.registeredEvents={}),t.id?(this.registeredEvents[t.id]||(this.registeredEvents[t.id]={}),this.registeredEvents[t.id][e]=[i,s]):(this.registeredEvents[t]||(this.registeredEvents[t]={}),this.registeredEvents[t][e]=[i,s]),this.isIE?t.attachEvent(this.normalizeEvtName(e),i):(t.addEventListener(e,i,s),"mousewheel"==e&&t.addEventListener("DOMMouseScroll",i,s)))},this.removeEvtListener=function(t,e,i,s){if(t&&e&&i){var a=this.registeredEvents[t.id||t];if(a&&a.hasOwnProperty(e)){delete a[e],this.isIE?t.detachEvent(this.normalizeEvtName(e),i):(t.removeEventListener(e,i,s),"mousewheel"==e&&t.removeEventListener("DOMMouseScroll",i,s));var r=this.getKeys(this.registeredEvents[t.id||t]);r&&r.length<1&&delete this.registeredEvents[t.id||t]}}},this.addRemoveEvtListener=function(t,e,i,s,a){t&&e&&i&&s&&this[t](e,i,s,a)},this.purgeEventListeners=function(){for(var t in this.registeredEvents){var e=this.$(t)||t;for(var i in this.registeredEvents[t])this.removeEvtListener(e,i,this.registeredEvents[t][0],this.registeredEvents[t][1])}},this.preventSelection=function(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()},this.getTargetEvent=function(t){return this.isIE&&this.useFlashIE&&this.browserVersion<9?t.srcElement.parentNode:t.target||t.srcElement},this.isGoogleChromeFrame=function(){if("Explorer"==this.browser&&this.browserVersion<9&&!t&&navigator.userAgent.toLowerCase().indexOf("chromeframe")<0)try{var e=document.createElement("script");e.type="text/javascript",e.src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js",document.getElementsByTagName("head")[0].appendChild(e),CFInstall.check({mode:"overlay"})}catch(i){alert("CanvasXpress works much faster in fully HTML 5 compliant browsers.\nPlease consider installing Google chrome frame to make this browser compliant.")}},this.dataBrowser=[{string:navigator.platform,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"BlackBerry",identity:"BlackBerry"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],this.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],this.isSubstandardBrowser=function(){return"Firefox"==this.browser&&this.browserVersion>4||"Opera"==this.browser&&this.browserVersion>9||"Safari"==this.browser&&this.browserVersion>4||"Chrome"==this.browser&&this.browserVersion>1?!1:!0},this.isMobileApp=function(){return this.browser.match(/iPhone|iPod|iPad|Android|BlackBerry/i)?!0:!1},this.searchString=function(t){for(var e=0;e<t.length;e++){var i=t[e].string,s=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,i){if(-1!=i.indexOf(t[e].subString))return t[e].identity}else if(s)return t[e].identity}},this.searchVersion=function(t){var e=t.indexOf(this.versionSearchString);if(-1!=e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},this.initializeBrowser=function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.browserVersion=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.browserOS=this.searchString(this.dataOS)||"an unknown OS","Explorer"==this.browser?(this.isIE=!0,this.subBrowser=!0,this.mobileApp=!1):(this.isIE=!1,this.subBrowser=this.isSubstandardBrowser(),this.mobileApp=this.isMobileApp()),this.isGoogleChromeFrame()},this.initializeBrowser()},CanvasXpress.prototype.initCSS=function(){var t=" table.shorts{margin:2px 3px;padding:2px 3px;border:1px solid #fafafa;border-collapse:collapse;font-size:x-small}";t+=" td.k{text-align:center;padding:2px 5px;margin:2px 5px;border:1px solid #cccccc;}",t+=" td.d{padding:2px 5px;margin:2px 5px;border:1px solid #cccccc;}",t+=" th.d{padding:2px 5px;margin:2px 5px;border:1px solid #cccccc;}",t+=" th.cxx,th.cxz,th.cxb,th.cxs,th.cxv,td.cxx,td.cxz,td.cxb,td.cxs,td.cxv{background-image:url(http://www.canvasxpress.org/images/accordion.png);background-repeat:repeat-x;border:1px solid #cccccc;vertical-align:middle;}",t+=" td.cxx,td.cxz,td.cxb,td.cxs,td.cxv{background:#fefefe}",t+=" td.cxy{border:1px solid #cccccc;vertical-align:middle;text-align:right;}",t+=" div.cxc{left:0px;top:0px;margin-left:5px;margin-top:2px;white-space:nowrap;overflow:hidden;}",t+=" div.CanvasXpressDrag{opacity:0.5;filter:alpha(opacity=50);background-color:rgb(240,240,240);position:absolute;}",t+=" div.CanvasXpressTooltip{border:1px solid rgb(113,139,183);border-radius:5px;background-color:rgb(240,240,240);cursor:move;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;margin:2px 3px;overflow:hidden;padding:2px 3px;position:absolute;white-space:nowrap;}",t+=" img.CanvasXpressTooltip{cursor:default;float:right;height:13px;margin:2px 3px 0px 0px;width:13px;cursor:default;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" span.CanvasXpressTooltip{border:1px solid rgb(113,139,183);border-radius:5px;background-color:rgb(240,240,240);cursor:move;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;margin:2px 3px;overflow:hidden;padding:2px 3px;position:absolute;white-space:nowrap;}",t+=" div.CanvasXpressDataTable{border:1px solid rgb(113,139,183);border-radius:5px;background-color:rgb(240,240,240);clear:both;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;overflow:hidden;position:absolute;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.CanvasXpressDataTableToolbar{border:0px;border-radius:5px 5px 0px 0px;background-color:rgb(240,240,240);color:rgb(34,34,34);cursor:move;font:normal 11px arial,tahoma,sans-serif;height:18px;left:0px;line-height:100%;position:absolute;top:0px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" img.CanvasXpressDataTableToolbarImage{cursor:default;float:right;height:13px;margin:2px 3px 0px 0px;width:13px;cursor:default;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.CanvasXpressDataTableContainer{background-color:rgb(240,240,240);border-radius:0px 0px 5px 5px;color:rgb(34,34,34);display:block;font:normal 11px arial,tahoma,sans-serif;left:0px;line-height:100%;position:absolute;top:20px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.CanvasXpressDataTableVertical{background-color:rgb(240,240,240);overflow:auto;position:absolute;right:2px;top:2px;width:18px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.CanvasXpressDataTableHorizontal{background-color:rgb(240,240,240);bottom:2px;height:18px;left:2px;overflow:auto;position:absolute;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.CanvasXpressDataTableResizer{background-color:rgb(240,240,240);background-image:url(http://www.canvasxpress.org/images/resize_w.png);background-repeat:no-repeat;cursor:se-resize;bottom:1px;height:15px;position:absolute;right:1px;width:15px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" table.CanvasXpressDataTable{border:0px;border-spacing:1px;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;left:1px;line-height:20px;position:absolute;table-layout:fixed;top:1px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.CanvasXpressDataTableMask{border:0px;left:1px;position:absolute;top:1px;overflow:hidden;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" th.CanvasXpressTableCellHead{background-image:url(http://www.canvasxpress.org/images/accordion.png);background-repeat:repeat-x;border-left:1px solid #ffffff;border-top:1px solid #ffffff;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:20px;padding:0px;text-align:left;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" th.CanvasXpressTableCellHeadActive{background-image:url(http://www.canvasxpress.org/images/accordion_active.png);background-repeat:repeat-x;border-left:1px solid #ffffff;border-top:1px solid #ffffff;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:20px;padding:0px;text-align:left;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" td.CanvasXpressTableCell{background-color:#ffffff;border:0px;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:20px;padding:0px;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" td.CanvasXpressTableCellActive{background-color:#dfe8f9;border:0px;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:20px;padding:0px;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.CanvasXpressTableCell{font:normal 11px arial,tahoma,sans-serif;line-height:20px;margin:2px 2px 1px 5px;overflow:hidden;white-space:nowrap;}",t+=" div.CanvasXpressTableCellSortAsc{background:url(http://www.canvasxpress.org/images/sort_asc.gif) no-repeat right 6px;font:normal 11px arial,tahoma,sans-serif;line-height:20px;margin:2px 2px 1px 5px;overflow:hidden;white-space:nowrap;}",t+=" div.CanvasXpressTableCellSortDesc{background:url(http://www.canvasxpress.org/images/sort_desc.gif) no-repeat right 6px;font:normal 11px arial,tahoma,sans-serif;line-height:20px;margin:2px 2px 1px 5px;overflow:hidden;white-space:nowrap;}",t+=" div.CanvasXpressConfigurator{background-color:rgb(240,240,240);border-radius:5px;border:1px solid rgb(113,139,183);box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" span.CanvasXpressConfigurator{cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" textarea.CanvasXpressConfigurator{background-color:rgb(240,240,240);border-radius:5px;border:1px solid rgb(113,139,183);box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;}",t+=" img.CanvasXpressConfigurator{cursor:default;float:right;height:13px;margin-left:2px;width:13px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" select.CanvasXpressConfigurator{background-color:rgb(255,255,255);border:1px solid rgb(113,139,183);color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;padding-left:3px;}",t+=" input.CanvasXpressConfigurator{background-color:rgb(255,255,255);border:1px solid rgb(113,139,183);color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;padding-left:3px;}",t+=" div.CanvasXpressConfiguratorOptions{cursor:default;font:normal 11px arial,tahoma,sans-serif;height:100px;line-height:16px;margin-top:8px;overflow:auto;width:180px;}",t+=" div.CanvasXpressConfiguratorFilter{background-color:rgb(240,240,240);border-radius:5px;border:1px solid rgb(113,139,183);box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:16px;}",t+=" select.CanvasXpressConfiguratorFilter{border:1px solid rgb(113,139,183);font:normal 11px arial,tahoma,sans-serif;line-height:16px;}",t+=" input.CanvasXpressConfiguratorFilter{border:1px solid rgb(113,139,183);font:normal 11px arial,tahoma,sans-serif;line-height:16px;}",t+=" div.CanvasXpressConfiguratorColor{border:1px solid rgb(113,139,183);font:normal 11px arial,tahoma,sans-serif;line-height:16px;}",t+=" div.accordionHead{margin-top:2px;height:16px;overflow:hidden;float:left;cursor:pointer;vertical-align:middle;text-align:left;display:table-cell;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.accordionContent{overflow:auto;}",t+=" div.hoverable:hover{background-color:#dfe8f6}",t+=" div.CanvasXpressContainer{position:relative;float:left;}",t+=" div.CanvasXpressHandler{position:relative;float:left;background-position:50% 50%;background-repeat:no-repeat;}",t+=" div.CanvasXpressWrapper{position:relative;float:left;line-height:100%;}",t+=" div.CanvasXpressDataFilter{color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:100%;margin:0px;padding:0px;position:absolute;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.CanvasXpressDataFilterToolbar{background-image:url(http://www.canvasxpress.org/images/accordion.png);background-repeat:repeat-x;border:1px solid rgb(113,139,183);border-radius:5px;color:rgb(34,34,34);cursor:move;font:normal 11px arial,tahoma,sans-serif;height:18px;left:0px;line-height:100%;margin:0px;padding:2px;position:absolute;top:0px;}",t+=" span.CanvasXpressDataFilterToolbarText{font:normal 11px arial,tahoma,sans-serif;left:8px;line-height:100%;position:relative;top:5px;}",t+=" img.CanvasXpressDataFilterToolbarImage{cursor:default;width:13px;height:13px;margin-top:2px;margin-right:2px;float:right;}",t+=" span.CanvasXpressDataFilterText{background-image:url(http://www.canvasxpress.org/images/arrowright.png);background-repeat:no-repeat;background-position:-3px;font:normal 11px arial,tahoma,sans-serif;left:8px;line-height:100%;position:relative;top:5px;}",t+=" span.CanvasXpressDataFilterTextActive{background-image:url(http://www.canvasxpress.org/images/arrowdown.png);background-repeat:no-repeat;background-position:-3px;font:normal 11px arial,tahoma,sans-serif;left:8px;line-height:100%;position:relative;top:5px;}",t+=" div.CanvasXpressDataFilterContainer{border:0px;left:0px;margin:0px;padding:0px;position:absolute;top:24px;}",t+=" div.CanvasXpressDataFilterContainerMask{background-color:#ffffff;border:1px solid #d0d0d0;margin:1px 3px 3px 3px;overflow-x:hidden;overflow-y:scroll;}",t+=" div.CanvasXpressDataFilterContainerItem{background-color:#ffffff;color:#4181ba;height:15px;padding:1px 0px 0px 1px;}",t+=" div.CanvasXpressDataFilterContainerItemSelected{background-color:#4181ba;color:rgb(255,255,255);height:15px;padding:1px 0px 0px 1px;}",t+=" div.CanvasXpressDataFilterContainerHoverable{border:1px solid rgb(113,139,183);margin:2px;margin-bottom:4px;}",t+=" div.CanvasXpressDataFilterContainerHoverable:hover{background-color:#dfe8f6}",t+=" div.CanvasXpressDataFilterContainerNumeric{background-color:#ffffff;border:1px solid rgb(113,139,183);clear:both;height:14px;margin:2px;}",t+=" div.CanvasXpressDataFilterContainerMin{background-image:url(http://www.canvasxpress.org/images/move_right.png);background-repeat:no-repeat;float:left;height:14px;position:relative;width:14px;z-index:10002;}",t+=" div.CanvasXpressDataFilterContainerMax{background-image:url(http://www.canvasxpress.org/images/move_left.png);background-repeat:no-repeat;float:left;height:14px;position:relative;width:14px;z-index:10002;}",t+=" div.CanvasXpressDataFilterContainerRange{background-color:#4181ba;float:left;height:14px;left:0px;position:relative;z-index:10001;}",t+=" select.CanvasXpressDataFilterContainerString{background-color:rgb(255,255,255);font:normal 11px arial,tahoma,sans-serif;margin-left:3px;margin-bottom:3px;}",t+=" div.CanvasXpressDataFilterHead{background-image:url(http://www.canvasxpress.org/images/accordion.png);background-repeat:repeat-x;border:1px solid rgb(113,139,183);border-radius:5px 5px 5px 5px;color:rgb(34,34,34);cursor:pointer;float:left;height:18px;margin-top:2px;overflow:hidden;padding:2px;text-align:left;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.CanvasXpressDataFilterHeadActive{background-color:rgb(240,240,240);background-image:url(http://www.canvasxpress.org/images/accordion_active.png);background-repeat:repeat-x;border:1px solid rgb(113,139,183);border-radius:5px 5px 0px 0px;color:rgb(34,34,34);cursor:pointer;float:left;height:18px;margin-top:2px;overflow:hidden;padding:2px;text-align:left;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.CanvasXpressDataFilterContent{background-color:rgb(255,255,255);border:1px solid rgb(113,139,183);border-radius:0px 0px 5px 5px;border-top:0px;color:rgb(113,139,183);overflow:auto;padding:2px;}",t+=" div.CanvasXpressLink{background-color:rgb(240,240,240);background-image:url(http://www.canvasxpress.org/images/menu.gif);background-repeat:repeat-y;border:1px solid rgb(113,139,183);border-radius:3px;box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:100%;margin:0px;padding:0px;position:absolute;-moz-box-shadow:rgba(154,154,154,0.2) 3px 3px;}",t+=" div.CanvasXpressMenu{background-color:rgb(240,240,240);background-image:url(http://www.canvasxpress.org/images/menu.gif);background-repeat:repeat-y;border:1px solid rgb(113,139,183);border-radius:3px;box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:100%;margin:0px;padding:0px;position:absolute;-moz-box-shadow:rgba(154,154,154,0.2) 3px 3px;}",t+=" ul.CanvasXpressList{background:transparent;border:0px none;cursor:default;list-style:none;margin:0px;overflow:hidden;padding:2px;}",t+=" li.CanvasXpressListItemSep{cursor:default;display:block;font:normal 11px arial,tahoma,sans-serif;font-size:1px;line-height:1px;list-style:none;margin:0px;padding:1px;white-space:nowrap;}",t+=" li.CanvasXpressListItem{cursor:default;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:100%;list-style:none;margin:0px;padding:1px;white-space:nowrap;}",t+=" li.CanvasXpressListItemActive{background-color:rgb(219,236,244);background-image:url(http://www.canvasxpress.org/images/item-over.gif);background-repeat:repeat-x;background-position:left bottom;border-color:rgb(170,204,246);border-style:solid;border-width:1px 0px;cursor:default;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:100%;list-style:none;margin:0px 1px;padding:0px;white-space:nowrap;}",t+=" a.CanvasXpressListItemA{color:rgb(34,34,34);cursor:pointer;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:16px;list-style:none;outline-style:none;outline-width:0px;padding:3px 21px 3px 27px;position:relative;text-decoration:none;white-space:nowrap;}",t+=" a.CanvasXpressListItemAArrow{background:url(http://www.canvasxpress.org/images/menu-parent.gif) no-repeat scroll right 50% transparent;color:rgb(34,34,34);cursor:pointer;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:16px;list-style:none;outline-style:none;outline-width:0px;padding:3px 21px 3px 27px;position:relative;text-decoration:none;white-space:nowrap;}",t+=" a.CanvasXpressListItemAActive{border-color:rgb(170,204,246);border-style:solid;border-width:0px 1px;color:rgb(34,34,34);cursor:pointer;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:16px;list-style:none;outline-style:none;outline-width:0px;margin:0px -1px;padding:3px 21px 3px 27px;position:relative;text-decoration:none !important;white-space:nowrap;}",t+=" a.CanvasXpressListItemAArrowActive{background:url(http://www.canvasxpress.org/images/menu-parent.gif) no-repeat scroll right 50% transparent;border-color:rgb(170,204,246);border-style:solid;border-width:0px 1px;color:rgb(34,34,34);cursor:pointer;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:16px;list-style:none;margin:0px -1px;outline-style:none;outline-width:0px;padding:3px 21px 3px 27px;position:relative;text-decoration:none !important;white-space:nowrap;}",t+=" img.CanvasXpressListIcon{background-position:center;border:0px none;color:rgb(34,34,34);cursor:pointer;font:normal 11px arial,tahoma,sans-serif;height:16px;left:3px;line-height:16px;list-style:none;margin:0px;padding:0px;position:absolute;top:3px;vertical-align:top;width:16px;white-space:nowrap;}",t+=" span.CanvasXpressListItemText{color:rgb(34,34,34);cursor:pointer;font:normal 11px arial,tahoma,sans-serif;line-height:16px;list-style:none;margin-right:50px;white-space:nowrap;}",t+=" span.CanvasXpressListItemTextShort{color:rgb(34,34,34);cursor:pointer;font:italic 9px arial,tahoma,sans-serif;line-height:16px;list-style:none;position:absolute;right:4px;white-space:nowrap;}",t+=" span.CanvasXpressListItemTextSep{background-color:rgb(224,224,224);border-bottom:1px solid;border-bottom-color:rgb(255,255,255);cursor:default;display:block;font:normal 11px arial,tahoma,sans-serif;font-size:1px;line-height:1px;list-style:none;margin:2px 3px;overflow:hidden;white-space:nowrap;}",t+=" img.CanvasXpressToolbarHelp{cursor:default;float:right;height:13px;margin-left:2px;width:13px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" div.CanvasXpressToolbarHelp{background-color:rgb(240,240,240);border-radius:5px;border:1px solid rgb(113,139,183);box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t+=" p.CanvasXpressToolbarHelp{cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;margin:0px;padding:5px 5px 5px 20px;}",t+=" img.CanvasXpressToolbarImage{margin-left:4px;float:right;}",t+=" canvas.CanvasXpress{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}";var e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)},CanvasXpress.prototype.initConfig=function(t){this.setConfigDefaults=function(){this.config=[],this.graphType="Bar",this.config.push("graphType"),this.showGraph=!0,this.config.push("showGraph"),this.useFlashIE=!0,this.config.push("useFlashIE"),this.graphOrientation="horizontal",this.config.push("graphOrientation"),this.foreground="rgb(0,0,0)",this.config.push("foreground"),this.foregroundWindow="rgb(0,0,0)",this.config.push("foregroundWindow"),this.background="rgb(255,255,255)",this.config.push("background"),this.backgroundWindow="rgb(204,204,204)",this.config.push("backgroundWindow"),this.backgroundType="solid",this.config.push("backgroundType"),this.backgroundImage=!1,this.config.push("backgroundImage"),this.backgroundVideo=!1,this.config.push("backgroundVideo"),this.gradientOrientation="vertical",this.config.push("gradientOrientation"),this.backgroundWindowGradientOrientation="vertical",this.config.push("backgroundWindowGradientOrientation"),this.backgroundGradient1Color="rgb(0,0,200)",this.config.push("backgroundGradient1Color"),this.backgroundGradient2Color="rgb(0,0,36)",this.config.push("backgroundGradient2Color"),this.backgroundWindowGradient1Color="rgb(0,0,200)",this.config.push("backgroundWindowGradient1Color"),this.backgroundWindowGradient2Color="rgb(0,0,36)",this.config.push("backgroundWindowGradient2Color"),this.gradient=!1,this.config.push("gradient"),this.gradientType="radial",this.config.push("gradientType"),this.gradientRatio=1.3,this.config.push("gradientRatio"),this.transparency=null,this.config.push("transparency"),this.margin=5,this.config.push("margin"),this.marginLeft=20,this.config.push("marginLeft"),this.marginTop=20,this.config.push("marginTop"),this.marginBottom=20,this.config.push("marginBottom"),this.marginRight=20,this.config.push("marginRight"),this.showShadow=!1,this.config.push("showShadow"),this.shadowOffsetX=3,this.config.push("shadowOffsetX"),this.shadowOffsetY=3,this.config.push("shadowOffsetY"),this.shadowBlur=2,this.config.push("shadowBlur"),this.shadowColor="rgba(0,0,0,0.5)",this.config.push("shadowColor"),this.canvasBox=!0,this.config.push("canvasBox"),this.canvasBoxColor="rgb(204,204,204)",this.config.push("canvasBoxColor"),this.autoAdjust=!0,this.config.push("autoAdjust"),this.autoAdjustYTries=0,this.autoAdjustXTries=0,this.autoAdjustMax=3,this.config.push("autoAdjustMax"),this.acknowledgment=!1,this.config.push("acknowledgment"),this.acknowledgementIcon="cx.png",this.config.push("acknowledgmentIcon"),this.acknowledgementIconPosition="outside",this.config.push("acknowledgmentIconPosition"),this.functions=[],this.videoControls=!0,this.config.push("videoControls"),this.videoAutoplay=!0,this.config.push("videoAutoplay"),this.videoLoop=!1,this.config.push("videoLoop"),this.videoPreload="none",
this.config.push("videoPreload"),this.videoData="{}",this.config.push("videoData"),this.videoPoster="",this.config.push("videoPoster"),this.videoClassName="video-js vjs-default-skin",this.config.push("videoClassName"),this.videoPlaybackRate=1,this.config.push("videoPlaybackRate"),this.videoCurrentTime=!1,this.config.push("videoCurrentTime"),this.videoGrid=!1,this.config.push("videoGrid"),this.videoGridStep=10,this.config.push("videoGridStep"),this.videoColor="rgb(255,0,0)",this.config.push("videoColor"),this.fonts=this.isVML||this.subBrowser?["Gentilis","Helvetiker","Optimer"]:["Gentilis","Helvetiker","Optimer","Verdana, sans-serif"],this.fontName=this.isVML?"Gentilis":this.subBrowser?"Optimer":"Verdana, sans-serif",this.config.push("fontName"),this.fontStyle=!1,this.config.push("fontStyle"),this.fontSize=12,this.config.push("fontSize"),this.font=this.fontStyle?this.fontStyle+this.fontSize+"pt "+this.fontName:this.fontSize+"pt "+this.fontName,this.align="center",this.config.push("align"),this.baseline="middle",this.config.push("baseline"),this.maxTextSize=14,this.config.push("maxTextSize"),this.minTextSize=4,this.config.push("minTextSize"),this.autoScaleFont=!0,this.config.push("autoScaleFont"),this.scaleTextConstantMult=40,this.scaleTextConstantAdd=2.5,this.title=!1,this.config.push("title"),this.titleHeight=30,this.config.push("titleHeight"),this.titleColor="rgb(0,0,0)",this.config.push("titleColor"),this.subtitle=!1,this.config.push("subtitle"),this.subtitleHeight=16,this.config.push("subtitleHeight"),this.subtitleColor="rgb(0,0,0)",this.config.push("subtitleColor"),this.citation=!1,this.config.push("citation"),this.citationColor="rgb(0,0,0)",this.config.push("citationColor"),this.citationFontSize=6,this.config.push("citationSize"),this.citationFont=this.citationFontSize+"Pt "+this.fontName,this.citationScaleFontFactor=1,this.config.push("citationScaleFontFactor"),this.dashLength=8,this.config.push("dashLength"),this.dotLength=1,this.config.push("dotLength"),this.arrowPointSize=10,this.config.push("arrowPointSize"),this.capType="butt",this.config.push("capType"),this.outlineWidth=1,this.config.push("outlineWidth"),this.lines=[],this.colorScheme="user",this.config.push("colorScheme"),this.colors0=["rgb(255,0,0)","rgb(0,0,255)","rgb(0,255,0)","rgb(255,255,0)","rgb(0,255,255)","rgb(255,0,255)","rgb(153,51,0)","rgb(0,0,128)","rgb(128,128,0)","rgb(255,102,0)","rgb(0,128,128)","rgb(102,0,102)","rgb(255,153,204)","rgb(102,102,153)","rgb(51,51,0)","rgb(255,204,153)","rgb(204,255,255)","rgb(153,153,255)","rgb(255,128,128)","rgb(51,102,255)","rgb(51,153,102)","rgb(255,204,0)","rgb(0,204,255)","rgb(208,32,144)","rgb(153,51,102)","rgb(0,102,204)","rgb(153,204,0)","rgb(255,153,0)","rgb(51,204,204)","rgb(204,153,255)","rgb(128,0,0)","rgb(51,51,153)","rgb(0,128,0)","rgb(255,255,204)","rgb(153,204,255)","rgb(128,0,128)"],this.colors1=["rgb(0,0,255)","rgb(255,0,77)","rgb(255,191,0)","rgb(116,255,0)","rgb(164,0,255)","rgb(255,116,0)","rgb(255,255,0)","rgb(0,255,255)","rgb(255,0,0)","rgb(255,211,0)","rgb(61,0,255)","rgb(0,255,0)","rgb(255,0,255)","rgb(255,146,0)","rgb(211,255,0)","rgb(0,144,255)","rgb(109,0,255)","rgb(255,73,0)","rgb(255,232,0)","rgb(0,255,146)","rgb(255,0,144)","rgb(255,170,0)","rgb(170,255,0)","rgb(0,77,255)"],this.colors2=["rgb(60,60,157)","rgb(157,60,90)","rgb(157,133,60)","rgb(104,157,60)","rgb(122,60,157)","rgb(157,104,60)","rgb(157,157,60)","rgb(60,157,157)","rgb(157,60,60)","rgb(157,140,60)","rgb(83,60,157)","rgb(60,157,60)","rgb(157,60,157)","rgb(157,115,60)","rgb(140,157,60)","rgb(60,115,157)","rgb(102,60,157)","rgb(157,88,60)","rgb(157,148,60)","rgb(60,157,115)","rgb(157,60,115)","rgb(157,125,60)","rgb(125,157,60)","rgb(60,90,157)"],this.colors3=["rgb(0,0,117)","rgb(117,0,36)","rgb(117,88,0)","rgb(53,117,0)","rgb(76,0,117)","rgb(117,53,0)","rgb(117,117,0)","rgb(0,117,117)","rgb(117,0,0)","rgb(117,97,0)","rgb(28,0,117)","rgb(0,117,0)","rgb(117,0,117)","rgb(117,67,0)","rgb(97,117,0)","rgb(0,66,117)","rgb(50,0,117)","rgb(117,33,0)","rgb(117,107,0)","rgb(0,117,67)","rgb(117,0,66)","rgb(117,78,0)","rgb(78,117,0)","rgb(0,36,117)"],this.colors4=["rgb(101,101,255)","rgb(255,101,147)","rgb(255,216,101)","rgb(171,255,101)","rgb(200,101,255)","rgb(255,171,101)","rgb(255,255,101)","rgb(101,255,255)","rgb(255,101,101)","rgb(255,229,101)","rgb(137,101,255)","rgb(101,255,101)","rgb(255,101,255)","rgb(255,189,101)","rgb(229,255,101)","rgb(101,188,255)","rgb(167,101,255)","rgb(255,145,101)","rgb(255,241,101)","rgb(101,255,189)","rgb(255,101,188)","rgb(255,204,101)","rgb(204,255,101)","rgb(101,147,255)"],this.colors5=["rgb(181,181,255)","rgb(255,181,203)","rgb(255,237,181)","rgb(215,255,181)","rgb(229,181,255)","rgb(255,215,181)","rgb(255,255,181)","rgb(181,255,255)","rgb(255,181,181)","rgb(255,242,181)","rgb(199,181,255)","rgb(181,255,181)","rgb(255,181,255)","rgb(255,223,181)","rgb(242,255,181)","rgb(181,223,255)","rgb(213,181,255)","rgb(255,202,181)","rgb(255,248,181)","rgb(181,255,223)","rgb(255,181,223)","rgb(255,230,181)","rgb(230,255,181)","rgb(181,203,255)"],this.colors6=["rgb(254,41,108)","rgb(72,126,182)","rgb(167,206,49)","rgb(248,204,3)","rgb(255,140,2)","rgb(105,150,150)","rgb(183,120,68)","rgb(131,172,208)","rgb(194,224,118)","rgb(250,220,90)","rgb(255,84,159)","rgb(255,175,84)","rgb(154,184,183)","rgb(210,166,131)","rgb(61,105,155)","rgb(135,172,34)","rgb(205,169,8)","rgb(208,33,88)","rgb(208,115,0)","rgb(86,118,118)"],this.colors=this.colors6,this.config.push("colors"),this.colorHSV=[0,0,1],this.colorRGB=[1,1,1],this.shapes=["sphere","square","triangle","star","rhombus","octagon","oval","plus","minus","pacman","mdavid","rect2","rect3","arc","rectangle","image"],this.config.push("shapes"),this.sizes=[4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34],this.config.push("sizes"),this.images=[],this.config.push("images"),this.timeFormat="isoDate",this.config.push("timeFormat"),this.oddColor=this.background,this.config.push("oddColor"),this.evenColor="rgb(240,240,240)",this.config.push("evenColor"),this.maxSmpStringLen=50,this.config.push("maxSmpStringLen"),this.smpLabelDescription=!1,this.config.push("smpLabelDescription"),this.smpTitle=!1,this.config.push("smpTitle"),this.smpTitleFontSize=10,this.config.push("smpTitleFontSize"),this.smpTitleFont=this.smpTitleFontSize+"Pt "+this.fontName,this.smpTitleColor=this.foreground,this.config.push("smpTitleColor"),this.smpTitleScaleFontFactor=1,this.config.push("smpTitleScaleFontFactor"),this.smpLabelFontSize=10,this.config.push("smpLabelFontSize"),this.smpLabelFont=this.smpLabelFontSize+"Pt "+this.fontName,this.smpLabelColor=this.foreground,this.config.push("smpLabelColor"),this.smpLabelScaleFontFactor=1,this.config.push("smpLabelScaleFontFactor"),this.smpLabelRotate=0,this.config.push("smpLabelRotate"),this.smpLabelInterval=1,this.config.push("smpLabelInterval"),this.showSampleNames=!0,this.config.push("showSampleNames"),this.smpLabelCircular=!1,this.config.push("smpLabelCircular"),this.highlightSmp=[],this.config.push("highlightSmp"),this.smpHighlightColor="rgb(255,0,0)",this.config.push("smpHighlightColor"),this.filterSmpBy=[],this.config.push("filterSmpBy"),this.filterSmpByOp=[],this.filterSmpByValue=[],this.filterSmpByCase=[],this.filteredSmpIndices=[],this.maxVarStringLen=30,this.config.push("maxVarStringLen"),this.varLabelDescription=!1,this.config.push("varLabelDescription"),this.varTitle=!1,this.config.push("varTitle"),this.varTitleFontSize=10,this.config.push("varTitleFontSize"),this.varTitleFont=this.varTitleFontSize+"Pt "+this.fontName,this.varTitleColor=this.foreground,this.config.push("varTitleColor"),this.varTitleScaleFontFactor=1,this.config.push("varTitleScaleFontFactor"),this.varLabelFontSize=10,this.config.push("varLabelFontSize"),this.varLabelFont=this.varLabelFontSize+"Pt "+this.fontName,this.varLabelColor=this.foreground,this.config.push("varLabelColor"),this.varLabelScaleFontFactor=1,this.config.push("varLabelScaleFontFactor"),this.varLabelRotate=0,this.config.push("varLabelRotate"),this.varLabelInterval=1,this.config.push("varLabelInterval"),this.showVariableNames=!0,this.config.push("showVariableNames"),this.varTitleLabelOverlayPosition="bottom",this.config.push("varTitleLabelOverlayPosition"),this.highlightVar=[],this.config.push("highlightVar"),this.varHighlightColor="rgb(255,0,0)",this.config.push("varHighlightColor"),this.filterVarBy=[],this.config.push("filterVarBy"),this.filterVarByOp=[],this.filterVarByValue=[],this.filterVarByCase=[],this.filteredVarIndices=[],this.overlaysWidth=30,this.config.push("overlaysWidth"),this.smpOverlays=[],this.config.push("smpOverlays"),this.varOverlays=[],this.config.push("varOverlays"),this.showOverlays=!0,this.config.push("showOverlays"),this.showLevelOverlays=!1,this.config.push("showLevelOverlays"),this.overlayFontSize=6,this.config.push("overlayFontSize"),this.overlayFont=this.overlayFontSize+"Pt "+this.fontName,this.overlayFontColor=this.foreground,this.config.push("overlayFontColor"),this.overlayScaleFontFactor=1,this.config.push("overlayScaleFontFactor"),this.smpOverlayRecycleColors=!1,this.config.push("smpOverlayRecycleColors"),this.varOverlayRecycleColors=!1,this.config.push("varOverlayRecycleColors"),this.showLegend=!0,this.config.push("showLegend"),this.legendPosition="right",this.config.push("legendPosition"),this.legendColor=this.foreground,this.config.push("legendColor"),this.legendBox=!0,this.config.push("legendBox"),this.legendBoxColor="rgb(204,204,204)",this.config.push("legendBoxColor"),this.legendBackgroundColor=this.background,this.config.push("legendBackgroundColor"),this.legendFontSize=10,this.config.push("legendFontSize"),this.legendFont=this.legendFontSize+"Pt "+this.fontName,this.legendScaleFontFactor=1,this.config.push("legendScaleFontFactor"),this.showIndicators=!0,this.config.push("showIndicators"),this.indicatorsPosition="bottom",this.config.push("indicatorsPosition"),this.showDecorations=!1,this.config.push("showDecorations"),this.decorationsPosition="bottom",this.config.push("decorationsPosition"),this.decorationsColor=this.foreground,this.config.push("decorationsColor"),this.decorationFontSize=10,this.config.push("decorationFontSize"),this.decorationFont=this.decorationFontSize+"Pt "+this.fontName,this.decorationScaleFontFactor=1,this.config.push("decorationScaleFontFactor"),this.decorationsWidth=10,this.config.push("decorationsWidth"),this.decorationsHeight=20,this.config.push("decorationsHeight"),this.decorationsType="bar",this.config.push("decorationsType"),this.decorations=[],this.config.push("decorations"),this.decorationsColors=[],this.config.push("decorationsColors"),this.decorationsProperties={},this.config.push("decorationsProperties"),this.axisTickColor=this.foreground,this.config.push("axisTickColor"),this.axisTickFontSize=10,this.config.push("axisTickFontSize"),this.axisTickFont=this.axisTickFontSize+"Pt "+this.fontName,this.tickScaleFontFactor=1,this.config.push("tickScaleFontFactor"),this.tickRotate=0,this.config.push("tickRotate"),this.axisTitleColor=this.foreground,this.config.push("axisTitleColor"),this.axisTitleFontSize=10,this.config.push("axisTitleFontSize"),this.axisTitleFont=this.axisTitleFontSize+"Pt "+this.fontName,this.axisTitleScaleFontFactor=1,this.config.push("axisTitleScaleFontFactor"),this.isGroupedData=!1,this.isTransformedData=!1,this.isBoxPlotCalc=!1,this.isMarketDataFormated=!1,this.isMarketSwitched=!1,this.isGraphTime=!1,this.config.push("isGraphTime"),this.groupingFactors=[],this.config.push("groupingFactors"),this.segregateSamplesBy=!1,this.config.push("segregateSamplesBy"),this.segregateVariablesBy=!1,this.config.push("segregateVariablesBy"),this.isLogData=!1,this.config.push("isLogData"),this.smpSort=-1,this.varSort=-1,this.tmpAsciiArray=[],this.sortDir="ascending",this.config.push("sortDir"),this.transformBase=2,this.config.push("transformBase"),this.transformType=!1,this.config.push("transformType"),this.ratioReference=0,this.config.push("ratioReference"),this.zscoreAxis="samples",this.config.push("zscoreAxis"),this.showErrorBars=!0,this.config.push("showErrorBars"),this.randomData=!1,this.config.push("randomData"),this.randomDataMean=100,this.config.push("randomDataMean"),this.randomDataSigma=50,this.config.push("randomDataSigma"),this.randomDataVariables=6,this.config.push("randomDataVariables"),this.randomDataSamples=12,this.config.push("randomDataSamples"),this.randomDataVariableAnnotations=2,this.config.push("randomDataVariableAnnotations"),this.randomDataSampleAnnotations=3,this.config.push("randomDataSampleAnnotations"),this.randomDataVariableAnnotationRatio=2,this.config.push("randomDataVariableAnnotationRatio"),this.randomDataSampleAnnotationRatio=2,this.config.push("randomDataSampleAnnotationRatio"),this.randomMissingDataPercentage=0,this.config.push("randomMissingDataPercentage"),this.missingDataColor="rgb(255,255,0)",this.config.push("missingDataColor"),this.zoom=1,this.config.push("zoom"),this.zoomGlobal=1,this.zoomStep=.2,this.config.push("zoomStep"),this.zoomVariablesDisable=!1,this.config.push("zoomVariablesDisable"),this.zoomSamplesDisable=!1,this.config.push("zoomSamplesDisable"),this.panningX=0,this.config.push("panningX"),this.panningY=0,this.config.push("panningY"),this.panningGlobalX=0,this.panningGlobalY=0,this.panningStep=.2,this.config.push("panningStep"),this.distance="euclidian",this.config.push("distance"),this.linkage="single",this.config.push("linkage"),this.clusterAxis="samples",this.config.push("clusterAxis"),this.kmeansClusters=3,this.config.push("kmeansClusters"),this.maxIterations=10,this.config.push("maxIterations"),this.imputeMethod="mean",this.config.push("imputeMethod"),this.centerData=!1,this.config.push("centerData"),this.useSmpVarIndexOnClustering=!1,this.config.push("useSmpVarIndexOnClustering"),this.xAxisAbsMax=null,this.xAxisAbsMin=null,this.xAxis2AbsMax=null,this.xAxis2AbsMin=null,this.yAxisAbsMax=null,this.yAxisAbsMin=null,this.zAxisAbsMax=null,this.zAxisAbsMin=null,this.rAxisAbsMax=null,this.rAxisAbsMin=null,this.xAxisMaxStrLength=!1,this.xAxis2MaxStrLength=!1,this.yAxisMaxStrLength=!1,this.zAxisMaxStrLength=!1,this.rAxisMaxStrLength=!1,this.setMax=null,this.config.push("setMax"),this.setMin=null,this.config.push("setMin"),this.setMax2=null,this.config.push("setMax2"),this.setMin2=null,this.config.push("setMin2"),this.setMaxX=null,this.config.push("setMaxX"),this.setMinX=null,this.config.push("setMinX"),this.setMaxY=null,this.config.push("setMaxY"),this.setMinY=null,this.config.push("setMinY"),this.setMaxZ=null,this.config.push("setMaxZ"),this.setMinZ=null,this.config.push("setMinZ"),this.setMaxR=null,this.config.push("setMaxR"),this.setMinR=null,this.config.push("setMinR"),this.xAxisCurrent=0,this.config.push("xAxisCurrent"),this.yAxisCurrent=0,this.config.push("yAxisCurrent"),this.zAxisCurrent=0,this.config.push("zAxisCurrent"),this.rAxisCurrent=0,this.config.push("rAxisCurrent"),this.xAxisTitle=!1,this.config.push("xAxisTitle"),this.yAxisTitle=!1,this.config.push("yAxisTitle"),this.zAxisTitle=!1,this.config.push("zAxisTitle"),this.rAxisTitle=!1,this.config.push("rAxisTitle"),this.xAxis=[],this.config.push("xAxis"),this.xAxis2=[],this.config.push("xAxis2"),this.yAxis=[],this.config.push("yAxis"),this.zAxis=[],this.config.push("zAxis"),this.xAxisTickStyle="solid",this.config.push("xAxisTickStyle"),this.yAxisTickStyle="solid",this.config.push("yAxisTickStyle"),this.zAxisTickStyle="solid",this.config.push("zAxisTickStyle"),this.rAxisTickStyle="solid",this.config.push("rAxisTickStyle"),this.xAxisTickFormat=!1,this.config.push("xAxisTickFormat"),this.xAxis2TickFormat=!1,this.config.push("xAxis2TickFormat"),this.yAxisTickFormat=!1,this.config.push("yAxisTickFormat"),this.zAxisTickFormat=!1,this.config.push("zAxisTickFormat"),this.rAxisTickFormat=!1,this.config.push("rAxisTickFormat"),this.xAxisTickColor="rgb(204,204,204)",this.config.push("xAxisTickColor"),this.yAxisTickColor="rgb(204,204,204)",this.config.push("yAxisTickColor"),this.zAxisTickColor="rgb(204,204,204)",this.config.push("zAxisTickColor"),this.rAxisTickColor="rgb(204,204,204)",this.config.push("rAxisTickColor"),this.axisExtension=.1,this.config.push("axisExtension"),this.axisExact=!1,this.config.push("axisExact"),this.xAxisExact=!1,this.config.push("xAxisExact"),this.xAxis2Exact=!1,this.config.push("xAxis2Exact"),this.yAxisExact=!1,this.config.push("yAxisExact"),this.zAxisExact=!1,this.config.push("zAxisExact"),this.rAxisExact=!1,this.config.push("rAxisExact"),this.timeValues=[],this.config.push("timeValues"),this.timeValueIndices=[],this.config.push("timeValueIndices"),this.xAxisValues=[],this.config.push("xAxisValues"),this.xAxis2Values=[],this.config.push("xAxis2Values"),this.yAxisValues=[],this.config.push("yAxisValues"),this.zAxisValues=[],this.config.push("zAxisValues"),this.rAxisValues=[],this.config.push("rAxisValues"),this.xAxisMinorValues=[],this.config.push("xAxisMinorValues"),this.xAxis2MinorValues=[],this.config.push("xAxis2MinorValues"),this.yAxisMinorValues=[],this.config.push("yAxisMinorValues"),this.zAxisMinorValues=[],this.config.push("zAxisMinorValues"),this.rAxisMinorValues=[],this.config.push("rAxisMinorValues"),this.xAxisTransform=!1,this.config.push("xAxisTransform"),this.yAxisTransform=!1,this.config.push("yAxisTransform"),this.zAxisTransform=!1,this.config.push("zAxisTransform"),this.rAxisTransform=!1,this.config.push("rAxisTransform"),this.xAxisTransformTicks=!0,this.config.push("xAxisTransformTicks"),this.yAxisTransformTicks=!0,this.config.push("yAxisTransformTicks"),this.zAxisTransformTicks=!0,this.config.push("zAxisTransformTicks"),this.rAxisTransformTicks=!0,this.config.push("rAxisTransformTicks"),this.xAxisShow=!0,this.config.push("xAxisShow"),this.xAxis2Show=!0,this.config.push("xAxis2Show"),this.yAxisShow=!0,this.config.push("yAxisShow"),this.zAxisShow=!0,this.config.push("zAxisShow"),this.rAxisShow=!0,this.config.push("rAxisShow"),this.ticks=50,this.config.push("ticks"),this.timeTicksFirst=!1,this.config.push("timeTicksFirst"),this.xAxisTicks=5,this.config.push("xAxisTicks"),this.xAxis2Ticks=5,this.config.push("xAxis2Ticks"),this.yAxisTicks=5,this.config.push("yAxisTicks"),this.zAxisTicks=5,this.config.push("zAxisTicks"),this.rAxisTicks=5,this.config.push("rAxisTicks"),this.xAxisMinorTicks=!0,this.config.push("xAxisMinorTicks"),this.xAxis2MinorTicks=!0,this.config.push("xAxis2MinorTicks"),this.yAxisMinorTicks=!0,this.config.push("yAxisMinorTicks"),this.zAxisMinorTicks=!1,this.config.push("zAxisMinorTicks"),this.rAxisMinorTicks=!1,this.config.push("rAxisMinorTicks"),this.smpHairline="dotted",this.config.push("smpHairline"),this.smpHairlineWidth=.3,this.config.push("smpHairlineWidth"),this.smpHairlineColor="rgb(204,204,204)",this.config.push("smpHairlineColor"),this.blockContrast=!1,this.config.push("blockContrast"),this.seriesSeparationFactor=2,this.config.push("seriesSeparationFactor"),this.blockSeparationFactor=1,this.config.push("blockSeparationFactor"),this.blockFactor=1,this.config.push("blockFactor"),this.plotByVariable=!1,this.config.push("plotByVariable"),this.is3DPlot=!1,this.config.push("is3DPlot"),this.showDataValues=!1,this.config.push("showDataValues"),this.lineDecoration="symbol",this.config.push("lineDecoration"),this.coordinateLineColor=!0,this.config.push("coordinateLineColor"),this.lineThickness=1,this.config.push("lineThickness"),this.lineType="rect",this.config.push("lineType"),this.tension=.3,this.config.push("tension"),this.dotPlotJitter=!1,this.config.push("dotPlotJitter"),this.dotPlotDataPointRatio=2,this.config.push("dotPlotDataPointRatio"),this.dotPlotDataPointTransparency=.5,this.config.push("dotPlotDataPointTransparency"),this.boxPlotOutliersRatio=8,this.config.push("boxPlotOutliersRatio"),this.showBoxplotOriginalData=!1,this.config.push("showBoxplotOriginalData"),this.areaIsCumulative=!1,this.config.push("areaIsCumulative"),this.colorBy=!1,this.config.push("colorBy"),this.shapeBy=!1,this.config.push("shapeBy"),this.shapeByData=!1,this.config.push("shapeByData"),this.shapeByShape=!1,this.config.push("shapeByShape"),this.sizeBy=!1,this.config.push("sizeBy"),this.sizeByData=!1,this.config.push("sizeByData"),this.outlineBy=!1,this.config.push("outlineBy"),this.outlineByData=!1,this.config.push("outlineByData"),this.scatterType=!1,this.config.push("scatterType"),this.scatterSeries="y",this.config.push("scatterSeries"),this.selectDataMode="area",this.config.push("selectDataMode"),this.selectDataModeDescription=!1,this.config.push("selectDataModeDescription"),this.selectDataPoint=[],this.hideDataPoint=[],this.isSelectDataPoints=0,this.isHistogram=!1,this.config.push("isHistogram"),this.histogramBarWidth=.5,this.config.push("histogramBarWidth"),this.histogramBins=20,this.config.push("histogramBins"),this.isCreateHistogram=!1,this.allVsAll=!1,this.config.push("allVsAll"),this.allVsAllType="both",this.config.push("allVsAllType"),this.functionIntervals=20,this.config.push("functionIntervals"),this.xRotate=45,this.config.push("xRotate"),this.yRotate=0,this.config.push("yRotate"),this.zRotate=0,this.config.push("zRotate"),this.x3DRatio=1,this.config.push("x3DRatio"),this.y3DRatio=1,this.config.push("y3DRatio"),this.z3DRatio=1,this.config.push("z3DRatio"),this.bar3DInverseWeight=1,this.config.push("bar3DInverseWeight"),this.minRotate=null,this.config.push("minRotate"),this.maxRotate=null,this.config.push("maxRotate"),this.show3DGrid=!0,this.config.push("show3DGrid"),this.rotationDelay=100,this.config.push("rotationDelay"),this.rotationSensitivity=45,this.config.push("rotationSensitivity"),this.rotationStep=2,this.config.push("rotationStep"),this.cullingThreshold=1e4,this.config.push("cullingThreshold"),this.indicatorCenter="white",this.config.push("indicatorCenter"),this.indicatorHeight=8,this.config.push("indicatorHeight"),this.indicatorWidth=1,this.config.push("indicatorWidth"),this.heatmapType="blue-red",this.config.push("heatmapType"),this.varIndicesStart=-1,this.smpIndicesStart=-1,this.isMultidimensionalHeatmap=!1,this.correlationAxis="samples",this.config.push("correlationAxis"),this.correlationAnchorLegend=!1,this.config.push("correlationAnchorLegend"),this.correlationAnchorLegendAlignWidth=40,this.config.push("correlationAnchorLegendAlignWidth"),this.correlationLabelInterval=1,this.config.push("correlationLabelInterval"),this.showSmpDendrogram=!1,this.config.push("showSmpDendrogram"),this.showVarDendrogram=!1,this.config.push("showVarDendrogram"),this.varDendrogramPosition="top",this.config.push("varDendrogramPosition"),this.smpDendrogramPosition="left",this.config.push("smpDendrogramPosition"),this.dendrogramSpace=6,this.config.push("dendrogramSpace"),this.dendrogramHang=!1,this.config.push("dendrogramHang"),this.dendrogramHeight=!1,this.config.push("dendrogramHeight"),this.dendrogramColor="rgb(204,204,204)",this.config.push("dendrogramColor"),this.vennLegendColors=!1,this.config.push("vennLegendColors"),this.vennGroups=4,this.config.push("vennGroups"),this.vennCompartments=["A","B","AB","C","AC","BC","ABC","D","AD","BD","CD","ABD","ACD","BCD","ABCD"],this.vennColors=[],this.config.push("vennColors"),this.pieType="separated",this.config.push("pieType"),this.pieSegmentPrecision=0,this.config.push("pieSegmentPrecision"),this.pieSegmentSeparation=3,this.config.push("pieSegmentSeparation"),this.pieSegmentLabels="inside",this.config.push("pieSegmentLabels"),this.maxPieSectors=20,this.config.push("maxPieSectors"),this.showPieGrid=!0,this.config.push("showPieGrid"),this.showPieValues=!0,this.config.push("showPieValues"),this.showPieSampleLabel=!0,this.config.push("showPieSampleLabel"),this.startPieSectors=0,this.config.push("startPieSectors"),this.donutProportion=.3,this.config.push("donutProportion"),this.ringSegmentSeparation=4,this.config.push("ringSegmentSeparation"),this.ringType=[],this.config.push("ringType"),this.ringWeight=[],this.config.push("ringWeight"),this.rAxis=!1,this.config.push("rAxis"),this.rAxisZero=!0,this.config.push("rAxisZero"),this.circularLetterSeparationFactor=2,this.config.push("circularLetterSeparationFactor"),this.showVolume=!0,this.config.push("showVolume"),this.stockIndicators=["Sma5","Sma10","Sma25"],this.config.push("stockIndicators"),this.sma5Color="rgb(255,0,0)",this.config.push("sma5Color"),this.sma10Color="rgb(0,255,0)",this.config.push("sma1Color"),this.sma20Color="rgb(0,0,255)",this.config.push("sma20Color"),this.sma25Color="rgb(255,0,255)",this.config.push("sma25Color"),this.sma50Color="rgb(0,0,0)",this.config.push("sma50Color"),this.calculateLayout=!0,this.config.push("calculateLayout"),this.networkFreeze=!1,this.config.push("networkFreeze"),this.networkFreezeOnLoad=!1,this.config.push("networkFreezeOnLoad"),this.networkStack=[],this.subNetworks=!1,this.networkStackStates=8,this.config.push("networkStackStates"),this.networkStackIndex=0,this.approximateNodePositions=!1,this.config.push("approximateNodePositions"),this.networkLayoutType="forceDirected",this.config.push("networkLayoutType"),this.networkForceConstant=0,this.config.push("networkForceConstant"),this.temperature=0,this.config.push("temperature"),this.initialTemperature=0,this.config.push("initialTemperature"),this.networkNodeMinDistance=4,this.config.push("networkNodeMinDistance"),this.attractiveForceFunction="FruchtermanReingold",this.config.push("attractiveForceFunction"),this.repulsiveForceFunction="square",this.config.push("repulsiveForceFunction"),this.networkRoot=!1,this.config.push("networkRoot"),this.showNetworkRadialLayout=!1,this.config.push("showNetworkRadialLayout"),this.networkDepth=0,this.networkDivisions=0,this.preScaleNetwork=!1,this.config.push("preScaleNetwork"),this.showNetworkNodesLegend=!0,this.config.push("showNetworkNodesLegend"),this.showNetworkEdgesLegend=!0,this.config.push("showNetworkEdgesLegend"),this.showNetworkTextLegend=!0,this.config.push("showNetworkTextLegend"),this.showNetworkDecorationsLegend=!0,this.config.push("showNetworkDecorationsLegend"),this.highlightNode=[],this.config.push("highlightNode"),this.nodeHighlightColor="rgb(255,0,0)",this.config.push("nodeHighlightColor"),this.selectNode={},this.isSelectNodes=0,this.showNodeNameThreshold=50,this.config.push("showNodeNameThreshold"),this.showHiddenChildEdges=!0,this.config.push("showHiddenChildEdges"),this.nodeSize=this.preScaleNetwork?10:20,this.config.push("nodeSize"),this.edgeWidth=1,this.config.push("edgeWidth"),this.layoutTime=15,this.config.push("layoutTime"),this.nodeFontSize=this.nodeSize,this.config.push("nodeFontSize"),this.nodeFont=this.nodeFontSize+"Pt "+this.fontName,this.nodeFontColor=this.foreground,this.config.push("nodeFontColor"),this.nodeScaleFontFactor=1,this.config.push("nodeScaleFontFactor"),this.randomNetwork=!1,this.config.push("randomNetwork"),this.reduceRandomNetwork=!1,this.config.push("reduceRandomNetwork"),this.randomNetworkNodes=50,this.config.push("randomNetworkNodes"),this.randomNetworkNodeEdgesMax=5,this.config.push("randomNetworkNodeEdgesMax"),this.colorNodeBy=!1,this.config.push("colorNodeBy"),this.shapeNodeBy=!1,this.config.push("shapeNodeBy"),this.sizeNodeBy=!1,this.config.push("sizeNodeBy"),this.colorEdgeBy=!1,this.config.push("colorEdgeBy"),this.shapeEdgeBy=!1,this.config.push("shapeEdgeBy"),this.sizeEdgeBy=!1,this.config.push("sizeEdgeBy"),this.sizeDecorationBy=!1,this.config.push("sizeDecorationBy"),this.is3DNetwork=!1,this.config.push("is3DNetwork"),this.network2DRotate=0,this.skipClick=!1,this.autoHideOnDecorationsCenter=!1,this.config.push("autoHideOnDecorationsCenter"),this.networkNodesOnTop=!0,this.config.push("networkNodesOnTop"),this.overrideEventlessNodes=!1,this.config.push("overrideEventlessNodes"),this.moveParentsWithChildren=!1,this.config.push("moveParentsWithChildren"),this.nodeConfigurableProperties=["x","y","z","parentNode","shape","color","outline","size","width","height","pattern","rotate","outlineWidth","imagePath","zIndex","eventless","hide","hideLabel","anchor"],this.config.push("nodeConfigurableProperties"),this.edgeConfigurableProperties=["color","width","cap","exact","type"],this.config.push("edgeConfigurableProperties"),this.filterNodeBy=[],this.config.push("filterNodeBy"),this.filterNodeByOp=[],this.filterNodeByValue=[],this.filterNodeByCase=[],this.filterEdgeBy=[],this.config.push("filterEdgeBy"),this.filterEdgeByOp=[],this.filterEdgeByValue=[],this.filterEdgeByCase=[],this.trackNameFontSize=10,this.config.push("trackNameFontSize"),this.trackNameFont=this.trackNameFontSize+"Pt "+this.fontName,this.trackNameFontColor=this.background,this.config.push("trackNameFontColor"),this.subtracksMaxDefault=8,this.config.push("subtracksMaxDefault"),this.showFeatureNameThereshold=20,this.config.push("showFeatureNameThereshold"),this.featureNameFontSize=8,this.config.push("featureNameFontSize"),this.featureNameFont=this.featureNameFontSize+"Pt "+this.fontName,this.featureNameFontColor=this.background,this.config.push("featureNameFontColor"),this.maxFeatureStringLen=50,this.config.push("maxFeatureStringLen"),this.featureWidthDefault=3,this.config.push("featureWidthDefault"),this.featureHeightDefault=14,this.config.push("featureHeightDefault"),this.featureTraceHeight=40,this.config.push("featureTraceHeight"),this.featureTraceTrim=1,this.config.push("featureTraceTrim"),this.featureTracesShow=!0,this.config.push("featureTracesShow"),this.featureQualityHeight=12,this.config.push("featureQualityHeight"),this.featureQualityValues=!1,this.config.push("featureQualityValues"),this.featureQualityShow=!0,this.config.push("featureQualityShow"),this.featureSignalToNoiseHeight=12,this.config.push("featureSignalToNoiseHeight"),this.featureSignalToNoiseValues=!1,this.config.push("featureSignalToNoiseValues"),this.featureSignalToNoiseShow=!0,this.config.push("featureSignalToNoiseShow"),this.featureCoordinateHeight=12,this.config.push("featureCoordinateHeight"),this.featureCoordinateShow=!0,this.config.push("featureCoordinateShow"),this.featureTranslateHeight=12,this.config.push("featureTranslateHeight"),this.featureTranslateShow=!0,this.config.push("featureTranslateShow"),this.featureTypeDefault="line",this.config.push("featureTypeDefault"),this.featureStaggered=!1,this.config.push("featureStaggered"),this.sequenceFontSize=10,this.config.push("sequenceFontSize"),this.sequenceFont=this.sequenceFontSize+"Pt "+this.fontName,this.sequenceFill=!1,this.config.push("sequenceFill"),this.sequenceGAPColor="rgb(255,0,255)",this.config.push("sequenceGAPColor"),this.sequenceAColor="rgb(0,103,0)",this.config.push("sequenceAColor"),this.sequenceBColor="rgb(0,0,0)",this.config.push("sequenceBColor"),this.sequenceCColor="rgb(0,0,255)",this.config.push("sequenceCColor"),this.sequenceDColor="rgb(0,0,0)",this.config.push("sequenceDColor"),this.sequenceEColor="rgb(0,0,0)",this.config.push("sequenceEColor"),this.sequenceFColor="rgb(0,0,255)",this.config.push("sequenceFColor"),this.sequenceGColor="rgb(0,0,0)",this.config.push("sequenceGColor"),this.sequenceHColor="rgb(255,0,0)",this.config.push("sequenceHColor"),this.sequenceIColor="rgb(0,103,0)",this.config.push("sequenceIColor"),this.sequenceKColor="rgb(255,0,0)",this.config.push("sequenceKColor"),this.sequenceLColor="rgb(0,103,0)",this.config.push("sequenceLColor"),this.sequenceMColor="rgb(0,103,0)",this.config.push("sequenceMColor"),this.sequenceNColor="rgb(0,0,0)",this.config.push("sequenceNColor"),this.sequencePColor="rgb(255,165,0)",this.config.push("sequencePColor"),this.sequenceQColor="rgb(0,0,0)",this.config.push("sequenceQColor"),this.sequenceRColor="rgb(255,0,0)",this.config.push("sequenceRColor"),this.sequenceSColor="rgb(255,165,0)",this.config.push("sequenceSColor"),this.sequenceTColor="rgb(255,0,0)",this.config.push("sequenceTColor"),this.sequenceUColor="rgb(255,0,0)",this.config.push("sequenceUColor"),this.sequenceVColor="rgb(0,103,0)",this.config.push("sequenceVColor"),this.sequenceWColor="rgb(0,0,255)",this.config.push("sequenceWColor"),this.sequenceXColor="rgb(0,0,0)",this.config.push("sequenceXColor"),this.sequenceYColor="rgb(0,0,255)",this.config.push("sequenceYColor"),this.sequenceZColor="rgb(0,0,0)",
this.config.push("sequenceZColor"),this.sequenceStartColor="rgb(0,204,0)",this.config.push("sequenceStartColor"),this.sequenceEndColor="rgb(255,0,0)",this.config.push("sequenceEndColor"),this.wireColor=this.isVML?"rgb(204,204,204)":"rgba(204,204,204,0.1)",this.config.push("wireColor"),this.periodTicksLabels=5,this.config.push("periodTicksLabels"),this.genomeResolution="low",this.trackConfigurableProperties=["name","hideName","hideFeatureNames","type","height","fill","outline","hide","connect","subtracksMax","highlight"],this.config.push("trackConfigurableProperties"),this.featureConfigurableProperties=["id","name","label","hideName","fill","outline","dir","showDir","connect","offset","data","subtype","quality","signalToNoise","coordinate","sequence","trace","gaps","translate","hide","counter"],this.config.push("featureConfigurableProperties"),this.filterFeatureBy=[],this.config.push("filterFeatureBy"),this.filterFeatureByOp=[],this.filterFeatureByValue=[],this.filterFeatureByCase=[],this.errors=[],this.debug=!1,this.config.push("debug"),this.showVersion=!0,this.config.push("showVersion"),this.showCode=!1,this.config.push("showCode"),this.codeType="pretty",this.config.push("codeType"),this.skin="grey",this.config.push("skin"),this.skinProperties=["skinBackgroundColor","skinBorderColor","skinColor","skinShadowColor"],this.skinPropertiesBlue=["rgb(223,232,246)","rgb(224,224,224)","rgb(68,68,68)","rgba(204,204,204,0.2)"],this.skinPropertiesGrey=["rgb(240,240,240)","rgb(113,139,183)","rgb(34,34,34)","rgba(154,154,154,0.2)"],this.skinHighlight,this.selectedBackgroundColor="rgb(255,0,0)",this.config.push("selectedBackgroundColor"),this.disableToolbar=!1,this.config.push("disableToolbar"),this.toolbarPermanent=!1,this.config.push("toolbarPermanent"),this.disableDataTable=!1,this.config.push("disableDataTable"),this.disableDataFilters=!1,this.config.push("disableDataFilters"),this.disableConfigurator=!1,this.config.push("disableConfigurator"),this.isLayoutConfigurator=!1,this.config.push("isLayoutConfigurator"),this.resizable=!0,this.config.push("resizable"),this.showAdvancedConfiguration=!1,this.config.push("showAdvancedConfiguration"),this.configuratorWidth=250,this.config.push("configuratorWidth"),this.dataFilterWidth=200,this.config.push("dataFilterWidth"),this.disableEvents=!1,this.config.push("disableEvents"),this.eventKeys=!0,this.config.push("eventKeys"),this.eventArrowKeys=!0,this.config.push("eventArrowKeys"),this.eventPlusMinusKeys=!1,this.config.push("eventPlusMinusKeys"),this.helpKeyEvents=!0,this.config.push("helpKeyEvents"),this.maintainZoomOnDrag=!1,this.config.push("maintainZoomOnDrag"),this.infoTimeOut=3e3,this.config.push("infoTimeOut"),this.infoStartTime=(new Date).getTime(),this.infoTimeIn=50,this.config.push("infoTimeIn"),this.dataEvent=[],this.broadcast=!0,this.config.push("broadcast"),this.broadcastType="var",this.config.push("broadcastType"),this.destroyCanvasXpressZombies=!0,this.config.push("destroyCanvasXpressZombies"),this.monitorCanvasXpressZombiesTime=3e4,this.config.push("monitorCanvasXpressZombiesTime"),this.resizerBackgroundColor=this.isIE?"rgb(204,204,204)":"rgba(204,204,204,0.7)",this.config.push("resizerBackgroundColor"),this.resizerBackgroundColorCurrent="rgb(237,247,255)",this.config.push("resizerBackgroundColorCurrent"),this.resizerBackgroundColorOutlineCurrent="rgb(59,138,229)",this.config.push("resizerBackgroundColorOutlineCurrent"),this.resizerTransparency=!0,this.config.push("resizerTransparency"),this.resizerType=!1,this.config.push("resizerType"),this.resizerDraw=!1,this.config.push("resizerDraw"),this.resizerPosition="bottom",this.config.push("resizerPosition"),this.resizerWidth=50,this.config.push("resizerWidth"),this.resizerBackgroundImage=!1,this.config.push("resizerBackgroundImage"),this.resizerDataIndex=0,this.config.push("resizerDataIndex"),this.resizerEventData={},this.showAnimation=!1,this.config.push("showAnimation"),this.showAnimationFontSize=10,this.config.push("showAnimationFontSize"),this.showAnimationFont=this.showAnimationFontSize+"Pt "+this.fontName,this.showAnimationFontColor=this.background,this.config.push("showAnimationFontColor"),this.animationTime=30,this.config.push("animationTime"),this.animationType="grow",this.config.push("animationType"),this.animationCycles=20,this.config.push("animationCycles"),this.snapshotCopyChangeOnly=!0,this.config.push("snapshotCopyChangeOnly"),this.snapshots=[],this.isAnimation=!1,this.weight=1,this.scaleX=1,this.scaleY=1,this.translateX=0,this.translateY=0,this.offsetX=0,this.offsetY=0,this.layoutWidth=0,this.layoutHeight=0,this.layout="1X1",this.config.push("layout"),this.layoutComb=!1,this.config.push("layoutComb"),this.layoutAdjust=!1,this.config.push("layoutAdjust"),this.layoutCurrent=0,this.layoutMaxVarLegend=0,this.layoutMulticolor=!0,this.config.push("layoutMulticolor"),this.layoutAxis=3,this.imageDir="http://canvasxpress.org/images/",this.config.push("imageDir"),this.playButton="control_play_blue.png",this.config.push("playButton"),this.stopButton="control_stop_blue.png",this.config.push("stopButton"),this.previousButton="control_rewind_blue.png",this.config.push("previousButton"),this.nextButton="control_forward_blue.png",this.config.push("nextButton"),this.dropdownButton="menu_dropdown.png",this.config.push("dropdownButton"),this.remoteService=!1,this.config.push("remoteService"),this.remoteParams={},this.config.push("remoteParams"),this.remoteDirection="next",this.config.push("remoteDirection"),this.remoteParentId="",this.remoteDataIndex=0,this.remoteIds=[],this.remoteWindow=1,this.config.push("remoteWindow"),this.remoteAutoPlay=!1,this.config.push("remoteAutoPlay"),this.remoteAutoPlayDelay=3e3,this.config.push("remoteAutoPlayDelay"),this.remoteUpdating=!1,this.remoteUpdate=!1,this.config.push("remoteUpdate"),this.remoteUpdateDelay=1e4,this.config.push("remoteUpdateDelay"),this.skipConfigurableProperties=!0,this.config.push("skipConfigurableProperties"),this.nodesProperties=[],this.config.push("nodesProperties"),this.edgesProperties=[],this.config.push("edgesProperties"),this.featuresProperties=[],this.config.push("featuresProperties"),this.filterType="and",this.config.push("filterType"),this.filterSkipNullKeys=!1,this.config.push("filterSkipNullKeys"),this.showDataTable=!1,this.config.push("showDataTable"),this.dataTableTransposed=!0,this.config.push("dataTableTransposed"),this.maxRows=10,this.config.push("maxRows"),this.maxCols=10,this.config.push("maxCols"),this.colWidth=50,this.config.push("colWidth"),this.rowHeight=18,this.config.push("rowHeight"),this.freezeColLeft=0,this.config.push("freezeColLeft"),this.freezeColRight=0,this.config.push("freezeColRight"),this.freezeRowTop=0,this.config.push("freezeRowTop"),this.freezeRowBottom=0,this.config.push("freezeRowBottom"),this.refresehDataTableOnDraw=!1,this.config.push("refresehDataTableOnDraw"),this.showDataTableOnSelect=!1,this.config.push("showDataTableOnSelect"),this.networkShowDataTable="nodes",this.config.push("networkShowDataTable"),this.startCol=0,this.startRow=0,this.dataTableColumnWidth=[],this.dataTableRowHeight=[]},this.setInitialConfig=function(){if(t)for(var e in t)this[e]=t[e]},this.resetConfig=function(t){var e={};if(t)for(var i=0;i<t.length;i++)e[t[i]]=this[t[i]];this.setConfigDefaults();for(var i in e)this[i]=e[i]},this.updateConfig=function(t){if(t){this.userConfig=t;for(var e in t)this[e]=t[e]}},this.getConfig=function(){for(var t={},e=0;e<this.config.length;e++){var i=this.config[e];void 0!=this[i]&&(t[i]=this[i])}return t},this.getUserConfig=function(){return this.userConfig},this.setSkin=function(t){t||(t=this.skin);for(var e=0;e<this.skinProperties.length;e++)this[this.skinProperties[e]]="blue"==t?this.skinPropertiesBlue[e]:this.skinPropertiesGrey[e];this.skinHighlight="blue"==t?"rgb(250,250,250)":"rgb(223,232,246)"},this.setPath=function(){var t=document.getElementsByTagName("script");if(t)for(var e=0;e<t.length;e++)if(t[e].src){var i=t[e].src,s=i.lastIndexOf("/"),a=i.substring(0,s+1),r=i.substring(s+1);r.match(/canvasXpress/)&&(this.path=a)}},this.getNewCanvasContext=function(t){var e=this.$(t);return e&&"canvas"==e.tagName.toLowerCase()||(e=this.$cX("canvas",{id:t}),document.body.appendChild(e)),"Explorer"==this.browser&&this.browserVersion<9&&navigator.userAgent.toLowerCase().indexOf("chromeframe")<0&&(this.useFlashIE?"undefined"!=typeof FlashCanvas&&FlashCanvas.initElement(e):window.G_vmlCanvasManager.initElement(e)),e.getContext("2d")},this.setCanvas=function(){var t=this.$(this.target);if(t)if("Explorer"==this.browser&&this.browserVersion<9&&navigator.userAgent.toLowerCase().indexOf("chromeframe")<0?this.useFlashIE?(this.isVML=!1,"undefined"!=typeof FlashCanvas&&(FlashCanvas.setOptions({disableContextMenu:!0,swfPath:"http://www.canvasxpress.org/js/"}),this.canvas=FlashCanvas.initElement(t))):(this.isVML=!0,this.canvas=window.G_vmlCanvasManager.initElement(t)):(this.isVML=!1,this.canvas=t),this.ctx=this.canvas.getContext("2d"),"video"!=this.backgroundType&&"Video"!=this.graphType||!this.backgroundVideo)this.isVideo=!1;else{"Video"==this.graphType&&(this.backgroundType="video"),this.isVideo=!0;var e=this.$cX("script",{type:"text/javascript",src:"http://vjs.zencdn.net/c/video.js"}),i=this.$cX("link",{type:"text/css",rel:"stylesheet",href:"http://vjs.zencdn.net/c/video-js.css"}),s=document.getElementsByTagName("head")[0];s.appendChild(i),s.appendChild(e),this.background="rgba(255,255,255,0)",this.legendBackgroundColor="rgba(255,255,255,0)",this.disableToolbar=!0}},this.inititalizeConfig=function(){if(this.setConfigDefaults(),"Network"==t.graphType&&(t.backgroundType||(this.backgroundType="gradient",this.nodeFontColor=this.background)),t)for(var e=0;e<this.config.length;e++){var i=this.config[e];t.hasOwnProperty(i)&&(this[i]=t[i])}this.isVML&&(this.showAnimation=!1),this.setSkin(),this.setPath(),this.setCanvas()},this.inititalizeConfig()},CanvasXpress.prototype.initColor=function(){this.validateColor=function(t,e){return t=t.toString(),t=t.match(/^rgba?\((\d{1,3},\d{1,3},\d{1,3})(?:,([0-9\.]+))?/i)?RegExp.$2?"rgba("+RegExp.$1+","+RegExp.$2+")":"rgb("+RegExp.$1+")":t.match(/^#?[0-9abcdef]/i)?this.hexToRgb(t):!1,t&&null!=e?this.addColorTransparency(t,e):t},this.darkenLightenColor=function(t,e){t=this.rgbToHex(t).substring(1,7);var i=parseInt(t,16),s=(i>>16)+e;s=s>255?255:0>s?0:s;var a=(i>>8&255)+e;a=a>255?255:0>a?0:a;var r=(255&i)+e;return r=r>255?255:0>r?0:r,t=r|a<<8|s<<16,this.hexToRgb(t.toString(16))},this.rgbToHex=function(t){var e=function(t){return t=parseInt(t,10),isNaN(t)?"00":(t=Math.max(0,Math.min(t,255)),"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16))};return"#"===t.substr(0,1)?t:t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/)?"#"+e(RegExp.$1)+e(RegExp.$2)+e(RegExp.$3):t},this.hexToRgb=function(t){var e=function(){return parseInt(t.substring(0,2),16)},i=function(){return parseInt(t.substring(2,4),16)},s=function(){return parseInt(t.substring(4,6),16)};return t="#"==t.charAt(0)?t.substring(1,7):t,"rgb("+e()+","+i()+","+s()+")"},this.addColorTransparency=function(t,e){return t&&t.match(/^rgba?\((\d{1,3},\d{1,3},\d{1,3})(?:,([0-9\.]+))?/i)?RegExp.$2?"rgba("+RegExp.$1+","+e+")":"rgba("+RegExp.$1+","+e+")":!1},this.disableGradientTransparency=function(){this.gradientTemp=this.gradient,this.transparencyTemp=this.transparency,this.gradient=!1,this.transparency=null},this.enableGradientTransparency=function(){this.gradient=this.gradientTemp,this.transparency=this.transparencyTemp},this.getGradientColor=function(t){if(t.match(/^rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(?:,([0-9\.]+))?/i)){var e=Math.floor(parseInt(RegExp.$1)/this.gradientRatio),i=Math.floor(parseInt(RegExp.$2)/this.gradientRatio),s=Math.floor(parseInt(RegExp.$3)/this.gradientRatio),a=RegExp.$4?parseFloat(RegExp.$4):!1;return a?"rgba("+e+","+i+","+s+","+a+")":"rgb("+e+","+i+","+s+")"}return!1},this.setGradient=function(t,e,i,s,a){"radial"==this.gradientType?this.setRadialGradient(t,e,i,s,!1,!1,!0):this.setLinearGradient(t,e,i,s,a,!1,!0)},this.setLinearGradient=function(t,e,i,s,a,r,h){h||this.ctx.save();var n=this.ctx.createLinearGradient(t,e,i,s);r?(n.addColorStop(0,a),n.addColorStop(1,r)):(r=this.getGradientColor(a),n.addColorStop(0,r),n.addColorStop(.6,a),n.addColorStop(1,a)),this.ctx.fillStyle=n},this.setRadialGradient=function(t,e,i,s,a,r,h){h||this.ctx.save();var n=i/5.5,o=this.ctx.createRadialGradient(t-n,e-n,1,t,e,i);a||(a=null!=this.transparency?"rgba(0,0,0,"+this.transparency+")":"rgb(0,0,0)"),r||(r="rgba(0,0,0,0)"),o.addColorStop(0,s),o.addColorStop(1,a),o.addColorStop(1,r),this.ctx.fillStyle=o}},CanvasXpress.prototype.initText=function(){this.drawTextMultiple=function(t,e,i,s,a,r,h,n,o,l){var d=t.split(/\n/);s||(s=this.font);var c=this.getFontPt(s)+4;i-=d.length%2?parseInt(d.length/2)*c+c/2:parseInt(d.length/2)*c;for(var p=0;p<d.length;p++)this.drawText(d[p],e,i,s,a,r,h,n,o,l),i+=c},this.drawArcText=function(t,e,i,s,a,r,h,n,o,l,d,c){var p=[];if(null!=t){if(!this.ctx)return void(this.debug&&alert("Dude, there is no canvas"));if(isNaN(e)||isNaN(i))return void(this.debug&&alert("Not a valid coordinate ("+e+", "+i+") to draw "+t));c||isNaN(t)||(t=this.formatNumber(t)),e||(e=0),i||(i=0),h||(h=this.font),n||(n=this.foreground),o||(o=this.align),l||(l=this.baseline),this.ctx.save(),this.ctx.strokeStyle=n,this.ctx.fillStyle=n,this.ctx.font=h,this.ctx.textAlign=o,this.ctx.textBaseline=l,this.showShadow&&(this.ctx.shadowOffsetX=this.shadowOffsetX,this.ctx.shadowOffsetY=this.shadowOffsetY,this.ctx.shadowBlur=this.shadowBlur,this.ctx.shadowColor=this.shadowColor);var g=r/(t.length*this.circularLetterSeparationFactor),u=a+r/2+g/2-g*(t.length/2);this.ctx.translate(e,i),this.ctx.rotate(u);for(var m=0;m<t.length;m++)this.ctx.save(),this.ctx.rotate(m*g+Math.PI/2),this.ctx.fillText(t[m],0,-s),this.ctx.restore();return this.ctx.restore(),this.showShadow&&(this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=0,this.ctx.shadowColor=this.background),p}},this.drawText=function(t,e,i,s,a,r,h,n,o,l,d){var c=0,p=function(t){t.shift();var s=[],a=Math.PI/2+n==0?-Math.PI/2:n-Math.PI/2,r=["poly"],h=t.shift()-e,o=t.shift()-i,l=t.shift()-e,d=t.shift()-i;for(s.push(o*Math.sin(a)-h*Math.cos(a)),s.push(o*Math.cos(a)+h*Math.sin(a)),s.push(d*Math.sin(a)-h*Math.cos(a)),s.push(d*Math.cos(a)+h*Math.sin(a)),s.push(d*Math.sin(a)-l*Math.cos(a)),s.push(d*Math.cos(a)+l*Math.sin(a)),s.push(o*Math.sin(a)-l*Math.cos(a)),s.push(o*Math.cos(a)+l*Math.sin(a));s.length>1;)r.push(s.shift()+e),r.push(s.shift()+i);return r},g=[];if(null!=t){if(this.isMultipleLines(t))return this.drawTextMultiple(t,e,i,s,a,r,h,n,o,l);if(!this.ctx)return void(this.debug&&alert("Dude, there is no canvas"));if(isNaN(e)||isNaN(i))return void(this.debug&&alert("Not a valid coordinate ("+e+", "+i+") to draw "+t));if(n<Math.PI/-2||n>Math.PI/2)return void(this.debug&&alert("Dude, you can only rotate between -PI/2 and PI/2"));d||isNaN(t)||(t=this.formatNumber(t)),e||(e=0),i||(i=0),s||(s=this.font),a||(a=this.foreground),r||(r=this.align),h||(h=this.baseline);var u=this.measureText(t,s),m=this.getFontPt(s);if(o)for(;u>o&&10>c;)t=t.substring(0,t.length-1),u=this.measureText(t,s),c++;var f,v,x,y;return"left"==r?(f=e,x=f+u):"right"==r?(f=e-u,x=e):(f=e-u/2,x=e+u/2),"top"==h?(v=i,y=v+m):"bottom"==h?(v=i-m,y=i):(v=i-m/2,y=i+m/2),g=["rect",f,v,x,y],n&&(g=p(g)),this.ctx.save(),this.ctx.strokeStyle=a,this.ctx.fillStyle=a,this.ctx.font=s,this.ctx.save(),this.ctx.translate(e,i),this.ctx.textAlign=r,this.ctx.textBaseline=h,this.showShadow&&(this.ctx.shadowOffsetX=this.shadowOffsetX,this.ctx.shadowOffsetY=this.shadowOffsetY,this.ctx.shadowBlur=this.shadowBlur,this.ctx.shadowColor=this.shadowColor),n&&this.ctx.rotate(n),l?this.ctx.strokeText(t,0,0):this.ctx.fillText(t,0,0),this.ctx.restore(),this.showShadow&&(this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=0,this.ctx.shadowColor=this.background),g}},this.isMultipleLines=function(t){var e=t.toString().split(/\n/);return e.length-1},this.capitalize=function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):void 0},this.measureTextMultiple=function(t,e){var i=t.split(/\n/),s=0;if(!this.ctx)return 0;e||(e=this.font),this.ctx.font=e;for(var a=0;a<i.length;a++)s=Math.max(s,this.ctx.measureText(i[a]).width);return s},this.measureText=function(t,e){return t&&this.ctx?(t=t.toString(),e||(e=this.font),CanvasXpress.cacheText[e]||(CanvasXpress.cacheText[e]={}),CanvasXpress.cacheText[e][t]||(this.ctx.font=e,CanvasXpress.cacheText[e][t]=this.isMultipleLines(t)?this.measureTextMultiple(t,e):this.ctx.measureText(t).width),CanvasXpress.cacheText[e][t]):0},this.scaleTextToFont=function(t,e,i){var s=e+"pt "+this.fontName;if(t)for(;this.measureText(t,s)>i&&e>=this.minTextSize;)e-=2,s=e+"pt "+this.fontName;return s},this.getFontPt=function(t){return Math.max(1,parseInt(t.match(/^[\-\d]+/)[0]))},this.scaleTextToSize=function(t){var e=this.scaleTextConstantMult;return t||(t=1),Math.ceil(1/Math.sqrt(t)*e)},this.formatNumber=function(t,e){if(e||(e=2),t.toString().length>=7){var i=sprintf("%."+e+"e",Number(t)),s=sprintf("%."+e+"f",Number(t));return s.toString().length>i.toString().length?i.toString():s.toString()}return t.toString()},this.bestFormatNumber=function(t,e){return 1>e?sprintf("%.0f",Number(t)):Math.abs(t)<.001?sprintf("%.2e",Number(t)):sprintf("%.3f",Number(t))},this.getMaxText=function(t){for(var e="",i=0,s=0;s<t.length;s++){var a=this.measureText(t[s].toString(),this.font);a>i&&(e=t[s].toString(),i=a)}return e},this.shortenText=function(t,e,i){return t?(t=t.toString(),i?t.substring(0,Math.max(parseInt(1*i/e)-2,1))+"..":t.length<=e?t:t.substring(0,e-3)+"..."):""},this.convertToNumber=function(t){return isNaN(t)?t:parseFloat(t)}},CanvasXpress.prototype.initTime=function(){Date.prototype.getWeek=function(){var t=new Date(this.getFullYear(),0,1);return Math.ceil(((this-t)/864e5+t.getDay()+1)/7)},Date.prototype.getDayYear=function(){var t=new Date(this.getFullYear(),0,1);return Math.ceil((this-t)/864e5)},this.getMillisecond=function(t){return t.getMilliseeconds()},this.getSecond=function(t){return t.getSeconds()},this.getMinuteSecond=function(t){return t.getMinutes()+":"+t.getSeconds()},this.getMinute=function(t){return t.getMinutes()},this.getHourMinute=function(t){return t.getHours()+":"+t.getMinutes()},this.getHour=function(t){return t.getHours()},this.getYearWeek=function(t){return t.getFullYear()+"-"+t.getWeek()},this.getYearMonth=function(t){return t.getFullYear()+"-"+t.getMonth()},this.getYear=function(t){return t.getFullYear()},this.times={second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31556952e3},this.parseDate=function(t){var e=0,i=0,s=0,a=parseInt(t.toString().substring(0,4)),r=parseInt(t.toString().substring(4,6).replace(/^0/,"")),h=parseInt(t.toString().substring(6,8).replace(/^0/,"")),n=t.toString().match(/\:/)?t.toString().substring(10).split(":"):!1;return n&&(e=n[0]?parseInt(n[0].replace(/^0/,"")):0,i=n[1]?parseInt(n[1].replace(/^0/,"")):0,s=n[2]?parseInt(n[2].replace(/^0/,"")):0),new Date(a,r-1,h,e,i,s)},this.setTimeAxis=function(){var t=this.validateTimeAxis();if(t){var e,i=Date.parse(t[t.length-1])-Date.parse(t[0]),s={},a=[];if(this.timeValues=[],this.timeValueIndices=[],e=i>2*this.times.year?"getYear":i>2*this.times.month?"getYearMonth":i>2*this.times.week?"getYearWeek":i<this.times.second?"getMillisecond":i<this.times.minute?"getSecond":i<this.times.hour/4?"getMinuteSecond":i<this.times.hour?"getMinute":i<this.times.day/4?"getHourMinute":i<this.times.day?"getHour":!1)if(this.timeTicksFirst)for(var r=0;r<t.length;r++){var h=this[e](t[r]);s.hasOwnProperty(h)||(a.push(t[r]),this.timeValueIndices.push(r),s[h]=!0)}else for(var r=t.length-1;r>=0;r--){var h=this[e](t[r]);s.hasOwnProperty(h)||(a.unshift(t[r]),this.timeValueIndices.unshift(r),s[h]=!0)}else for(var r=0;r<t.length;r++)this.timeValues.push(dateFormat(t[r],this.timeFormat)),this.timeValueIndices.push(r);var i=Date.parse(a[a.length-1])-Date.parse(a[a.length-2]);"getYear"==e&&i<3*this.times.month?(this.timeValues.pop(),this.timeValueIndices.pop()):"getYearMonth"==e&&i<4*this.times.week?(this.timeValues.pop(),this.timeValueIndices.pop()):"getYearWeek"==e&&i<7*this.times.day&&(this.timeValues.pop(),this.timeValueIndices.pop());for(var r=0;r<a.length;r++)this.timeValues.push(dateFormat(a[r],this.timeFormat))}},this.createRandomTimes=function(t){var e,i=new Date,s=i.getTime(),a=[new Date(s)],r=this.isGroupedData?this.data.w:this.data.y;t&&this.times[t]||(t="day");for(var h=0;h<r.smps.length;h++)e=Date.parse(r.smps[h]),isNaN(e)?s-=this.times[t]:s=e,a.unshift(new Date(s));return a},this.validateTimeAxis=function(){for(var t=this.isGroupedData?this.data.w:this.data.y,e=!1,i=[],s=0;s<this.smpIndices.length;s++){var a=Date.parse(this.smpIndices.length!=t.smps.length?t.smps[this.smpIndices[s]]:t.smps[s]);if(isNaN(a)){if(this.isExample)return i=this.createRandomTimes();e=!0;break}i.push(new Date(a))}return e?!1:i}},CanvasXpress.prototype.initAttributes=function(){this.validateNumbers=function(t){for(var e=0;e<t.length;e++)if(isNaN(t[e]))return!1;return!0},this.lineTo=function(t,e,i,s){t==i?(t=Math.round(t)+.5,i=t):e==s&&(e=Math.round(e)+.5,s=e),this.ctx.moveTo(t,e),this.ctx.lineTo(i,s),this.ctx.stroke()},this.clip=function(t,e,i){var s,a,r,h,n,o,t,l,d,c,p,g=[];if(i&&4==i.length?(d=i[0],l=i[1],c=d+i[2],p=l+i[3]):(d=this.marginLeft+this.offsetX+this.left,l=this.marginTop+this.offsetY+this.top,c=d+this.x,p=l+this.y),"rect"==t){if(s=parseInt(e[0]),r=parseInt(e[1]),a=parseInt(s+e[2]),h=parseInt(r+e[3]),s>c+this.outlineWidth||h>p+this.outlineWidth||d>a||l>r)return!1;d>s&&(s=d),a>c&&(a=c),l>h&&(h=l),r>p&&(r=p),g=[s,r,a-s,h-r]}else if("poly"==t);else if("circle"==t){if(s=parseInt(e[0]),r=parseInt(e[1]),s>c||d>s||l>r||r>p)return!1;g=[s,r]}else{if("line"!=t)return!1;if(s=parseFloat(e[0]),r=parseFloat(e[1]),a=parseFloat(e[2]),h=parseFloat(e[3]),s==a){if(d>s||s>c)return!1;if(r>h){if(l>r)return!1;if(r>p&&(r=p),h>p)return!1;l>h&&(h=l)}else{if(r>p)return!1;if(l>r&&(r=l),l>h)return!1;h>p&&(h=p)}}else if(r==h){if(l>r||r>p)return!1;if(s>a){if(d>s)return!1;if(s>c&&(s=c),a>c)return!1;d>a&&(a=d)}else{if(s>c)return!1;if(d>s&&(s=d),d>a)return!1;a>c&&(a=c)}}else if(s>a){if(d>s||a>c)return!1;if(r>h){if(l>r||h>p)return!1;n=r-h,o=s-a,s>c&&(r-=(s-c)*n/o,s=c),r>p&&(s-=(r-p)*o/n,r=p),d>a&&(h+=(d-a)*n/o,a=d),l>h&&(a+=(l-h)*o/n,h=l)}else{if(l>h||r>p)return!1;n=h-r,o=s-a,s>c&&(r+=(s-c)*n/o,s=c),l>r&&(s-=(l-r)*o/n,r=l),d>a&&(h-=(d-a)*n/o,a=d),h>p&&(a+=(h-p)*o/n,h=p)}}else{if(d>a||s>c)return!1;if(r>h){if(l>r||h>p)return!1;n=r-h,o=a-s,d>s&&(r-=(d-s)*n/o,s=d),r>p&&(s+=(r-p)*o/n,r=p),a>c&&(h+=(a-c)*n/o,a=c),l>h&&(a-=(l-h)*o/n,h=l)}else{if(l>h||r>p)return!1;n=h-r,o=a-s,d>s&&(r+=(d-s)*n/o,s=d),l>r&&(s+=(l-r)*o/n,r=l),a>c&&(h-=(a-c)*n/o,a=c),h>p&&(a-=(h-p)*o/n,h=p)}}g=[s,r,a,h]}return g},this.lineLength=function(t,e,i,s){return Math.sqrt(Math.pow(i-t,2)+Math.pow(s-e,2))},this.shortenLine=function(t,e,i,s,a,r,h){if(this.validateNumbers([t,e,i,s,a,r])){if(h.match(/bezier/))return h.match(/beziery/i)?s>e?[t,e+a,i,s-r]:[t,e-a,i,s+r]:i>t?[t+a,e,i-r,s]:[t-a,e,i+r,s];if(h.match(/curved/))return[t,e,i,s];var n=Math.atan2(s-e,i-t),o=Math.cos(n),l=Math.sin(n),d=this.lineLength(t,e,i,s);if(d){for(;a+r>d;)a/=1.1,r/=1.1;t+=o*a,e+=l*a,i-=o*r,s-=l*r}return[t,e,i,s]}},this.errorBar=function(t,e,i,s,a,r){if(!this.isGroupedData&&this.isRawData,this.showErrorBars&&this.validateNumbers([a])){var h=this.drawLine("line",t,e,i,s,r,!1,!1,!1,!1,!0);return a>0?this.drawLine("line",i,s-a/2,i,s+a/2,r,!1,!1,!1,!1,!0):this.drawLine("line",i-a/2,s,i+a/2,s,r,!1,!1,!1,!1,!0),h}},this.splineControlPoint=function(t,e,i,s,a,r){var h=Math.sqrt(Math.pow(i-t,2)+Math.pow(s-e,2)),n=Math.sqrt(Math.pow(a-i,2)+Math.pow(r-s,2)),o=this.tension*h/(h+n),l=this.tension-o,d=i+o*(t-a),c=s+o*(e-r),p=i-l*(t-a),g=s-l*(e-r);return[d,c,p,g]},this.drawLine=function(t,e,i,s,a,r,h,n,o,l,d,c){var p,g=this,u=[],m=!1,f=!1,v=!1,x=function(){g.ctx.save(),r=null!=g.transparency?r?g.validateColor(r,g.transparency)||g.addColorTransparency(g.foreground,g.transparency):g.addColorTransparency(g.foreground,g.transparency):r?g.validateColor(r)||g.foreground:g.foreground,g.ctx.fillStyle=r,g.ctx.strokeStyle=r,g.ctx.lineWidth=h?h:g.outlineWidth,g.ctx.lineCap=n?n:g.capType,g.showShadow&&(g.ctx.shadowOffsetX=g.shadowOffsetX,g.ctx.shadowOffsetY=g.shadowOffsetY,g.ctx.shadowBlur=g.shadowBlur,g.ctx.shadowColor=g.shadowColor)},y=function(){g.showShadow&&(g.ctx.shadowOffsetX=0,g.ctx.shadowOffsetY=0,g.ctx.shadowBlur=0,g.ctx.shadowColor=g.background),g.ctx.restore()},b=function(){var t;t=e,e=s,s=t,t=i,i=a,a=t},w=function(t){var r=function(t,e,i,s){for(var a=[],r=0;r<t.length;r++)a.push([t[r][0]*Math.cos(e)-t[r][1]*Math.sin(e),t[r][0]*Math.sin(e)+t[r][1]*Math.cos(e)]);for(var h=[],r=0;r<a.length;r++)h.push([a[r][0]+i,a[r][1]+s]);return h},n=g.arrowPointSize,o=Math.max(n/2-1,1),l=(h?h/2:g.outlineWidth/2,t?[[0,-n],[0,n]]:[[Math.floor(n/2.5),0],[-n,-o*h],[-n,o*h]]),d=s-e,c=a-i;if(f)"Y"==f?d=Math.abs(c)>Math.abs(d)?0:s>e?g.arrowPointSize:-g.arrowPointSize:c=Math.abs(d)>Math.abs(c)?0:a>i?g.arrowPointSize:-g.arrowPointSize;else if(v){var p=g.lineLength(e,i,s,a),u=g.shortenLine(e,i,s,a,0,p/2,"line"),m=u[2],b=u[3],w=p/2,C=v/w,T=Math.asin(s>e?(b-i)/w:-(b-i)/w),D=T-Math.PI/20;s>e?(e=m+w*Math.cos(D-C),i=b+w*Math.sin(D-C),s=m+w*Math.cos(T-C),a=b+w*Math.sin(T-C)):(e=m+w*Math.cos(D-C+Math.PI),i=b+w*Math.sin(D-C+Math.PI),s=m+w*Math.cos(T-C+Math.PI),a=b+w*Math.sin(T-C+Math.PI)),d=s-e,c=a-i}var S=r(l,Math.atan2(c,d),s,a);x(),g.ctx.beginPath(),g.ctx.moveTo(S[0][0],S[0][1]);for(var A=1;A<S.length;A++)isNaN(S[A][0])||isNaN(S[A][1])||g.ctx.lineTo(S[A][0],S[A][1]);t?(g.ctx.closePath(),g.ctx.stroke()):(isNaN(S[0][0])||isNaN(S[0][1])||g.ctx.lineTo(S[0][0],S[0][1]),g.ctx.closePath(),g.ctx.fill()),y()};if("spline"==t){if(e.length<3)return!1;var C=[],T=[],D=[],S=0;u=["poly"];for(var A=0;A<e.length;A++){if(!this.validateNumbers([e[A],i[A]]))return!1;T.push(e[A],i[A]),u.push(e[A],i[A]-2),D.push(i[A]+2,e[A]),S+=2}u=u.concat(D.reverse()),x();for(var A=0;S-4>A;A+=2)C=C.concat(this.splineControlPoint(T[A],T[A+1],T[A+2],T[A+3],T[A+4],T[A+5]));this.ctx.beginPath(),this.ctx.moveTo(T[0],T[1]),this.ctx.quadraticCurveTo(C[0],C[1],T[2],T[3]);for(var A=2;S-5>A;A+=2)this.ctx.bezierCurveTo(C[2*A-2],C[2*A-1],C[2*A],C[2*A+1],T[A+2],T[A+3]);return this.ctx.moveTo(T[S-2],T[S-1]),this.ctx.quadraticCurveTo(C[2*S-10],C[2*S-9],T[S-4],T[S-3]),this.ctx.stroke(),y(),u}if(this.validateNumbers([e,i,s,a])){if(o||(o=0),l||(l=0),t.match(/bezier/i)?t.match(/beziery/i)?(p="bezierLine",f="Y",m="Y",(o||l)&&(a>i?i+o>a-l&&(t=t.replace(/beziery/i,""),p="line",f=!1,m=!1):a+l>i-o&&(t=t.replace(/beziery/i,""),p="line",f=!1,m=!1))):(p="bezierLine",f="X",m="X",(o||l)&&(s>e?e+o>s-l&&(t=t.replace(/bezier[x]?/i,""),p="line",f=!1,m=!1):s+l>e-o&&(t=t.replace(/bezier[x]?/i,""),p="line",f=!1,m=!1))):t.match(/curved/i)?t.match(/curvedc/i)?(p="curvedLine",v=!0,m=!0):(p="curvedLine",v=!0,m=!1):p=t.match(/dashed/i)?"dashedLine":t.match(/dotted/i)?"dottedLine":"line",o||l){var k=this.shortenLine(e,i,s,a,o,l,t);e=k[0],i=k[1],s=k[2],a=k[3]}if(d){var M=this.clip("line",[e,i,s,a],c);if(!M)return!1;e=M[0],i=M[1],s=M[2],a=M[3]}switch(p){case"dashedLine":case"dottedLine":var I=Math.atan2(a-i,s-e),L=Math.cos(I),N=Math.sin(I),z=this.lineLength(e,i,s,a),F="dashedLine"==p?this.dashLength:this.dotLength,P=Math.floor(z/(2*F));if(!P)return!1;var B=L*F,X=N*F,R=e,V=i,E=s,O=a;E=R+B,O=V+X;for(var A=0;P>A;A++)this.drawLine("line",R,V,E,O,r,h,n),R+=2*B,V+=2*X,E=R+B,O=V+X;this.drawLine("line",R,V,E,O,r,h,n),u=["poly",e+2,i,s+2,a,s-2,a,e-2,i];break;case"bezierLine":if(e==s||i==a)return this.drawLine("line",e,i,s,a,r,h,n,o,l,d,c);e=parseInt(e)+.5,i=parseInt(i)+.5,s=parseInt(s)+.5,a=parseInt(a)+.5,m="Y"==m?"Y":"X";var G=s>e?!0:!1,H=(e+s)/2,W=(i+a)/2;u=G?"X"==m?["poly",e,i-2,H+2,i-2,H+2,a-2,s,a-2,s,a+2,H-2,a+2,H-2,i+2,e,i+2]:["poly",e-2,i,e-2,W+2,s-2,W+2,s-2,a,s+2,a,s+2,W-2,e+2,W-2,e+2,i]:"X"==m?["poly",e,i-2,H-2,i-2,H-2,a-2,s,a-2,s,a+2,H+2,a+2,H+2,i+2,e,i+2]:["poly",e-2,i,e-2,W-2,s-2,W-2,s-2,a,s+2,a,s+2,W+2,e+2,W+2,e+2,i],x(),this.ctx.moveTo(e,i),"Y"==m?this.ctx.bezierCurveTo(e,a,s,i,s,a):this.ctx.bezierCurveTo(s,i,e,a,s,a),this.ctx.stroke(),y();break;case"curvedLine":var H=12,$=1,z=this.lineLength(e,i,s,a),Y=this.shortenLine(e,i,s,a,0,z/2,"line"),U=Y[2],q=Y[3],j=z/2,Z=o/j,K=l/j,_=q-i,J=m&&e>s?!1:!m&&s>=e?!0:m,Q=Math.asin(s>=e?_/j:-_/j),tt=Q+Math.PI,et=Math.PI/H,it=s>=e?0:Math.PI;u=["poly"];for(var A=$;H-$>=A;A++)u.push(U-(j+2)*Math.cos(Q+et*A-it)),u.push(q-(j+2)*Math.sin(Q+et*A-it));for(var A=H-$;A>=$;A--)u.push(U-(j-2)*Math.cos(Q+et*A-it)),u.push(q-(j-2)*Math.sin(Q+et*A-it));x(),this.ctx.beginPath(),s>=e?this.ctx.arc(U,q,j,Q-K,tt+Z,J):this.ctx.arc(U,q,j,Q+Z,tt-K,J),this.ctx.stroke(),y();break;case"line":u=["poly",e+2,i,s+2,a,s-2,a,e-2,i],x(),this.ctx.beginPath(),this.lineTo(e,i,s,a),y()}return t.match(/arrowheadsquaretail|squaretailarrowhead/i)?(v=v?l:!1,w(!1,f,v),t.match(/curve/)||b(),v=v?o:!1,w(!0,f,v)):t.match(/arrowtailsquarehead|squareheadarrowtail/i)?(v=v?l:!1,w(!0,f,v),t.match(/curve/)||b(),v=v?o:!1,w(!1,f,v)):t.match(/arrowhead/i)?(v=v?l:!1,w(!1,f,v)):t.match(/squarehead/i)?(v=v?l:!1,w(!0,f,v)):t.match(/arrowtail/i)?(t.match(/curve/)||b(),v=v?o:!1,w(!1,f,v)):t.match(/squaretail/i)?(t.match(/curve/)||b(),v=v?o:!1,w(!0,f,v)):t.match(/arrow/i)?(v=v?l:!1,w(!1,f,v),t.match(/curve/)||b(),v=v?o:!1,w(!1,f,v)):t.match(/square/i)&&(v=v?o:!1,w(!0,f,v),t.match(/curve/)||b(),v=v?l:!1,w(!0,f,v)),u}return!1},this.polygon=function(t,e,i,s,a,r,h,n,o){return this.drawShape("polygon",t,e,!1,!1,i,s,a,r,h,n,o)},this.circle=function(t,e,i,s,a,r,h,n,o,l,d){return this.drawShape("circle",t,e,i,s,a,r,h,n,o,l,d)},this.rectangle=function(t,e,i,s,a,r,h,n,o,l,d){return this.drawShape("rectangle",t+i/2,e+s/2,i,s,a,r,h,n,o,l,d)},this.rectangleHM=function(t,e,i,s,a,r,h,n,o,l,d){return this.drawShape("rectangleHM",t+i/2,e+s/2,i,s,a,r,h,n,o,l,d)},this.drawShape=function(t,e,i,s,a,r,h,n,o,l,d,c,p,g,u,m){var f,v,x=this,y=function(){x.ctx.save(),x.ctx.translate(e,i),o&&x.ctx.rotate(o),r=null!=x.transparency?r?x.validateColor(r,x.transparency)||x.addColorTransparency(x.foreground,x.transparency):x.addColorTransparency(x.foreground,x.transparency):r?x.validateColor(r)||x.foreground:x.foreground,x.gradient?"radial"==x.gradientType?x.setGradient(0,0,Math.max(Math.abs(s),Math.abs(a)),r):x.setGradient(0,0,s,a,r):x.ctx.fillStyle=r,h&&(h=x.validateColor(h)||x.foreground),x.ctx.strokeStyle=h?h:x.foreground,x.ctx.lineWidth=l?l:x.outlineWidth,x.showShadow&&(x.ctx.shadowOffsetX=x.shadowOffsetX,x.ctx.shadowOffsetY=x.shadowOffsetY,x.ctx.shadowBlur=x.shadowBlur,x.ctx.shadowColor=x.shadowColor)},b=function(e,i,s){if("image"==t);else if("rectangleHM"==t){if(e){e[0][0]=Math.round(e[0][0])+.5,e[3][0]=e[0][0],e[1][0]=Math.round(e[1][0])+1.5,e[2][0]=e[1][0],e[0][1]=Math.round(e[0][1])+.5,e[1][1]=e[0][1],e[2][1]=Math.round(e[2][1])+1.5,e[3][1]=e[2][1],x.ctx.beginPath(),x.ctx.moveTo(e[0][0],e[0][1]);for(var a=1;a<e.length;a++)x.ctx.lineTo(e[a][0],e[a][1]);i||x.ctx.closePath(),n&&"open"==n?x.ctx.stroke():(x.ctx.stroke(),x.ctx.fill())}}else if("spline"==t){var r=[],h=[],o=[];h.push(s.shift()),h.push(s.shift()),o.push(s.pop()),o.unshift(s.pop());for(var l=s.length,a=0;l-4>a;a+=2)r=r.concat(x.splineControlPoint(s[a],s[a+1],s[a+2],s[a+3],s[a+4],s[a+5]));x.ctx.beginPath(),x.ctx.moveTo(h[0],h[1]),x.ctx.lineTo(s[0],s[1]),x.ctx.quadraticCurveTo(r[0],r[1],s[2],s[3]);for(var a=2;l-5>a;a+=2)x.ctx.bezierCurveTo(r[2*a-2],r[2*a-1],r[2*a],r[2*a+1],s[a+2],s[a+3]);x.ctx.quadraticCurveTo(r[2*l-10],r[2*l-9],s[l-2],s[l-1]),x.ctx.lineTo(o[0],o[1]),x.ctx.lineTo(h[0],h[1]),n&&"open"==n?x.ctx.stroke():(x.ctx.stroke(),x.ctx.fill())}else if("arc3"==t)x.ctx.stroke();else{if(e){x.ctx.beginPath(),x.ctx.moveTo(e[0][0]+.5,e[0][1]+.5);for(var a=1;a<e.length;a++)x.ctx.lineTo(e[a][0]+.5,e[a][1]+.5);i||x.ctx.closePath()}n&&"open"==n?x.ctx.stroke():(x.ctx.stroke(),x.ctx.fill())}x.showShadow&&(x.ctx.shadowOffsetX=0,x.ctx.shadowOffsetY=0,x.ctx.shadowBlur=0,x.ctx.shadowColor=x.background),
x.ctx.restore()},w=function(t){if(t){if("circle"==t[0])return t;var s=t.shift(),a=[];if("rect"==s){var r=t.shift()-e,h=t.shift()-i,n=t.shift()-e,l=t.shift()-i;a.push(h*Math.sin(o)-r*Math.cos(o)),a.push(h*Math.cos(o)+r*Math.sin(o)),a.push(l*Math.sin(o)-r*Math.cos(o)),a.push(l*Math.cos(o)+r*Math.sin(o)),a.push(l*Math.sin(o)-n*Math.cos(o)),a.push(l*Math.cos(o)+n*Math.sin(o)),a.push(h*Math.sin(o)-n*Math.cos(o)),a.push(h*Math.cos(o)+n*Math.sin(o))}else for(;t.length>1;){var d=t.shift()-e,c=t.shift()-i;a.push(c*Math.sin(o)-d*Math.cos(o)),a.push(c*Math.cos(o)+d*Math.sin(o))}for(var p=["poly"];a.length>1;)p.push(a.shift()+e),p.push(a.shift()+i);return p}};if("polygon"==t||"path"==t||"spline"==t){var C=Number.MAX_VALUE,T=-1*Number.MAX_VALUE,D=Number.MAX_VALUE,S=-1*Number.MAX_VALUE,A="polygon"==t?!1:!0,k=[],M=[];if(f=[],v=["poly"],e.length==i.length){if("spline"==t&&e.length<5)return!1;for(var I=0;I<e.length;I++){if(!this.validateNumbers([e[I],i[I]]))return!1;C=Math.min(C,e[I]),T=Math.max(T,e[I]),D=Math.min(D,i[I]),S=Math.max(S,i[I]),f.push([e[I],i[I]]),"spline"==t?(v.push(e[I],i[I]-2),k.push(i[I]+2,e[I])):v.push(e[I],i[I])}e=(C+T)/2,i=(D+S)/2;for(var I=0;I<f.length;I++)f[I][0]-=e,f[I][1]-=i,M.push(f[I][0],f[I][1]);return o&&(v=w(v)),f?("spline"==t&&(v=v.concat(k.reverse())),y(A),b(f,A,M),v):!1}return!1}if(this.validateNumbers([e,i,s,a])){if(d){if(f=t.match(/rectangle/)?this.clip("rect",[e-s/2,i-a/2,s,a],c):this.clip("circle",[e,i],c),!f)return!1;t.match(/rectangle/)?(s=f[2],a=f[3],e=f[0]+s/2,i=f[1]+a/2):(e=f[0],i=f[1])}var L=s/2,N=a/2,z=a/s,F=1.5,v=["rect",e-L,i-N,e+L,i+N];switch(t){case"image":f=!1,this.ctx.save(),this.ctx.translate(e,i),o&&this.ctx.rotate(o),this.drawImage(CanvasXpress.cacheImages[u],-L*this.zoom,-N*this.zoom,s*this.zoom,a*this.zoom,u),v=["rect",e-L*this.zoom,i-N*this.zoom,e+L*this.zoom,i+N*this.zoom],this.ctx.restore();break;case"circle":case"sphere":v=["circle",e,i,s/2],f=!1,y(),this.ctx.beginPath(),this.ctx.arc(0,0,s/2,0,2*Math.PI,!0),this.ctx.closePath(),b();break;case"box":case"rect":case"rectangle":case"rectangleHM":f=[[-L,-N],[L,-N],[L,N],[-L,N]];break;case"rect2":return this.drawShape("rectangle",e,i,s,s/2,r,h,n,o,l,d,c,p,g,u,m);case"rect3":return this.drawShape("rectangle",e,i,s,s/3,r,h,n,o,l,d,c,p,g,u,m);case"roundrect":var P=s>a?a/4:s/4;f=!1,y(),this.ctx.beginPath(),ctx.moveTo(-L,-N+P),ctx.lineTo(-L,N-P),ctx.quadraticCurveTo(-L,N,-L+P,N),ctx.lineTo(L-P,N),ctx.quadraticCurveTo(L,N,L,N-P),ctx.lineTo(L,-N+P),ctx.quadraticCurveTo(L,-N,L-P,-N),ctx.lineTo(-L+P,-N),ctx.quadraticCurveTo(-L,-N,-L,-N+P),this.ctx.closePath(),b();break;case"square":f=[[-L,-L],[L,-L],[L,L],[-L,L]];break;case"triangle":if(s==a)return this.drawShape("equilateral",e,i,s,a,r,h,n,o,l,d,c,p,g,u,m);v=["poly",e,i-N,e+L,i+N,e-L,i+N],f=[[0,-N],[L,N],[-L,N]];break;case"triangle2":if(s==a)return this.drawShape("equilateral2",e,i,s,a,r,h,n,o,l,d,c,p,g,u,m);v=["poly",e,i+N,e+L,i-N,e-L,i-N],f=[[0,N],[L,-N],[-L,-N]];break;case"equilateral":var P=s*Math.sqrt(3)/6,B=P/2,X=Math.sqrt(P*P-B*B);v=["poly",e,i-P,e+X,i+B,e-X,i+B],f=[[0,-N],[L,N],[-L,N]];break;case"equilateral2":var P=s*Math.sqrt(3)/6,B=P/2,X=Math.sqrt(P*P-B*B);v=["poly",e,i+P,e+X,i-B,e-X,i-B],f=[[0,N],[L,-N],[-L,-N]];break;case"diamond":case"rhombus":v=["poly",e,i-N,e+L,i,e,i+N,e-L,i],f=[[0,-N],[L,0],[0,N],[-L,0]];break;case"hexagon":var R=s/3,V=R-L;f=[[V,-N],[-V,-N],[L,0],[-V,N],[V,N],[-L,0]];break;case"octagon":var E=s/4,O=a/4;f=[[-E,-N],[E,-N],[L,-O],[L,O],[E,N],[-E,N],[-L,O],[-L,-O]];break;case"oval":f=!1,y(),this.ctx.scale(1,z),this.ctx.beginPath(),this.ctx.arc(0,0,s/2,0,2*Math.PI,!0),this.ctx.closePath(),b();break;case"oval2":return this.drawShape("oval",e,i,s,s/2,r,h,n,o,l,d,c,p,g,u,m);case"oval3":return this.drawShape("oval",e,i,s,s/3,r,h,n,o,l,d,c,p,g,u,m);case"arc":f=!1,y(),this.ctx.scale(1,z),this.ctx.beginPath(),this.ctx.arc(0,0,s/2,0,Math.PI,!0),"open"!=n&&this.ctx.closePath(),b();break;case"arc2":f=!1;var G=a*Math.cos(p),H=a*Math.sin(p),W=a*Math.cos(g),$=a*Math.sin(g),Y=this.shortenLine(0,0,G,H,0,s,"line"),U=this.shortenLine(0,0,W,$,0,s,"line");y(),this.ctx.beginPath(),this.ctx.moveTo(Y[2],Y[3]),this.ctx.lineTo(G,H),this.ctx.arc(0,0,a,p,g,!1),this.ctx.lineTo(U[2],U[3]),this.ctx.arc(0,0,a-s,g,p,!0),this.ctx.closePath(),b();break;case"arc3":f=!1,y(),this.ctx.beginPath(),this.ctx.arc(0,0,s/2,p,g,!1),b();break;case"ellipse":var q=.5522848*L,j=.5522848*N;f=!1,y(),this.ctx.beginPath(),this.ctx.moveTo(0,N),this.ctx.bezierCurveTo(0,N-j,L-q,0,L,0),this.ctx.bezierCurveTo(L+q,0,s,N-j,s,N),this.ctx.bezierCurveTo(s,N+j,L+q,a,L,a),this.ctx.bezierCurveTo(L-q,a,0,N+j,0,N),this.ctx.closePath(),b();break;case"ellipse2":return this.drawShape("ellipse",e,i,s,s/2,r,h,n,o,l,d,c,p,g,u,m);case"ellipse3":return this.drawShape("ellipse",e,i,s,s/3,r,h,n,o,l,d,c,p,g,u,m);case"plus":f=[[-F,-N],[F,-N],[F,-F],[L,-F],[L,F],[F,F],[F,N],[-F,N],[-F,F],[-L,F],[-L,-F],[-F,-F],[-F,-N]];break;case"minus":f=[[-L,-F],[L,-F],[L,F],[-L,F],[-L,-F]];break;case"mdavid":var R=s/3,Z=Math.PI/6;v=["circle",e,i,s/2],f=!1,y(),this.ctx.beginPath(),this.ctx.moveTo(R,0);for(var I=0;11>I;I++)this.ctx.rotate(Z),I%2==0?this.ctx.lineTo(R/.55,0):this.ctx.lineTo(R,0),this.ctx.closePath();b();break;case"star":var K=s/4,_=Math.PI/5;v=["circle",e,i,s/2],f=!1,y(),this.ctx.save(),this.ctx.scale(.7,.7),this.ctx.rotate(.45*_),this.ctx.beginPath(),this.ctx.moveTo(K,0);for(var I=0;9>I;I++)this.ctx.rotate(_),I%2==0?this.ctx.lineTo(K/.35,0):this.ctx.lineTo(K,0);this.ctx.closePath(),this.ctx.restore(),b();break;case"pie":"undefined"==typeof p&&(p=0),"undefined"==typeof g&&(g=2*Math.PI),f=!1,y(),this.ctx.scale(1,z),this.ctx.beginPath(),this.ctx.arc(0,0,s/2,p,g,!1),this.ctx.closePath(),b();break;case"pie0":return this.drawShape("pie",e,i,s,s/2,r,h,n,o,l,d,c,0,Math.PI/5,u,m);case"pie1":return this.drawShape("pie",e,i,s,s/2,r,h,n,o,l,d,c,0,Math.PI/3.5,u,m);case"pie2":return this.drawShape("pie",e,i,s,s/2,r,h,n,o,l,d,c,0,Math.PI/2,u,m);case"pie3":return this.drawShape("pie",e,i,s,s/2,r,h,n,o,l,d,c,0,Math.PI/1.5,u,m);case"pie4":return this.drawShape("pie",e,i,s,s/2,r,h,n,o,l,d,c,0,Math.PI,u,m);case"pie5":return this.drawShape("pie",e,i,s,s/2,r,h,n,o,l,d,c,0,1.2*Math.PI,u,m);case"pie6":return this.drawShape("pie",e,i,s,s/2,r,h,n,o,l,d,c,0,1.4*Math.PI,u,m);case"pie7":return this.drawShape("pie",e,i,s,s/2,r,h,n,o,l,d,c,0,1.6*Math.PI,u,m);case"pie8":return this.drawShape("pie",e,i,s,s/2,r,h,n,o,l,d,c,0,1.8*Math.PI,u,m);case"pie9":return this.drawShape("pie",e,i,s,s/2,r,h,n,o,l,d,c,0,2*Math.PI,u,m);case"pacman":return this.drawShape("pie",e,i,s,s/2,r,h,n,o,l,d,c,5*Math.PI/4,3*Math.PI/4,u,m)}return o&&(v=w(v)),f&&(y(),b(f)),v}return!1},this.drawImage=function(t,e,i,s,a,r){if(this.isIE&&this.useFlashIE&&this.browserVersion<9&&1==t){var h=this,n=function(){h.drawImage(CanvasXpress.cacheImages[r],e,i,s,a)};CanvasXpress.cacheImages[r].onload=n,CanvasXpress.cacheImages[r].src=r}else try{this.ctx.drawImage(t,e,i,s,a)}catch(o){}},this.setRGB=function(){this.reds=[],this.greens=[],this.blues=[],this.yellows=[],this.cyans=[],this.purples=[],this.greys=[],this.indicatorBins=this.allVsAll?Math.min(this.x,this.y)/(2*this.layoutRows):Math.min(this.x,this.y)/4,this.indicatorBins=this.indicatorBins>512?1:this.indicatorBins>256?2:this.indicatorBins>128?4:8;for(var t,e=this.indicatorBins,i=parseInt(256/e),s=255,a=0;i>a;a++)this.greys.push("rgb("+s+","+s+","+s+")"),s-=e;if("rainbow-green"==this.indicatorCenter){t=e-1,s=255;for(var a=0;i>a;a++)this.greens.push("rgb(0,255,"+t+")"),this.cyans.push("rgb(0,"+s+",255)"),this.blues.push("rgb("+t+",0,255)"),this.purples.push("rgb(255,0,"+s+")"),this.reds.push("rgb(255,"+t+",0)"),this.yellows.push("rgb("+s+",255,0)"),t+=e,s-=e}else if(this.indicatorCenter.match("rainbow")){t=e-1,s=255;for(var a=0;i>a;a++)this.reds.push("rgb(255,0,"+t+")"),this.purples.push("rgb("+s+",0,255)"),this.blues.push("rgb(0,"+t+",255)"),this.cyans.push("rgb(0,255,"+s+")"),this.greens.push("rgb("+t+",255,0)"),this.yellows.push("rgb(255,"+s+",0)"),t+=e,s-=e}else if("black"==this.indicatorCenter){t=255;for(var a=0;i>a;a++)this.reds.push("rgb("+t+",0,0)"),this.purples.push("rgb("+t+",0,"+t+")"),this.blues.push("rgb(0,0,"+t+")"),this.cyans.push("rgb(0,"+t+","+t+")"),this.greens.push("rgb(0,"+t+",0)"),this.yellows.push("rgb("+t+","+t+",0)"),t-=e}else{this.reds.push("rgb(255,0,0)"),this.purples.push("rgb(255,0,255)"),this.blues.push("rgb(0,0,255)"),this.cyans.push("rgb(0,255,255)"),this.greens.push("rgb(0,255,0)"),this.yellows.push("rgb(255,255,0)"),t=e-1;for(var a=0;i-1>a;a++)this.reds.push("rgb(255,"+t+","+t+")"),this.purples.push("rgb(255,"+t+",255)"),this.blues.push("rgb("+t+","+t+",255)"),this.cyans.push("rgb("+t+",255,255)"),this.greens.push("rgb("+t+",255,"+t+")"),this.yellows.push("rgb(255,255,"+t+")"),t+=e}},this.setLineTypes=function(){this.lines=this.getLineTypes()},this.setCodonTable=function(){this.codon={TTT:["F","Phe","Phenylalanine"],TCT:["S","Ser","Serine"],TAT:["Y","Tyr","Tyrosine"],TGT:["C","Cys","Cysteine"],TTC:["F","Phe","Phenylalanine"],TCC:["S","Ser","Serine"],TAC:["Y","Tyr","Tyrosine"],TGC:["C","Cys","Cysteine"],TTA:["L","Leu","Leucine"],TCA:["S","Ser","Serine"],TAA:["*","Stop","Ochre"],TGA:["*","Stop","Opal"],TTG:["L","Leu","Leucine"],TCG:["S","Ser","Serine"],TAG:["*","Stop","Amber"],TGG:["W","Trp","Tryptophan"],CTT:["L","Leu","Leucine"],CCT:["P","Pro","Proline"],CAT:["H","His","Histidine"],CGT:["R","Arg","Arginine"],CTC:["L","Leu","Leucine"],CCC:["P","Pro","Proline"],CAC:["H","His","Histidine"],CGC:["R","Arg","Arginine"],CTA:["L","Leu","Leucine"],CCA:["P","Pro","Proline"],CAA:["Q","Gln","Glutamine"],CGA:["R","Arg","Arginine"],CTG:["L","Leu","Leucine"],CCG:["P","Pro","Proline"],CAG:["Q","Gln","Glutamine"],CGG:["R","Arg","Arginine"],ATT:["I","Ile","Isoleucine"],ACT:["T","Thr","Threonine"],AAT:["N","Asn","Asparagine"],AGT:["S","Ser","Serine"],ATC:["I","Ile","Isoleucine"],ACC:["T","Thr","Threonine"],AAC:["N","Asn","Asparagine"],AGC:["S","Ser","Serine"],ATA:["I","Ile","Isoleucine"],ACA:["T","Thr","Threonine"],AAA:["K","Lys","Lysine"],AGA:["R","Arg","Arginine"],ATG:["M","Met","Methionine"],ACG:["T","Thr","Threonine"],AAG:["K","Lys","Lysine"],AGG:["R","Arg","Arginine"],GTT:["V","Val","Valine"],GCT:["A","Ala","Alanine"],GAT:["D","Asp","Aspartic acid"],GGT:["G","Gly","Glycine"],GTC:["V","Val","Valine"],GCC:["A","Ala","Alanine"],GAC:["D","Asp","Aspartic acid"],GGC:["G","Gly","Glycine"],GTA:["V","Val","Valine"],GCA:["A","Ala","Alanine"],GAA:["E","Glu","Glutamic acid"],GGA:["G","Gly","Glycine"],GTG:["V","Val","Valine"],GCG:["A","Ala","Alanine"],GAG:["E","Glu","Glutamic acid"],GGG:["G","Gly","Glycine"]}},this.setReverseComplement=function(){this.reverseComplement={a:"t",c:"g",g:"c",t:"a",u:"a",A:"T",C:"G",G:"C",T:"A","/":"/","[":"[","]":"]"}},this.initializeAttributes=function(){this.setLineTypes(),this.setRGB(),this.setCodonTable(),this.setReverseComplement()},this.initializeAttributes()},CanvasXpress.prototype.initPrimitives=function(){this.initText(),this.initTime(),this.initColor(),this.initAttributes()},CanvasXpress.prototype.initDimensions=function(){this.resizeCanvas=function(t,e,i){this.ctx&&(this.disableGradientTransparency(),(t||e||i)&&(e||i?(e&&(this.width=e,this.originalWidth=e),i&&(this.height=i,this.originalHeight=i)):t&&(this.width=this.originalWidth,this.height=this.originalHeight),this.top=this.margin,this.title&&(this.top+=this.titleHeight+this.margin,this.subtitle&&(this.top+=this.subtitleHeight+this.margin)),this.left=this.margin,this.right=this.margin,this.bottom=this.margin,this.dataEvent=[]),this.isIE&&this.useFlashIE&&this.browserVersion<9?(this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.firstChild.width=this.width,this.canvas.firstChild.height=this.height):(this.canvas.width=this.width,this.canvas.height=this.height),"image"==this.backgroundType||"windowImage"==this.backgroundType?(this.ctx.save(),this.ctx.translate(0,0),this.drawImage(CanvasXpress.cacheImages[this.backgroundImage],0,0,this.width,this.height),this.ctx.restore()):"solid"==this.backgroundType||"window"==this.backgroundType||"windowSolidGradient"==this.backgroundType||"video"==this.backgroundType?this.rectangle(0,0,this.width,this.height,this.background,this.background):(this.setLinearGradient(0,0,0,this.height,this.backgroundGradient1Color,this.backgroundGradient2Color),this.ctx.fillRect(0,0,this.width,this.height)),this.enableGradientTransparency())},this.setWidth=function(t){t||(t=1e3),this.draw(t)},this.setHeight=function(t){t||(t=8e3),this.draw(!1,t)},this.setDimensions=function(t,e){t||(t=1e3),e||(e=1e3),this.draw(t,e)},this.initializeDimensions=function(){this.canvas.width?(this.originalWidth=this.canvas.width,this.width=this.canvas.width):this.width?(this.originalWidth=this.width,this.canvas.width=this.width):(this.width=600,this.originalWidth=this.width,this.canvas.width=this.width),this.canvas.height?(this.originalHeight=this.canvas.height,this.height=this.canvas.height):this.height?(this.originalHeight=this.height,this.canvas.height=this.height):(this.height=600,this.originalHeight=this.height,this.canvas.height=this.height),this.top=this.margin,this.title&&(this.top+=this.titleHeight+this.margin,this.subtitle&&(this.top+=this.subtitleHeight+this.margin)),this.left=this.margin,this.right=this.margin,this.bottom=this.margin,this.x=this.width-(this.leftMargin+this.left+this.rightMargin+this.right),this.y=this.height-(this.topMargin+this.top+this.bottomMargin+this.bottom)},this.initializeDimensions()},CanvasXpress.prototype.initPlotUtils=function(){this.setVideoControls=function(){if(this.isVideo){var t=this;if("undefined"!=typeof _V_&&_V_.autoSetupTimeout){var e=_V_(this.target+"-cX-Video"),i=this.$(this.target+"-cX-Video");if(e&&i&&(i.style.position="absolute",i.style.background="transparent",this.video=i.childNodes[0],this.video.style.display="hidden",this.video.style.zIndex=-1,this.video.playbackRate=this.videoPlaybackRate,t.addEvtListener(this.video,"loadeddata",function(){t.addEvtListener(t.video,"play",t.videoPlay,!1)},!1),this.videoAutoplay)){e.play();var s=function(){this.play=function(){4==t.video.readyState&&(t.copyVideo(t.video,t.ctx,t.width,t.height),clearInterval(e))};var e=setInterval(this.play,30)};s.call()}}else setTimeout(function(){t.setVideoControls()},100)}},this.drawCanvasBox=function(t){this.canvasBox&&("Network"!=this.graphType||t)&&this.rectangle(0,0,this.width-1,this.height-1,!1,this.canvasBoxColor,"open")},this.drawPlotWindow=function(){if(this.backgroundType.match("window")){this.disableGradientTransparency();var t=this.marginLeft+this.offsetX,e=this.marginTop+this.offsetY;"windowGradient2"==this.backgroundType||"windowSolidGradient"==this.backgroundType?(this.ctx.save(),"horizontal"==this.backgroundWindowGradientOrientation?this.setLinearGradient(t+this.left,e,t+this.left+this.x,e,this.backgroundWindowGradient1Color,this.backgroundWindowGradient2Color):this.setLinearGradient(t,e+this.top,t,e+this.top+this.y,this.backgroundWindowGradient1Color,this.backgroundWindowGradient2Color),this.ctx.fillRect(t+this.left,e+this.top,this.x,this.y)):this.rectangle(t+this.left,e+this.top,this.x,this.y,this.backgroundWindow,this.backgroundWindow),this.enableGradientTransparency()}},this.maskArea=function(t){this.disableGradientTransparency();var e,i=function(t,e,i,s){this.ctx.fillRect(t,e,i,s)},s=this.marginLeft+this.offsetX,a=this.marginTop+this.offsetY,r=this.outlineWidth+1,h=[0,0,this.width,this.marginTop],n=[0,0,this.marginLeft,this.height],o=[0,this.height-this.marginBottom,this.width,this.marginBottom],l=[this.width-this.marginRight,0,this.marginRight,this.height],d=t?[s,a,this.left,this.top-r]:[s,a,this.left+this.x+this.right,this.top-r],c=t?[s,a+this.top+this.y,this.left-r,this.bottom]:[s,a,this.left-r,this.top+this.y+this.bottom],p=t?[s+this.left+this.x,a+this.top+this.y+r,this.right,this.bottom]:[s,a+this.top+this.y+r,this.left+this.x+this.right,this.bottom],g=t?[s+this.left+this.x+r,a,this.right,this.top]:[s+this.left+this.x+r,a,this.right,this.top+this.y+this.bottom],u=[h,n,o,l,d,c,p,g];if("image"==this.backgroundType||"windowImage"==this.backgroundType){this.ctx.save(),this.ctx.translate(0,0);for(var m=0;m<u.length;m++)u[m].unshift(CanvasXpress.cacheImages[this.backgroundImage]);e=this.drawImage}else if("solid"==this.backgroundType||"window"==this.backgroundType||"windowSolidGradient"==this.backgroundType||"video"==this.backgroundType){for(var m=0;m<u.length;m++)u[m].push(this.background),u[m].push(this.background);e=this.rectangle}else this.setLinearGradient(0,0,0,this.height,this.backgroundGradient1Color,this.backgroundGradient2Color),e=i;this.marginTop&&e.apply(this,h),this.marginLeft&&e.apply(this,n),this.marginBottom&&e.apply(this,o),this.marginRight&&e.apply(this,l),e.apply(this,d),e.apply(this,c),e.apply(this,p),e.apply(this,g),("image"==this.backgroundType||"windowImage"==this.backgroundType)&&this.ctx.restore(),this.enableGradientTransparency()},this.maskPlotArea=function(){this.maskArea()},this.maskTreeArea=function(){this.maskArea(!0)},this.setTrees=function(){this.showSmpDendrogram&&this.data.t.smps&&(this.smpDendrogram={},this.smpDendrogram.data=[],this.smpDendrogram.nodes=[],this.smpDendrogram.idxs=[],this.smpDendrogram.heights=[],this.parseNewick(this.data.t.smps,"smpDendrogram")),this.showVarDendrogram&&this.data.t.vars&&(this.varDendrogram={},this.varDendrogram.data=[],this.varDendrogram.nodes=[],this.varDendrogram.idxs=[],this.varDendrogram.heights=[],this.parseNewick(this.data.t.vars,"varDendrogram"))},this.setOverlayColors=function(){var t=0;if(this.smpOverlays.length>0&&!this.isGroupedData){this.smpOverlayColors||(this.smpOverlayColors={});for(var e=0;e<this.smpOverlays.length;e++){var i=this.smpOverlays[e];if(this.smpOverlayColors[i]||(this.smpOverlayColors[i]={}),this.smpOverlayRecycleColors&&(t=0),this.data.x.hasOwnProperty(i))if(this.isNumeric(this.data.x[i],!0))for(var s=this.range(this.data.x[i],!0),a=0;a<this.smpIndices.length;a++){var r=this.smpIndices[a],h=this.data.x[i][r],n=isNaN(h)?this.missingDataColor:this.getHeatmapColor(s[0],s[1],h);this.smpOverlayColors[i][h.toString()]=n}else for(var a=0;a<this.smpIndices.length;a++){var r=this.smpIndices[a],o=this.data.x[i][r];this.smpOverlayColors[i][o]||(this.smpOverlayColors[i][o]=this.colors[t%this.colors.length],t++)}}}if(t=0,this.varOverlays.length>0&&"Heatmap"==this.graphType){this.varOverlayColors||(this.varOverlayColors={});for(var e=0;e<this.varOverlays.length;e++){var i=this.varOverlays[e];if(this.varOverlayColors[i]||(this.varOverlayColors[i]={}),this.varOverlayRecycleColors&&(t=0),this.data.z.hasOwnProperty(i))if(this.isNumeric(this.data.z[i],!0))for(var s=this.range(this.data.z[i],!0),a=0;a<this.varIndices.length;a++){var r=this.varIndices[a],h=this.data.z[i][r],n=isNaN(h)?this.missingDataColor:this.getHeatmapColor(s[0],s[1],h);this.varOverlayColors[i][h.toString()]=n}else for(var a=0;a<this.varIndices.length;a++){var r=this.varIndices[a],o=this.data.z[i][r];this.varOverlayColors[i][o]||(this.varOverlayColors[i][o]=this.colors[t%this.colors.length],t++)}}}},this.setOverlayFont=function(){var t=Math.min(this.overlayScaleFontFactor*this.overlayFontSize,this.maxTextSize);t=parseInt(Math.max(t,this.minTextSize)),this.overlayFont=t+"Pt "+this.fontName},this.setValidDataColorShapeSize=function(){for(var t=["color","shape","size"],e=0;e<t.length;e++)this[t[e]+"By"]&&(!this.data.x||this.data.x[this[t[e]+"By"]]||!this.data.z||this.data.z[this[t[e]+"By"]]||this.isMultidimensionalHeatmap||(this[t[e]+"By"]=!1));!this.shapeBy&&!this.sizeBy||this.colorBy||this.isMultidimensionalHeatmap?this.shapeBy||this.sizeBy||"variable"!=this.colorBy||(this.colorBy=!1):this.colorBy="variable"},this.parseNewick=function(t,e){for(var i=t.split(/,/),s=0,a=0,r=0,h=1,n=0,o=0,l=0,d=0,c=0;c<i.length;c++){var p=i[c],g=p.split(/:(?=[0-9\.]+)/),u=g.shift();u=u.replace(/[\(\)]/g,""),this.useSmpVarIndexOnClustering?(this[e].nodes.push("smpDendrogram"==e?this.data.y.smps[u]:this.data.y.vars[u]),this[e].idxs.push(u)):(this[e].nodes.push(u),this[e].idxs.push("smpDendrogram"==e?this.getSampleIndices(u):this.getVariableIndices(u)));for(var m=0;m<g.length;m++){var f=g[m].replace(/[\(\)]/g,"");o=Math.max(o,f),this[e].heights.push(f)}this[e].max=o;var v=i[c].split("");a=0;for(var m=0;m<v.length;m++)"("==v[m]&&(s++,a++),")"==v[m]&&(s--,a--);d+=a,this[e].data.push(r>s?[h,r,a,d]:[h,s,a,d]),r=s,l=Math.max(l,r),n+=a,h++}if(this[e].unit=o>0?l*this.dendrogramSpace/o:0,this[e].depth=l,n>0?alert("Dude! Malformed newick tree. There are "+n+" additional right parenthesis!"):0>n&&alert("Dude! Malformed newick tree. There are "+Math.abs(n)+" additional left parenthesis!"),"varDendrogram"==e)if(this.varIndicesStart<0)this[e].nodes.length!=this.data.y.vars.length?(alert("Dude! The length of the variable nodes in the dendrogram ("+this[e].nodes.length+") is different to that one in the data ("+this.data.y.vars.length+"). This ain't gonna work!"),this.showVarDendrogram=!1):this[e].nodes.length!=this.varIndices.length?(alert("Ooops! Cannot show dendrogram with "+this[e].nodes.length+" nodes when only "+this.varIndices.length+" variables are visible."),this.showVarDendrogram=!1):this.varIndices=this[e].idxs;else{var x=this.varIndicesStart+this.varIndices.length;this.varIndices=[];for(var c=this.varIndicesStart;x>c;c++)this.varIndices.push(this[e].idxs[c])}else if(this.smpIndicesStart<0)this[e].nodes.length!=this.data.y.smps.length?(alert("Dude! The length of the sample nodes in the dendrogram ("+this[e].nodes.length+") is different to that one in the data ("+this.data.y.smps.length+"). This ain't gonna work!"),this.showSmpDendrogram=!1):this[e].nodes.length!=this.smpIndices.length?(alert("Ooops! Cannot show dendrogram with "+this[e].nodes.length+" nodes when only "+this.smpIndices.length+" samples visible."),this.showSmpDendrogram=!1):this.smpIndices=this[e].idxs;else{var x=this.smpIndicesStart+this.smpIndices.length;this.smpIndices=[];for(var c=this.smpIndicesStart;x>c;c++)this.smpIndices.push(this[e].idxs[c])}}},CanvasXpress.prototype.initGeneralUtils=function(){this.modifyObjectArray=function(t,e,i){var s=this[i];if(e){var a={},r=[];if(this.isArray(t))for(var h=0;h<t.length;h++)a[t[h]]=1;else a[t]=1;for(var h=0;h<s.length;h++)a.hasOwnProperty(s[h])||r.push(s[h]);this[i]=r}else if(this.isArray(t))for(var h=0;h<t.length;h++)s.push(t[h]);else s.push(t)},this.getObjectArray=function(t){var e={};if(t&&this.isArray(t))for(var i=0;i<t.length;i++)e[t[i]]=1;return e},this.isInArray=function(t,e){if(e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length)for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1},this.isArray=function(t){return t&&!t.propertyIsEnumerable("length")&&"object"==typeof t&&"number"==typeof t.length?!0:!1},this.isObject=function(t){return t instanceof Object},this.toArray=function(t){return this.isArray(t)?t:[t]},this.getKeys=function(t){var e=[];if(this.isObject(t))for(var i in t)e.push(i);return e},this.getUniqueKeys=function(t){var e={};if(this.isArray(t)&&(t=this.getObjectArray(t)),this.isObject(t))for(var i in t)e[i]=!0;return this.getKeys(e)},this.toNumber=function(t,e){var i=[],s=this.isArray(t);t=this.toArray(t);for(var a=0;a<t.length;a++)i.push(e?parseFloat(t[a]):parseInt(t[a]));return s?i:i[0]},this.cloneObject=function(t){if(null==t||"object"!=typeof t)return t;var e=new t.constructor;for(var i in t)e[i]=this.cloneObject(t[i]);return e},this.isSameObject=function(t,e){if(t===e)return!0;if("object"!=typeof t||"object"!=typeof e)return!1;for(var i in t)if(t[i]!==e[i]){if(void 0===e[i]||typeof t[i]!=typeof e[i])return!1;if(!this.isSameObject(t[i],e[i]))return!1}for(var i in e)if(void 0===t[i])return!1;return!0}},CanvasXpress.prototype.initConfigUtils=function(){this.getPixelImage=function(){return navigator.onLine?this.imageDir+"canvasXpress.gif":this.path?this.path+"canvasXpress.gif":void alert("Dude! I couldn't find canvasXpress.js")},this.drawTitle=function(){var t,e,i;this.title&&(e=this.titleHeight/2,t=this.scaleTextToFont(this.title,this.titleHeight-e,this.width),this.drawText(this.title,this.width/2,this.marginTop+this.titleHeight/2,t,this.titleColor,"center","middle"),this.subtitle&&(i=this.subtitleHeight/4,t=this.scaleTextToFont(this.subtitle,this.subtitleHeight-i,this.x),this.drawText(this.subtitle,this.width/2,this.marginTop+this.titleHeight+this.subtitleHeight/2,t,this.subtitleColor,"center","middle")))},this.drawCitation=function(t,e,i){if(this.citation){var s=this.citationFont;t||(t=this.width-this.margin),e||(e=this.height-this.margin),i&&(s=this.citationFontSize*this.citationScaleFontFactor*i+"Pt "+this.fontName),this.drawText(this.citation,t,e,s,this.citationColor,"right","bottom")}},this.drawSelectedBackgroundLabel=function(t,e,i,s){"name"==this.selectDataMode&&this.isInSelectedDataPoints(t,e)&&(lab=this.selectDataModeDescription&&this.data.z&&this.data.z[this.selectDataModeDescription]?this.data.z[this.selectDataModeDescription][t]||this.data.y.vars[t]:this.data.y.vars[t],this.drawText(lab,i,s,this.varLabelFont,this.foreground,"center","middle"))},this.drawSelectedBackground=function(t,e,i,s,a,r,h,n,o){"area"==this.selectDataMode&&this.isInSelectedDataPoints(t,e)&&this.drawShape(i,s,a,r+12,h+12,this.selectedBackgroundColor,this.foreground,"closed",n,1,o)},this.isInSelectedDataPoints=function(t,e){if(this.isSelectDataPoints&&this.selectDataPoint[t]){if("var"==this.broadcastType)return!0;if(this.selectDataPoint[t].hasOwnProperty(e))return!0}return!1},this.isVisibleSelectedDataPoint=function(t,e){if(this.isSelectDataPoints&&this.hideDataPoint.length>0&&this.hideDataPoint[t]){if("var"==this.broadcastType)return!1;if(this.hideDataPoint[t].hasOwnProperty(e))return!1}return!0},this.getVarColor=function(t){if(this.isArray(this.highlightVar)){for(var e=0;e<this.highlightVar.length;e++)if(this.highlightVar[e]==t)return this.varHighlightColor}else if(this.highlightVar==t)return this.varHighlightColor;return this.varLabelColor},this.getSmpColor=function(t){if(this.isArray(this.highlightSmp)){for(var e=0;e<this.highlightSmp.length;e++)if(this.highlightSmp[e]==t)return this.smpHighlightColor}else if(this.highlightSmp==t)return this.smpHighlightColor;return this.smpLabelColor},this.getNodeColor=function(t,e){if(this.isArray(this.highlightNode)){for(var i=0;i<this.highlightNode.length;i++)if(this.highlightNode[i]==t)return this.nodeHighlightColor}else if(this.highlightNode==t)return this.nodeHighlightColor;return this.selectNode.hasOwnProperty(t)?this.nodeHighlightColor:e?e:this.nodeFontColor},this.getTechnicalIndicatorColor=function(t){return this[t.toLowerCase()+"Color"]?this[t.toLowerCase()+"Color"]:"rgb(255,255,0)"},this.setPieData=function(t,e){for(var i={no:0,idso:[],ids:[],data:{},oprc:0,tot:this.sum(t)},s=0;s<t.length;s++){var a=e?this.varIndices[s]:s,r=t[a]/i.tot;i.data[a]=r,s>=this.maxPieSectors-1?(i.oprc+=r,i.idso.push(a),i.no++):i.ids.push(a)}return i.no&&i.ids.push(-1),i},this.drawPie=function(t,e,i,s,a){var r=function(){for(var e=0;e<t.ids.length;e++)if(isNaN(t.data[e]))return!1;return!0},h=this.startPieSectors?this.startPieSectors*Math.PI/180%360:0,n="inside"==this.pieSegmentLabels?s-s/3:s+s/10,o=0,l=this.layoutComb?this.smpIndices[0]:this.xAxisIndices?this.xAxisIndices[0]:0,d=this.ctx.lineWidth;if(r()){for(var c,p,g=0;g<t.ids.length;g++){var u=t.ids[g],m=u>-1?t.data[u]:t.oprc,f=g%this.colors.length;c=parseFloat(null!=p?p:2*Math.PI*o-h),p=parseFloat(c+2*Math.PI*m);var v=(c+p)/2,x=(p-c)/32,y=null!=this.transparency?this.validateColor(this.colors[f],this.transparency):this.colors[f];this.gradient?this.setRadialGradient(e,i,1.3*s,y):this.ctx.fillStyle=y,this.ctx.beginPath(),this.ctx.lineWidth=this.pieSegmentSeparation,this.ctx.strokeStyle="separated"==this.pieType?this.background:"solid"==this.pieType?this.foreground:this.foreground,this.showShadow&&(this.ctx.shadowOffsetX=this.shadowOffsetX,this.ctx.shadowOffsetY=this.shadowOffsetY,this.ctx.shadowBlur=this.shadowBlur,this.ctx.shadowColor=this.shadowColor),this.ctx.moveTo(e,i),this.ctx.arc(e,i,s,c,p,!1),this.ctx.lineTo(e,i),this.ctx.closePath(),this.ctx.fill(),"Network"!=this.graphType&&this.ctx.stroke(),this.showShadow&&(this.ctx.restore(),this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=0,this.ctx.shadowColor=this.background);var b=e-Math.sin(v-Math.PI/2)*n,w=i+Math.cos(v-Math.PI/2)*n;if("Network"!=this.graphType&&this.showPieValues&&this.drawText(sprintf("%."+this.pieSegmentPrecision+"f",100*m)+"%",b,w,this.axisTickFont,this.axisTickColor,"center","middle"),a){b=e+s*Math.cos(c),w=i+s*Math.sin(c);for(var C=["poly",e,i,b,w],h=c,T=0;32>T;T++)h+=x,b=e+s*Math.cos(h),w=i+s*Math.sin(h),C.push(b),C.push(w);C.push(e),C.push(i),u>-1?this.addArea(C,[u,l]):(t.idso.push(l),this.addArea(C,t.idso))}o+=m}this.ctx.lineWidth=d}},this.drawBarPlot=function(t,e,i,s,a,r,h,n,o,l,d,c){var p,g,u,m,f=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,v=this.seriesSeparationFactor/2,x=a/2;if("vertical"==l)for(var y=0;y<t.length;y++)p=(t[y]-o)*h-n,isNaN(p)||(this.addArea(this.rectangle(i+v,s,a-this.seriesSeparationFactor,-p,d[y],d[y],"closed",!1,!1,!0),c[y]),u=s-p,m=i+x,e[y]&&!isNaN(e[y])&&(g=e[y]/2*h-n/2,this.errorBar(m,u,m,u+g,-x,f),this.errorBar(m,u,m,u-g,-x,f)),this.showDataValues&&this.drawText(t[y],m,s-(g+this.overlayFontSize),this.overlayFont,d[y],"center","bottom")),i+=r;else for(var y=0;y<t.length;y++)p=(t[y]-o)*h-n,isNaN(p)||(this.addArea(this.rectangle(i,s+v,p,a-this.seriesSeparationFactor,d[y],d[y],"closed",!1,!1,!0),c[y]),u=i+p,m=s+x,e[y]&&!isNaN(e[y])&&(g=e[y]/2*h-n/2,this.errorBar(u,m,u+g,m,x,f),this.errorBar(u,m,u-g,m,x,f)),this.showDataValues&&this.drawText(t[y],t+g+this.overlayFontSize,m,this.overlayFont,d[y],"left","middle")),s+=r},this.drawLinePlot=function(t,e,i,s,a,r,h,n,o,l,d,c){var p,g,u,m,f,v,x,y=a/2,b=a/3,w=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,C=t.length-1,T=[[],[]];if("vertical"==o){g=i,u=i+r;for(var D=1;D<t.length;D++)p=D-1,f=s-(t[p]-n)*h,v=s-(t[D]-n)*h,isNaN(f)||(this.lineDecoration&&d&&this.addArea(this.drawShape(d,g,f,b,b,l,w,"closed",!1,!1,!0),c[p]),e[p]&&!isNaN(e[p])&&(x=e[p]/2*h,this.errorBar(g,f,g,f+x,-y,l),this.errorBar(g,f,g,f-x,-y,l)),"spline"==this.lineType&&(T[0].push(g),T[1].push(f))),"spline"==this.lineType||isNaN(f)||isNaN(v)?"spline"==this.lineType&&isNaN(v)&&(this.drawLine("spline",T[0],T[1],!1,!1,l,this.lineThickness),T=[[],[]]):this.drawLine("line",g,f,u,v,l,this.lineThickness,"butt",!1,!1,!0),g+=r,u+=r;isNaN(v)||(this.lineDecoration&&d&&this.addArea(this.drawShape(d,g,v,b,b,l,w,"closed",!1,!1,!0),c[C]),e[C]&&!isNaN(e[C])&&(x=e[C]/2*h,this.errorBar(g,v,g,v+x,-y,l),this.errorBar(g,v,g,v-x,-y,l)),"spline"==this.lineType&&(T[0].push(g),T[1].push(v))),"spline"==this.lineType&&this.drawLine("spline",T[0],T[1],!1,!1,l,this.lineThickness)}else{f=s,v=s+r;for(var D=1;D<t.length;D++)p=D-1,g=i+(t[p]-n)*h,u=i+(t[D]-n)*h,isNaN(g)||(this.lineDecoration&&d&&this.addArea(this.drawShape(d,g,f,b,b,l,w,"closed",!1,!1,!0),c[p]),e[p]&&!isNaN(e[p])&&(m=e[p]/2*h,this.errorBar(g,f,g+m,f,y,l),this.errorBar(g,f,g-m,f,y,l)),"spline"==this.lineType&&(T[0].push(g),T[1].push(f))),"spline"==this.lineType||isNaN(g)||isNaN(u)?"spline"==this.lineType&&isNaN(u)&&(this.drawLine("spline",T[0],T[1],!1,!1,l,this.lineThickness),T=[[],[]]):this.drawLine("line",u,v,g,f,l,this.lineThickness,"butt",!1,!1,!0),f+=r,v+=r;isNaN(u)||(this.lineDecoration&&d&&this.addArea(this.drawShape(d,u,f,b,b,l,w,"closed",!1,!1,!0),c[C]),e[C]&&!isNaN(e[C])&&(m=e[C]/2*h,this.errorBar(u,f,u+m,f,-y,l),this.errorBar(u,f,u-m,f,-y,l)),"spline"==this.lineType&&(T[0].push(u),T[1].push(f))),"spline"==this.lineType&&this.drawLine("spline",T[0],T[1],!1,!1,l,this.lineThickness)}},this.drawStackedPlot=function(t,e,i,s,a,r,h,n,o,l){if("vertical"==n)for(var d=0;d<t.length;d++){var c=a?100*t[d]/r*h:t[d]*h;this.addArea(this.rectangle(e,i,s,-c,o[d]),l[d]),i-=c}else for(var d=0;d<t.length;d++){var c=a?100*t[d]/r*h:t[d]*h;this.addArea(this.rectangle(e,i,c,s,o[d]),l[d]),e+=c}},this.drawAreaPlot=function(t,e,i,s,a,r,h,n,o,l,d,c){
var p=l?"open":"close",g=t.length-1,u=l&&"rect"==this.lineType?"path":"rect"==this.lineType?"polygon":"spline",m=[],f=[];if("vertical"==this.graphOrientation){for(var v=0;v<t[0].length;v++)m[v]=i;for(var v=0;v<t.length;v++){for(var x=e,y=l?[]:[e],b=l?[]:[i],w=0;w<t[0].length;w++){if(isNaN(t[v][w]))l||(y.push(x-r),b.push(i)),l&&"spline"==this.lineType?this.addArea(this.drawLine(u,y,b,!1,!1,d[v],this.lineThickness),c[v]):this.addArea(this.drawShape(u,y,b,!1,!1,d[v],d[v],p),c[v]),y=l?[]:[x+r],b=l?[]:[i];else{var C=(t[v][w]-n)*h;y.push(x),this.areaIsCumulative?(b.push(m[w]-C),m[w]-=C):b.push(i-C)}x+=r}l||(y.push(e+s),b.push(i)),f.push([y,b])}}else{for(var v=0;v<t[0].length;v++)m[v]=e;for(var v=0;v<t.length;v++){for(var x=i,y=l?[]:[e],b=l?[]:[i],w=0;w<t[0].length;w++){if(isNaN(t[v][w]))l||(y.push(e),b.push(x-r)),l&&"spline"==this.lineType?this.addArea(this.drawLine(u,y,b,!1,!1,d[v],this.lineThickness),c[v]):this.addArea(this.drawShape(u,y,b,!1,!1,d[v],d[v],p),c[v]),y=l?[]:[e],b=l?[]:[x+r];else{var C=(t[v][w]-n)*h;b.push(x),this.areaIsCumulative?(y.push(m[w]+C),m[w]+=C):y.push(e+C)}x+=r}l||(y.push(e),b.push(i+a)),f.push([y,b])}}for(;g>=0;){var T=f.pop();l&&"spline"==this.lineType?this.addArea(this.drawLine(u,T[0],T[1],!1,!1,d[g],this.lineThickness),c[g]):this.addArea(this.drawShape(u,T[0],T[1],!1,!1,d[g],d[g],p),c[g]),g--}},this.drawBoxPlot=function(t,e,i,s,a,r,h,n,o,l,d){var c=function(t){return"vertical"==n?i-(t-h)*r:e+(t-h)*r},p=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,g=this.seriesSeparationFactor/2,u=s/2,m=s/this.boxPlotOutliersRatio;if("vertical"==n)for(var f=0;f<t.length;f++){for(var v=e+u,x=[],y=0;5>y;y++)x.push(c(t[f][y]));if(this.addArea(this.rectangle(e+g,x[2],s-this.seriesSeparationFactor,x[3]-x[2],o[f],o[f],l,!1,!1,!0),d[f]),this.drawLine("line",e+g,x[4],e+(s-g),x[4],p,!1,"butt",!1,!1,!0),this.errorBar(v,x[2],v,x[0],-u,p),this.errorBar(v,x[3],v,x[1],-u,p),t[f][5])for(var y=0;y<t[f][5].length;y++)this.drawShape("sphere",v,c(t[f][5][y]),m,m,o[f],p,l,!1,!1,!0);e+=a}else for(var f=0;f<t.length;f++){for(var v=i+u,x=[],y=0;5>y;y++)x.push(c(t[f][y]));if(this.addArea(this.rectangle(x[2],i+g,x[3]-x[2],s-this.seriesSeparationFactor,o[f],o[f],l,!1,!1,!0),d[f]),this.drawLine("line",x[4],i+g,x[4],i+(s-g),p,!1,"butt",!1,!1,!0),this.errorBar(x[2],v,x[0],v,u,p),this.errorBar(x[3],v,x[1],v,u,p),t[f][5])for(var y=0;y<t[f][5].length;y++)this.drawShape("sphere",c(t[f][5][y]),v,m,m,o[f],p,l,!1,!1,!0);i+=a}},this.drawCandlestickPlot=function(t,e,i,s,a,r,h,n,o,l,d){var c=function(t){return"vertical"==o?i-(t-h)*r:e+(t-h)*r},p=(this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,s/2);if("vertical"==o)for(var g=0;g<t.length;g++){for(var u=e+p,m=[],f=0;f<t[g].length;f++)m.push(c(t[g][f]));n?m[0]>m[1]?(this.addArea(this.rectangle(e,m[0],s,m[1]-m[0],!1,l,"open",!1,!1,!0),d[g]),this.drawLine("line",u,m[1],u,m[2],l,!1,"butt",!1,!1,!0),this.drawLine("line",u,m[3],u,m[0],l,!1,"butt",!1,!1,!0)):(this.addArea(this.rectangle(e,m[0],s,m[1]-m[0],l,l,"closed",!1,!1,!0),d[g]),this.drawLine("line",u,m[3],u,m[1],l,!1,"butt",!1,!1,!0),this.drawLine("line",u,m[0],u,m[2],l,!1,"butt",!1,!1,!0)):this.addArea(this.rectangle(e,m[0],s,i-m[0],l,l,"closed",!1,!1,!0),d[g]),e+=a}else for(var g=0;g<t.length;g++){for(var u=i+p,m=[],f=0;f<t[g].length;f++)m.push(c(t[g][f]));n?m[1]>m[0]?(this.addArea(this.rectangle(m[0],i,m[1]-m[0],s,!1,l,"open",!1,!1,!0),d[g]),this.drawLine("line",m[1],u,m[2],u,l,!1,"butt",!1,!1,!0),this.drawLine("line",m[3],u,m[0],u,l,!1,"butt",!1,!1,!0)):(this.addArea(this.rectangle(m[0],i,m[1]-m[0],s,l,l,"closed",!1,!1,!0),d[g]),this.drawLine("line",m[3],u,m[1],u,l,!1,"butt",!1,!1,!0),this.drawLine("line",m[0],u,m[2],u,l,!1,"butt",!1,!1,!0)):this.addArea(this.rectangle(e,i,m[0]-e,s,l,l,"closed",!1,!1,!0),d[g]),i+=a}},this.drawDotPlot=function(t,e,i,s,a,r,h,n,o,l,d,c,p,g,u){var m,f,v=this.dotPlotJitter?Math.ceil(Math.log(5*this.varIndices.length)/Math.LN10):1,x=this.dotPlotJitter?g/v:0,y=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground;if("vertical"==d){this.dotPlotJitter&&(i-=g/2);for(var b=0;b<t.length;b++){for(var w=0,C=0;C<t[b].length;C++)m=s-(t[b][C]-o)*n,isNaN(m)||(this.addArea(this.drawShape(p[b][C],i+w,m,l[b][C],l[b][C],c[b][C],y,"closed",!1,!1,!0),u[b][C]),e[b]&&!isNaN(e[b])&&(f=e[b]/2*n,this.errorBar(i+w,m,i+w,m+f,-r,c[b][C]),this.errorBar(i+w,m,i+w,m-f,-r,c[b][C])),w=this.dotPlotJitter&&(C+1)%(v+1)?w+x:0);i+=h}}else{this.dotPlotJitter&&(s-=g/2);for(var b=0;b<t.length;b++){for(var w=0,C=0;C<t[b].length;C++)m=i+(t[b][C]-o)*n,isNaN(m)||(this.addArea(this.drawShape(p[b][C],m,s+w,l[b][C],l[b][C],c[b][C],y,"closed",!1,!1,!0),u[b][C]),e[b]&&!isNaN(e[b])&&(f=e[b]/2*n,this.errorBar(m,s+w,m+f,s+w,r,c[b][C]),this.errorBar(m,s+w,m-f,s+w,r,c[b][C])),w=this.dotPlotJitter&&(C+1)%(v+1)?w+x:0);s+=h}}},this.drawHeatmap=function(t,e,i,s,a,r,h,n,o,l){for(var d=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,c="Network"==this.graphType?!1:!0,p=0;p<t.length;p++){var g=t[p],u=isNaN(g)?this.missingDataColor:this.getHeatmapColor(r,h,g);d=n?u:d,this.addArea(this.rectangleHM(e,i,s,a,u,d,"closed",!1,!1,c),o[p],l),this.showDataValues&&this.drawText(g,e+s-2,i+a-2,this.overlayFont,this.foreground,"right","bottom"),e+=s}}},CanvasXpress.prototype.init3dUtils=function(){this.set3DRotation=function(){var t,e=0,i=0;"Network"==this.graphType?(e=null!=this.maxRotate?this.maxRotate:360,i=null!=this.minRotate?this.minRotate:360):("Scatter3D"==this.graphType||this.is3DPlot)&&(e=null!=this.maxRotate?this.maxRotate:90,i=null!=this.minRotate?this.minRotate:0),this.xRotate>e&&(this.xRotate=e),this.xRotate<0&&(this.xRotate=i),this.yRotate>e&&(this.yRotate=e),this.yRotate<0&&(this.yRotate=i),this.zRotate>e&&(this.zRotate=e),this.zRotate<0&&(this.zRotate=i),this.xRotate>0?(t=180/this.xRotate,this.ry=Math.PI/t):this.ry=0,this.yRotate>0?(t=180/this.yRotate,this.rx=Math.PI/t):this.rx=0,this.zRotate>0?(t=180/this.zRotate,this.rz=Math.PI/t):this.rz=0},this.set3DParams=function(){this.perspective=1.5*this.x,this.lenX=this.x/4*this.zoom*this.x3DRatio,this.lenY=this.x/4*this.zoom*this.y3DRatio,this.lenZ=this.x/4*this.zoom*this.z3DRatio,null!=this.padX&&this.padX||(this.padX=this.x/2),null!=this.padY&&this.padY||(this.padY=this.y/2),null!=this.padZ&&this.padZ||(this.padZ=this.y/2)},this.get3DTransfrom=function(t,e,i){var s,a,r,h=[];return a=e,r=i,e=a*Math.cos(this.rx)-r*Math.sin(this.rx),i=a*Math.sin(this.rx)+r*Math.cos(this.rx),s=t,r=i,t=r*Math.sin(this.ry)+s*Math.cos(this.ry),i=r*Math.cos(this.ry)-s*Math.sin(this.ry),s=t,a=e,t=s*Math.cos(this.rz)-a*Math.sin(this.rz),e=s*Math.sin(this.rz)+a*Math.cos(this.rz),t*=this.perspective/(i+this.perspective),e*=this.perspective/(i+this.perspective),i*=this.perspective/(i+this.perspective),h.push(t+this.padX),h.push(e+this.padY),h.push(i+this.padZ),h},this.backfaceCulling=function(t){for(var e=[],i=[],s=[],a=[],r=[],h=[],n=0;n<t.length;n++){var o=t[n][1][0]-t[n][0][0],l=t[n][1][1]-t[n][0][1],d=t[n][1][2]-t[n][0][2],c=t[n][2][0]-t[n][0][0],p=t[n][2][1]-t[n][0][1],g=t[n][2][2]-t[n][0][2],u=t[n][3][0]-t[n][0][0],m=t[n][3][1]-t[n][0][1],f=t[n][3][2]-t[n][0][2];e[n]=l*g-p*d,i[n]=c*d-o*g,s[n]=o*p-c*l,a[n]=m*g-p*f,r[n]=c*f-u*g,h[n]=u*p-c*m}return[e,i,s,a,r,h]}},CanvasXpress.prototype.initLegendUtils=function(){this.drawDecorationData=function(){var t=this.marginLeft+this.offsetX+this.left,e=this.marginTop+this.offsetY+this.top,i=this.data.d;if(this.showDecorations&&i){if(i.nlfit)for(var s,a,r,h,n,o=this.varIndices,l=0;l<i.nlfit.length;l++){var d=[],c=[],p=l%this.colors.length,g=this.transformValue(this.yAxisTransform,i.nlfit[l].param[0]),u=this.transformValue(this.yAxisTransform,i.nlfit[l].param[1]),m=i.nlfit[l].param[2],f=i.nlfit[l].param[3],v=1==this.xAxisIndices.length?this.xAxisIndices[0]:this.xAxisIndices[l],x=this.getDataForSmpGrpAtIndex(v);"percentile"==this.xAxisTransform&&(s=this.range(x),r=s[0],a=s[1]),o.sort(function(t,e){return x[t]-x[e]}),p=i.nlfit[l].color?i.nlfit[l].color:this.colors[p];for(var y=0;y<o.length;y++){var b,w=o[y],C=this.getDataAtPos(w,v),T=[];if(C>0){if(y>0){var D=o[y-1],S=this.getDataAtPos(D,v);if(S>0)for(var A=(C-S)/this.functionIntervals,k=0;k<this.functionIntervals;k++)T.push(S),S+=A}else T=[C];for(var k=0;k<T.length;k++)b="reg"==i.nlfit[l].type?g+(u-g)/(1+m/Math.pow(T[k],f)):g+(u-g)/(1+Math.pow(T[k]/m,f)),this.xAxisTransform&&(T[k]="percentile"==this.xAxisTransform?this.percentile(r,a,T[k]):this.transformValue(this.xAxisTransform,T[k])),h=t+(T[k]-this.xAxisMin)*this.xAxisUnit,n=e+this.y-(b-this.yAxisMin)*this.yAxisUnit,d.push(h),c.push(n)}}d.length>0&&(this.drawShape("path",d,c,!1,!1,p,p,"open"),b="reg"==i.nlfit[l].type?g+(u-g)/(1+m/Math.pow(m,f)):g+(u-g)/(1+Math.pow(m/m,f)),this.xAxisTransform&&(m="percentile"==this.xAxisTransform?this.percentile(r,a,m):this.transformValue(this.xAxisTransform,m)),h=t+(m-this.xAxisMin)*this.xAxisUnit,n=e+this.y-(b-this.yAxisMin)*this.yAxisUnit,this.drawLine("dottedLine",t,n,h,n,p),this.drawLine("dottedLine",h,n,h,e+this.y,p))}if(i.line)for(var l=0;l<i.line.length;l++)if(i.line[l].x||i.line[l].y){var h,n,M,I,p=i.line[l].color?i.line[l].color:this.colors[l%this.colors.length],L=i.line[l].type?i.line[l].type:"line",C=i.line[l].x?i.line[l].x:!1,b=i.line[l].y?i.line[l].y:!1;C&&(h=t+C*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,n=e,M=h,I=n+this.y,this.drawLine(L,h,n,M,I,p)),b&&(h=t,n=e+b*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,M=h+this.x,I=n,this.drawLine(L,h,n,M,I,p))}if(i.lines)for(var l=0;l<i.lines.length;l++){var h,n,M,I,N=!0,L=i.lines[l].type||"line",z=i.lines[l].color,F=i.lines[l].value||0,P=i.lines[l].label||!1;"vertical"==this.graphOrientation?(h=this.marginLeft+this.offsetX+this.left,M=h+this.x,n=this.marginTop+this.offsetY+this.top+this.y-(F-this.xAxisMin)*this.xAxisUnit,I=n,N=n<=this.marginTop+this.offsetY+this.top+this.y&&n>=this.marginTop+this.offsetY+this.top?!0:!1):(h=this.marginLeft+this.offsetX+this.left+(F-this.xAxisMin)*this.xAxisUnit,M=h,n=this.marginTop+this.offsetY+this.top,I=n+this.y,N=h<=this.marginLeft+this.offsetX+this.left+this.x&&this.marginLeft+this.offsetX+this.left?!0:!1),N&&(P&&("vertical"==this.graphOrientation?this.drawText(P,M-this.margin,I-this.margin,this.decorationFont,this.decorationColor,"right","bottom"):this.drawText(P,M+this.margin,I-this.margin,this.decorationFont,this.decorationColor,"left","bottom")),this.drawLine(L,h,n,M,I,z))}if(i.reg)for(var l=0;l<i.reg.length;l++)if(i.reg[l].slope&&i.reg[l].intercept){var p=l%this.colors.length,L=i.reg[l].type?i.reg[l].type:"line",B=i.reg[l].slope,X=i.reg[l].intercept,h=(i.reg[l].cor,i.reg[l].start?i.reg[l].start:this.xAxisMin),n=B*h+X,M=i.reg[l].end?i.reg[l].end:this.xAxisMax,I=B*M+X;h=t+h*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,n=e+this.y-n*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,M=t+M*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,I=e+this.y-I*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,p=i.reg[l].color?i.reg[l].color:this.colors[p],this.drawLine(L,h,n,M,I,p)}if(i.nor)for(var l=0;l<i.nor.length;l++)if(i.nor[l].mu&&i.nor[l].sigma){var h,n,R=[],V=[],E=[],p=l%this.colors.length,O=i.nor[l].mu,G=i.nor[l].sigma,H=i.nor[l].start?i.nor[l].start:i.nor[l].yAxis?this.yAxisMin:this.xAxisMin,W=i.nor[l].end?i.nor[l].end:i.nor[l].yAxis?this.yAxisMax:this.xAxisMax,$=120;if(O>H&&W>O){var S,Y,U,q,A=(O-H)/$,j=G*G,Z=1/Math.sqrt(2*Math.PI*j);if(i.nor[l].yAxis){U=i.nor[l].max?i.nor[l].max*this.xAxisUnit:this.x-this.x*this.axisExtension,q=U/Z,S=H;for(var y=0;$-1>y;y++)Y=Z*Math.pow(Math.E,-Math.pow(S-O,2)/j),E.push([S,Y]),h=t+Y*q,n=e+this.y-S*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,R.push(h),V.push(n),S+=A;A=(W-O)/$,S=O;for(var y=0;$>y;y++)Y=Z*Math.pow(Math.E,-Math.pow(S-O,2)/j),E.push([S,Y]),h=t+Y*q,n=e+this.y-S*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,R.push(h),V.push(n),S+=A;p=i.nor[l].color?i.nor[l].color:this.colors[p],this.drawShape("path",R,V,!1,!1,p,p,"open")}else{U=i.nor[l].max?i.nor[l].max*this.yAxisUnit:this.y-this.y*this.axisExtension,q=U/Z,S=H;for(var y=0;$-1>y;y++)Y=Z*Math.pow(Math.E,-Math.pow(S-O,2)/j),E.push([S,Y]),h=t+S*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,n=e+this.y-Y*q,R.push(h),V.push(n),S+=A;A=(W-O)/$,S=O;for(var y=0;$>y;y++)Y=Z*Math.pow(Math.E,-Math.pow(S-O,2)/j),E.push([S,Y]),h=t+S*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,n=e+this.y-Y*q,R.push(h),V.push(n),S+=A;p=i.nor[l].color?i.nor[l].color:this.colors[p],this.drawShape("path",R,V,!1,!1,p,p,"open")}}}if(i.area)for(var l=0;l<i.area.length;l++)if(i.area[l].type&&i.area[l].x&&i.area[l].y&&i.area[l].size&&this.isValidShape(i.area[l].type)){var h=t+i.area[l].x*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,n=e+this.y-i.area[l].y*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,p=i.area[l].color?i.area[l].color:this.colors[l%this.colors.length];this[i.area[l].type](h,n,p,i.area[l].size)}if(i.kaplanMeier)for(var h,n,M,I,K,_,J,Q,p,l=0;l<i.kaplanMeier.length;l++){p=i.kaplanMeier[l].color,h=t,n=e+this.y-this.yAxisUnit+this.yAxisMin*this.yAxisUnit,M=t+i.kaplanMeier[l].data.times[0]*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,I=e+this.y-i.kaplanMeier[l].data.data[0][3]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,_=e+this.y-i.kaplanMeier[l].data.data[0][4]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,Q=e+this.y-i.kaplanMeier[l].data.data[0][5]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,this.drawLine("line",h,n,M,n,p),this.drawLine("line",M,n,M,I,p),this.drawLine("dottedLine",h,n,M,n,p,.5),this.drawLine("dottedLine",M,n,M,_,p,.5),this.drawLine("dottedLine",h,n,M,n,p,.5),this.drawLine("dottedLine",M,n,M,Q,p,.5);for(var y=1;y<i.kaplanMeier[l].data.times.length;y++)h=t+i.kaplanMeier[l].data.times[y-1]*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,n=e+this.y-i.kaplanMeier[l].data.data[y-1][3]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,K=e+this.y-i.kaplanMeier[l].data.data[y-1][4]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,J=e+this.y-i.kaplanMeier[l].data.data[y-1][5]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,M=t+i.kaplanMeier[l].data.times[y]*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,I=e+this.y-i.kaplanMeier[l].data.data[y][3]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,_=e+this.y-i.kaplanMeier[l].data.data[y][4]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,Q=e+this.y-i.kaplanMeier[l].data.data[y][5]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,this.drawLine("line",h,n,M,n,p),this.drawLine("line",M,n,M,I,p),this.drawLine("dottedLine",h,K,M,K,p,.5),this.drawLine("dottedLine",M,K,M,_,p,.5),this.drawLine("dottedLine",h,J,M,J,p,.5),this.drawLine("dottedLine",M,J,M,Q,p,.5)}}},this.setDecorationLegendDimension=function(){this.legendDecorationWidth=0,this.legendDecorationHeight=0;var t=this.data.d;if(this.showDecorations&&t){var e=this.getFontPt(this.decorationFont),i=0,s=0,i=0,a=0;if(t.nlfit){for(var r=this.measureText(sprintf("%90s","X"),this.decorationFont)+5*this.margin,h=0,n=0;n<t.nlfit.length;n++){var o=this.measureText(t.nlfit[n].label,this.decorationFont);h=Math.max(o,h)}i=this.margin+h+this.margin+r+this.margin,this.legendDecorationHeight=t.nlfit.length*e*2+e+this.margin}if(t.line){for(var h=0,n=0;n<t.line.length;n++){var o=this.measureText(t.line[n].label,this.decorationFont);h=Math.max(o,h)}a=this.margin+h+this.margin,this.legendDecorationHeight+=t.line.length*e*2+this.margin}if(t.reg){for(var r=this.measureText(sprintf("%45s","X"),this.decorationFont)+2*this.margin,h=0,n=0;n<t.reg.length;n++){var o=this.measureText(t.reg[n].label,this.decorationFont);h=Math.max(o,h)}s=this.margin+h+this.margin+r+this.margin,this.legendDecorationHeight+=t.reg.length*e*2+e+this.margin}if(t.nor){for(var r=this.measureText(sprintf("%30s","X"),this.decorationFont)+1*this.margin,h=0,n=0;n<t.nor.length;n++){var o=this.measureText(t.nor[n].label,this.decorationFont);h=Math.max(o,h)}i=this.margin+h+this.margin+r+this.margin,this.legendDecorationHeight+=t.nor.length*e*2+e+this.margin}if(t.area){for(var h=0,n=0;n<t.area.length;n++){var o=this.measureText(t.area[n].label,this.decorationFont);h=Math.max(o,h)}a=this.margin+h+this.margin,this.legendDecorationHeight+=t.area.length*e*2+this.margin}if(t.kaplanMeier){for(var h=0,n=0;n<t.kaplanMeier.length;n++){var o=this.measureText(t.kaplanMeier[n].label,this.decorationFont);h=Math.max(o,h)}a=this.margin+h+this.margin,this.legendDecorationHeight+=t.kaplanMeier.length*e*2+this.margin}this.legendDecorationWidth=Math.max(Math.max(Math.max(i,s),i),a)}},this.drawDecorationLegend=function(){var t=this.marginLeft+this.offsetX+this.left,e=this.marginTop+this.offsetY+this.top,i=this.data.d;if(this.showDecorations&&i){var s,a,r,h,n=this.getFontPt(this.decorationFont),o=this.measureText(sprintf("%15s","X"),this.decorationFont);if(a="right"==this.decorationsPosition?e+n/2+(this.y-this.legendDecorationHeight)/2:e+this.y+this.bottom-this.legendDecorationHeight,i.nlfit){h=6*this.margin+6*o,r="right"==this.decorationsPosition?t+this.x+this.right+o-h:t+(this.x-this.legendDecorationWidth)/2+(this.legendDecorationWidth-h)+o,s=r,this.drawText("Min",s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,this.drawText("Max",s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,this.drawText("EC50",s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,this.drawText("Slope",s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,this.drawText("p-Val",s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,this.drawText("F-Chg",s,a,this.decorationFont,this.decorationsColor,"right","middle"),a+=n+n;for(var l=0;l<i.nlfit.length;l++){var d=l%this.colors.length;d=i.nlfit[l].color?i.nlfit[l].color:this.colors[d],s=r+this.margin-o,"ScatterBubble2D"==this.graphType&&"right"==this.decorationsPosition&&this.zAxisShow&&(s+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.nlfit[l].label,s,a,this.decorationFont,d,"right","middle"),s=r;for(var c=0;6>c;c++){var p=i.nlfit[l].param[c];2>c?p=this.transformValue(this.yAxisTransform,p):2==c&&(p=this.transformValue(this.xAxisTransform,p)),this.drawText(this.formatNumber(p),s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin}a+=n+n}}if(i.line)for(var l=0;l<i.line.length;l++)if(i.line[l].label){s="right"==this.decorationsPosition?t+this.x+this.margin:t+(this.x-this.legendDecorationWidth)/2+this.margin;for(var l=0;l<i.line.length;l++){var d=i.line[l].color?i.line[l].color:this.colors[l%this.colors.length];"ScatterBubble2D"==this.graphType&&"right"==this.decorationsPosition&&this.zAxisShow&&(s+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.line[l].label,s,a,this.decorationFont,d,"left","middle"),a+=n+n}}if(i.reg){h=3*this.margin+3*o,r="right"==this.decorationsPosition?t+this.x+this.right-h:t+(this.x-this.legendDecorationWidth)/2+(this.legendDecorationWidth-h)+o,s=r,this.drawText("Slope",s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,this.drawText("Int",s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,this.drawText("Cor",s,a,this.decorationFont,this.decorationsColor,"right","middle"),a+=n+n;for(var l=0;l<i.reg.length;l++){var d=l%this.colors.length;d=i.reg[l].color?i.reg[l].color:this.colors[d],s=r+this.margin-o,"ScatterBubble2D"==this.graphType&&"right"==this.decorationsPosition&&this.zAxisShow&&(s+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.reg[l].label,s,a,this.decorationFont,d,"right","middle"),s=r,this.drawText(this.formatNumber(i.reg[l].slope),s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,this.drawText(this.formatNumber(i.reg[l].intercept),s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,this.drawText(this.formatNumber(i.reg[l].cor),s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,a+=n+n}}if(i.nor){h=2*this.margin+2*o,r="right"==this.decorationsPosition?t+this.x+this.right-h:t+(this.x-this.legendDecorationWidth)/2+(this.legendDecorationWidth-h)+o,s=r,this.drawText("Mu",s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,this.drawText("Sigma",s,a,this.decorationFont,this.decorationsColor,"right","middle"),a+=n+n;for(var l=0;l<i.nor.length;l++){var d=l%this.colors.length;d=i.nor[l].color?i.nor[l].color:this.colors[d],s=r+this.margin-o,"ScatterBubble2D"==this.graphType&&"right"==this.decorationsPosition&&this.zAxisShow&&(s+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.nor[l].label,s,a,this.decorationFont,d,"right","middle"),s=r,this.drawText(this.formatNumber(i.nor[l].mu),s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,this.drawText(this.formatNumber(i.nor[l].sigma),s,a,this.decorationFont,this.decorationsColor,"right","middle"),s+=o+this.margin,a+=n+n}}if(i.area)for(var l=0;l<i.area.length;l++)if(i.area[l].label){s="right"==this.decorationsPosition?t+this.x+this.margin:t+(this.x-this.legendDecorationWidth)/2+this.margin;var d=i.area[l].color?i.area[l].color:this.colors[l%this.colors.length];"ScatterBubble2D"==this.graphType&&"right"==this.decorationsPosition&&this.zAxisShow&&(s+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.area[l].label,s,a,this.decorationFont,d,"left","middle"),a+=n+n}if(i.kaplanMeier)for(var l=0;l<i.kaplanMeier.length;l++)if(i.kaplanMeier[l].label){s="right"==this.decorationsPosition?t+this.x+this.margin:t+(this.x-this.legendDecorationWidth)/2+this.margin;var d=i.kaplanMeier[l].color?i.kaplanMeier[l].color:this.colors[l%this.colors.length];"ScatterBubble2D"==this.graphType&&"right"==this.decorationsPosition&&this.zAxisShow&&(s+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.kaplanMeier[l].label,s,a,this.decorationFont,d,"left","middle"),a+=n+n}}},this.setLegendFont=function(){this.autoScaleFont?(this.legendFont=parseInt(this.layoutComb?Math.max(this.minTextSize,this.legendFontSize-Math.min(this.layoutRows,this.layoutCols))*this.legendScaleFontFactor:this.legendFontSize*this.legendScaleFontFactor),this.legendFont=this.legendFont+"Pt "+this.fontName):this.legendFont=parseInt(this.legendFontSize)+"Pt "+this.fontName},this.setSampleLegendDimension=function(){if(this.legendSampleWidth=0,this.legendSampleHeight=0,this.xAxisIndices.length!=this.yAxisIndices.length||this.xAxisIndices.length>1){var t=this.getFontPt(this.legendFont),e=0;if(this.xAxisIndices.length==this.yAxisIndices.length&&this.xAxisIndices.length>1)for(var i=0;i<this.xAxisIndices.length;i++){var s=this.measureText(this.shortenText(this.xAxis[i],this.maxSmpStringLen)+" vs "+this.shortenText(this.yAxis[i],this.maxSmpStringLen),this.legendFont);e=Math.max(s,e)}else this.xAxisIndices.length>this.yAxisIndices.length?e=this.measureText(this.shortenText(this.getMaxText(this.xAxis),this.maxSmpStringLen)+" vs "+this.shortenText(this.yAxis[0],this.maxSmpStringLen),this.legendFont):this.yAxisIndices.length>this.xAxisIndices.length&&(e=this.measureText(this.shortenText(this.getMaxText(this.yAxis),this.maxSmpStringLen)+" vs "+this.shortenText(this.xAxis[0],this.maxSmpStringLen),this.legendFont));this.legendSampleWidth=t-1+e+3*this.margin,this.legendSampleHeight=Math.max(this.xAxisIndices.length,this.yAxisIndices.length)*(t+this.margin)+this.margin}},this.drawSampleLegend=function(t,e){var i=t,s=e,a=this.getFontPt(this.legendFont),r=(a-1)/2;e+=this.margin+r,this.legendBox&&(this.disableGradientTransparency(),this.rectangle(i,s,this.legendSampleWidth,this.legendSampleHeight,this.legendBackgroundColor,this.legendBoxColor),this.enableGradientTransparency());for(var h=Math.max(this.xAxisIndices.length,this.yAxisIndices.length),n=0;h>n;n++){{var o=n%this.colors.length,l=0,d=this.xAxisIndices.length==this.yAxisIndices.length?this.yAxis[n]:this.xAxisIndices.length>this.yAxisIndices.length?this.yAxis[0]:this.xAxis[0],c=this.shortenText(this.xAxisIndices.length<this.yAxisIndices.length?this.yAxis[n]:this.xAxis[n],this.maxSmpStringLen)+" vs "+this.shortenText(d,this.maxSmpStringLen),p=t+r+this.margin;e+r+this.margin}this.colorBy?this.drawShape(this.shapes[l],p,e,a-1,a-1,this.background,this.colors[o],"open"):this.drawShape(this.shapes[l],p,e,a-1,a-1,this.colors[o],this.foreground,"closed"),this.drawText(c,p+r+this.margin,e,this.legendFont,this.legendColor,"left","middle"),e+=a+this.margin}this.legendBox&&this.rectangle(i,s,this.legendSampleWidth,this.legendSampleHeight,!1,this.legendBoxColor,"open"),this.addArea(["rect",i,s,i+this.legendSampleWidth,s+this.legendSampleHeight],[-1],"-legend-sample")},this.setVariableLegendDimension=function(){if(this.legendVariableWidth=0,this.legendVariableHeight=0,this.colorBy&&"variable"==this.colorBy||this.shapeBy&&"variable"==this.shapeBy||this.sizeBy&&"variable"==this.sizeBy){var t=this.sizeBy&&"variable"==this.sizeBy?Math.max(this.sizes[this.varIndices.length-1],this.getFontPt(this.legendFont)):this.getFontPt(this.legendFont),e=this.shortenText(this.maxVarNameStr,this.maxVarStringLen);this.legendVariableWidth=t-1+this.measureText(e,this.legendFont)+3*this.margin,this.legendVariableHeight=this.varIndices.length*(t+this.margin)+this.margin}},this.drawVariableLegend=function(t,e){if(this.colorBy&&"variable"==this.colorBy||this.shapeBy&&"variable"==this.shapeBy||this.sizeBy&&"variable"==this.sizeBy){var i=t,s=e,a=this.getFontPt(this.legendFont),r=this.sizeBy&&"variable"==this.sizeBy?Math.max(this.sizes[this.varIndices.length-1],a):a;e+=this.margin+r/2,this.legendBox&&this.legendBackgroundColor&&(this.disableGradientTransparency(),this.rectangle(i,s,this.legendVariableWidth,this.legendVariableHeight,this.legendBackgroundColor,this.legendBoxColor),this.enableGradientTransparency());for(var h=0;h<this.varIndices.length;h++){var n=this.varIndices[h],o=this.colorBy&&"variable"==this.colorBy?h%this.colors.length:0,l=this.shapeBy&&"variable"==this.shapeBy?h%this.shapes.length:0,d=this.sizeBy&&"variable"==this.sizeBy?this.sizes[h%this.sizes.length]:r,c=r/2,p=t+c+this.margin,g=(e+c+this.margin,this.shortenText(this.data.y.vars[n],this.maxVarStringLen));this.colorBy&&"variable"!=this.colorBy?this.drawShape(this.shapes[l],p,e,d,d,this.background,this.foreground,"open"):this.drawShape(this.shapes[l],p,e,d,d,this.colors[o],this.foreground,"closed"),this.drawText(g,p+c+this.margin,e,this.legendFont,this.legendColor,"left","middle"),e+=r+this.margin}this.legendBox&&this.rectangle(i,s,this.legendVariableWidth,this.legendVariableHeight,!1,this.legendBoxColor,"open"),this.addArea(["rect",i,s,i+this.legendVariableWidth,s+this.legendVariableHeight],[-1],"-legend-variable")}},this.setColorLegendIndicatorDimensions=function(){if(this.colorBy||this.outlineBy){{this.heatmapType.split("-")}this.legendColorIndicatorWidth=this.heatmapType.split("-").length>1?parseInt(512*this.indicatorWidth/this.indicatorBins)+4*this.margin+1:parseInt(256*this.indicatorWidth/this.indicatorBins)+4*this.margin+1,this.legendColorIndicatorHeight=this.indicatorHeight+3*this.margin+this.getFontPt(this.legendFont),this.legendColorIndicatorHeight+=this.getFontPt(this.legendFont)+this.margin}},this.getHeatmapColor=function(t,e,i){var s=Math.abs(t);t+=s,e+=s,i+=s;var a=((i-t)*this.heatmapColors.length/(e-t)).toFixed()-1;return this.heatmapColors[Math.max(0,Math.min(this.heatmapColors.length-1,a))]},this.drawColorIndicator=function(t,e,i,s,a,r){if(this.colorBy||this.outlineBy||r){var h=t,n=e,o=this.indicatorHeight,l=this.indicatorHeight;if("bottom"==this.indicatorsPosition){for(var d=0;d<this.heatmapColors.length;d++){var c=null!=this.transparency?this.addColorTransparency(this.heatmapColors[d],this.transparency):this.heatmapColors[d];this.drawLine("line",t,e,t,e+l,c,this.indicatorWidth+.5),t+=this.indicatorWidth}t=h-this.indicatorWidth/2,e+=l+this.margin,this.drawText(sprintf("%."+a+"f",i),t,e,this.legendFont,this.legendColor,"center","top"),t+=this.heatmapColors.length*this.indicatorWidth/2-this.indicatorWidth/2,this.heatmapColors.length>=10&&this.drawText(sprintf("%."+a+"f",(i+s)/2),t,e,this.legendFont,this.legendColor,"center","top"),r||this.drawText(this.colorBy||this.outlineBy,t,e+this.margin+this.getFontPt(this.legendFont),this.legendFont,this.legendColor,"center","top"),t+=this.heatmapColors.length*this.indicatorWidth/2-this.indicatorWidth/2,this.drawText(sprintf("%."+a+"f",s),t,e,this.legendFont,this.legendColor,"center","top"),this.addArea(["rect",h-2*this.margin,n-this.margin,t+2*this.margin,e+this.getFontPt(this.legendFont)+this.margin],[-1],"-legend-indicator-color")}else{for(var d=0;d<this.heatmapColors.length;d++){var c=null!=this.transparency?this.addColorTransparency(this.heatmapColors[d],this.transparency):this.heatmapColors[d];this.drawLine("line",t,e,t+o,e,c,this.indicatorWidth+.5),e-=this.indicatorWidth}t+=o+this.margin,e=n-this.indicatorWidth/2,this.drawText(sprintf("%."+a+"f",i),t,e,this.legendFont,this.legendColor,"center","top",-Math.PI/2),e-=this.heatmapColors.length*this.indicatorWidth/2-this.indicatorWidth/2,this.heatmapColors.length>=10&&this.drawText(sprintf("%."+a+"f",(i+s)/2),t,e,this.legendFont,this.legendColor,"center","top",-Math.PI/2),r||this.drawText(this.colorBy||this.outlineBy,t+this.margin+this.getFontPt(this.legendFont),e,this.legendFont,this.legendColor,"center","top",-Math.PI/2),e-=this.heatmapColors.length*this.indicatorWidth/2-this.indicatorWidth/2,this.drawText(sprintf("%."+a+"f",s),t,e,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.addArea(["rect",h-this.margin,e-2*this.margin,t+this.margin+this.getFontPt(this.legendFont),n+2*this.margin],[-1],"-legend-indicator-color")}}},this.setShapeLegendIndicatorDimensions=function(){this.shapeBy&&(this.legendShapeIndicatorWidth=10*(this.indicatorHeight+this.margin)+2*this.margin,this.legendShapeIndicatorHeight=this.indicatorHeight+3*this.margin+this.getFontPt(this.legendFont),this.legendShapeIndicatorHeight+=this.getFontPt(this.legendFont)+this.margin)},this.drawShapeIndicator=function(t,e,i,s,a){if(this.shapeBy){var r=t,h=e,n=this.indicatorHeight/2,o=t,l=e;if("bottom"==this.indicatorsPosition){for(var d=0;10>d;d++)this.drawShape("pie"+d,o,l+this.margin,this.indicatorHeight,this.indicatorHeight,this.background,this.foreground,"open"),o+=this.indicatorHeight+n;t=r,e+=this.indicatorHeight+this.margin,this.drawText(sprintf("%."+a+"f",i),t,e,this.legendFont,this.legendColor,"center","top"),t+=7*this.indicatorHeight,this.drawText(sprintf("%."+a+"f",(i+s)/2),t,e,this.legendFont,this.legendColor,"center","top"),this.drawText(this.shapeBy||shapeBy,t,e+this.margin+this.getFontPt(this.legendFont),this.legendFont,this.legendColor,"center","top"),t+=7*this.indicatorHeight,this.drawText(sprintf("%."+a+"f",s),t,e,this.legendFont,this.legendColor,"center","top"),this.addArea(["rect",r-2*this.margin,h-this.margin,t+2*this.margin,e+this.getFontPt(this.legendFont)+this.margin],[-1],"-legend-indicator-shape")}else{for(var d=0;10>d;d++)this.drawShape("pie"+d,o+this.margin,l,this.indicatorHeight,this.indicatorHeight,this.background,this.foreground,"open"),l-=this.indicatorHeight+n;t+=this.indicatorHeight+this.margin,e=h,this.drawText(sprintf("%."+a+"f",i),t,e,this.legendFont,this.legendColor,"center","top",-Math.PI/2),e-=7*this.indicatorHeight,this.heatmapColors.length>=10&&this.drawText(sprintf("%."+a+"f",(i+s)/2),t,e,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.drawText(this.shapeBy||shapeBy,t+this.margin+this.getFontPt(this.legendFont),e,this.legendFont,this.legendColor,"center","top",-Math.PI/2),e-=7*this.indicatorHeight,this.drawText(sprintf("%."+a+"f",s),t,e,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.addArea(["rect",r-this.margin,e-2*this.margin,t+this.margin+this.getFontPt(this.legendFont),h+2*this.margin],[-1],"-legend-indicator-shape")}}},this.setSizeLegendIndicatorDimensions=function(){if(this.sizeBy){for(var t=0,e=this.indicatorHeight/2,i=0;10>i;i++)t+=this.sizes[i]+e;this.legendSizeIndicatorWidth=t-(this.sizes[0]+this.sizes[9])+4*this.margin,this.legendSizeIndicatorHeight=this.sizes[9]+3*this.margin+this.getFontPt(this.legendFont),
this.legendSizeIndicatorHeight+=this.getFontPt(this.legendFont)+this.margin}},this.drawSizeIndicator=function(t,e,i,s,a){if(this.sizeBy){var r=t,h=e,n=this.indicatorHeight/2,o=this.sizes[9],l=t,d=e,c=t,p=e;if("bottom"==this.indicatorsPosition){for(var g=0;10>g;g++){var u=this.sizes[g];this.drawShape("sphere",l,d+o/2,u,u,this.background,this.foreground,"open"),l+=u+n,4>g?c+=u+n:5==g&&(c+=(u+n)/2)}e+=o+this.margin,this.drawText(sprintf("%."+a+"f",i),r,e,this.legendFont,this.legendColor,"center","top"),this.drawText(sprintf("%."+a+"f",(i+s)/2),c,e,this.legendFont,this.legendColor,"center","top"),this.drawText(this.sizeBy,r+this.legendSizeIndicatorWidth/2,e+this.margin+this.getFontPt(this.legendFont),this.legendFont,this.legendColor,"center","top"),this.drawText(sprintf("%."+a+"f",s),l-(o+n),e,this.legendFont,this.legendColor,"center","top"),this.addArea(["rect",r-2*this.margin,h-this.margin,l-o+2*this.margin,e+this.getFontPt(this.legendFont)+this.margin],[-1],"-legend-indicator-size")}else{for(var g=0;10>g;g++){var u=this.sizes[g];this.drawShape("sphere",l+o/2,d,u,u,this.background,this.foreground,"open"),d-=u+n,4>g?p-=u+n:5==g&&(p-=(u+n)/2)}t+=o+this.margin,this.drawText(sprintf("%."+a+"f",i),t,e,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.drawText(sprintf("%."+a+"f",(i+s)/2),t,p,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.drawText(this.sizeBy,t+this.margin+this.getFontPt(this.legendFont),h-this.legendSizeIndicatorWidth/2,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.drawText(sprintf("%."+a+"f",s),t,d+(o+n),this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.addArea(["rect",r-this.margin,d+(o+n)-2*this.margin,t+this.margin+this.getFontPt(this.legendFont),h+2*this.margin],[-1],"-legend-indicator-size")}}},this.setDataColorShapeSizeIndicatorDimensions=function(){this.setColorLegendIndicatorDimensions(),this.setShapeLegendIndicatorDimensions(),this.setSizeLegendIndicatorDimensions()},this.getDiameterLegend=function(){return this.x>=600?10:this.x>=400?8:this.x>=200?6:4},this.setColorLegendDimensions=function(t){if(this.legendColorWidth=0,this.legendColorHeight=0,this.colorBy||this.outlineBy){var e,i,s=this.getDiameterLegend();t?(e=this.colorBy||this.outlineBy,i=t):this.data.x&&this.data.x.hasOwnProperty(this.colorBy)?(e=this.setMaxSmpStringAnnt(this.colorBy),i=this.legendColorsMax):this.data.z&&this.data.z.hasOwnProperty(this.colorBy)?(e=this.setMaxVarStringAnnt(this.colorBy),i=this.setMaxVarStringLabel(this.colorBy)):(e=0,i=0);var a=this.measureText(e,this.legendFont),r=this.measureText(i,this.legendFont)+s+this.margin;this.legendColorWidth=Math.max(a,r)+2*this.margin;var h=this.getFontPt(this.legendFont),n=Math.max(s,h);this.legendColorHeight=this.legendColorsN*(n+this.margin)+h+3*this.margin}},this.drawColorLegend=function(t,e){if(this.outlineBy&&this.isMultidimensionalHeatmap||this.colorBy&&(this.data.x&&this.data.x.hasOwnProperty(this.colorBy)||this.data.z&&this.data.z.hasOwnProperty(this.colorBy))){var i=this.getDiameterLegend(),s=this.getFontPt(this.legendFont),a=s/2,r=e+this.margin+a,h=Math.max(i,s);this.disableGradientTransparency(),this.legendBackgroundColor?this.rectangle(t,e,this.legendColorWidth,this.legendColorHeight,this.legendBackgroundColor,this.legendBoxColor):this.rectangle(t,e,this.legendColorWidth,this.legendColorHeight,!1,this.legendBoxColor,"open"),this.enableGradientTransparency(),this.drawText(this.colorBy||this.outlineBy,t+this.legendColorWidth/2,r,this.legendFont,this.colorLegend,"center","middle"),r+=a+this.margin,this.drawLine("line",t,r,t+this.legendColorWidth,r,this.legendBoxColor),r+=this.margin+h/2;for(var n in this.legendColors)this.outlineBy?this.drawShape("circle",t+this.margin+i/2,r,i,i,!1,this.legendColors[n],"open",!1,2):this.drawShape("circle",t+this.margin+i/2,r,i,i,this.legendColors[n],this.foreground,"closed"),this.drawText(n,t+2*this.margin+i,r,this.legendFont,this.colorLegend,"left","middle"),r+=this.margin+h;this.addArea(["rect",t,e,t+this.legendColorWidth,e+this.legendColorHeight],[-1],"-legend-color")}},this.setShapeLegendDimensions=function(t){if(this.legendShapeWidth=0,this.legendShapeHeight=0,this.shapeBy){var e,i,s=this.getDiameterLegend();t?(e=this.shapeBy,i=t):this.data.x&&this.data.x.hasOwnProperty(this.shapeBy)?(e=this.setMaxSmpStringAnnt(this.shapeBy),i=this.legendShapesMax):this.data.z&&this.data.z.hasOwnProperty(this.shapeBy)?(e=this.setMaxVarStringAnnt(this.shapeBy),i=this.setMaxVarStringLabel(this.shapeBy)):(e=0,i=0);var a=this.measureText(e,this.legendFont),r=this.measureText(i,this.legendFont)+s+this.margin;this.legendShapeWidth=Math.max(a,r)+2*this.margin;var h=this.getFontPt(this.legendFont),n=Math.max(s,h);this.legendShapeHeight=this.legendShapesN*(n+this.margin)+h+3*this.margin}},this.drawShapeLegend=function(t,e){if(this.shapeBy&&this.isMultidimensionalHeatmap||this.shapeBy&&(this.data.x&&this.data.x.hasOwnProperty(this.shapeBy)||this.data.z&&this.data.z.hasOwnProperty(this.shapeBy))){var i=this.getDiameterLegend(),s=this.getFontPt(this.legendFont),a=s/2,r=e+this.margin+a,h=Math.max(i,s);this.disableGradientTransparency(),this.legendBackgroundColor?this.rectangle(t,e,this.legendShapeWidth,this.legendShapeHeight,this.legendBackgroundColor,this.legendBoxColor):this.rectangle(t,e,this.legendShapeWidth,this.legendShapeHeight,!1,this.legendBoxColor,"open"),this.enableGradientTransparency(),this.drawText(this.shapeBy,t+this.legendShapeWidth/2,r,this.legendFont,this.colorLegend,"center","middle"),r+=a+this.margin,this.drawLine("line",t,r,t+this.legendShapeWidth,r,this.legendBoxColor),r+=this.margin+h/2;for(var n in this.legendShapes)this.drawShape(this.legendShapes[n],t+this.margin+i/2,r,i,i,this.background,this.foreground,"closed"),this.drawText(n,t+2*this.margin+i,r,this.legendFont,this.colorLegend,"left","middle"),r+=this.margin+h;this.addArea(["rect",t,e,t+this.legendShapeWidth,e+this.legendShapeHeight],[-1],"-legend-shape")}},this.setSizeLegendDimensions=function(t){if(this.legendSizeWidth=0,this.legendSizeHeight=0,this.sizeBy){var e,i,s=this.sizes[this.legendSizesN-1];t?(e=this.sizeBy,i=t):this.data.x&&this.data.x.hasOwnProperty(this.sizeBy)?(e=this.setMaxSmpStringAnnt(this.sizeBy),i=this.legendSizesMax):this.data.z&&this.data.z.hasOwnProperty(this.sizeBy)?(e=this.setMaxVarStringAnnt(this.sizeBy),i=this.setMaxVarStringLabel(this.sizeBy)):(e=0,i=0);var a=this.measureText(e,this.legendFont),r=this.measureText(i,this.legendFont)+s+this.margin;this.legendSizeWidth=Math.max(a,r)+2*this.margin;var h=this.getFontPt(this.legendFont),n=Math.max(s,h);this.legendSizeHeight=this.legendSizesN*(n+this.margin)+h+3*this.margin}},this.drawSizeLegend=function(t,e){if(this.sizeBy&&this.isMultidimensionalHeatmap||this.sizeBy&&(this.data.x&&this.data.x.hasOwnProperty(this.sizeBy)||this.data.z&&this.data.z.hasOwnProperty(this.sizeBy))){var i=this.sizes[this.legendSizesN-1],s=this.getFontPt(this.legendFont),a=s/2,r=e+this.margin+a,h=Math.max(i,s);this.disableGradientTransparency(),this.legendBackgroundColor?this.rectangle(t,e,this.legendSizeWidth,this.legendSizeHeight,this.legendBackgroundColor,this.legendBoxColor):this.rectangle(t,e,this.legendSizeWidth,this.legendSizeHeight,!1,this.legendBoxColor,"open"),this.enableGradientTransparency(),this.drawText(this.sizeBy,t+this.legendSizeWidth/2,r,this.legendFont,this.colorLegend,"center","middle"),r+=a+this.margin,this.drawLine("line",t,r,t+this.legendSizeWidth,r,this.legendBoxColor),r+=this.margin+h/2;for(var n in this.legendSizes)this.drawShape("circle",t+this.margin+i/2,r,this.legendSizes[n],this.legendSizes[n],this.background,this.foreground,"closed"),this.drawText(n,t+2*this.margin+i,r,this.legendFont,this.colorLegend,"left","middle"),r+=this.margin+h;this.addArea(["rect",t,e,t+this.legendSizeWidth,e+this.legendSizeHeight],[-1],"-legend-size")}},this.setDataColorShapeSizeDimensions=function(){this.setColorLegendDimensions(),this.setShapeLegendDimensions(),this.setSizeLegendDimensions()},this.setDataColor=function(t){if(this.colorByType=!1,t&&this.isMultidimensionalHeatmap){var e=0,i={};if(this.dataColors=[],this.legendColors={},this.legendColorsN=0,this.isNumeric2DArray(t)){for(var s=this.setRangeDataObject(t),a=0;a<this.varIndices.length;a++)for(var r=0;r<this.smpIndices.length;r++){var h=t[this.varIndices[a]][this.smpIndices[r]],n=isNaN(h)?this.missingDataColor:this.getHeatmapColor(s[0],s[1],h);this.dataColors.push(n)}this.legendColorsN=-1,this.legendColorRange=s,this.legendColorDecs=this.getAxisDecimals(this.getAxisIncrements(s[0],s[1],this.heatmapColors.length)),this.setColorLegendIndicatorDimensions()}else{for(var o=0,a=0;a<this.varIndices.length;a++)for(var r=0;r<this.smpIndices.length;r++){var n=t[this.varIndices[a]][this.smpIndices[r]];if(!i.hasOwnProperty(n)){var l=this.measureText(n,this.legendFont);l>o&&(o=l,this.legendColorsMax=n),i[n]=e%this.colors.length,this.legendColors[n]=this.colors[i[n]],e++}this.dataColors.push(this.colors[i[n]])}this.legendColorsN=e,this.setColorLegendDimensions(this.legendColorsMax)}}else if(this.colorBy){var e=0,i={};if(this.dataColors=[],this.legendColors={},this.legendColorsN=0,this.data.x&&this.data.x.hasOwnProperty(this.colorBy)){this.colorByType="x";var d=this.isGroupedData?this.grpIndices:this.smpIndices;if(this.isNumeric(this.data.x[this.colorBy],!0)){for(var s=this.range(this.data.x[this.colorBy],!0),a=0;a<d.length;a++){var c=d[a];if(this.isGroupedData&&("Dotplot"==this.graphType||"Boxplot"==this.graphType&&this.showBoxplotOriginalData))for(var r=0;r<this.data.w.grps[c].length;r++){var h=this.data.x[this.colorBy][this.data.w.grps[c][r]],n=isNaN(h)?this.missingDataColor:this.getHeatmapColor(s[0],s[1],h);this.dataColors.push(n)}else{var h=this.isGroupedData?this.mean(this.getSmpAnnotations(this.colorBy,this.data.w.grps[a],!1,!0)):this.data.x[this.colorBy][c],n=isNaN(h)?this.missingDataColor:this.getHeatmapColor(s[0],s[1],h);this.dataColors.push(n)}}this.legendColorsN=-1,this.legendColorRange=s,this.legendColorDecs=this.getAxisDecimals(this.getAxisIncrements(s[0],s[1],this.heatmapColors.length)),this.setColorLegendIndicatorDimensions()}else{for(var o=0,a=0;a<d.length;a++){var c=d[a];if(this.isGroupedData&&("Dotplot"==this.graphType||"Boxplot"==this.graphType&&this.showBoxplotOriginalData))for(var r=0;r<this.data.w.grps[c].length;r++){var n=this.data.x[this.colorBy][this.data.w.grps[c][r]];if(!i.hasOwnProperty(n)){var l=this.measureText(n,this.legendFont);l>o&&(o=l,this.legendColorsMax=n),i[n]=e%this.colors.length,this.legendColors[n]=this.colors[i[n]],e++}this.dataColors.push(this.colors[i[n]])}else{var n=this.isGroupedData?this.getSmpAnnotations(this.colorBy,this.data.w.grps[a],!0):this.data.x[this.colorBy][c];if(!i.hasOwnProperty(n)){var l=this.measureText(n,this.legendFont);l>o&&(o=l,this.legendColorsMax=n),i[n]=e%this.colors.length,this.legendColors[n]=this.colors[i[n]],e++}this.dataColors.push(this.colors[i[n]])}}this.legendColorsN=e,this.setColorLegendDimensions()}}else if(this.data.z&&this.data.z.hasOwnProperty(this.colorBy))if(this.colorByType="z",this.isNumeric(this.data.z[this.colorBy],!1,!0)){for(var s=this.range(this.data.z[this.colorBy],!1,!0),a=0;a<this.varIndices.length;a++){var c=this.varIndices[a],h=this.data.z[this.colorBy][c];this.dataColors.push(isNaN(h)?this.missingDataColor:this.getHeatmapColor(s[0],s[1],h))}this.legendColorRange=s,this.legendColorDecs=this.getAxisDecimals(this.getAxisIncrements(s[0],s[1],this.heatmapColors.length)),this.setColorLegendIndicatorDimensions()}else{for(var a=0;a<this.varIndices.length;a++){var c=this.varIndices[a],n=this.data.z[this.colorBy][c];i.hasOwnProperty(n)||(i[n]=e%this.colors.length,this.legendColors[n]=this.colors[i[n]],e++),this.dataColors.push(this.colors[i[n]])}this.legendColorsN=e,this.setColorLegendDimensions()}else if(this.getSampleIndices(this.colorBy)>-1){e=this.getSampleIndices(this.colorBy);var s=this.getAxisRangeBySample(e);if(!this.scatterType||"function"!=this.scatterType)for(var a=0;a<this.varIndices.length;a++){var c=this.varIndices[a],h=this.getDataAtPos(c,e);this.dataColors.push(isNaN(h)?this.missingDataColor:this.getHeatmapColor(s[0],s[1],h))}this.legendColorRange=s,this.legendColorDecs=this.getAxisDecimals(this.getAxisIncrements(s[0],s[1],this.heatmapColors.length)),this.setColorLegendIndicatorDimensions()}else if("variable"==this.colorBy){for(var a=0;a<this.varIndices.length;a++){var n=a%this.colors.length;this.dataColors.push(this.colors[n])}this.setVariableLegendDimension()}else for(var a=0;a<this.varIndices.length;a++)this.dataColors.push(this.colors[0])}},this.setDataShape=function(t){if(this.shapeByType=!1,t&&this.isMultidimensionalHeatmap){var e=0,i={},s="square";if(this.dataShapes=[],this.legendShapes={},this.legendShapesN=0,this.isNumeric2DArray(t)){for(var a=this.setRangeDataObject(t),r=0;r<this.varIndices.length;r++)for(var h=0;h<this.smpIndices.length;h++){var n=t[this.varIndices[r]][this.smpIndices[h]];if(isNaN(n))this.dataShapes.push(s);else{var o=this.percentile(a[0],a[1],n),l=parseInt(o/10);l>0&&l--,this.dataShapes.push("pie"+l)}}this.legendShapeRange=a,this.legendShapeDecs=this.getAxisDecimals(this.getAxisIncrements(a[0],a[1],10)),this.setShapeLegendIndicatorDimensions()}else{for(var d=0,r=0;r<this.varIndices.length;r++)for(var h=0;h<this.smpIndices.length;h++){var l=t[this.varIndices[r]][this.smpIndices[h]];if(!i.hasOwnProperty(l)){var c=this.measureText(l,this.legendFont);c>d&&(d=c,this.legendShapesMax=l),i[l]=e%this.shapes.length,this.legendShapes[l]=this.shapes[i[l]],e++}this.dataShapes.push(this.shapes[i[l]])}this.legendShapesN=e,this.setShapeLegendDimensions(this.legendShapesMax)}}else if(this.shapeBy){var e=0,i={},s="square";if(this.dataShapes=[],this.legendShapes={},this.legendShapesN=0,this.data.x&&this.data.x.hasOwnProperty(this.shapeBy)){this.shapeByType="x";var p=this.isGroupedData?this.grpIndices:this.smpIndices;if(this.isNumeric(this.data.x[this.shapeBy],!0)){for(var a=this.range(this.data.x[this.shapeBy],!0),r=0;r<p.length;r++){var g=p[r];if(this.isGroupedData)for(var h=0;h<this.data.w.grps[g].length;h++){var n=this.data.x[this.shapeBy][this.data.w.grps[g][h]];if(isNaN(n))this.dataShapes.push(s);else{var o=this.percentile(a[0],a[1],n),l=parseInt(o/10);l>0&&l--,this.dataShapes.push("pie"+l)}}else{var n=this.data.x[this.shapeBy][g];if(isNaN(n))this.dataShapes.push(s);else{var o=this.percentile(a[0],a[1],n),l=parseInt(o/10);l>0&&l--,this.dataShapes.push("pie"+l)}}}this.legendShapeRange=a,this.legendShapeDecs=this.getAxisDecimals(this.getAxisIncrements(a[0],a[1],10)),this.setShapeLegendIndicatorDimensions()}else{for(var d=0,r=0;r<p.length;r++){var g=p[r];if(this.isGroupedData)for(var h=0;h<this.data.w.grps[g].length;h++){var l=this.data.x[this.shapeBy][this.data.w.grps[g][h]];if(!i.hasOwnProperty(l)){var c=this.measureText(l,this.legendFont);c>d&&(d=c,this.legendShapesMax=l),i[l]=e%this.shapes.length,this.legendShapes[l]=this.shapes[i[l]],e++}this.dataShapes.push(this.shapes[i[l]])}else{var l=this.data.x[this.shapeBy][g];if(!i.hasOwnProperty(l)){var c=this.measureText(l,this.legendFont);c>d&&(d=c,this.legendShapesMax=l),i[l]=e%this.shapes.length,this.legendShapes[l]=this.shapes[i[l]],e++}this.dataShapes.push(this.shapes[i[l]])}}this.legendShapesN=e,this.setShapeLegendDimensions()}}else if(this.data.z&&this.data.z.hasOwnProperty(this.shapeBy))if(this.shapeByType="z",this.isNumeric(this.data.z[this.shapeBy],!1,!0)){for(var a=this.range(this.data.z[this.shapeBy],!1,!0),r=0;r<this.varIndices.length;r++){var g=this.varIndices[r],n=this.data.z[this.shapeBy][g];if(isNaN(n))this.dataShapes.push(s);else{var o=this.percentile(a[0],a[1],n),l=parseInt(o/10);l>0&&l--,this.dataShapes.push("pie"+l)}}this.legendShapeRange=a,this.legendShapeDecs=this.getAxisDecimals(this.getAxisIncrements(a[0],a[1],10)),this.setShapeLegendIndicatorDimensions()}else{for(var r=0;r<this.varIndices.length;r++){var g=this.varIndices[r],l=this.data.z[this.shapeBy][g];i.hasOwnProperty(l)||(i[l]=e%this.shapes.length,this.legendShapes[l]=this.shapes[i[l]],e++),this.dataShapes.push(this.shapes[i[l]])}this.legendShapesN=e,this.setShapeLegendDimensions()}else if(this.getSampleIndices(this.shapeBy)>-1){e=this.getSampleIndices(this.shapeBy);for(var a=this.getAxisRangeBySample(e),r=0;r<this.varIndices.length;r++){var g=this.varIndices[r],n=this.getDataAtPos(g,e);if(isNaN(n))this.dataShapes.push(s);else{var o=this.percentile(a[0],a[1],n),l=parseInt(o/10);l>0&&l--,this.dataShapes.push("pie"+l)}}this.legendShapeRange=a,this.legendShapeDecs=this.getAxisDecimals(this.getAxisIncrements(a[0],a[1],10)),this.setShapeLegendIndicatorDimensions()}else if("variable"==this.shapeBy){for(var r=0;r<this.varIndices.length;r++){var l=r%this.shapes.length;this.dataShapes.push(this.shapes[l])}this.setVariableLegendDimension()}else for(var r=0;r<this.varIndices.length;r++)this.dataShapes.push(this.shapes[0])}},this.setDataSize=function(t){if(this.sizeByType=!1,t&&this.isMultidimensionalHeatmap){var e=0,i={};if(this.dataSizes=[],this.legendSizes={},this.legendSizesN=0,this.isNumeric2DArray(t)){for(var s=this.setRangeDataObject(t),a=0;a<this.varIndices.length;a++)for(var r=0;r<this.smpIndices.length;r++){var h=t[this.varIndices[a]][this.smpIndices[r]];if(isNaN(h))this.dataSizes.push(0);else{var n=this.percentile(s[0],s[1],h),o=parseInt(n/10);o>0&&o--,this.dataSizes.push(this.sizes[o])}}this.legendSizeRange=s,this.legendSizeDecs=this.getAxisDecimals(this.getAxisIncrements(s[0],s[1],10)),this.setSizeLegendIndicatorDimensions()}else{for(var l=0,a=0;a<this.varIndices.length;a++)for(var r=0;r<this.smpIndices.length;r++){var o=t[this.varIndices[a]][this.smpIndices[r]];if(!i.hasOwnProperty(o)){var d=this.measureText(o,this.legendFont);d>l&&(l=d,this.legendSizesMax=o),i[o]=e%this.sizes.length+3,this.legendSizes[o]=this.sizes[i[o]],e++}this.dataSizes.push(this.sizes[i[o]])}this.legendSizesN=e,this.setSizeLegendDimensions(this.legendSizesMax)}}else if(this.sizeBy){var e=0,i={};if(this.dataSizes=[],this.legendSizes={},this.legendSizesN=0,this.data.x&&this.data.x.hasOwnProperty(this.sizeBy)){this.sizeByType="x";var c=this.isGroupedData?this.grpIndices:this.smpIndices;if(this.isNumeric(this.data.x[this.sizeBy],!0)){for(var s=this.range(this.data.x[this.sizeBy],!0),a=0;a<c.length;a++){var p=c[a];if(this.isGroupedData)for(var r=0;r<this.data.w.grps[p].length;r++){var h=this.data.x[this.sizeBy][this.data.w.grps[p][r]];if(isNaN(h))this.dataSizes.push(0);else{var n=this.percentile(s[0],s[1],h),o=parseInt(n/10);o>0&&o--,this.dataSizes.push(this.sizes[o])}}else{var h=this.data.x[this.sizeBy][p];if(isNaN(h))this.dataSizes.push(0);else{var n=this.percentile(s[0],s[1],h),o=parseInt(n/10);o>0&&o--,this.dataSizes.push(this.sizes[o])}}}this.legendSizeRange=s,this.legendSizeDecs=this.getAxisDecimals(this.getAxisIncrements(s[0],s[1],10)),this.setSizeLegendIndicatorDimensions()}else{for(var l=0,a=0;a<c.length;a++){var p=c[a];if(this.isGroupedData)for(var r=0;r<this.data.w.grps[p].length;r++){var o=this.data.x[this.sizeBy][this.data.w.grps[p][r]];if(!i.hasOwnProperty(o)){var d=this.measureText(o,this.legendFont);d>l&&(l=d,this.legendSizesMax=o),i[o]=e%this.sizes.length+3,this.legendSizes[o]=this.sizes[i[o]],e++}this.dataSizes.push(this.sizes[i[o]])}else{var o=this.isGroupedData?this.getSmpAnnotations(this.sizeBy,this.data.w.grps[a],!0):this.data.x[this.sizeBy][p];if(!i.hasOwnProperty(o)){var d=this.measureText(o,this.legendFont);d>l&&(l=d,this.legendSizesMax=o),i[o]=e%this.sizes.length+3,this.legendSizes[o]=this.sizes[i[o]],e++}this.dataSizes.push(this.sizes[i[o]])}}this.legendSizesN=e,this.setSizeLegendDimensions()}}else if(this.data.z&&this.data.z.hasOwnProperty(this.sizeBy))if(this.sizeByType="z",this.isNumeric(this.data.z[this.sizeBy],!1,!0)){for(var s=this.range(this.data.z[this.sizeBy],!1,!0),a=0;a<this.varIndices.length;a++){var p=this.varIndices[a],h=this.data.z[this.sizeBy][p];if(isNaN(h))this.dataSizes.push(0);else{var n=this.percentile(s[0],s[1],h),o=parseInt(n/10);o>0&&o--,this.dataSizes.push(this.sizes[o])}}this.legendSizeRange=s,this.legendSizeDecs=this.getAxisDecimals(this.getAxisIncrements(s[0],s[1],10)),this.setSizeLegendIndicatorDimensions()}else{for(var a=0;a<this.varIndices.length;a++){var p=this.varIndices[a],o=this.data.z[this.sizeBy][p];i.hasOwnProperty(o)||(i[o]=e%this.sizes.length,this.legendSizes[o]=this.sizes[i[o]],e++),this.dataSizes.push(this.sizes[i[o]])}this.legendSizesN=e,this.setSizeLegendDimensions()}else if(this.getSampleIndices(this.sizeBy)>-1){e=this.getSampleIndices(this.sizeBy);for(var s=this.getAxisRangeBySample(e),a=0;a<this.varIndices.length;a++){var p=this.varIndices[a],h=this.getDataAtPos(p,e);if(isNaN(h))this.dataSizes.push(0);else{var n=this.percentile(s[0],s[1],h),o=parseInt(n/10);o>0&&o--,this.dataSizes.push(this.sizes[o])}}this.legendSizeRange=s,this.legendSizeDecs=this.getAxisDecimals(this.getAxisIncrements(s[0],s[1],10)),this.setSizeLegendIndicatorDimensions()}else if("variable"==this.sizeBy){for(var a=0;a<this.varIndices.length;a++){var o=a%this.sizes.length;this.dataSizes.push(this.sizes[o])}this.setVariableLegendDimension()}else for(var a=0;a<this.varIndices.length;a++)this.dataSizes.push(this.scatterPointSize)}},this.setDataColorShapeSize=function(){this.resetLegends(),this.setLegendFont(),this.isMultidimensionalHeatmap?(this.outlineByData&&this.data.y[this.outlineByData]&&this.setDataColor(this.data.y[this.outlineByData]),this.shapeByData&&this.data.y[this.shapeByData]&&this.setDataShape(this.data.y[this.shapeByData]),this.sizeByData&&this.data.y[this.sizeByData]&&this.setDataSize(this.data.y[this.sizeByData])):(this.setDataColor(),this.setDataShape(),this.setDataSize()),this.allVsAll||"Scatter2D"!=this.graphType&&"ScatterBubble2d"!=this.graphType||this.setSampleLegendDimension()},this.resetLegends=function(){for(var t=["Color","Shape","Size"],e=0;e<t.length;e++)this["legend"+t[e]+"IndicatorWidth"]=0,this["legend"+t[e]+"IndicatorHeight"]=0,this["data"+t[e]+"s"]=[],this["legend"+t[e]+"s"]={},this["legend"+t[e]+"s"]=0;for(var i=this.allVsAll?["Color","Shape","Size","Variable"]:["Color","Shape","Size","Variable","Sample"],e=0;e<i.length;e++)this["legend"+i[e]+"Width"]=0,this["legend"+i[e]+"Height"]=0},this.setLegendDimensions=function(){this.legendLayout=[];var t=this.margin,e=this.margin;if(this.showIndicators)for(var i=["Color","Shape","Size"],s=0;s<i.length;s++){var a=this["legend"+i[s]+"IndicatorWidth"],r=this["legend"+i[s]+"IndicatorHeight"];a&&("bottom"==this.indicatorsPosition?e+=this.margin+r:t+=this.margin+r)}var h=0,n=0,o=0;if(this.showLegend)for(var l=this.allVsAll?["Color","Shape","Size","Variable"]:["Color","Shape","Size","Variable","Sample"],s=0;s<l.length;s++){var a=this["legend"+l[s]+"Width"],r=this["legend"+l[s]+"Height"];a>0&&("right"==this.legendPosition?n+this.margin+r>this.height?(t+=this.margin+a,h=a,n=r,o++,this.legendLayout[o]=[l[s]]):(a>h&&(t+=a-h,h=a),n+=r,this.legendLayout[o]||(this.legendLayout[o]=[]),this.legendLayout[o].push(l[s])):h+this.margin+a>this.width?(e+=this.margin+r,h=a,n=r,o++,this.legendLayout[s]=[l[s]]):(r>n&&(e+=r-n,n=r),h+=a,this.legendLayout[o]||(this.legendLayout[o]=[]),this.legendLayout[o].push(l[s])))}this.legendWidth=t+this.margin,this.legendHeight=e+this.margin},this.getXYLegendCoords=function(t,e,i){var s,a,r,h,n=0,o=0,l=-1,d=-1;if(this.legendLayout){for(var c=0;c<this.legendLayout.length;c++){s=0,a=0;for(var p=0;p<this.legendLayout[c].length;p++)this.legendLayout[c][p]==t&&(d=p),s+=this["legend"+this.legendLayout[c][p]+"Width"]+this.margin,a+=this["legend"+this.legendLayout[c][p]+"Height"]+this.margin,n=Math.max(n,s),o=Math.max(o,a);if(d>-1){l=c;break}}"right"==this.legendPosition?(i=0==d&&this.allVsAll?this.marginTop+this.layoutTop:0==d?this.marginTop+this.offsetY+this.top:i,r=e,h=0==d&&this.allVsAll?(this.height-o)/2:0==d?this.marginTop+this.offsetY+this.top+(this.y-o)/2:i,e=d==this.legendLayout[l].length-1?e+n:e,i=h+this["legend"+this.legendLayout[l][d]+"Height"]+this.margin):(e=0==d&&this.allVsAll?this.marginLeft+this.layoutLeft:0==d?this.marginLeft+this.offsetX+this.left:e,r=0==d&&this.allVsAll?(this.width-n)/2:0==d?this.marginLeft+this.offsetX+this.left+(this.x-n)/2+this.margin:e+this.margin,h=i,e=r+this["legend"+this.legendLayout[l][d]+"Width"]+this.margin,i=d==this.legendLayout[l].length-1?i+o:i)}return[r,h,e,i]},this.drawScatterLegend=function(t,e){var i=this.allVsAll?this.width-(this.marginRight+this.layoutRight):this.marginLeft+this.offsetX+this.left+this.x,s=this.allVsAll?this.height-(this.marginBottom+this.layoutBottom):this.marginTop+this.offsetY+this.top+this.y;if(t&&(i+=t),e&&(s+=e),this.showIndicators){var a,r,h,n;this.allVsAll||"Scatter2D"!=this.graphType&&"ScatterBubble2D"!=this.graphType?(i+=1*this.margin,s+=1*this.margin):(i+=2*this.margin,s+=this.get2DXAxisHeight()+this.margin,"ScatterBubble2D"==this.graphType&&this.zAxisShow&&(i+=this.getFontPt(this.axisTitleFont)+2*this.margin));for(var o=["Color","Shape","Size"],l=0;l<o.length;l++)if(a=this["legend"+o[l]+"IndicatorWidth"],r=this["legend"+o[l]+"IndicatorHeight"],a){var d="draw"+o[l]+"Indicator",c=this["legend"+o[l]+"Range"],p=this["legend"+o[l]+"Decs"];"bottom"==this.indicatorsPosition?(h=this.allVsAll?(this.width-a)/2:this.marginLeft+this.offsetX+this.left+(this.x-a)/2,n=s,this[d](h,n,c[0],c[1],p),s+=r+this.margin):(h=i,n=this.allVsAll?(this.height-r)/2:this.marginTop+this.offsetY+this.top+(this.y-(this.y-a)/2),this[d](h,n,c[0],c[1],p),i+=r+this.margin)}}if(this.showLegend)for(var g=this.allVsAll?["Color","Shape","Size","Variable"]:["Color","Shape","Size","Variable","Sample"],l=0;l<g.length;l++)if(a=this["legend"+g[l]+"Width"],r=this["legend"+g[l]+"Height"],a>0){var d="draw"+g[l]+"Legend",u=this.getXYLegendCoords(g[l],i,s);this[d](u[0],u[1]),"right"==this.legendPosition?s=u[3]+this.margin:i=u[2]+this.margin}}},CanvasXpress.prototype.initApi=function(){this.getValidGraphTypes=function(){return this.validGraphTypes},this.setHeatmapScheme=function(){this.initializeAttributes()},this.hasIndicator=function(){return this.graphType.match(/Scatter/)||"Bar"==this.graphType?!0:!1},this.hasLegend=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Correlation"!=this.graphType&&"Heatmap"!=this.graphType?!0:!1},this.hasLegendProperties=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Correlation"!=this.graphType&&"Heatmap"!=this.graphType&&"Pie"!=this.graphType?!0:!1},this.hasData=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Venn"!=this.graphType?!0:!1},this.hasDataSamples=function(){return"Network"==this.graphType||"Genome"==this.graphType||"Venn"==this.graphType||"Pie"==this.graphType||this.graphType.match(/Scatter/)?!1:"Correlation"==this.graphType&&"samples"!=this.correlationAxis?!1:!0},this.hasDataGroups=function(){return"Network"==this.graphType||"Genome"==this.graphType||"Venn"==this.graphType||"Pie"==this.graphType||this.graphType.match(/Scatter/)?!1:"Correlation"==this.graphType&&"samples"!=this.correlationAxis?!1:this.data.x?!0:!1},this.hasDataVariables=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Venn"!=this.graphType?"Correlation"==this.graphType&&"variables"!=this.correlationAxis?!1:!0:!1},this.hasDataProperties=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Heatmap"!=this.graphType&&"Venn"!=this.graphType&&"Pie"!=this.graphType&&"Correlation"!=this.graphType?!0:!1},this.hasOrientation=function(){return"Network"==this.graphType||"Genome"==this.graphType||"Venn"==this.graphType||"Pie"==this.graphType||"Correlation"==this.graphType||"Circular"==this.graphType||this.graphType.match(/Scatter/)?!1:!0},this.hasOverlays=function(){return"Network"==this.graphType||"Genome"==this.graphType||"Venn"==this.graphType||"Pie"==this.graphType||"Correlation"==this.graphType||this.graphType.match(/Scatter/)?!1:!0},this.hasDendrograms=function(){return"Heatmap"!=this.graphType&&(this.data.t.smps||this.data.t.vars)?!0:!1},this.hasDecorations=function(){return this.data.d&&(this.data.d.nlfit||this.data.d.line||this.data.d.reg||this.data.d.nor||this.data.d.area)?!0:!1},this.isSegregable=function(){return"Network"==this.graphType||"Genome"==this.graphType||"Venn"==this.graphType||"Pie"==this.graphType||"Correlation"==this.graphType||this.graphType.match(/Scatter/)?!1:!0},this.getLineTypes=function(){for(var t=["line"],e=["","dashed","dotted","bezierY","bezierX","curved"],i=["arrow","arrowHead","arrowTail","arrowHeadSquareTail","arrowTailSquareHead","square","squareHead","squareTail","squareHeadArrowTail","squareTailArrowHead"],s=0;s<i.length;s++)t.push(i[s]+"Line");for(var s=1;s<e.length;s++)for(var a=0;a<i.length;a++)t.push(e[s]+this.capitalize(i[a])+"Line");return t},this.isValidShape=function(t){for(var e=0;e<this.shapes.length;e++)if(this.shapes[e]==t)return!0;return!1},this.isCompatibleGraphType=function(t,e){return t.match(/^Bar$|^Line$|Boxplot|Dotplot/)&&e.match(/^Bar$|^Line$|Boxplot|Dotplot/)?!0:!1},this.modifyHighlights=function(t,e,i){var s=i?"highlightVar":"highlightSmp";this.modifyObjectArray(t,e,s)},this.getHighlights=function(t){var e=t?this.highlightVar:this.highlightSmp;return this.getObjectArray(e)},this.modifySmpOverlays=function(t,e){this.modifyObjectArray(t,e,"smpOverlays")},this.modifyVarOverlays=function(t,e){this.modifyObjectArray(t,e,"varOverlays")},this.getSmpOverlays=function(){return this.getObjectArray(this.smpOverlays)},this.getVarOverlays=function(){return this.getObjectArray(this.varOverlays)},this.getXData=function(){var t=[];if(!this.isGroupedData&&this.data.x)for(var e in this.data.x)t.push(e);return t},this.getZData=function(){var t=[];if(this.data.z)for(var e in this.data.z)t.push(e);return t},this.getXZData=function(){return this.graphType.match(/Scatter/)?this.getZData():this.getXData()},this.getSamplesAsArray=function(){for(var t=this.getSamples(),e=[],i=0;i<t.length;i++)e.push(t[i].name);return e},this.getVariablesAsArray=function(){for(var t=this.getVariables(),e=[],i=0;i<t.length;i++)e.push(t[i].name);return e},this.getNodeData=function(t){return this.getNetworkData("nodes",t)},this.getEdgeData=function(t){return this.getNetworkData("edges",t)},this.getSampleData=function(t){if(!this.samplesData&&(this.samplesData={smps:{o:this.getObjectArray(this.data.y.smps),t:"string"}},this.data.x))for(att in this.data.x)this.samplesData[att]={o:this.getObjectArray(this.getUniqueKeys(this.data.x[att])),t:this.isNumeric(this.data.x[att])?"numeric":"string"};return t?this.samplesData:this.getKeys(this.samplesData)},this.getVariableData=function(t){if(!this.variablesData&&(this.variablesData={vars:{o:this.getObjectArray(this.data.y.vars),t:"string"}},this.data.z))for(att in this.data.z)this.variablesData[att]={o:this.getObjectArray(this.getUniqueKeys(this.data.z[att])),t:this.isNumeric(this.data.z[att])?"numeric":"string"};return t?this.variablesData:this.getKeys(this.variableData)},this.getNetworkData=function(t,e){if("Network"==this.graphType&&!this[t+"Data"]){this[t+"Data"]={};for(var i=this.skipConfigurableProperties?this.getObjectArray(this[t.replace("s","")+"ConfigurableProperties"]):{},s=0;s<this.data[t].length;s++){var a=this.data[t][s];for(var r in a)i[r]||("object"!=typeof a[r]?this[t+"Data"].hasOwnProperty(r)?(this[t+"Data"][r].o.hasOwnProperty(a[r])?this[t+"Data"][r].o[a[r]]++:this[t+"Data"][r].o[a[r]]=1,isNaN(a[r])&&(this[t+"Data"][r].t="string")):(this[t+"Data"][r]={o:{},t:isNaN(a[r])?"string":"numeric"},this[t+"Data"][r].o[a[r]]=1):a[r].constructor==(new Date).constructor);this[t+"Properties"].length>0&&this.getAdditionalData(a,this[t+"Data"],this[t+"Properties"])}}return"Network"==this.graphType?e?this[t+"Data"]:this.getKeys(this[t+"Data"]):!1},this.getFeatureData=function(t){if(!this.featuresData){this.featuresData={};for(var e=this.skipConfigurableProperties?this.getObjectArray(this.featureConfigurableProperties):{},i=0;i<this.data.tracks.length;i++){for(var s=this.data.tracks[i],a=s.data,r=0;r<a.length;r++){var h=a[r];for(var n in h)e[n]||("object"!=typeof h[n]?this.featuresData.hasOwnProperty(n)?(this.featuresData[n].o.hasOwnProperty(h[n])?this.featuresData[n].o[h[n]]++:this.featuresData[n].o[h[n]]=1,
isNaN(h[n])&&(this.featuresData[n].t="string")):(this.featuresData[n]={o:{},t:isNaN(h[n])?"string":"numeric"},this.featuresData[n].o[h[n]]=1):h[n].constructor==(new Date).constructor)}this.featuresProperties.length>0&&this.getAdditionalData(a,this.featuresData,this.featuresProperties)}}return t?this.featuresData:this.getKeys(this.featuresData)},this.getAdditionalData=function(t,e,i){for(var s=0;s<i.length;s++){var a=t,r=!1;if(i[s].length>0){for(var h=0;h<i[s].length;h++){var n=i[s][h];if(!a[n]){r=!0;break}a=a[n]}if(!r)for(var o in a)"object"!=typeof a[o]?e.hasOwnProperty(o)?(e[o].o.hasOwnProperty(a[o])?e[o].o[a[o]]++:e[o].o[a[o]]=1,isNaN(a[o])&&(e[o].t="string")):(e[o]={o:{},t:isNaN(a[o])?"string":"numeric",r:s},e[o].o[a[o]]=1):a[o].constructor==(new Date).constructor}}},this.getOperators=function(){return["","like","not like",">",">=","<","<=","==","null","not null"]},this.resetFilters=function(t,e){var i=[];i=t?[t]:["filterSmpBy","filterVarBy","filterNodeBy","filterEdgeBy","filterFeatureBy"];for(var s=0;s<i.length;s++)c=i[s],"filterSmpBy"==c?this.resetSmpFilters(e):"filterVarBy"==c?this.resetVarFilters(e):"filterNodeBy"==c?this.resetNodeFilters(e):"filterEdgeBy"==c?this.resetEdgeFilters(e):"filterFeatureBy"==c&&this.resetFeatureFilters(e)},this.zoonIn=function(t){this.handleWheelEvent(t,1)},this.zoonOut=function(t){this.handleWheelEvent(t,-1)},this.clusterSamples=function(){this.clusterAxis="samples",this.showSmpDendrogram=!0,this.data.t||(this.data.t={}),this.data.t.smps=this.cluster(),this.draw()},this.clusterVariables=function(){this.clusterAxis="variables",this.showVarDendrogram=!0,this.data.t||(this.data.t={}),this.data.t.vars=this.cluster(),this.draw()},this.kmeansSamples=function(){this.clusterAxis="samples",this.showOverlays=!0,this.data.x||(this.data.x={}),this.data.x["k-Means"]=this.kmeans(),this.isInArray("k-Means",this.smpOverlays)||this.smpOverlays.push("k-Means"),this.draw()},this.kmeansVariables=function(){this.clusterAxis="variables",this.showOverlays=!0,this.data.z||(this.data.z={}),this.data.z["k-Means"]=this.kmeans(),this.isInArray("k-Means",this.varOverlays)||this.varOverlays.push("k-Means"),this.draw()},this.setFunctions=function(){this.functions.push("clusterSamples"),this.functions.push("clusterVariables"),this.functions.push("transpose"),this.functions.push("transform"),this.functions.push("sortSamplesByCategory"),this.functions.push("sortSamplesByVariable"),this.functions.push("sortVariablesByCategory"),this.functions.push("sortVariablesBySample"),this.functions.push("hideUnhideSmps"),this.functions.push("hideUnhideVars"),this.functions.push("desegregateSamples"),this.functions.push("segregateSamples"),this.functions.push("groupSamples"),this.functions.push("ungroupSamples"),this.functions.push("desegregateVariables"),this.functions.push("segregateVariables"),this.functions.push("kmeansSamples"),this.functions.push("kmeansVariables"),this.functions.push("showCodeDiv"),this.functions.push("hideCodeDiv"),this.functions.push("showInfoDiv"),this.functions.push("hideInfoDiv"),this.functions.push("updateCodeDiv"),this.functions.push("createHistogram"),this.functions.push("removeHistogram"),this.functions.push("addRegressionLine"),this.functions.push("addNormalDistributionLine"),this.functions.push("recalculateLayout"),this.functions.push("setSkin"),this.functions.push("createRandomData"),this.functions.push("draw"),this.functions.push("reset"),this.functions.push("print"),this.functions.push("saveRemoteParameters")},this.initializeApi=function(){this.setFunctions()},this.initializeApi()},CanvasXpress.prototype.initUtils=function(){this.initDimensions(),this.initGeneralUtils(),this.initPlotUtils(),this.initConfigUtils(),this.initLegendUtils(),this.init3dUtils(),this.initApi()},CanvasXpress.prototype.initLayout=function(){this.isValidLayout=function(){var t=this.layout.split(/X/i);if(this.autoAdjust&&!this.plotByVariable)if(2==t.length?(this.layoutRows=t[0],this.layoutCols=t[1]):(this.layoutRows=1,this.layoutCols=1,this.layoutValid=!1),!this.graphType.match(/Scatter/)&&this.layoutComb&&this.data.l&&(this.data.l.vars||this.data.l.smps)&&this.data.l.weight&&this.data.l.type){if(this.data.l.comp=[],this.data.l.vars&&this.data.l.smps){for(var e=0,i=0;i<this.data.l.smps.length;i++)for(var s=0;s<this.data.l.vars.length;s++)this.data.l.comp[e]=[this.getVariableIndices(this.data.l.vars[s]),this.getSampleIndices(this.data.l.smps[i])],e++;this.layoutRows=this.data.l.smps.length,this.layoutCols=this.data.l.vars.length}else{if(this.data.l.vars)for(var i=0;i<this.data.l.vars.length;i++)this.data.l.comp[i]=this.getVariableIndices(this.data.l.vars[i]);else for(var i=0;i<this.data.l.smps.length;i++)this.data.l.comp[i]=this.getSampleIndices(this.data.l.smps[i]);"Pie"!=this.graphType&&("vertical"==this.graphOrientation?this.layoutRows=this.data.l.comp.length:this.layoutCols=this.data.l.comp.length)}this.layoutValid=!0,this.layoutAdjust=!0}else if(this.layoutComb&&this.data.l&&this.data.l.smps&&this.data.l.weight&&this.data.l.type){this.data.l.comp=[];for(var a=this.getVariableIndices(this.data.y.vars),i=0;i<this.data.l.type.length;i++)this.data.l.comp[i]=a;this.layoutValid=!0}else this.layoutValid=this.data.l&&this.data.l.comp&&this.data.l.comp.length<=this.layoutRows*this.layoutCols?!0:!1;else this.layoutRows=1,this.layoutCols=1,this.layoutValid=!1},this.setLayout=function(){},this.addLayoutResizer=function(t){var e=0;return this.resizerType&&this.resizerPosition==t&&(e+=this.resizerWidth+2*this.margin,"samples"==this.resizerType&&(e+=14+this.margin)),e},this.getLayoutResizerDimensions=function(){if(this.resizerType){var t,e,i,s,a=this.data.l.comp.length-1,r=this.resizerWidth,h=this.resizerWidth,n=this.marginTop+this.layoutTop,o=this.marginRight+this.layoutRight,l=this.marginBottom+this.layoutBottom,d=this.marginLeft+this.layoutLeft,c=this.getAxesVals(0),p=0,g=0;switch(this.resizerPosition){case"right":t="xAxis",e="y",i="v",s="r",n+=this.subGraphTop0,d="samples"==this.resizerType?this.width-(2*this.margin+this.resizerWidth+14):this.width-(this.margin+this.resizerWidth),r=this.height-(n+l+this["subGraphBottom"+a]);break;case"left":t="xAxis",e="y",i="v",s="l",n+=this.subGraphTop0,d="samples"==this.resizerType&&"horizontal"==this.graphOrientation?2*this.margin:this.margin,r=this.height-(n+l+this["subGraphBottom"+a]);break;case"top":t="xAxis",e="x",i="h",s="t",n="samples"==this.resizerType?2*this.margin+14:this.margin,d+=this.subGraphLeft0,h=this.width-(d+o+this["subGraphRight"+a]),g+=this.resizerWidth;break;case"bottom":t="xAxis",e="x",i="h",s="b",n="samples"==this.resizerType&&"vertical"==this.graphOrientation?this.height-(2*this.margin+this.resizerWidth+14):this.width-(this.margin+this.resizerWidth),d+=this.subGraphLeft0,h=this.width-(d+o+this["subGraphRight"+a]),g+=this.resizerWidth}return"v"==i?[t,d+p,d+p+h,n+g,n+g+r,e,i,s,c,d+14,n,h,r]:[t,d+p,d+p+h,n+g,n+g+r,e,i,s,c,d,n,h,r]}},this.drawLayoutResizer=function(){if(this.resizerType){var t=this.getLayoutResizerDimensions();this.showAxesResizer(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],"",0,0,0),this.drawAxesResizerBackgroundData(t[9],t[10],t[11],t[12]),this.drawAxesResizerMasks()}},this.getLayoutMaxLegend=function(){if(this.data.l.vars){var t=0;if(this.data.l.comp)for(var e=0;e<this.data.l.comp.length;e++)t=Math.max(t,this.data.l.comp[e].length);return t}return this.varIndices.length},this.setLayoutLeft=function(){var t=0;return"vertical"!=this.graphOrientation&&this.segregateSamplesBy&&this.segregateVariablesBy?(this.set1DVarSmpLabelFont(),t=this.fontSize+4*this.margin+this.measureText(this.maxSmpNameStr,this.smpLabelFont)+this.getSmpOverlaysLength()):"vertical"!=this.graphOrientation&&this.segregateVariablesBy?(this.set1DVarSmpLabelFont(),t=2*this.margin+this.measureText(this.maxSmpNameStr,this.smpLabelFont)+this.getSmpOverlaysLength()):(this.segregateSamplesBy||this.segregateVariablesBy)&&"vertical"==this.graphOrientation?t=this.fontSize+2*this.margin:"Candlestick"==this.graphType&&"vertical"!=this.graphOrientation?(this.setTimeAxis(),this.set1DVarSmpLabelFont(),t=this.getSampleLabelLength()+this.getSmpOverlaysLength()):"Pie"==this.graphType&&(t=2*this.margin+this.measureText("XX",this.smpLabelFont)),t+this.addLayoutResizer("left")},this.setLayoutRight=function(){var t=0;if("Pie"==this.graphType&&this.showLegend&&"right"==this.legendPosition){var e=this.getPieLegendDimensions();t=e[0]}else this.graphType.match(/Scatter/)&&(this.showLegend||this.showIndicators)&&(this.xAxis&&this.yAxis&&this.setDataColorShapeSize(),this.setLegendDimensions(),t=this.legendWidth);return t+this.addLayoutResizer("right")},this.setLayoutTop=function(){var t=0;return((this.segregateSamplesBy||this.segregateVariablesBy)&&"vertical"!=this.graphOrientation||this.segregateSamplesBy&&this.segregateVariablesBy||"Pie"==this.graphType)&&(t=this.fontSize+2*this.margin),t+this.addLayoutResizer("top")},this.setLayoutBottom=function(){var t=0;if("Pie"==this.graphType&&this.showLegend&&"bottom"==this.legendPosition){var e=this.getPieLegendDimensions();t=e[1]}else this.segregateSamplesBy&&this.segregateVariablesBy?t=this.getLegendHeight():this.segregateVariablesBy&&"vertical"==this.graphOrientation?(this.set1DVarSmpLabelFont(),t=2*this.margin+this.measureText(this.maxSmpNameStr,this.smpLabelFont)+this.getSmpOverlaysLength()):"Candlestick"==this.graphType&&"vertical"==this.graphOrientation?(this.setTimeAxis(),this.set1DVarSmpLabelFont(),t=this.getSampleLabelLength()+this.getSmpOverlaysLength()):this.graphType.match(/Scatter/)&&(this.showLegend||this.showIndicators)&&(this.xAxis&&this.yAxis&&this.setDataColorShapeSize(),this.setLegendDimensions(),t=this.legendHeight);return t+this.addLayoutResizer("bottom")},this.drawLayoutSampleOverlays=function(t){var e=this.smpIndices;this.smpIndices=t,this.set1DVarSmpLabelFont(),this.smpIndices=e,this.showSampleNames=!0,this.showOverlays=!0,this.draw1DYLayout()},this.drawLayoutVariableLegend=function(){this.showLegend=!0,"Pie"==this.graphType?this.drawPieLegend():this.draw1DLegend(),this.showLegend=!1},this.setLayoutDimensions=function(){this.offsetX=0,this.offsetY=0,this.layoutLeft=this.setLayoutLeft(),this.layoutRight=this.setLayoutRight(),this.layoutTop=this.setLayoutTop(),this.layoutBottom=this.setLayoutBottom()},this.drawLabelsLayout=function(){var t=0,e=0,i=0,s=0,a=this.width-(this.marginLeft+this.layoutLeft+this.layoutRight+this.marginRight),r=this.height-(this.marginTop+this.layoutTop+this.layoutBottom+this.marginBottom);if(this.resizerType&&("top"==this.resizerPosition?(e="samples"==this.resizerType?2*this.margin+this.resizerWidth+14:this.margin+this.resizerWidth,s=e):"left"==this.resizerPosition&&(t="samples"==this.resizerType?2*this.margin+this.resizerWidth+14:this.margin+this.resizerWidth,i=t)),this.segregateSamplesBy&&this.segregateVariablesBy){e+=this.fontSize+4*this.margin,t=this.marginLeft+this.layoutLeft;for(var h=0;h<this.data.l.vars.length;h++){var n=h*this.data.l.smps.length,o=a*this["subGraphWeight"+n][0];t+=o/2,this.drawText(this.data.l.name[n][0],t,e,this.font,this.foreground,"center","middle"),t+=o/2}t=i+this.fontSize+4*this.margin,e=this.marginTop+this.layoutTop;for(var n=0;n<this.data.l.smps.length;n++){var l=r*this["subGraphWeight"+n][1];e+=l/2,this.drawText(this.data.l.name[n][1],t,e,this.font,this.foreground,"center","middle",-Math.PI/2),e+=l/2}}else if((this.segregateSamplesBy||this.segregateVariablesBy)&&"vertical"==this.graphOrientation&&this.data.l.name){t+=this.fontSize+4*this.margin,e+=this.marginTop+this.layoutTop;for(var n=0;n<this.data.l.name.length;n++){var l=r*this["subGraphWeight"+n];e+=l/2,this.drawText(this.data.l.name[n],t,e,this.font,this.foreground,"center","middle",-Math.PI/2),e+=l/2}}else if((this.segregateSamplesBy||this.segregateVariablesBy)&&"horizontal"==this.graphOrientation&&this.data.l.name){e+=this.fontSize+4*this.margin,t+=this.marginLeft+this.layoutLeft;for(var n=0;n<this.data.l.name.length;n++){var o=a*this["subGraphWeight"+n];t+=o/2,this.drawText(this.data.l.name[n],t,e,this.font,this.foreground,"center","middle"),t+=o/2}}else if("Pie"==this.graphType&&(this.showPieGrid||this.showPieSampleLabel))for(var l,o,d=0,c=this.getFontPt(this.font),p=this.marginTop+this.layoutTop,g=this.marginLeft+this.layoutLeft,u=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n=0;n<this.layoutRows;n++){l=r*this["subGraphWeight"+d][1],t=this.marginLeft+this.layoutLeft-this.margin,p+=l,this.showPieGrid&&this.drawText(u[n],t,p+c/2-l/2,this.font,this.foreground,"right","middle");for(var m=0;m<this.layoutCols&&!(this.xAxis.length<=d);m++)o=a*this["subGraphWeight"+d][0],g+=o,e=this.marginTop+this.layoutTop-this.margin,0==n&&this.showPieGrid&&this.drawText(m+1,g+c/2-o/2,e,this.font,this.foreground,"center","bottom"),this.showPieSampleLabel&&this.drawText(this.xAxis[d],g-o/1.1,p-l/5,this.legendFont,this.foreground,"center","middle"),d++;g=this.marginLeft+this.layoutLeft}},this.setLayoutGraphAttributes=function(){for(var t=0,e=0;e<this.layoutRows;e++)for(var i=0;i<this.layoutCols;i++){var s="subGraphType"+t;this[s]||(this[s]=this.data.l.type&&this.data.l.type[t]?this.data.l.type[t]:this.graphType);var a="subSummaryType"+t;this[a]="Boxplot"==this[s]||"iqr"==this.summaryType?"iqr":"median"==this.summaryType?"median":"sum"==this.summaryType?"sum":"Correlation"==this[s]?"cor":"Candlestick"==this[s]?"vertical"==this.graphOrientation&&e>0||"horizontal"==this.graphOrientation&&0==i?"volume":"candle":"mean";var r="subTransformType"+t;this[r]||(this[r]=this.data.l.transform&&this.data.l.transform[t]?this.data.l.transform[t]:this.subTransformType),t++}},this.setLayoutWeights=function(){if(this.data.l.weight){var t,e,i=0,s=0;if(this.allVsAll){for(var a=0;a<this.layoutRows;a++)t="subGraphWeight"+a,e=this[t]?this[t]:this.data.l.weight[a],i+=e;for(var a=0;a<this.data.l.weight.length;a++)t="subGraphWeight"+a,e=this[t]?this[t]:this.data.l.weight[a],this.data.l.weight[a]=e/i,this[t]=this.data.l.weight[a]}else if(this.data.l.vars&&this.data.l.smps){for(var a=0;a<this.data.l.weight.length;a++)t="subGraphWeight"+a,e=this[t]?this[t]:this.data.l.weight[a],i+=e[0],s+=e[1];for(var a=0;a<this.data.l.weight.length;a++)t="subGraphWeight"+a,e=this[t]?this[t]:this.data.l.weight[a],this.data.l.weight[a][0]=e[0]/i*this.data.l.smps.length,this.data.l.weight[a][1]=e[1]/s*this.data.l.vars.length,this[t]=this.data.l.weight[a]}else if("Pie"==this.graphType)for(var a=0;a<this.data.l.comp.length;a++)t="subGraphWeight"+a,this[t]=this.data.l.weight[a];else{for(var a=0;a<this.data.l.weight.length;a++)t="subGraphWeight"+a,e=this[t]?this[t]:this.data.l.weight[a],i+=e;for(var a=0;a<this.data.l.weight.length;a++)t="subGraphWeight"+a,e=this[t]?this[t]:this.data.l.weight[a],this.data.l.weight[a]=e/i,this[t]=this.data.l.weight[a]}}else if(this.data.l.comp){this.data.l.weight=[];for(var a=0;a<this.data.l.comp.length;a++)t="subGraphWeight"+a,this.data.l.weight[a]=this.data.l.comp.length,this[t]=this.data.l.weight[a]}else alert("Wuz going on dude? This aint't gonna work!")},this.setMinimumLayoutAxisFonts=function(){for(var t=0,e=Number.MAX_VALUE,i=0;i<this.layoutRows;i++)for(var s=0;s<this.layoutCols;s++){var a,r,h;a=this.data.l.desc&&this.data.l.desc[t]?this.data.l.desc[t]:"NA",h="vertical"==this.graphOrientation?this.height*this["subGraphWeight"+t]:this.width*this["subGraphWeight"+t],this.setAxisFont(a,h),r=this.getFontPt(this.axisTitleFont),e>r&&(e=r,this.minLayoutAxis=e,this.minLayoutAxisTitle=a),t++}},this.getLayoutSummaryTypes=function(){for(var t=0,e={},i=[],s=0;s<this.layoutRows;s++)for(var a=0;a<this.layoutCols;a++){var r="subSummaryType"+t;e.hasOwnProperty(this[r])||(i.push(this[r]),e[this[r]]=!0),t++}return i},this.validateLayoutSummaryGrouping=function(){if(this.isGroupedData)for(var t=this.getLayoutSummaryTypes(),e=0;e<t.length;e++)if(!this.isValidPlotData(t[e])){this.groupSamples(this.groupingFactors,t);break}},this.resetLayout=function(){delete this.data.l,delete this.layoutParams,this.offsetX=0,this.offsetY=0,this.layoutValidN=!1,this.layoutValidR=!1,this.layoutValidC=!1,this.layoutComb=!1,this.layout="1X1"},this.drawLayoutCompartments=function(t){var e,i=[],s=0,a=this.varIndices,r=this.smpIndices,h=this.showSampleNames,n=this.showOverlays,o=this.showLegend,l=this.showIndicators,d=this.getObjectArray(a),c=this.getObjectArray(r),p=!1,g=["left","right","top","bottom","x","y","width","height","weight","offsetX","offsetY","varIndices","smpIndices","grpIndices","graphType","summaryType","transformType","varIndicesStart","smpIndicesStart","minData","maxData","xAxisMin","xAxisMax","xAxis2Min","xAxis2Max","yAxisMin","yAxisMax","zAxisMin","zAxisMax","xAxisAbsMin","xAxisAbsMax","xAxis2AbsMin","xAxis2AbsMax","yAxisAbsMin","yAxisAbsMax","zAxisAbsMin","zAxisAbsMax","xAxisUnit","xAxis2Unit","yAxisUnit","zAxisUnit","setMin","setMax","setMin2","setMax2","setMinX","setMaxX","setMinY","setMaxY","setMinZ","setMaxZ"],u=["graphType","transformType","varIndicesStart","smpIndicesStart","setMin","setMax","setMin2","setMax2","setMinX","setMaxX","setMinY","setMaxY","setMinZ","setMaxZ"];if(this.layoutComb){this.graphType.match(/Scatter/)||(this.layoutMaxVarLegend=this.getLayoutMaxLegend()),this.graphType.match(/Scatter/)?(this.xAxis=this.data.y.smps,this.yAxis=this.data.y.smps,this.initAxes(!0)):this.initAxes(!1,!0),this.setLayoutDimensions();var m=this.marginLeft+this.layoutLeft+this.layoutRight+this.marginRight,f=this.marginTop+this.layoutTop+this.layoutBottom+this.marginBottom;if(this.graphType.match(/Scatter/)&&this.draw2DLegend(),this.layoutParams&&this.layoutValidN>-1&&(e=this.layoutParams,e[this.layoutValidN]))for(var v=0;v<g.length;v++)e[this.layoutValidN][g[v]]=this[g[v]];this.offsetX=this.layoutLeft,this.offsetY=this.layoutTop,this.layoutMaxVarLegendLabel=this.data.l.vars?this.maxVarNameStr:this.maxSmpNameStr,this.layoutParams=[],this.graphType.match(/Scatter/)||(this.data.l.vars&&this.data.l.smps?(this.layoutRows=this.data.l.smps.length,this.layoutCols=this.data.l.vars.length,this.layoutMaxSamples=this.smpIndices.length*this.layoutCols/this.layoutRows,this.legendPosition="bottom"):(s=Math.max(this.layoutRows,this.layoutCols),"Pie"!=this.graphType&&("vertical"==this.graphOrientation?(this.layoutRows=s,this.layoutCols=1,this.legendPosition="right"):(this.layoutRows=1,this.layoutCols=s,this.legendPosition="bottom")))),this.setLayoutWeights(),this.setMinimumLayoutAxisFonts(),this.setLayoutGraphAttributes(),this.validateLayoutSummaryGrouping();for(var x=0,v=0;v<this.layoutRows;v++){for(var y=0;y<this.layoutCols&&(this.layoutCurrent=x,!("Pie"==this.graphType&&this.data.l.smps.length<=x));y++){if(e)for(var b=0;b<u.length;b++)this[u[b]]=e[x][u[b]];if(this.weight=this["subGraphWeight"+x],this.graphType=this["subGraphType"+x],this.summaryType=this["subSummaryType"+x],this.transformType=this["subTransformType"+x],this["subTransformType"+x]&&(this.isTransformedData=!0),this.data.l.log&&this.data.l.log[x]&&(this.isLogData=this.data.l.log[x]),this.graphType.match(/Scatter/))this.data.l.smps[x].xAxis&&this.data.l.smps[x].yAxis?(this.xAxis=this.data.l.smps[x].xAxis,this.yAxis=this.data.l.smps[x].yAxis,this.xAxisIndices=this.getSampleIndices(this.xAxis),this.yAxisIndices=this.getSampleIndices(this.yAxis)):(this.xAxis=!1,this.yAxis=!1,this.xAxisIndices=!1,this.yAxisIndices=!1),this.layoutWidth=(this.width-m)*this["subGraphWeight"+x],this.layoutHeight=(this.height-f)*this["subGraphWeight"+x],this.varIndices=this.data.l.comp[x],this.graphType.match(/Scatter/)&&this.layoutAdjust&&this.xAxis&&this.yAxis?(this.initAxes(!0),this.layoutAxis=3):this.graphType.match(/Scatter/)&&(this.layoutAxis=0==y?2:0,this.layoutAxis=v==this.layoutRows&&this.layoutAxis?3:v==this.layoutRows?1:0),this.showLegend=!1,this.showIndicators=!1;else{if(this.data.l.vars&&this.data.l.smps?(p="vertical"==this.graphOrientation?!0:!1,this.showLegend=!1):"Pie"==this.graphType?(p=!1,this.showLegend=!1):p=this.data.l.smps?!0:!1,this.showSampleNames=p,this.showOverlays=p,this.xAxisTitle=this.data.l.desc&&this.data.l.desc[x]?this.data.l.desc[x]:!1,this.data.l.vars&&this.data.l.smps){this.layoutHeight=(this.height-f)*this["subGraphWeight"+x][1],this.layoutWidth=(this.width-m)*this["subGraphWeight"+x][0],i=[];for(var b=0;b<this.data.l.comp[x][0].length;b++)d.hasOwnProperty(this.data.l.comp[x][0][b])&&i.push(this.data.l.comp[x][0][b]);this.varIndices=i,i=[];for(var b=0;b<this.data.l.comp[x][1].length;b++)c.hasOwnProperty(this.data.l.comp[x][1][b])&&i.push(this.data.l.comp[x][1][b]);this.smpIndices=i}else if("Pie"==this.graphType?(this.layoutWidth=(this.width-m)*this["subGraphWeight"+x][0],this.layoutHeight=(this.height-f)*this["subGraphWeight"+x][1]):"vertical"==this.graphOrientation?(this.layoutHeight=(this.height-f)*this["subGraphWeight"+x],this.layoutWidth=this.width-m):(this.layoutWidth=(this.width-m)*this["subGraphWeight"+x],this.layoutHeight=this.height-f),i=[],this.data.l.vars){for(var b=0;b<this.data.l.comp[x].length;b++)d.hasOwnProperty(this.data.l.comp[x][b])&&i.push(this.data.l.comp[x][b]);this.varIndices=i}else{for(var b=0;b<this.data.l.comp[x].length;b++)c.hasOwnProperty(this.data.l.comp[x][b])&&i.push(this.data.l.comp[x][b]);this.smpIndices=i}this.layoutAdjust&&(this.layoutAxis=3,this.initAxes(!0))}t.call(this),this["subGraphTop"+x]=this.top,this["subGraphBottom"+x]=this.bottom,this["subGraphRight"+x]=this.right,this["subGraphLeft"+x]=this.left,this["subGraphX"+x]=this.x,this["subGraphY"+x]=this.y;{["rect",this.marginLeft+this.offsetX+this.left,this.marginTop+this.offsetY+this.top,this.marginLeft+this.offsetX+this.left+this.x,this.marginTop+this.offsetY+this.top+this.y]}if(this.graphType.match(/Scatter/)){if(v==y){var w=this.scaleTextToFont(this.maxSmpNameStr,this.maxTextSize,.8*(this.width-m)/this.layoutCols);this.drawText(this.data.y.smps[v],this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top+this.y/2,w,this.foreground,"center","middle")}}else p?this.data.l.vars&&this.data.l.smps&&x>=this.data.l.vars.length*(this.data.l.smps.length-1)&&this.drawLayoutVariableLegend():this.data.l.vars&&this.data.l.smps?("vertical"!=this.graphOrientation&&x%this.data.l.vars.length==0&&this.drawLayoutSampleOverlays(r),x>=this.data.l.vars.length*(this.data.l.smps.length-1)&&this.drawLayoutVariableLegend()):"Pie"!=this.graphType?("vertical"==this.graphOrientation&&x+1==s||"vertical"!=this.graphOrientation&&0==x)&&this.drawLayoutSampleOverlays(r):"Pie"==this.graphType&&0==x&&o&&this.drawLayoutVariableLegend();for(var C={},b=0;b<g.length;b++)C[g[b]]=this[g[b]];C.width=this.layoutWidth,C.height=this.layoutHeight,C.subGraphType=this.graphType,C.subSummaryType=this.SummaryType,C.subTransformType=this.transformType,this.layoutParams.push(C),this.graphType.match(/Scatter/)||this.data.l.vars&&this.data.l.smps?this.offsetX+=this.layoutWidth:"vertical"==this.graphOrientation?this.offsetY+=this.layoutHeight:this.offsetX+=this.layoutWidth,x++}(this.graphType.match(/Scatter|Pie/)||this.data.l.vars&&this.data.l.smps)&&(this.offsetX=this.layoutLeft,this.offsetY+=this.layoutHeight)}this.drawLabelsLayout(),this.drawLayoutResizer(),this.varIndices=a,this.smpIndices=r,this.showSampleNames=h,this.showOverlays=n,this.showLegend=o,this.showIndicators=l}},this.initializeLayout=function(){this.isValidLayout()},this.initializeLayout()},CanvasXpress.prototype.initViewport=function(t){this.setViewport=function(){var e=this.$("container-"+this.target),i=this.toolbarPermanent&&this.canvas.height>400?20:this.toolbarPermanent&&this.canvas.height<=400?13:0;if(!e){var s=this.$(this.target);s.className="CanvasXpress";var e=this.$cX("div",{id:"container-"+this.target,className:"CanvasXpressContainer"});t&&(e.style.display="none");var a=this.$cX("div",{id:"north-container-"+this.target,className:"CanvasXpressContainer"},{width:s.width+14+"px",height:i+7+"px",clear:"left"}),r=this.$cX("div",{id:"north-handler-"+this.target,className:"CanvasXpressHandler",state:"open",open:"url('"+this.imageDir+"tbottom.png')",close:"url('"+this.imageDir+"ttop.png')",skipWidth:!0},{width:s.width+14+"px",height:"7px",display:"none",backgroundImage:"url('"+this.imageDir+"ttop.png')"}),h=this.$cX("div",{id:"north-wrapper-"+this.target,className:"CanvasXpressWrapper"},{width:s.width+14+"px",height:i+"px"}),n=this.$cX("div",{id:"middle-container-"+this.target,className:"CanvasXpressContainer"},{width:s.width+14+"px",height:s.height+"px",clear:"left"});this.isIE&&this.useFlashIE&&this.browserVersion<9&&(n.style.zIndex=-1);var o=this.$cX("div",{id:"west-container-"+this.target,className:"CanvasXpressContainer"},{width:"7px",height:s.height+"px"}),l=this.$cX("div",{id:"west-handler-"+this.target,className:"CanvasXpressHandler",state:"open",open:"url('"+this.imageDir+"tright.png')",close:"url('"+this.imageDir+"tleft.png')",skipHeight:!0},{width:"7px",height:s.height+"px",display:"none",backgroundImage:"url('"+this.imageDir+"tleft.png')"}),d=this.$cX("div",{id:"west-wrapper-"+this.target,className:"CanvasXpressWrapper"},{width:"0px",height:s.height+"px"}),c=this.$cX("div",{id:"center-wrapper-"+this.target,className:"CanvasXpressWrapper"}),p=this.$cX("div",{id:"east-container-"+this.target,className:"CanvasXpressContainer"},{width:"7px",height:s.height+"px"}),g=this.$cX("div",{id:"east-handler-"+this.target,className:"CanvasXpressHandler",state:"open",open:"url('"+this.imageDir+"tright.png')",close:"url('"+this.imageDir+"tleft.png')",skipHeight:!0},{width:"7px",height:s.height+"px",display:"none",backgroundImage:"url('"+this.imageDir+"tleft.png')"}),u=this.$cX("div",{id:"east-wrapper-"+this.target,className:"CanvasXpressWrapper"},{width:"0px",height:s.height+"px"}),m=this.$cX("div",{id:"south-container-"+this.target,className:"CanvasXpressContainer"},{width:s.width+14+"px",height:"7px",clear:"left"}),f=this.$cX("div",{id:"south-handler-"+this.target,className:"CanvasXpressHandler",open:"url('"+this.imageDir+"tbottom.png')",close:"url('"+this.imageDir+"ttop.png')",skipWidth:!0},{width:s.width+14+"px",height:"7px",display:"none",backgroundImage:"url('"+this.imageDir+"ttop.png')"}),v=this.$cX("div",{id:"south-wrapper-"+this.target,className:"CanvasXpressWrapper",state:"open"},{width:s.width+14+"px",height:"0px"});if(a.appendChild(r),a.appendChild(h),o.appendChild(d),o.appendChild(l),p.appendChild(g),p.appendChild(u),m.appendChild(f),m.appendChild(v),n.appendChild(o),n.appendChild(c),n.appendChild(p),e.appendChild(a),e.appendChild(n),e.appendChild(m),this.isVideo){var x=this.$(this.target+"-cX-Video");if(!x){x=this.$cX("video",{id:this.target+"-cX-Video",autoplay:!1,controls:this.videoControls,loop:this.videoLoop,preload:this.videoPreload,poster:this.videoPoster,dataSet:this.videoData,width:this.canvas.width,height:this.canvas.height,className:this.videoClassName});var y=[],b=this.backgroundVideo;b&&!b.propertyIsEnumerable("length")&&"object"==typeof b&&"number"==typeof b.length?y=b:y.push(this.backgroundVideo);for(var w=0;w<y.length;w++){var C=this.$cX("source",{src:y[w],type:y[w].match(/mp4$/)?"video/mp4":y[w].match(/webm$/)?"video/webm":"video/ogv"});x.appendChild(C)}}s.parentNode.insertBefore(e,s),c.appendChild(s.parentNode.appendChild(s)),s.parentNode.insertBefore(x,s)}else s.parentNode.insertBefore(e,s),c.appendChild(s.parentNode.appendChild(s));this.addRemoveViewportListeners("addEvtListener")}},this.addRemoveViewportListeners=function(t){this.addRemoveEvtListener(t,this.$("north-handler-"+this.target),"click",this.clickViewport,!1),this.addRemoveEvtListener(t,this.$("west-handler-"+this.target),"click",this.clickViewport,!1),this.addRemoveEvtListener(t,this.$("east-handler-"+this.target),"click",this.clickViewport,!1),this.addRemoveEvtListener(t,this.$("south-handler-"+this.target),"click",this.clickViewport,!1)},this.clickViewport=function(t){return function(e,i){e||(e=window.event),i||(i=t.getTargetEvent(e));var s,a,r=i.parentNode,h=i.nextSibling||i.previousSibling,n=t.$(this.remoteParentId+"-canvasXpressRemoteWindow"),o=t.$("west-handler-"+t.target),l=t.$("north-container-"+t.target),d=t.$("south-container-"+t.target),c=t.$("middle-container-"+t.target),p=t.$("east-container-"+t.target),g=t.$("west-container-"+t.target);return r&&h&&o&&l&&d&&c&&p&&g&&("closed"==i.state?(i.state="open",i.style.backgroundImage=i.close,n&&(s=i.lastRemoteWidth,a=i.lastRemoteHeight+7,t.resizeMove(n,0,0,i.lastRemoteWidth,i.lastRemoteHeight)),i.id.match(/north|south/)?(t.resizeMove(r,0,0,i.lastWidth,i.lastHeight+7),t.resizeMove(h,0,0,i.lastWidth,i.lastHeight)):(t.resizeMove(c,0,0,i.lastWidth+c.clientWidth,t.canvas.height),t.resizeMove(r,0,0,i.lastWidth+7,t.canvas.height),t.resizeMove(h,0,0,i.lastWidth,t.canvas.height)),setTimeout(function(){h.style.overflow="visible"},1e3)):(h.style.overflow="hidden",i.state="closed",i.lastLeft=parseInt(h.style.left),i.lastTop=parseInt(h.style.top),i.lastWidth=parseInt(h.style.width),i.lastHeight=parseInt(h.style.height),i.lastRemoteWidth=n?parseInt(n.clientWidth):0,i.lastRemoteHeight=n?parseInt(n.clientHeight):0,i.style.backgroundImage=i.open,i.id.match(/north|south/)?(s=parseInt(g.clientWidth)+t.canvas.width+parseInt(p.clientWidth),a=t.canvas.height+14,n&&t.resizeMove(n,0,0,s,a),t.resizeMove(h,0,0,s,0),t.resizeMove(r,0,0,s,7)):(a=parseInt(l.clientHeight)+t.canvas.height+parseInt(d.clientHeight),i.id.match(/west/)?(s=Math.max(parseInt(d.clientHeight),parseInt(p.clientWidth)+t.canvas.width+7),n&&t.resizeMove(n,0,0,s+48,a+54),t.resizeMove(h,0,0,0,t.canvas.height),t.resizeMove(r,0,0,7,t.canvas.height),t.resizeMove(c,0,0,parseInt(p.clientWidth)+t.canvas.width+7,t.canvas.height)):(s=Math.max(parseInt(d.clientHeight),parseInt(g.clientWidth)+t.canvas.width+7),n&&t.resizeMove(n,0,0,s+48,a+54),t.resizeMove(h,0,0,0,t.canvas.height),t.resizeMove(r,0,0,7,t.canvas.height),t.resizeMove(c,0,0,parseInt(g.clientWidth)+t.canvas.width+7,t.canvas.height)))),n&&setTimeout(function(){t.resizeExtContainer(s+48,a+54)},500)),!1}}(this),this.resizeViewportNorth=function(){var t=this.$("west-container-"+this.target),e=this.$("east-container-"+this.target),i=this.$("north-container-"+this.target),s=this.$("north-handler-"+this.target),a=this.$("north-wrapper-"+this.target),r=this.toolbarPermanent&&this.canvas.height>400?"20px":this.toolbarPermanent&&this.canvas.height<=400?"13px":0;t&&e&&i&&s&&a&&("block"==s.style.display&&"open"==s.state?(i.style.width=parseInt(t.style.width)+this.canvas.width+parseInt(e.style.width)+"px",a.style.width=parseInt(t.style.width)+this.canvas.width+parseInt(e.style.width)+"px"):(i.style.width=parseInt(t.style.width)+this.canvas.width+parseInt(e.style.width)+"px",a.style.width=parseInt(t.style.width)+this.canvas.width+parseInt(e.style.width)+"px",i.style.height=r+7+"px",a.style.height=r+"px"),s.style.left=parseInt(t.style.width)+"px",s.style.width=this.canvas.width+"px")},this.resizeViewportWest=function(){var t=(this.$(this.target+"-cX-Configurator"),this.$("west-container-"+this.target)),e=this.$("west-handler-"+this.target),i=this.$("west-wrapper-"+this.target);t&&e&&i&&("block"==e.style.display&&"open"==e.state?(t.style.width=this.configuratorWidth+7+22+"px",i.style.width=this.configuratorWidth+22+"px",t.style.height=this.canvas.height+"px",i.style.height=this.canvas.height+"px"):(t.style.width="7px",i.style.width="0px"),e.style.height=this.canvas.height+"px")},this.resizeViewportEast=function(){var t=(this.$(this.target+"-cX-DataFilter"),this.$("east-container-"+this.target)),e=this.$("east-handler-"+this.target),i=this.$("east-wrapper-"+this.target);t&&e&&i&&("block"==e.style.display&&"open"==e.state?(t.style.width=this.dataFilterWidth+7+6+"px",i.style.width=this.dataFilterWidth+6+"px",t.style.height=this.canvas.height+"px",i.style.height=this.canvas.height+"px"):(t.style.width="7px",i.style.width="0px"),e.style.height=this.canvas.height+"px")},this.resizeViewportSouth=function(t){var e=this.$(this.target+"-cX-DataTable"),i=this.$("west-handler-"+this.target),s=this.$("west-container-"+this.target),a=this.$("east-container-"+this.target),r=this.$("south-container-"+this.target),h=this.$("south-handler-"+this.target),n=this.$("south-wrapper-"+this.target);

if(e&&i&&s&&a&&r&&h&&n){var o=i&&"none"==i.style.display?7:0;"block"==h.style.display&&"open"==h.state||t?(r.style.height=parseInt(e.style.height)+7+2+"px",n.style.height=parseInt(e.style.height)+2+"px",r.style.width=parseInt(e.style.width)+2+o+"px",n.style.width=r.style.width):(r.style.width=parseInt(s.style.width)+this.canvas.width+parseInt(a.style.width)+"px",n.style.width=parseInt(s.style.width)+this.canvas.width+parseInt(a.style.width)+"px",r.style.height="7px",n.style.height="0px"),h.style.left=parseInt(s.style.width)+"px",h.style.width=this.canvas.width+"px"}},this.resizeViewport=function(t){if(t){var e=this.getTargetEvent(t);if("CanvasXpressHandler"==e.className)return;if(this.Ext)for(var i=0;i<CanvasXpress.references.length;i++)CanvasXpress.references[i].resizeViewport();if(e.className&&e.className.match(/x-tab-strip-text/))return}var s=this.$("middle-container-"+this.target),a=this.$("east-container-"+this.target),r=this.$("west-container-"+this.target);if(s&&a&&r){this.resizeViewportWest(),this.resizeViewportEast(),this.resizeViewportNorth(),this.resizeViewportSouth();var h=parseInt(r.style.width)+this.canvas.width+parseInt(a.style.width)+1;s.style.width=h+2+"px",s.style.height=this.canvas.height+2+"px"}},this.hideViewport=function(){if(this.configuratorLastState&&"docked"==this.configuratorLastState){var t=this.$("west-handler-"+this.target);t&&"open"==t.state&&this.clickViewport(!1,t)}if(this.dataFilterLastState&&"docked"==this.dataFilterLastState){var e=this.$("east-handler-"+this.target);e&&"open"==e.state&&this.clickViewport(!1,e)}if(this.dataTableLastState&&"docked"==this.dataTableLastState){var i=this.$("south-handler-"+this.target);i&&"open"==i.state&&this.clickViewport(!1,i)}},this.resetViewportOverflow=function(t){if(t){var e=this.$(t+"-wrapper-"+this.target);e&&(e.style.overflow="visible")}},this.initializeViewport=function(){this.setViewport()},this.initializeViewport()},CanvasXpress.prototype.initMenuLinks=function(){this.addLinkDiv=function(){if(this.$(this.target+"-cX-Link"))return void this.resetLinkDiv();var t=this.$cX("div",{id:this.target+"-cX-Link",className:"CanvasXpressLink"},{zIndex:10002,display:"none"}),e=this.$cX("ul",{id:this.target+"-cX-Link-Content",className:"CanvasXpressList"}),i=this.$("north-wrapper-"+this.target);i&&(t.appendChild(e),i.appendChild(t))},this.showLinkDiv=function(t,e){var i=this.$(this.target+"-cX-Link-Content"),s=this.$("west-container-"+this.target),a=!1;if(i){this.resetLinkDiv();var r=this.adjustedCoordinates(t);if(r){for(var h=r.x+s.offsetWidth,n=r.y,o=0;o<e.length;o++){var l=e[o].url,d=e[o].name,c=e[o].title,p=e[o].icon,g=e[o].source,u=e[o].params;if(l)a=!0;else if(g&&this.data.links&&this.data.links[g]&&(l=this.data.links[g].url,a=!0,u))for(var m in u)l=l.replace("$"+m+"$",u[m]);var f=this.$cX("li",{className:"CanvasXpressListItem"}),v=c?c:this.data.links&&g&&this.data.links[g]&&this.data.links[g].title?this.data.links[g].title:"",x=this.$cX("a",{className:"CanvasXpressListItemA",href:l,alt:v,title:v,target:"_blank"}),y=this.$cX("img",{className:"CanvasXpressListIcon",src:p?p:this.data.links&&g&&this.data.links[g]&&this.data.links[g].icon?this.data.links[g].icon:this.getPixelImage()}),b=this.$cX("span",{className:"CanvasXpressListItemText",innerHTML:d?d:this.data.links&&g&&this.data.links[g]&&this.data.links[g].name?this.data.links[g].name:o});x.appendChild(y),x.appendChild(b),f.appendChild(x),this.addRemoveLinkListeners("addEvtListener",f),i.appendChild(f)}i.parentNode.style.left=h+"px",i.parentNode.style.top=n+"px",i.parentNode.style.display=a?"block":"none"}}},this.addRemoveLinkListeners=function(t,e){e&&(this.addRemoveEvtListener(t,e,"click",this.clickLink,!1),this.addRemoveEvtListener(t,e,"mouseover",this.mouseoverLink,!1),this.addRemoveEvtListener(t,e,"mouseout",this.mouseoutLink,!1))},this.clickLink=function(t){return function(e){return e||(e=window.event),t.resetLinkDiv(),!1}}(this),this.mouseoverLink=function(t){return function(e){e||(e=window.event);var i=t.getMenuItemComp(e);return i[0].className="CanvasXpressListItemActive",i[1].className="CanvasXpressListItemAActive",!1}}(this),this.mouseoutLink=function(t){return function(e){e||(e=window.event);var i=t.getMenuItemComp(e);return i[0].className="CanvasXpressListItem",i[1].className="CanvasXpressListItemA",!1}}(this),this.resetLinkDiv=function(){var t=this.$(this.target+"-cX-Link-Content");if(t&&t.childNodes){for(;t.childNodes.length>0;)this.addRemoveLinkListeners("removeEvtListener",t.childNodes[0]),t.removeChild(t.childNodes[0]);t.parentNode.style.display="none"}},this.addMenu=function(t,e,i){var s,a,r=this.$("north-wrapper-"+this.target),h=this.$("west-container-"+this.target);if(this.resetLinkDiv(),r&&h){if(e)id=this.newId("-cX-Menu-"),s=this.$cX("div",{id:id,className:"CanvasXpressMenu",par:i},{left:"0px",top:"0px",zIndex:this.menuIndex++,display:"none"});else{this.removeMenus(),e=this.setMenu();var n=this.getTargetEvent(t),o=this.adjustedCoordinates(t,n);x=o.x+h.offsetWidth,y=o.y,id=this.newId("-cX-Menu-"),s=this.$cX("div",{id:id,className:"CanvasXpressMenu"},{left:x+"px",top:y+"px",zIndex:this.menuIndex++})}var l=this.$cX("ul",{id:this.newId("-cX-List-"),className:"CanvasXpressList"});s.appendChild(l),r.appendChild(s);for(var a=0;a<e.length;a++)"-"==e[a][0]?this.addMenuItemSep(l):this.addMenuItem(e[a],l)}return id},this.addMenuItemSep=function(t){var e=this.$cX("li",{id:this.newId("-cX-List-Item-Sep-"),className:"CanvasXpressListItemSep"}),i=this.$cX("span",{id:this.newId("-cX-List-Item-Text-Sep-"),className:"CanvasXpressListItemTextSep",innerHTML:"&nbsp;"});e.appendChild(i),t.appendChild(e)},this.addMenuItem=function(t,e){var i,s=this.newId("-cX-List-Item-"),a=this.$cX("li",{id:s,className:"CanvasXpressListItem",click:t[2],params:t[3]||[]});if(t[5]){var r=this.addMenu(!1,t[5],s);i=this.$cX("a",{id:this.newId("-cX-List-Item-A-"),className:"CanvasXpressListItemAArrow",hidefocus:"true",unselectable:"on",href:"#",menu:r})}else i=this.$cX("a",{id:this.newId("-cX-List-Item-A-"),className:"CanvasXpressListItemA",hidefocus:"true",unselectable:"on",href:"#"});var h=this.$cX("img",{id:this.newId("-cX-List-Icon-"),className:"CanvasXpressListIcon",src:this.imageDir+(t[1]||"canvasXpress.gif")}),n=this.$cX("span",{id:this.newId("-cX-List-Item-Text-"),className:"CanvasXpressListItemText",innerHTML:t[0]||""}),o=this.$cX("span",{className:"CanvasXpressListItemTextShort",innerHTML:t[4]||""});i.appendChild(h),i.appendChild(n),i.appendChild(o),a.appendChild(i),e.appendChild(a),this.addRemoveItemListeners("addEvtListener",a)},this.addRemoveItemListeners=function(t,e){return e?(this[t](e,"click",this.clickMenuItem,!1),this[t](e,"mouseover",this.mouseoverMenuItem,!1),void this[t](e,"mouseout",this.mouseoutMenuItem,!1)):this.removeMenus()},this.clickMenuItem=function(t){return function(e){e||(e=window.event);var i=t.getMenuItemComp(e);return t[i[0].click].apply(t,i[0].params),t.removeMenus(),t.cancelEvent(),!1}}(this),this.mouseoverMenuItem=function(t){return function(e){e||(e=window.event);var i=t.getMenuItemComp(e);if(i[0].className="CanvasXpressListItemActive",t.subMenuOn&&t.subMenuOn.par!=i[0].id){var s=t.$(t.subMenuOn.par);t.hideMenu([s,s.childNodes[0]],t.subMenuOn)}if(i[1].menu){var s=t.$(i[1].menu),a=i[0].parentNode.parentNode;s.style.left=a.offsetLeft+a.offsetWidth-5+"px",s.style.top=a.offsetTop+i[1].offsetTop+"px",s.style.display="block",i[1].className="CanvasXpressListItemAArrowActive"}else i[1].className="CanvasXpressListItemAActive"}}(this),this.mouseoutMenuItem=function(t){return function(e){e||(e=window.event);var i,s,a,r,h=t.adjustedCoordinates(e);if(h){var n=t.$("north-container-"+t.target),o=t.$("west-container-"+t.target);h.x+=o.offsetWidth,h.y+=n.offsetHeight;var l=t.getMenuItemComp(e);if(l[1].menu){var d=t.$(l[1].menu);if(i=d.offsetLeft,a=d.offsetTop,s=i+d.offsetWidth,r=a+d.offsetHeight,h.x>=i&&h.x<=s&&h.y>=a&&h.y<=r)return void(t.subMenuOn=d);t.hideMenu(l,d)}else{var c=l[0].parentNode.parentNode,p=c.par?t.$(c.par):!1;i=c.offsetLeft+3,a=c.offsetTop+3,s=i+c.offsetWidth-6,r=a+c.offsetHeight-6,p&&(h.x<=i||h.x>=s||h.y<=a||h.y>=r)&&t.hideMenu([p,p.childNodes[0]],c),t.hideMenu(l,d)}}}}(this),this.getMenuItemComp=function(t){var e,i=this.getTargetEvent(t);return i.tagName.match(/img|span/i)?(e=i.parentNode,i=e.parentNode):i.tagName.match(/a/i)?(e=i,i=e.parentNode):e=i.getElementsByTagName("a")[0],[i,e]},this.hideMenu=function(t,e){t&&(t[1].className=t[1].menu?"CanvasXpressListItemAArrow":"CanvasXpressListItemA",t[0].className="CanvasXpressListItem"),e&&(e.style.display="none"),this.subMenuOn=!1},this.removeMenus=function(t){var e=[];if(t)e.push(this.$(this.target+"-cX-Menu-"+t));else{var i=this.$("north-wrapper-"+this.target);if(i)for(var s=i.getElementsByTagName("div"),a=0;a<s.length;a++)"CanvasXpressMenu"==s[a].className&&e.unshift(this.$(s[a].id));this.menuIndex=1e4}if(e.length>0)for(var a=0;a<e.length;a++){for(var r=e[a],h=r.getElementsByTagName("li"),n=0;n<h.length;n++)"CanvasXpressListItemSep"!=h[n].className&&this.addRemoveItemListeners("removeEvtListener",h[n]);r.parentNode.removeChild(r)}},this.setMenu=function(){this.menu={};for(var t=["Bar","Line","Area","AreaLine","BarLine","Boxplot","Dotplot","Heatmap","Stacked","StackedLine","StackedPercent","StackedPercentLine","Candlestick","Pie","Correlation","Circular","Scatter2D","ScatterBubble2D","Scatter3D","Scatter2D","Venn","Network","Genome"],e=0;e<t.length;e++)this.menu[this.validGraphTypes[e]]=[];if("Network"==this.graphType){var i=[];i.push(["Clockwise","rotate_clockwise.png","arrowMove",[34]]),i.push(["Clockwise - Animate","rotate_clockwise_cont.png","arrowMove",[39,!0]]),i.push(["Anticlockwise","rotate_anticlockwise.png","arrowMove",[33]]),i.push(["Anticlockwise - Animate","rotate_anticlockwise_cont.png","arrowMove",[37,!0]]);var s=[];s.push(["Top","align_top.png","alignDistributeSelectedNodes",[!1,84]]),s.push(["Right","align_right.png","alignDistributeSelectedNodes",[!1,82]]),s.push(["Bottom","align_bottom.png","alignDistributeSelectedNodes",[!1,66]]),s.push(["Left","align_left.png","alignDistributeSelectedNodes",[!1,76]]);var a=[];a.push(["Vertically","distribute_vertical.png","alignDistributeSelectedNodes",[!1,86]]),a.push(["Horozontally","distribute_horizontal.png","alignDistributeSelectedNodes",[!1,72]]);var r=[];r.push(["Send to back","move_back.png","orderNodes",["sendNodeToBack"]]),r.push(["Send backward","move_backwards.png","orderNodes",["sendNodeBackward"]]),r.push(["Bring to front","move_front.png","orderNodes",["bringNodeToFront"]]),r.push(["Bring forward","move_forwards.png","orderNodes",["bringNodeForward"]]),this.isSelectNodes?(this.menu.Network.push(["Align","align_bottom.png",!1,!1,!1,s]),this.menu.Network.push(["Distribute","distribute_vertical.png",!1,!1,!1,a]),this.menu.Network.push(["Rotate","rotate_anticlockwise.png",!1,!1,!1,i]),this.menu.Network.push(["Order","move_front.png",!1,!1,!1,r]),this.menu.Network.push(["-"]),this.menu.Network.push(["Show conections","connections.png","showHideSelectedDataPoint",[!1,36],"Ctrl + Home"]),this.menu.Network.push(["-"]),this.menu.Network.push(["Show hidden nodes","show_selected.png","showHideSelectedDataPoint",[!1,45],"Ctrl + Insert"]),this.menu.Network.push(["Hide nodes","hide_selected.png","showHideSelectedDataPoint",[!1,46],"Ctrl + Delete"]),this.menu.Network.push(["-"]),this.menu.Network.push(["Undo","undo.png","alignDistributeSelectedNodes",[!1,90],"Ctrl + z"]),this.menu.Network.push(["Redo","redo.png","alignDistributeSelectedNodes",[!1,90,!0],"Ctrl + y"]),this.menu.Network.push(["-"])):this.menu.Network.push(["Rotate","rotate_anticlockwise.png",!1,!1,!1,i])}for(var e=0;e<t.length;e++)this.menu[this.validGraphTypes[e]].push(["Reset","refresh.png","masterReset",[],"ESC"]),this.menu[this.validGraphTypes[e]].push(["Print","disk.png","print",[],"Ctrl + P"]);return this.menu[this.graphType]},this.resetMenuLinks=function(){this.resetLinkDiv(),this.removeMenus()},this.initializeMenuLinks=function(){this.disableEvents||this.addLinkDiv()},this.initializeMenuLinks()},CanvasXpress.prototype.initToolbarTooltip=function(){this.addToolbarDiv=function(){if(!this.$(this.target+"-cX-Toolbar")){var t=this.canvas.height>400?"16px":"8px",e=this.$cX("div",{id:this.target+"-cX-Toolbar"},{position:"absolute",overflow:this.toolbarPermanent?"visible":"hidden",width:this.width+"px",height:"0px",left:"7px",top:this.toolbarPermanent?"0px":"12px",zIndex:9e3}),i=this.$cX("img",{src:this.getPixelImage()+"?"+(new Date).getDayYear()+":"+this.userId}),s=this.$cX("img",{id:this.target+"-cX-ToolbarHelp",className:"CanvasXpressToolbarImage",src:this.imageDir+"help1.png",alt:"Help",title:"Help"},{width:t,height:t}),a=this.$cX("img",{id:this.target+"-cX-ToolbarSave",className:"CanvasXpressToolbarImage",src:this.imageDir+"disk.png",alt:"Save as png",title:"Save as png"},{width:t,height:t}),r=this.$cX("img",{id:this.target+"-cX-ToolbarLayout",className:"CanvasXpressToolbarImage",src:this.appLayout?this.imageDir+"configure_hide.png":this.isLayoutConfigurator?this.imageDir+"configure_show.png":this.imageDir+"configure_simple_show.png",alt:this.appLayout?"Basic layout":"Application layout",title:this.appLayout?"Basic layout":"Application layout"},{width:t,height:t,display:this.disableDataFilters||this.disableDataTable||this.disableConfigurator?"none":"block"}),h=this.$cX("img",{id:this.target+"-cX-ToolbarFilter",className:"CanvasXpressToolbarImage",src:this.imageDir+"funnel.png",alt:"Filter data",title:"Filter data"},{width:t,height:t,display:this.disableDataFilters?"none":"block"}),n=this.$cX("img",{id:this.target+"-cX-ToolbarData",className:"CanvasXpressToolbarImage",src:this.imageDir+"table.png",alt:"Show data",title:"Show data"},{width:t,height:t,display:this.disableDataTable?"none":"block"});(this.isVML||this.disableConfigurator||this.isIE&&this.browserVersion<9)&&(n.style.marginRight="4px");var o=this.$cX("img",{id:this.target+"-cX-ToolbarConfigurator",className:"CanvasXpressToolbarImage",src:this.imageDir+"cog.png",alt:"Configure plot",title:"Configure plot"},{width:t,height:t,marginRight:"4px",display:this.isVML||this.disableConfigurator||this.isIE&&this.browserVersion<9?"none":"block"}),l=this.$cX("div",{id:this.target+"-cX-ToolbarHelpDescription",className:"CanvasXpressToolbarHelp draggable"},{cursor:"move",display:"none",padding:"10px",position:"absolute"}),d=this.$cX("img",{id:this.target+"-cX-ToolbarHelpClose",className:"CanvasXpressToolbarHelp",src:this.imageDir+"cancel1.png",alt:"Close",title:"Close"});l.appendChild(document.createTextNode("Help")),l.appendChild(d),l.appendChild(this.$cX("br")),this.addHelp(l),e.appendChild(i),e.appendChild(o),e.appendChild(n),e.appendChild(h),e.appendChild(r),e.appendChild(a),e.appendChild(s),e.appendChild(l);var l=this.$("north-wrapper-"+this.target);l&&(l.appendChild(e),this.addRemoveToolbarListeners("addEvtListener"))}},this.addRemoveToolbarListeners=function(t){this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarHelp"),"click",this.clickHelp,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarSave"),"click",this.print,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarLayout"),"click",this.clickLayout,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarFilter"),"click",this.clickDataFilters,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarData"),"click",this.clickDataTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarConfigurator"),"click",this.clickGraphConfigurator,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarHelpClose"),"click",this.closeHelp,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarHelpDescription"),"mousedown",this.registerMousemove,!1)},this.clickHelp=function(t){return function(e){e||(e=window.event);var i=t.$(t.target+"-cX-Toolbar"),s=t.$(t.target+"-cX-ToolbarHelpDescription");return i&&s&&(i.style.overflow="visible",s.style.display="block",s.style.left=(e.layerX||e.x)-400+"px",s.style.top=(e.layerY||e.y)+"px"),!1}}(this),this.closeHelp=function(t){return function(e){e||(e=window.event);var i=t.$(t.target+"-cX-Toolbar"),s=t.$(t.target+"-cX-ToolbarHelpDescription");return i&&s&&(s.style.display="none",setTimeout(function(){i.style.overflow=t.toolbarPermanent?"visible":"hidden"},300)),!1}}(this),this.clickLayout=function(t){return function(e){e||(e=window.event);var i=e.target||e.srcElement;if(t.appLayout=t.appLayout?!1:!0,i.src=t.appLayout?t.imageDir+"configure_hide.png":t.imageDir+"configure_show.png",i.alt=t.appLayout?"Basic layout":"Application layout",i.title=t.appLayout?"Basic layout":"Application layout",t.appLayout){var s=t.isLayoutConfigurator?500:1;t.isLayoutConfigurator&&(t.addConfigurator(),t.selectConfig(!1,!0),(!t.configuratorLastState||t.configuratorLastState&&"docked"!=t.configuratorLastState)&&t.clickDockUndockConfigurator()),setTimeout(function(){t.showDataFilter(),(!t.dataFilterLastState||t.dataFilterLastState&&"docked"!=t.dataFilterLastState)&&(t.moveDataFilter(),t.activeAccordion||setTimeout(function(){"Genome"==t.graphType?t.activateAccordion(!1,t.$(t.target+"-cX-DataFilterGenomeHeader")):"Network"==t.graphType?t.activateAccordion(!1,t.$(t.target+"-cX-DataFilterNodeHeader")):t.activateAccordion(!1,t.$(t.target+"-cX-DataFilterVariableHeader"))},500)),setTimeout(function(){t.updateDataTable(),(!t.dataTableLastState||t.dataTableLastState&&"docked"!=t.dataTableLastState)&&t.moveDataTableDiv("dock"),setTimeout(function(){var e=t.$("middle-container-"+t.target);t.dataTableTarget=t.$(t.target+"-cX-DataTable"),t.updateDataTableResizerDiv(!1,parseInt(e.style.width)-4,parseInt(t.dataTableTarget.style.height)),t.endDataTableResizerDiv(),t.hideToolbar()},500)},500)},s)}else t.isLayoutConfigurator&&t.closeConfigurator(),setTimeout(function(){t.activeAccordion&&t.activateAccordion(!1,t.activeAccordion.previousSibling),t.hideDataFilter(),setTimeout(function(){t.hideTable(),t.hideToolbar()},500)},500);return!1}}(this),this.clickDataTable=function(t){return function(e){return e||(e=window.event),t.updateDataTable(),!1}}(this),this.clickDataFilters=function(t){return function(e){return e||(e=window.event),t.showDataFilter(),!1}}(this),this.clickGraphConfigurator=function(t){return function(e){return e||(e=window.event),t.addConfigurator(),!1}}(this),this.addHelp=function(t){var e=this.$cX("div",!1,{width:"400px"});e.appendChild(this.$cX("br"));var i=this.$cX("img",{src:this.imageDir+"help1.png"});e.appendChild(i),e.appendChild(document.createTextNode(" Show this help")),e.appendChild(this.$cX("br"));var s=this.$cX("img",{src:this.imageDir+"disk.png"});e.appendChild(s),e.appendChild(document.createTextNode(" Save")),e.appendChild(this.$cX("br"));var a=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"Save the image as a 'png' file (in this toolbar) or save the data as an excel file (in the data table widget)."});e.appendChild(a);var r=this.$cX("img",{src:this.imageDir+"funnel.png"});e.appendChild(r),e.appendChild(document.createTextNode(" Filters")),e.appendChild(this.$cX("br"));var h=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"Widget used to filter the data and metadata. Metadata will be automatically assigned as text, numeric or date."});e.appendChild(h);var r=this.$cX("img",{src:this.imageDir+"table.png"});e.appendChild(r),e.appendChild(document.createTextNode(" Show data")),e.appendChild(this.$cX("br"));var n=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"Show the data used for this visualization in an HTML table."});e.appendChild(n);var i=this.$cX("img",{src:this.imageDir+"cog.png"});e.appendChild(i),e.appendChild(document.createTextNode(" Show the configurator")),e.appendChild(this.$cX("br"));var o=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"This widget allows you to customize this graph. You may enter the name of the property you wish to customize in the text box (which filters as you type) or browse through a number of categories.<br>You will find a short description for the property you select along with its category and links to other relevant properties.<br>You will also see the current value for the seleced property along with a link to an additional widget to help you specifying the new value."});e.appendChild(o);var l=this.$cX("img",{src:this.imageDir+"lightbulb.png"});e.appendChild(l),e.appendChild(document.createTextNode(" Show or hide advanced customizations")),e.appendChild(this.$cX("br"));var d=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"Displayed in the configurator widget."});e.appendChild(d);var c=this.$cX("img",{src:this.imageDir+"find.png"});e.appendChild(c),e.appendChild(document.createTextNode(" Search by customizable categories")),e.appendChild(this.$cX("br"));var p=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"Displayed in the configurator widget to facilitate searching for customizable property."});e.appendChild(p);var g=this.$cX("img",{src:this.imageDir+"pin.png"});e.appendChild(g),e.appendChild(document.createTextNode(" Dock widget to the side")),e.appendChild(this.$cX("br"));var u=this.$cX("img",{src:this.imageDir+"unpin.png"});e.appendChild(u),e.appendChild(document.createTextNode(" Undock widget from the side")),e.appendChild(this.$cX("br"));var m=this.$cX("img",{src:this.imageDir+"cancel1.png"});e.appendChild(m),e.appendChild(document.createTextNode(" Close widget")),e.appendChild(this.$cX("br")),e.appendChild(this.$cX("br"));var f=this.$cX("a",{href:"http://canvasxpress.org",target:"_blank",innerHTML:"canvasXpress"});e.appendChild(document.createTextNode("Additional documentation at ")),e.appendChild(f),e.appendChild(this.$cX("br")),t.appendChild(e)},this.showToolbar=function(t){if(!this.toolbarPermanent){var e=this.$(this.target+"-cX-Toolbar"),i=this.$("west-container-"+this.target);if(e&&0==parseInt(e.style.height)&&i){var s=this,a=parseInt(i.style.width);this.resizeMove(e,0,12,this.width+a,20,250),t&&setTimeout(function(){s.hideToolbar()},5e3)}}},this.hideToolbar=function(){if(!this.toolbarPermanent){var t=this.$(this.target+"-cX-Toolbar"),e=this.$("west-container-"+this.target);if(t&&20==parseInt(t.style.height)&&e){var i=parseInt(e.style.width);this.resizeMove(t,0,12,this.width+i,0)}}},this.isToolbar=function(t){t||(t=window.event);var e=this.adjustedCoordinates(t);if(e){var i=e.x,s=e.y;s>0&&24>s&&i>0&&i<this.width?this.showToolbar():s>24&&s<this.height&&i>0&&i<this.width&&this.hideToolbar()}},this.addTooltipDiv=function(t,e,i){var s=0,a=this.target+"-cX-TooltipDiv"+s,r=this.$(this.target+"-cX-Info");r&&"none"!=r.style.display&&(e=parseInt(r.style.left),i=parseInt(r.style.top));for(var h=this.$(a);h;)s++,a=this.target+"-cX-TooltipDiv"+s,h=this.$(a);var n=this.$cX("div",{id:a,className:"CanvasXpressTooltip draggable"},{left:e+"px",top:i+"px",zIndex:29010}),o=this.$cX("img",{id:a+"Close",className:"CanvasXpressTooltip",src:this.imageDir+"cancel1.png",alt:"Close",title:"Close"}),l=this.$cX("div",{id:a+"HTML",innerHTML:t||""},{clear:"both"});return n.appendChild(o),n.appendChild(l),document.body.appendChild(n),this.resetInfoSpan(),n},this.addRemoveTooltipDivsListeners=function(t,e){this.addRemoveEvtListener(t,e,"mousedown",this.registerMousemove,!1),this.addRemoveEvtListener(t,e,"touchstart",this.registerMousemove,!1),this.addRemoveEvtListener(t,e.firstChild,"click",this.closeTooltipDiv,!1)},this.closeTooltipDiv=function(t){return function(e){e||(e=window.event);var i=e.target||e.srcElement;if(i){var s=i.parentNode;t.addRemoveTooltipDivsListeners("removeEvtListener",s),s.parentNode.removeChild(s)}return!1}}(this),this.showTooltipDiv=function(t,e){var i=this.adjustedCoordinates(t);if(i){var s=i.x,a=t?i.y:i.y+25,r=this.addTooltipDiv(e,s,a);this.addRemoveTooltipDivsListeners("addEvtListener",r)}},this.resetTooltipDivs=function(){for(var t=0,e=this.target+"-cX-TooltipDiv"+t,i=this.$(e);i;)this.addRemoveTooltipDivsListeners("removeEvtListener",i),i.parentNode.removeChild(i),t++,e=this.target+"-cX-TooltipDiv"+t,i=this.$(e)},this.addInfoSpan=function(){if(this.$(this.target+"-cX-Info"))return void this.resetInfoSpan();var t=this.$cX("span",{id:this.target+"-cX-Info",className:"CanvasXpressTooltip"},{display:"none",zIndex:29010});document.body.appendChild(t)},this.resetInfoSpan=function(t,e){var i=this.$(this.target+"-cX-Info");if(i){var s=(new Date).getTime()-this.infoStartTime;(s>this.infoTimeIn||e)&&(i.style.left="0px",i.style.top="0px",i.style.display="none",i.innerHTML="")}},this.showInfoSpan=function(t,e){if(!this.draggingOn&&!this.remoteUpdating){var i=(new Date).getTime()-this.infoStartTime,s=this.$(this.target+"-cX-Info");if(s&&e&&""!=e&&i>this.infoTimeIn){var a=this.adjustedCoordinates(t,s);if(a){var r=a.x,h=t?a.y:a.y+25;if(isNaN(e)||(e=e.toString()),e.match(/\w/)){s.innerHTML=e,s.style.left=r+10+"px",s.style.top=h-20+"px",s.style.display="inline",s.style.zIndex=parseInt(s.style.zIndex);var n=parseInt(s.clientWidth),o=parseInt(s.clientHeight);n<window.innerWidth&&n>window.innerWidth+window.pageXOffset-r&&n+20<r-window.pageXOffset&&(s.style.left=r-(n+20)+"px",s.style.left=r-(parseInt(s.clientWidth)+20)+"px"),o<window.innerHeight&&o>window.innerHeight+window.pageYOffset-h&&o-15<h-window.pageYOffset&&(s.style.top=h-(o-15)+"px",s.style.top=h-(parseInt(s.clientHeight)-15)+"px"),this.infoStartTime=(new Date).getTime();var l=this,d=function(){this.update=function(){var e=(new Date).getTime();e-l.infoStartTime>l.infoTimeOut&&(l.resetInfoSpan(),clearInterval(t))};var t=setInterval(this.update,100)};d.call()}}}}},this.initializeToolbarTooltip=function(){this.disableEvents||(this.disableToolbar||this.addToolbarDiv(),this.addInfoSpan())},this.initializeToolbarTooltip()},CanvasXpress.prototype.initConfigurator=function(){this.addConfigurator=function(t){return function(e,i,s,a){e||(e=window.event);var r=t.$(t.target+"-cX-Configurator");if(r&&(t.activeTarget&&(t.activeTarget.style.zIndex=1e4),t.activeTarget=r,t.activeTarget.style.zIndex=10001,t.configuratorLastState&&"docked"==t.configuratorLastState)){var h=t.$("west-handler-"+t.target);return void t.clickViewport(e,h)}var n="Search property or function";if(!(t.isVML||t.disableConfigurator||this.isIE&&this.browserVersion<9)){if(t.configuringOn=!0,i)if(t.isArray(i)&&(i=i[0]),"Network"==t.graphType)if(t.configuringNetwork=i,t.data.nodes.length>i)n="Configure "+(t.data.nodes[i].label||t.data.nodes[i].name||t.data.nodes[i].id);else{var o=t.data.edges[i-t.data.nodes.length],l=t.data.nodes[t.data.nodeIndices[o.id1]],d=t.data.nodes[t.data.nodeIndices[o.id2]];n="Configure "+(l.label||l.name||l.id)+" - "+(d.label||l.name||d.id)}else"Genome"==t.graphType&&(t.configuringGenome=i,n="Configure track "+i);var c=null!=s&&null!=a?{x:s,y:a}:t.adjustedCoordinates(e);if(c){s=t.applicationLook||"docked"==t.configuratorLastState?0:c.x,a=t.applicationLook||"docked"==t.configuratorLastState?0:c.y;var r=t.$cX("div",{id:t.target+"-cX-Configurator",className:t.applicationLook?"CanvasXpressConfigurator fixed":"CanvasXpressConfigurator draggable"},{cursor:"move",left:s+"px",top:a+"px",padding:"10px",position:"absolute",zIndex:10001}),p=t.$cX("div",{id:t.target+"-cX-ConfiguratorKeyText"},{display:"block",marginBottom:"5px",width:t.configuratorWidth+"px"}),g=t.$cX("span",{id:t.target+"-cX-ConfiguratorKeyTextSpan",className:"CanvasXpressConfigurator",innerHTML:n}),u=t.$cX("img",{id:t.target+"-cX-ConfiguratorKeyAdvanced",className:"CanvasXpressConfigurator",src:t.showAdvancedConfiguration?t.imageDir+"lightbulb.png":t.imageDir+"lightbulb_off.png",alt:t.showAdvancedConfiguration?"Show basic configuaration properties":"Show advanced configuaration properties",title:t.showAdvancedConfiguration?"Show basic configuaration properties":"Show advanced configuaration properties"}),m=t.$cX("img",{id:t.target+"-cX-ConfiguratorKeySearch",className:"CanvasXpressConfigurator",src:t.imageDir+"find.png",alt:"Browse properties by category",title:"Browse properties by category"}),f=t.$cX("img",{id:t.target+"-cX-ConfiguratorKeyDock",className:"CanvasXpressConfigurator",src:t.applicationLook?t.imageDir+"unpin.png":t.imageDir+"pin.png",alt:t.applicationLook?"Undock":"Dock",title:t.applicationLook?"Undock":"Dock",state:t.applicationLook?"docked":"free"}),v=t.$cX("img",{id:t.target+"-cX-ConfiguratorKeyClose",className:"CanvasXpressConfigurator",src:t.imageDir+"cancel1.png",alt:"Close",title:"Close"}),x=t.$cX("input",{id:t.target+"-cX-ConfiguratorKey",className:"CanvasXpressConfigurator",type:"text"},{display:"block",width:t.configuratorWidth+"px"}),y=t.$cX("select",{id:t.target+"-cX-ConfiguratorCategories",className:"CanvasXpressConfigurator",size:5},{display:"none",width:t.configuratorWidth+"px"}),b=t.$cX("div",{id:t.target+"-cX-ConfiguratorSugestionsText",innerHTML:"Select property"},{display:"none",margin:"5px 0px 5px 0px",width:t.configuratorWidth+"px"}),w=t.$cX("select",{id:t.target+"-cX-ConfiguratorSugestions",className:"CanvasXpressConfigurator",size:t.mobileApp?5:10},{display:"none",width:t.configuratorWidth+"px"}),C=t.$cX("div",{id:t.target+"-cX-ConfiguratorSugestionsDescription"},{display:"none",margin:"5px 0px 5px 0px",width:t.configuratorWidth+"px",minHeight:"56px",overflow:"auto"}),T=t.$cX("div",{id:t.target+"-cX-ConfiguratorValueText",innerHTML:"Current value"},{display:"none",margin:"5px 0px 5px 0px",width:t.configuratorWidth+"px"}),D=t.$cX("div",{id:t.target+"-cX-ConfiguratorSeeAlso"},{display:"none",width:t.configuratorWidth+"px",minHeight:"20px",overflow:"auto"}),S=t.$cX("input",{id:t.target+"-cX-ConfiguratorValue",className:"CanvasXpressConfigurator",type:"text"},{display:"none",width:t.configuratorWidth+"px"}),A=t.$cX("input",{id:t.target+"-cX-ConfiguratorApply",value:"Apply",type:"button"},{display:"none",cssFloat:"left",borderRadius:"5px",width:t.configuratorWidth/2+"px"}),k=t.$cX("input",{id:t.target+"-cX-ConfiguratorButton",value:"Draw",type:"button"},{display:"none",cssFloat:"left",borderRadius:"5px",width:t.configuratorWidth/2+"px"}),M=t.$cX("img",{id:t.target+"-cX-ConfiguratorOptionsClose",className:"CanvasXpressConfigurator",src:t.imageDir+"cancel1.png",alt:"Close",title:"Close"}),I=t.$cX("div",{id:t.target+"-cX-ConfiguratorOptions",className:"CanvasXpressConfigurator draggable"},{cursor:"move",display:"none",padding:"10px",position:"absolute"}),L=t.$cX("div",{id:t.target+"-cX-ConfiguratorColorCurrent",className:"CanvasXpressConfiguratorColor"},{width:"181px",height:"16px",cssFloat:"left",cursor:"default"}),N=t.$cX("img",{id:t.target+"-cX-ConfiguratorColorClose",className:"CanvasXpressConfigurator",src:t.imageDir+"cancel1.png",alt:"Close",title:"Close"}),z=t.$cX("div",{id:t.target+"-cX-ConfiguratorColor",className:"CanvasXpressConfigurator draggable"},{width:"204px",cursor:"move",display:"none",padding:"10px",position:"absolute"}),F=t.$cX("div",{id:t.target+"-cX-ConfiguratorFilter",className:"CanvasXpressConfiguratorFilter draggable",innerHTML:'Build filter ("+" to set "-" to remove)'},{cursor:"move",display:"none",padding:"10px",position:"absolute"}),P=t.$cX("img",{id:t.target+"-cX-ConfiguratorFilterClose",className:"CanvasXpressConfigurator",src:t.imageDir+"cancel1.png",alt:"Close",title:"Close"});p.appendChild(g),p.appendChild(v),p.appendChild(f),p.appendChild(u),p.appendChild(m),I.appendChild(document.createTextNode("Select option ...")),I.appendChild(M),I.appendChild(t.$cX("br")),z.appendChild(L),z.appendChild(N),z.appendChild(t.$cX("br")),F.appendChild(P),F.appendChild(t.$cX("br")),r.appendChild(p),r.appendChild(x),r.appendChild(y),r.appendChild(b),r.appendChild(w),r.appendChild(C),r.appendChild(D),r.appendChild(T),r.appendChild(S),r.appendChild(A),r.appendChild(k),r.appendChild(I),r.appendChild(z),r.appendChild(F);var B=t.$("west-wrapper-"+t.target);B&&(B.appendChild(r),t.activeTarget&&(t.activeTarget.style.zIndex=1e4),t.activeTarget=r,t.addRemoveConfiguratorListeners("addEvtListener"),(t.configuringNetwork||t.configuringGenome)&&t.selectConfig(!1,!0),setTimeout(function(){x.focus()},300))}}}}(this),this.addRemoveConfiguratorListeners=function(t){var e=this.$(this.target+"-cX-Configurator"),i=this.$(this.target+"-cX-ConfiguratorCategories"),s=this.$(this.target+"-cX-ConfiguratorSugestions"),a=this.$(this.target+"-cX-ConfiguratorApply"),r=this.$(this.target+"-cX-ConfiguratorButton"),h=this.$(this.target+"-cX-ConfiguratorKeyClose"),n=this.$(this.target+"-cX-ConfiguratorKeyDock"),o=this.$(this.target+"-cX-ConfiguratorKeyAdvanced"),l=this.$(this.target+"-cX-ConfiguratorKeySearch"),d=this.$(this.target+"-cX-ConfiguratorOptions"),c=this.$(this.target+"-cX-ConfiguratorOptionsClose"),p=this.$(this.target+"-cX-ConfiguratorColor"),g=this.$(this.target+"-cX-ConfiguratorColorClose"),u=this.$(this.target+"-cX-ConfiguratorFilter"),m=this.$(this.target+"-cX-ConfiguratorFilterClose");

e&&i&&s&&r&&a&&h&&n&&o&&l&&d&&c&&p&&g&&u&&m&&(this[t](e,"mousedown",this.registerMousemove,!1),this[t](i,"change",this.changeCategory,!1),this[t](i,"click",this.changeCategory,!1),this[t](s,"change",this.clickSuggestions,!1),this[t](s,"click",this.clickSuggestions,!1),this[t](a,"click",this.clickApplyConfigurator,!1),this[t](r,"click",this.clickConfigurator,!1),this[t](l,"click",this.clickSearch,!1),this[t](o,"click",this.clickAdvanced,!1),this[t](n,"click",this.clickDockUndockConfigurator,!1),this[t](h,"click",this.closeConfigurator,!1),this[t](d,"mousedown",this.registerMousemove,!1),this[t](c,"click",this.closePropertyOptions,!1),this[t](p,"mousedown",this.registerMousemove,!1),this[t](g,"click",this.closePropertyColor,!1),this[t](u,"mousedown",this.registerMousemove,!1),this[t](m,"click",this.closePropertyFilter,!1))},this.getConfigurableProperties=function(){if(this.configuringNetwork)return this.data.nodes.length>this.configuringNetwork?this.getNodeConfigurableProperties(this.configuringNetwork):this.getEdgeConfigurableProperties(this.configuringNetwork-this.data.nodes.length);if(this.configuringGenome){if(!isNaN(this.configuringGenome)||this.configuringGenome.match(/:/))return this.featureConfigurableProperties;if(this.configuringGenome.match(/track/))return this.trackConfigurableProperties;this.configuringGenome=!1}var t=[];for(var e in CanvasXpress.doc.P){var i=CanvasXpress.doc.P[e].M,s=CanvasXpress.doc.P[e].U;CanvasXpress.doc.M[i].U?CanvasXpress.doc.M[i].U.hasOwnProperty(this.graphType)&&(this.showAdvancedConfiguration?t.push(e):CanvasXpress.doc.P[e].A||t.push(e)):this.showAdvancedConfiguration?s?s.hasOwnProperty(this.graphType)&&t.push(e):t.push(e):CanvasXpress.doc.P[e].A||s&&t.push(s.hasOwnProperty(this.graphType)?e:e)}return t},this.getConfigurableObjectDoc=function(t){return this.configuringNetwork?this.data.nodes.length>this.configuringNetwork?CanvasXpress.doc.N[t]?CanvasXpress.doc.N[t]:!1:CanvasXpress.doc.E[t]?CanvasXpress.doc.E[t]:!1:this.configuringGenome?!isNaN(this.configuringGenome)||this.configuringGenome.match(/:/)?CanvasXpress.doc.F[t]?CanvasXpress.doc.F[t]:!1:this.configuringGenome.match(/track/)?CanvasXpress.doc.G[t]?CanvasXpress.doc.G[t]:!1:(this.configuringGenome=!1,CanvasXpress.doc.P[t]?CanvasXpress.doc.P[t]:!1):CanvasXpress.doc.P[t]?CanvasXpress.doc.P[t]:!1},this.selectConfig=function(t,e){var i=this.$(this.target+"-cX-ConfiguratorKey"),s=this.$(this.target+"-cX-ConfiguratorSugestionsText"),a=this.$(this.target+"-cX-ConfiguratorSugestions"),r=this.$(this.target+"-cX-ConfiguratorSugestionsDescription"),h=this.$(this.target+"-cX-ConfiguratorValueText"),n=this.$(this.target+"-cX-ConfiguratorSeeAlso"),o=this.$(this.target+"-cX-ConfiguratorValue"),l=this.$(this.target+"-cX-ConfiguratorApply"),d=this.$(this.target+"-cX-ConfiguratorButton"),c=this.$(this.target+"-cX-ConfiguratorValueHREF"),p=document.activeElement,g=this.getConfigurableProperties(),u=[];if(13==this.getKeyCode(t)){if(this.resetOptionColorFilters(),this.editingDescriptionOn)this.submitEditPropertyDescription();else if(a&&o&&o.value){for(var m=!1,f=0;f<g.length;f++)if(a.value==g[f]){m=!0;break}m?this.clickConfigurator(t,a,o):this.resetConfigurator()}}else{if(p.id.match(/canvasXpressConfiguratorFilterValue/))return;if(i&&p.id==i.id||e){this.resetOptionColorFilters(),this.resetEditPropertyDescription();for(var f=0;f<g.length;f++)g[f].toLowerCase().indexOf(i.value.toLowerCase())>=0&&u.push(g[f]);if(u.length>0&&s&&a&&r&&h&&n&&o&&d&&l){if(this.resetSugestions(),this.configuringNetwork||this.configuringGenome){u.sort();for(var f=0;f<u.length;f++){var g=this.$cX("option",{text:u[f],value:u[f]});try{a.add(g,null)}catch(v){a.add(g)}}}else{u.sort(function(t,e){return CanvasXpress.doc.P[t].M>CanvasXpress.doc.P[e].M?1:CanvasXpress.doc.P[e].M>CanvasXpress.doc.P[t].M?-1:t>e?1:e>t?-1:0});for(var f=0;f<u.length;f++){var g=this.$cX("option",{text:CanvasXpress.doc.P[u[f]].M?CanvasXpress.doc.P[u[f]].M+" : "+u[f]:"NA : "+u[f],value:u[f]});try{a.add(g,null)}catch(v){a.add(g)}}}a.options[0].selected=!0,this.setConfiguratorPropertyValue(a,r,h,n,o),s.innerHTML="Select property ("+u.length+")",s.style.display="block",a.style.display="block",r.style.display="block",h.style.display="block",n.style.display="block",o.style.display="block",d.style.display="block",l.style.display="block"}else i.value=i.value.slice(0,i.value.length-1)}else o&&p.id==o.id?(this.resetOptionColorFilters(),this.resetEditPropertyDescription(),c&&"color"==c.innerHTML&&(c.style.color=o.value?this.rgbToHex(this.validateColor(o.value.replace(/[\'\"]/g,""))):this.foreground)):this.remoteService&&(this.resetOptionColorFilters(),this.selectDataSet(t))}return!1},this.clickSearch=function(t){return function(e){e||(e=window.event),t.configuringNetwork=!1,t.configuringGenome=!1,t.resetEditOptionColorFilters();var i=t.$(t.target+"-cX-ConfiguratorKeyTextSpan"),s=t.$(t.target+"-cX-ConfiguratorKey"),a=t.$(t.target+"-cX-ConfiguratorCategories"),r=t.$(t.target+"-cX-ConfiguratorSugestionsText"),h=t.$(t.target+"-cX-ConfiguratorSugestions"),n=t.$(t.target+"-cX-ConfiguratorSugestionsDescription"),o=t.$(t.target+"-cX-ConfiguratorValueText"),l=t.$(t.target+"-cX-ConfiguratorSeeAlso"),d=t.$(t.target+"-cX-ConfiguratorValue"),c=t.$(t.target+"-cX-ConfiguratorButton"),p=t.$(t.target+"-cX-ConfiguratorApply"),g=t.$(t.target+"-cX-ConfiguratorOptions"),u=t.$(t.target+"-cX-ConfiguratorColor"),m=t.$(t.target+"-cX-ConfiguratorFilter"),f=t.getKeys(CanvasXpress.doc.M).sort(),v=[];if(s&&"none"==s.style.display)i&&(i.innerText="Search property or function"),a&&(a.style.display="none"),s.value="",s.style.display="block";else{if(i)for(var x=0;x<f.length;x++)CanvasXpress.doc.M[f[x]].U?CanvasXpress.doc.M[f[x]].U.hasOwnProperty(t.graphType)&&(t.showAdvancedConfiguration?v.push(f[x]):CanvasXpress.doc.M[f[x]].B&&v.push(f[x])):t.showAdvancedConfiguration?v.push(f[x]):CanvasXpress.doc.M[f[x]].B&&v.push(f[x]),i.innerText="Select category ("+v.length+")";if(s&&(s.style.display="none"),a){t.resetCategories();for(var x=0;x<v.length;x++){var y=t.$cX("option",{text:v[x],value:v[x]});try{a.add(y,null)}catch(b){a.add(y)}}a.style.display="block"}}return r&&h&&n&&o&&l&&d&&c&&p&&g&&u&&m&&(r.style.display="none",h.style.display="none",n.style.display="none",o.style.display="none",l.style.display="none",d.style.display="none",c.style.display="none",p.style.display="none",g.style.display="none",u.style.dysplay="none",m.style.dysplay="none"),!1}}(this),this.clickDockUndockConfigurator=function(t){return function(e,i){e||(e=window.event);var s=t.$(t.target+"-cX-Configurator"),a=t.$(t.target+"-cX-ConfiguratorKeyDock"),r=t.$("middle-container-"+t.target),h=t.$("west-container-"+t.target),n=t.$("west-handler-"+t.target),o=t.$("east-container-"+t.target);if(s&&a&&r&&h&&n&&o)if("free"!=a.state||i)t.configuringOn="free",s.className="CanvasXpressConfigurator draggable",s.style.cursor="move",a.src=t.imageDir+"pin.png",a.alt="Dock",a.title="Dock",a.state="free",t.configuratorLastState="free",t.resizeMove(h,0,0,7,t.canvas.height,500,function(){r.style.width=7+t.canvas.width+o.clientWidth}),t.resizeViewportWest(),n.style.display="none",setTimeout(function(){s.style.height=""},500);else{{var l=2*parseInt(s.style.padding)+2;s.clientHeight-l}t.configuringOn="docked",t.resizeViewportWest(),s.className="CanvasXpressConfigurator fixed",s.style.cursor="default",a.src=t.imageDir+"unpin.png",a.alt="Undock",a.title="Undock",a.state="docked",t.configuratorLastState="docked",r.style.width=s.clientWidth+7+t.canvas.width+o.clientWidth+2,t.resizeMove(h,0,0,s.clientWidth+7,t.canvas.height,500,null),t.resizeMove(s,0,0,t.configuratorWidth,t.canvas.height-l,500,null),n.style.display="block",setTimeout(function(){t.resizeViewportWest()},500)}return!1}}(this),this.clickAdvanced=function(t){return function(e){e||(e=window.event);var i=t.$(t.target+"-cX-ConfiguratorKey"),s=t.$(t.target+"-cX-ConfiguratorKeyAdvanced");return s&&(t.showAdvancedConfiguration?(t.showAdvancedConfiguration=!1,s.src=t.imageDir+"lightbulb_off.png",s.alt="Show advanced configuaration properties",s.title="Show advanced configuaration properties"):(t.showAdvancedConfiguration=!0,s.src=t.imageDir+"lightbulb.png",s.alt="Show basic configuaration properties",s.title="Show basic configuaration properties"),i&&"none"==i.style.display?(i.value="",i.style.display="block",t.clickSearch()):(t.resetEditOptionColorFilters(),t.resetEditPropertyDescription(),t.resetPropertySeeAlsoLinks(),t.selectConfig(!1,!0))),!1}}(this),this.closeConfigurator=function(t){return function(e){return e||(e=window.event),t.resetViewportOverflow("west"),t.clickDockUndockConfigurator(e,!0),t.resetConfigurator(),!1}}(this),this.changeCategory=function(t){return function(e,i){e||(e=window.event),t.resetEditOptionColorFilters();var s=t.$(t.target+"-cX-ConfiguratorCategories"),a=t.$(t.target+"-cX-ConfiguratorSugestionsText"),r=t.$(t.target+"-cX-ConfiguratorSugestions"),h=t.$(t.target+"-cX-ConfiguratorSugestionsDescription"),n=t.$(t.target+"-cX-ConfiguratorValueText"),o=t.$(t.target+"-cX-ConfiguratorSeeAlso"),l=t.$(t.target+"-cX-ConfiguratorValue"),d=t.$(t.target+"-cX-ConfiguratorApply"),c=t.$(t.target+"-cX-ConfiguratorButton"),p=t.$(t.target+"-cX-ConfiguratorOptions"),g=t.$(t.target+"-cX-ConfiguratorColor"),u=t.$(t.target+"-cX-ConfiguratorFilter"),m=CanvasXpress.doc.M;if(s&&s.value&&a&&r&&h&&n&&o&&l&&c&&p&&g&&u){var f=t.showAdvancedConfiguration?m[s.value].P.sort():m[s.value].B.sort();t.resetSugestions();for(var v=0;v<f.length;v++){var x=t.$cX("option",{text:f[v],value:f[v]});try{r.add(x,null)}catch(y){r.add(x)}}r.options[i||0].selected=!0,a.innerHTML="Select property ("+f.length+")",t.setConfiguratorPropertyValue(r,h,n,o,l),a.style.display="block",r.style.display="block",h.style.display="block",n.style.display="block",o.style.display="block",l.style.display="block",d.style.display="block",c.style.display="block",p.style.display="none",g.style.display="none",u.style.display="none"}return!1}}(this),this.resetCategories=function(){var t=this.$(this.target+"-cX-ConfiguratorCategories");if(t){if(t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild);t.style.display="none"}},this.clickSuggestions=function(t){return function(e){return e||(e=window.event),t.resetEditOptionColorFilters(),t.setConfiguratorPropertyValue(),!1}}(this),this.setConfiguratorPropertyValue=function(t,e,i,s,a){t||(t=this.$(this.target+"-cX-ConfiguratorSugestions")),e||(e=this.$(this.target+"-cX-ConfiguratorSugestionsDescription")),i||(i=this.$(this.target+"-cX-ConfiguratorValueText")),s||(s=this.$(this.target+"-cX-ConfiguratorSeeAlso")),a||(a=this.$(this.target+"-cX-ConfiguratorValue"));var r,h=this.$(this.target+"-cX-ConfiguratorOptions"),n=this.getConfigurableObjectDoc(t.value);if(a.value="",a.style.readonly=!1,this.configuringNetwork)"function"==typeof this[t.value]?(a.style.disabled="disabled",a.style.readonly=!1):r=this.configuringNetwork<this.data.nodes.length?this.data.nodes[this.configuringNetwork][t.value]:this.data.edges[this.configuringNetwork-this.data.nodes.length][t.value];else if(this.configuringGenome){var o=this.subtracksInfo;isNaN(this.configuringGenome)?this.configuringGenome.match(/:/)?(r=parseInt(this.configuringGenome.split(":")[1]),r=this.data.tracks[o[r].track].data[o[r].index][t.value]):(r=parseInt(this.configuringGenome.replace("track-","")),r=this.data.tracks[o[r].track][t.value]):r=this.data.tracks[o[this.configuringGenome].track].data[o[this.configuringGenome].index][t.value]}else"function"==typeof this[t.value]?(i.innerHTML="Current&nbsp;value&nbsp;[&nbsp;<i>function</i>&nbsp;]&nbsp;"+this[t.value].length+"&nbsp;parameter(s)",0==this[t.value].length&&(a.style.disabled="disabled",a.style.readonly=!1)):r=this[t.value];a.value=r?JSON.stringify(r):"",this.addPropertyDescription(e,n,t.value),this.addPropertySeeAlsoLinks(s,n),this.addPropertyOptions(i,h,n,t.value,r)},this.resetSugestions=function(){var t=this.$(this.target+"-cX-ConfiguratorSugestions");if(t){if(t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild);t.style.display="none"}},this.addPropertyDescription=function(t,e,i){var s=e&&e.C?e.C:"",a=e&&e.M?e.M:"";this.resetPropertyDescription(t);var r=this.$cX("img",{id:this.target+"-cX-ConfiguratorSugestionsDescriptionEdit",src:this.imageDir+"pencil.png",alt:"Edit description",title:"Edit description"},{cursor:"default",margin:"2px",width:"10px",height:"10px"}),h=this.$cX("i",{innerHTML:i}),n=this.$cX("span",{id:this.target+"-cX-ConfiguratorSugestionsDescriptionEditSpan",className:"CanvasXpressConfigurator",prop:i,innerHTML:" : "+s}),o=this.$cX("i",{innerHTML:a}),l=this.$cX("span",!1,{className:"CanvasXpressConfigurator"});l.appendChild(document.createTextNode("Description [ ")),l.appendChild(o),l.appendChild(document.createTextNode(" ]")),t.appendChild(l),t.appendChild(this.$cX("br")),t.appendChild(h),t.appendChild(n),t.appendChild(r),this.addEvtListener(r,"click",this.clickEditPropertyDescription,!1)},this.resetPropertyDescription=function(t,e){if(t||(t=this.$(this.target+"-cX-ConfiguratorSugestionsDescription")),e||(e=this.$(this.target+"-cX-ConfiguratorSugestionsDescriptionEdit")),t&&e)for(this.removeEvtListener(e,"click",this.clickEditPropertyDescription,!1);t.childNodes.length>0;){var i=t.childNodes[0];t.removeChild(i)}},this.clickEditPropertyDescription=function(t){return function(e){e||(e=window.event),t.resetPropertyColor(),t.resetPropertyFilter();var i=t.$(t.target+"-cX-Configurator"),s=t.$(t.target+"-cX-ConfiguratorSugestions"),a=t.$(t.target+"-cX-ConfiguratorSugestionsDescriptionEditSpan"),r=t.$(t.target+"-cX-ConfiguratorOptions");if(i&&s&&a&&r){r.style.display="none";var h=t.adjustedCoordinates(e,s);if(h){t.editingDescriptionOn=!0;var n=h.x,o=h.y,l=t.$cX("div",{id:t.target+"-cX-ConfiguratorEditForm",className:"CanvasXpressConfigurator draggable"},{cursor:"move",left:n+"px",top:o+"px",padding:"10px",position:"absolute",width:.8*t.configuratorWidth+"px"}),d=t.$cX("img",{id:t.target+"-cX-ConfiguratorEditFormClose",className:"CanvasXpressConfigurator",src:t.imageDir+"cancel1.png",alt:"Close",title:"Close"}),c=t.$cX("textarea",{id:t.target+"-cX-ConfiguratorEditFormValue",className:"CanvasXpressConfigurator",value:a.prop+a.innerHTML,rows:10},{width:"100%",maxWidth:.8*t.configuratorWidth+"px"}),p=t.$cX("input",{id:t.target+"-cX-ConfiguratorEditFormButton",value:"Submit",type:"button"},{width:"100%",borderRadius:"5px",maxWidth:.8*t.configuratorWidth+"px"});l.appendChild(document.createTextNode("Editing "+s.value)),l.appendChild(d),l.appendChild(t.$cX("br")),l.appendChild(c),l.appendChild(p),t.addEvtListener(d,"click",t.closeEditPropertyDescription,!1),t.addEvtListener(p,"click",t.submitEditPropertyDescription,!1),i.appendChild(l)}}}}(this),this.submitEditPropertyDescription=function(t){return function(e){e||(e=window.event);var i=t.$(t.target+"-cX-ConfiguratorSugestions"),s=t.$(t.target+"-cX-ConfiguratorEditFormValue"),a=t.$(t.target+"-cX-ConfiguratorSugestionsDescriptionEditSpan");i&&s&&a&&(s.value=s.value.replace(/\n/g,""),CanvasXpress.doc.P[i.value].C=s.value,a.innerHTML=s.value,alert("New description for:\n - "+i.value+" -\nwas submitted and may apppear\nin new versions of CanvasXpress\nThank you for your contribution")),t.resetEditPropertyDescription()}}(this),this.closeEditPropertyDescription=function(t){return function(e){e||(e=window.event),t.resetEditPropertyDescription()}}(this),this.resetEditPropertyDescription=function(){var t=this.$(this.target+"-cX-ConfiguratorEditForm"),e=this.$(this.target+"-cX-ConfiguratorEditFormClose"),i=this.$(this.target+"-cX-ConfiguratorEditFormButton");t&&e&&i&&(this.addEvtListener(e,"click",this.closeEditPropertyDescription,!1),this.addEvtListener(i,"click",this.submitEditPropertyDescription,!1),t.parentNode.removeChild(t)),this.editingDescriptionOn=!1},this.addPropertySeeAlsoLinks=function(t,e){this.resetPropertySeeAlsoLinks(t);var i=this.$cX("span",!1,{className:"CanvasXpressConfigurator"});if(i.appendChild(document.createTextNode("See Also: ")),t.appendChild(i),e&&e.S)for(var s=0;s<e.S.length;s++){var a=this.$cX("a",{href:"javascript:void(0)",innerHTML:e.S[s]});this.addEvtListener(a,"click",this.clickPropertySeeAlsoLinks,!1),t.appendChild(a),s<e.S.length-1&&t.appendChild(document.createTextNode(", "))}},this.clickPropertySeeAlsoLinks=function(t){return function(e){e||(e=window.event);var s=t.$(t.target+"-cX-ConfiguratorKey"),a=t.$(t.target+"-cX-ConfiguratorCategories"),r=(t.$(t.target+"-cX-ConfiguratorSugestions"),e.target||e.srcElement);if(a&&"block"==a.style.display){var h=CanvasXpress.doc.P[r.innerHTML],n=CanvasXpress.doc.M[h.M].P.sort();for(a.value=h.M,i=0;i<n.length;i++)if(n[i]==r.innerHTML)return t.changeCategory(e,i),!1;t.changeCategory(e)}else s&&(s.value=r.innerHTML,t.selectConfig(e,!0));return!1}}(this),this.resetPropertySeeAlsoLinks=function(t){if(t||(t=this.$(this.target+"-cX-ConfiguratorSeeAlso")),t&&t.childNodes)for(;t.childNodes.length>0;){var e=t.childNodes[0];"a"==e.nodeName.toLowerCase()&&this.removeEvtListener(e,"click",this.clickPropertySeeAlsoLinks,!1),t.removeChild(e)}},this.addPropertyOptions=function(t,e,i,s,a){this.resetPropertyOptions(t,e);var r=this.$cX("span",!1,{className:"CanvasXpressConfigurator"}),h=this.$cX("i");if(r.appendChild(document.createTextNode("Current value")),i&&i.T&&("option"==i.T||"array"==i.T||"boolean"==i.T)){var n=this.$cX("div",{id:this.target+"-cX-ConfiguratorOptionsContainer",className:"CanvasXpressConfiguratorOptions"}),o=this.$cX("a",{href:"javascript:void(0)",innerHTML:i.T});if(this.addEvtListener(o,"click",this.clickPropertyOptions,!1),r.appendChild(document.createTextNode(" [")),h.appendChild(o),r.appendChild(document.createTextNode(" ")),r.appendChild(h),r.appendChild(document.createTextNode(" ]")),"array"==i.T){var l=i.X?this[i.X]():i.O?i.O:[],d=this.getObjectArray(a);if(l.length>0)for(var c=0;c<l.length;c++){var s=this.$cX("input",{type:"checkbox",value:l[c],checked:d.hasOwnProperty(l[c])?!0:!1},{marginLeft:"0px"});this.addEvtListener(s,"change",this.updatePropertyValue,!1),n.appendChild(document.createTextNode(c+1+". ")),n.appendChild(s),n.appendChild(document.createTextNode(l[c])),n.appendChild(this.$cX("br"))}else n.appendChild(this.$cX("br")),n.appendChild(document.createTextNode("This array is user defined")),n.appendChild(this.$cX("br"))}else{var l="boolean"==i.T?["true","false"]:i.X?this[i.X]():i.O?i.O:[];i.X&&i.O&&(l=l.concat(i.O));for(var c=0;c<l.length;c++){var s=this.$cX("a",{href:"javascript:void(0)",innerHTML:l[c]},{padding:"2px"});this.addEvtListener(s,"click",this.updatePropertyValue,!1),n.appendChild(document.createTextNode(c+1+". ")),n.appendChild(s),n.appendChild(this.$cX("br"))}}e.appendChild(n)}else if(i&&i.T){if(r.appendChild(document.createTextNode(" [")),"color"==i.T){var l;if(this.configuringNetwork)l=this.configuringNetwork<this.data.nodes.length?this.data.nodes[this.configuringNetwork][s]:this.data.edges[this.configuringNetwork-this.data.nodes.length][s];else if(this.configuringGenome){var p=this.subtracksInfo;isNaN(this.configuringGenome)?this.configuringGenome.match(/:/)?(l=parseInt(this.configuringGenome.split(":")[1]),l=this.data.tracks[p[l].track].data[p[l].index]):(l=parseInt(this.configuringGenome.replace("track-","")),l=this.data.tracks[p[l].track]):l=this.data.tracks[p[this.configuringGenome].track].data[p[this.configuringGenome].index]}else l=this[s];var o=this.$cX("a",{id:this.target+"-cX-ConfiguratorValueHREF",href:"javascript:void(0)",innerHTML:i.T},{color:l?this.rgbToHex(this.validateColor(l)):this.foreground});this.addEvtListener(o,"click",this.addPropertyColor,!1),h.appendChild(o)}else if(i&&"filter"==i.T){var o=this.$cX("a",{id:this.target+"-cX-ConfiguratorValueFilter",href:"javascript:void(0)",innerHTML:i.T,name:s});o.opts=i.X?this[i.X]():i.O?i.O:[],o.opts.unshift(""),this.addEvtListener(o,"click",this.addPropertyFilter,!1),h.appendChild(o)}else h.appendChild(document.createTextNode(i.T));r.appendChild(document.createTextNode(" ")),r.appendChild(h),r.appendChild(document.createTextNode(" ]"))}t.appendChild(r)},this.clickPropertyOptions=function(t){return function(e){e||(e=window.event),t.resetEditPropertyDescription();var i=t.$(t.target+"-cX-ConfiguratorOptions");return i&&(i.style.display="block",i.style.left=e.layerX+"px",i.style.top=e.layerY+"px"),!1}}(this),this.closePropertyOptions=function(t){return function(e){e||(e=window.event),t.handleHideDiv(t.target+"-cX-ConfiguratorOptions")}}(this),this.resetPropertyOptions=function(t,e,i){if(t||(t=this.$(this.target+"-cX-ConfiguratorValueText")),e||(e=this.$(this.target+"-cX-ConfiguratorOptions")),t&&t.childNodes&&!i)for(;t.childNodes.length>0;){var s=t.childNodes[0];"a"==s.nodeName.toLowerCase()&&this.removeEvtListener(s,"click",this.clickPropertyOptions,!1),t.removeChild(s)}if(e){var a=this.$(this.target+"-cX-ConfiguratorOptionsContainer");if(a){for(;a.childNodes.length>0;){var s=a.childNodes[0];"a"==s.nodeName.toLowerCase()?this.removeEvtListener(s,"click",this.updatePropertyValue,!1):"input"==s.nodeName.toLowerCase()&&"checkbox"==s.type&&this.removeEvtListener(s,"change",this.updatePropertyValue,!1),a.removeChild(s)}e.removeChild(a)}e.style.display="none"}},this.addPropertyFilter=function(t){return function(e){e||(e=window.event),t.resetEditPropertyDescription();var i=e.target||e.srcElement,s=t.$(t.target+"-cX-ConfiguratorFilter");t.addAllPropertyFilters(i.name,i.opts),s.style.display="block",s.opts=i.opts,s.style.left=e.layerX+"px",s.style.top=e.layerY+"px"}}(this),this.addAllPropertyFilters=function(t,e){for(var i=this.$(this.target+"-cX-ConfiguratorFilter"),s=0;s<this[t].length;s++)this.insertPropertyFilterRow(i,s,t,e);this.insertPropertyFilterRow(i,this[t].length,t,e)},this.insertPropertyFilterRow=function(t,e,i,s){if(t||(t=this.$(this.target+"-cX-ConfiguratorFilter")),t){var a=.25*this.configuratorWidth,r=this.$cX("div",{id:this.target+"-cX-ConfiguratorFilterContainer"+e},{width:1.05*this.configuratorWidth+"px"}),h=this.$cX("select",{id:this.target+"-cX-ConfiguratorFilterSelect"+e,className:"CanvasXpressConfiguratorFilter",param:i,idx:e},{marginRight:"2px",marginLeft:"1px",width:a+"px"});s||(s=t.opts),s.sort();for(var n=0;n<s.length;n++){var o=this.$cX("option",{text:s[n],value:s[n]});try{h.add(o,null)}catch(l){h.add(o)}this[i][e]&&s[n]==this[i][e]&&(o.selected=!0)}this.addEvtListener(h,"change",this.unsetPropertyFilterRow,!1);for(var d=this.$cX("select",{id:this.target+"-cX-ConfiguratorFilterOp"+e,className:"CanvasXpressConfiguratorFilter",param:i,idx:e},{marginRight:"2px",width:a+"px"}),c=this.getOperators(),n=0;n<c.length;n++){var o=this.$cX("option",{text:c[n],value:c[n]});try{d.add(o,null)}catch(l){d.add(o)}this[i+"Op"][e]&&c[n]==this[i+"Op"][e]&&(o.selected=!0)}this.addEvtListener(d,"change",this.unsetPropertyFilterRow,!1);var p=this.$cX("img",{src:this.imageDir+"case_sensitive.png"},{width:"10px"}),g=this.$cX("input",{id:this.target+"-cX-ConfiguratorFilterCase"+e,type:"checkbox",param:i,idx:e,alt:"Check for case sensitive",title:"Check for case sensitive"},{width:"10px"});this[i+"Case"][e]&&(g.checked=!0),this.addEvtListener(g,"change",this.unsetPropertyFilterRow,!1);var u=this.$cX("input",{id:this.target+"-cX-ConfiguratorFilterValue"+e,param:i,idx:e,type:"text"},{width:a+"px"});this[i+"Value"][e]&&(u.value=this[i+"Value"][e]),this.addEvtListener(u,"change",this.unsetPropertyFilterRow,!1);var m=this.$cX("img",{id:this.target+"-cX-ConfiguratorFilterMinus"+e,src:this.imageDir+"minus.png",alt:"Remove Filter",title:"Remove Filter",param:i,idx:e},{padding:"9px 2px 2px 2px",cssFloat:"left",cursor:"default",width:"10px"});this.addEvtListener(m,"click",this.removePropertyFilterRow,!1);var a=this.$cX("img",{id:this.target+"-cX-ConfiguratorFilterPlus"+e,src:this.imageDir+"add1.png",alt:"Set Filter",title:"Set Filter",param:i,idx:e},{padding:"7px 2px 2px 2px",cssFloat:"right",cursor:"default",width:"10px"});this.addEvtListener(a,"click",this.addPropertyFilterRow,!1);var f=this.$cX("img",{id:this.target+"-cX-ConfiguratorFilterCheck"+e,src:this.imageDir+"accept.png",alt:"Filter added",title:"Filter added"},{padding:"7px 2px 2px 2px",cssFloat:"right",cursor:"default",width:"10px",display:this[i][e]?"block":"none"}),v=this.$cX("div",{id:this.target+"-cX-ConfiguratorFilterCheckEmpty"+e},{cssFloat:"right",cursor:"default",width:"10px",display:this[i][e]?"none":"block"});r.appendChild(m),r.appendChild(h),r.appendChild(d),r.appendChild(p),r.appendChild(g),r.appendChild(u),r.appendChild(v),r.appendChild(f),r.appendChild(a),t.appendChild(r)}},this.addPropertyFilterRow=function(t){return function(e){e||(e=window.event);var i=e.target||e.srcElement,s=i.parentNode,a=i.param,r=i.idx,h=t.$(t.target+"-cX-ConfiguratorValue"),n=t.$(t.target+"-cX-ConfiguratorFilterCheck"+r),o=t.$(t.target+"-cX-ConfiguratorFilterCheckEmpty"+r);if(s&&a&&null!=r&&h&&n&&o){var l=s.childNodes[1].value,d=s.childNodes[2].value,c=s.childNodes[4].checked,p=s.childNodes[5].value;""!=l&&(""!=d&&""!=p||d.match("null"))&&(t[a].length>0&&null!=t[a][r]?(t[a][r]=l,t[a+"Op"][r]=d,t[a+"Value"][r]=p,t[a+"Case"][r]=c):(t[a].push(l),t[a+"Op"].push(d),t[a+"Value"].push(p),t[a+"Case"].push(c),t.insertPropertyFilterRow(!1,r+1,a)),h.value='["'+t[a].join('", "')+'"]',n.style.display="block",o.style.display="none")}}}(this),this.removePropertyFilterRow=function(t){return function(e){e||(e=window.event);var i=e.target||e.srcElement,s=i.parentNode,a=s.parentNode,r=i.param,h=i.idx,n=t.$(t.target+"-cX-ConfiguratorValue");s&&r&&null!=h&&n&&(t.resetFilters(r,h),t.resetPropertyFilter(!0),t.addAllPropertyFilters(r,a.opts),n.value=t[r].length>0?'["'+t[r].join('", "')+'"]':"[]")}}(this),this.unsetPropertyFilterRow=function(t){return function(e){e||(e=window.event);var i=[],s=e.target||e.srcElement,a=s.param,r=s.idx;if(a&&null!=r&&t[a].length>0&&t[a][r]){t[a][r]=!1,t[a+"Op"][r]=!1,t[a+"Value"][r]=!1,t[a+"Case"][r]=!1;for(var h=0;h<t[a].length;h++)h!=r&&i.push(t[a][h]);var n=t.$(t.target+"-cX-ConfiguratorFilterCheck"+r),o=t.$(t.target+"-cX-ConfiguratorFilterCheckEmpty"+r),l=t.$(t.target+"-cX-ConfiguratorValue");n&&o&&l&&(n.style.display="none",o.style.display="block",l.value=i.length>0?'["'+i.join('", "')+'"]':"[]")}}}(this),this.closePropertyFilter=function(t){return function(e){e||(e=window.event),t.handleHideDiv(t.target+"-cX-ConfiguratorFilter"),t.resetPropertyFilter()}}(this),this.resetPropertyFilter=function(t){var e=this.$(this.target+"-cX-ConfiguratorFilter");if(e){if(e&&e.childNodes)for(;e.childNodes.length>3;){var i=e.childNodes[3];this.removeEvtListener(i.childNodes[0],"click",this.removePropertyFilterRow,!1),this.removeEvtListener(i.childNodes[1],"change",this.unsetPropertyFilterRow,!1),this.removeEvtListener(i.childNodes[2],"change",this.unsetPropertyFilterRow,!1),this.removeEvtListener(i.childNodes[4],"change",this.unsetPropertyFilterRow,!1),this.removeEvtListener(i.childNodes[5],"change",this.unsetPropertyFilterRow,!1),this.removeEvtListener(i.childNodes[8],"click",this.addPropertyFilterRow,!1),e.removeChild(e.childNodes[3])}t||(e.style.display="none")}},this.addPropertyColor=function(t){return function(e){e||(e=window.event),t.resetEditPropertyDescription();var i=t.$(t.target+"-cX-ConfiguratorColor"),s=t.$(t.target+"-cX-ConfiguratorValue");if(i&&s){var a=s.value?t.rgbToHex(t.validateColor(s.value.replace(/[\'\"]/g,""))):t.foreground;t.colorRGBfromString(a);var r=Math.round(t.colorHSV[0]/6*180),h=Math.round(100*(1-t.colorHSV[1])),n=Math.round(100*(1-t.colorHSV[2])),o=t.$cX("div",{id:t.target+"-cX-ConfiguratorColorContainer"},{width:"210px",height:"101px",marginTop:"7px"}),l=t.$cX("div",{id:t.target+"-cX-ConfiguratorColorPalette",className:"CanvasXpressConfiguratorColor"},{position:"relative",left:"0px",top:"0px",width:"181px",height:"101px",backgroundImage:"url('"+t.imageDir+"color.png')",backgroundRepeat:"no-repeat",cursor:"crosshair"}),d=t.$cX("div",{id:t.target+"-cX-ConfiguratorColorPaletteCurrent"},{position:"relative",left:r-7+"px",top:h-7+"px",width:"195px",height:"115px",cursor:"crosshair",backgroundImage:"url('"+t.imageDir+"cross.gif')",backgroundRepeat:"no-repeat"});l.appendChild(d);for(var c=t.$cX("div",{id:t.target+"-cX-ConfiguratorColorSaturation",className:"CanvasXpressConfiguratorColor"},{position:"relative",left:"188px",top:"-102px",width:"15px",height:"100px",border:"1px solid "+t.skinBorderColor,cursor:"crosshair"}),p=0;100>p;p+=4){var g=t.$cX("div",!1,{height:"4px",position:"relative",left:"0px",cursor:"crosshair"});c.appendChild(g)}var u=t.$cX("div",{id:t.target+"-cX-ConfiguratorColorSaturationCurrent"},{position:"relative",left:"0px",top:n-108+"px",width:"29px",height:"115px",cursor:"crosshair",backgroundImage:"url('"+t.imageDir+"cross.gif')",backgroundRepeat:"no-repeat",overflow:"hidden"});c.appendChild(u),o.appendChild(l),o.appendChild(c),i.appendChild(o),t.colorizeSaturationColorDiv(),t.addEvtListener(l,"mousedown",t.registerPalette,!1),t.addEvtListener(c,"mousedown",t.registerSaturation,!1),i.style.display="block",i.style.left=e.layerX+"px",i.style.top=e.layerY+"px"}return!1}}(this),this.registerPalette=function(t){return function(e){if(e||(e=window.event),t.changingColorOn="palette",0==t.colorHSV[2]){t.colorFromHsv(null,null,1);var i=t.$(t.target+"-cX-ConfiguratorColorSaturationCurrent");i&&(i.style.top="-108px")}return t.updateColorValue(e),t.colorizeSaturationColorDiv(),!1}}(this),this.registerSaturation=function(t){return function(e){return e||(e=window.event),t.changingColorOn="saturation",t.updateColorValue(e),!1}}(this),this.updateColorValue=function(t){if(this.changingColorOn)if("palette"==this.changingColorOn){var e=this.$(this.target+"-cX-ConfiguratorColorPalette"),i=this.$(this.target+"-cX-ConfiguratorColorPaletteCurrent");if(e&&i){var s=this.adjustedCoordinates(t,e);if(s){var a=Math.min(Math.max(0,s.x),181),r=Math.min(Math.max(0,s.y),101);i.style.left=a-7+"px",i.style.top=r-7+"px",this.colorFromHsv(6*a/180,1-r/100,null),this.colorizeSaturationColorDiv()}}}else{var h=this.$(this.target+"-cX-ConfiguratorColorSaturation"),n=this.$(this.target+"-cX-ConfiguratorColorSaturationCurrent");if(h&&n){var s=this.adjustedCoordinates(t,h);if(s){var r=Math.min(Math.max(0,s.y),101);n.style.top=r-108+"px",this.colorFromHsv(null,null,1-r/100)}}}},this.colorFromHsv=function(t,e,i){null!=t&&(this.colorHSV[0]=Math.min(Math.max(0,t),6)),null!=e&&(this.colorHSV[1]=Math.min(Math.max(0,e),1)),null!=i&&(this.colorHSV[2]=Math.min(Math.max(0,i),1)),this.colorRGB=this.hsvFromRgb(this.colorHSV[0],this.colorHSV[1],this.colorHSV[2]),this.colorizeCurrentColorDiv()},this.hsvFromRgb=function(t,e,i){if(null==t)return[i,i,i];var s=Math.floor(t),a=s%2?t-s:1-(t-s),r=i*(1-e),h=i*(1-e*a);switch(s){case 0:return[i,h,r];case 1:return[h,i,r];case 2:return[r,i,h];case 3:return[r,h,i];case 4:return[h,r,i];case 5:return[i,r,h];case 6:}},this.colorFromRgb=function(t,e,i){if(this.colorRGB){null!=t&&(this.colorRGB[0]=Math.min(Math.max(0,t),1)),null!=e&&(this.colorRGB[1]=Math.min(Math.max(0,e),1)),null!=i&&(this.colorRGB[2]=Math.min(Math.max(0,i),1));var s=this.rgbFromHsv(this.colorRGB[0],this.colorRGB[1],this.colorRGB[2]);null!=s[0]&&(this.colorHSV[0]=s[0]),0!=s[2]&&(this.colorHSV[1]=s[1]),this.colorHSV[2]=s[2],this.colorizeCurrentColorDiv()}},this.rgbFromHsv=function(t,e,i){var s=Math.min(Math.min(t,e),i),a=Math.max(Math.max(t,e),i),r=a-s;if(0==r)return[null,0,a];var h=t==s?3+(i-e)/r:e==s?5+(t-i)/r:1+(e-t)/r;return[6==h?0:h,r/a,a]},this.colorRGBToString=function(){return this.colorRGB?(256|Math.round(255*this.colorRGB[0])).toString(16).substr(1)+(256|Math.round(255*this.colorRGB[1])).toString(16).substr(1)+(256|Math.round(255*this.colorRGB[2])).toString(16).substr(1):void 0},this.colorRGBfromString=function(t){var e=t.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return e?(6===e[1].length?this.colorFromRgb(parseInt(e[1].substr(0,2),16)/255,parseInt(e[1].substr(2,2),16)/255,parseInt(e[1].substr(4,2),16)/255):this.colorFromRgb(parseInt(e[1].charAt(0)+e[1].charAt(0),16)/255,parseInt(e[1].charAt(1)+e[1].charAt(1),16)/255,parseInt(e[1].charAt(2)+e[1].charAt(2),16)/255),
!0):!1},this.colorizeCurrentColorDiv=function(){var t=this.$(this.target+"-cX-ConfiguratorColorCurrent"),e=this.$(this.target+"-cX-ConfiguratorValue"),i=this.$(this.target+"-cX-ConfiguratorValueHREF");if(t&&e&&i){var s=this.colorRGBToString(),a=this.hexToRgb("#"+s);t.style.backgroundColor="#"+s,t.innerHTML="&nbsp;&nbsp;"+a,e.value='"'+a+'"',i.style.color="#"+s}},this.colorizeSaturationColorDiv=function(){var t=function(t,e,i,s,a){return"rgb("+t*(1-s/a)*100+"%,"+e*(1-s/a)*100+"%,"+i*(1-s/a)*100+"%)"},e=this.$(this.target+"-cX-ConfiguratorColorSaturation");if(e&&this.colorHSV){var i=e.childNodes,s=this.hsvFromRgb(this.colorHSV[0],this.colorHSV[1],1);if(s)for(var a=0;a<i.length-1;a++)i[a].style.backgroundColor=t(s[0],s[1],s[2],a,i.length-1)}},this.endColorChange=function(){this.changingColorOn=!1},this.closePropertyColor=function(t){return function(e){e||(e=window.event),t.handleHideDiv(t.target+"-cX-ConfiguratorColor"),t.resetPropertyColor()}}(this),this.resetPropertyColor=function(){var t=this.$(this.target+"-cX-ConfiguratorColor"),e=this.$(this.target+"-cX-ConfiguratorColorPalette"),i=this.$(this.target+"-cX-ConfiguratorColorSaturation");if(t&&e&&i){if(t&&t.childNodes){for(;t.childNodes.length>3;)t.removeChild(t.childNodes[3]);this.removeEvtListener(e,"mousedown",this.registerPalette,!1),this.removeEvtListener(i,"mousedown",this.registerSaturation,!1)}t.style.display="none"}},this.updatePropertyValue=function(t){return function(e){e||(e=window.event),t.resetEditPropertyDescription();var i=t.$(t.target+"-cX-ConfiguratorValue"),s=t.$(t.target+"-cX-ConfiguratorOptions"),a=e.target||e.srcElement;if("input"==a.nodeName.toLowerCase()){for(var r=[],h=0;h<a.parentNode.childNodes.length;h++){var n=a.parentNode.childNodes[h];n.checked&&r.push(n.value)}i.value=r.length>0?'["'+r.join('", "')+'"]':"[]"}else i&&s&&(i.value="true"==a.innerHTML?a.innerHTML:"false"==a.innerHTML?a.innerHTML:"null"==a.innerHTML?a.innerHTML:'"'+a.innerHTML+'"',s.style.display="none");return!1}}(this),this.clickApplyConfigurator=function(t){return function(e){return t.clickConfigurator(e,!1,!1,!0)}}(this),this.clickConfigurator=function(t){return function(e,i,s,a){if(e||(e=window.event),i||(i=t.$(t.target+"-cX-ConfiguratorSugestions")),s||(s=t.$(t.target+"-cX-ConfiguratorValue")),i&&s){if(t.configuringNetwork)t.configuringNetwork<t.data.nodes.length?"function"==typeof t[i.value]?t[i.value](t.data.nodes[t.configuringNetwork]):t.data.nodes[t.configuringNetwork][i.value]=JSON.parse(s.value):"function"==typeof t[i.value]?t[i.value](t.data.edges[t.configuringNetwork-t.data.nodes.length]):t.data.edges[t.configuringNetwork-t.data.nodes.length][i.value]=JSON.parse(s.value);else if(t.configuringGenome){var r=t.subtracksInfo;if(isNaN(t.configuringGenome))if(t.configuringGenome.match(/:/)){var h=parseInt(t.configuringGenome.split(":")[1]);t.data.tracks[r[h].track].data[r[h].index][i.value]=JSON.parse(s.value)}else{var h=parseInt(t.configuringGenome.replace("track-",""));t.data.tracks[h][i.value]=JSON.parse(s.value)}else t.data.tracks[r[t.configuringGenome].track].data[r[t.configuringGenome].index][i.value]=JSON.parse(s.value)}else{if("function"==typeof t[i.value]){if(t[i.value].length>0&&s&&s.value){var a=JSON.parse(s.value);t[i.value](a)}else t[i.value]();return t.resetConfigurator(),!1}t[i.value]=JSON.parse(s.value),t.userConfig[i.value]=t[i.value]}a||t.resetConfigurator();var n=i.value.match(/filter(.+)By/);n&&(t.reset(),t.filterData()),t.draw()}return!1}}(this),this.handleHideDiv=function(t){var e=this.$(t);return e&&(e.style.display="none"),!1},this.resetOptionColorFilters=function(){this.resetPropertyOptions(!1,!1,!0),this.resetPropertyColor(),this.resetPropertyFilter()},this.resetEditOptionColorFilters=function(){this.resetEditPropertyDescription(),this.resetPropertyOptions(!1,!1,!0),this.resetPropertyFilter()},this.resetConfigurator=function(){this.configuringOn&&"docked"!=this.configuringOn&&(this.resetEditOptionColorFilters(),this.resetPropertyDescription(),this.resetPropertySeeAlsoLinks(),this.editingDescriptionOn=!1,this.configuratorLastState=!1,this.configuringOn=!1,this.configuringNetwork=!1,this.configuringGenome=!1,this.addRemoveConfiguratorListeners("removeEvtListener"),this.removeTarget(this.target+"-cX-Configurator"))}},CanvasXpress.prototype.initAcknowlegments=function(){this.addAcknowledgementDiv=function(){if(this.$(this.target+"canvasXpressAcknowledgementDiv"))return void this.setAcknowledgementVisibility();var t=document.createElement("div");t.id=this.target+"canvasXpressAcknowledgementDiv",t.style.display=this.acknowledgment?"block":"none",t.style.width=this.width+"px",t.style.cssFloat="left",t.style.position="relative",t.style.zIndex=9999,this.setAcknowledgementPosition(t);var e=document.createElement("img");e.src=this.imageDir+this.acknowledgementIcon,e.style.margin="2px",e.alt="Graphs powered by canvasXpress",e.title="Graphs powered by canvasXpress",e.style.cssFloat="right";var i=document.createElement("a");i.href="http://canvasxpress.org",i.target="_blank",i.style.cssFloat="right",i.appendChild(e),t.appendChild(i);var s=this.$("south-wrapper-"+this.target);s&&s.appendChild(t)},this.resizeAcknowledgementDiv=function(){var t=this.$(this.target+"canvasXpressAcknowledgementDiv");t&&(t.style.width=this.width+"px")},this.setAcknowledgementVisibility=function(){var t=this.$(this.target+"canvasXpressAcknowledgementDiv");t&&(t.style.display=this.acknowledgment?"block":"none",this.setAcknowledgementPosition(t))},this.setAcknowledgementPosition=function(t){t&&("inside"==this.acknowledgementIconPosition?(t.style.top=this.citation?-1*(this.citationFontSize*this.citationScaleFontFactor+36)+"px":"-31px",t.style.right="3px"):(t.style.top="0px",t.style.right="0px"))},this.addAcknowledgementDiv()},CanvasXpress.prototype.initCodeInfo=function(){this.addInfoCodeDiv=function(){if(!this.$(this.target+"canvasXpressCode")){var t=document.createElement("div");t.id=this.target+"canvasXpressInfoDiv",t.style.display="none",t.style.fontFamily="arial,tahoma,sans-serif",t.style.fontSize="small";var e=document.createElement("div");e.id=this.target+"canvasXpressCode",e.style.display="none",e.style.fontFamily="arial,tahoma,sans-serif",e.style.fontSize="small";var i=this.$("north-wrapper-"+this.target),s=this.$("south-wrapper-"+this.target);i&&i.appendChild(t),s&&s.appendChild(e)}},this.clearCodeDiv=function(){var t=this.$(this.target+"canvasXpressCode");if(t){var e=t.childNodes;if(e)for(var i=0;i<e.length;i++)t.removeChild(e[i])}t.style.display="none"},this.updateCodeDiv=function(){var t=this.$(this.target+"canvasXpressCode"),e=this.cloneObject(this.data),i="pretty"==this.codeType?this.prettyJSON(e):JSON.stringify(e),s="pretty"==this.codeType?this.prettyJSON(this.userConfig):JSON.stringify(this.userConfig);if(t){this.clearCodeDiv();var e,a="";"tab"==this.codeType?(e=document.createElement("span"),a=this.target+"	"+i+"	"+s+"\n"):"compact"==this.codeType?(e=document.createElement("span"),a='new CanvasXpress("'+this.target+'", '+i+", "+s+")\n"):(e=document.createElement("pre"),a='new CanvasXpress("'+this.target+'", '+i+", "+s+")\n"),e.style.clear="both",e.innerHTML=a,t.appendChild(e),t.style.display="block"}},this.updateInfoDiv=function(t){var e=this.$(this.target+"canvasXpressInfoDiv");e&&t&&(e.innerHTML=t)},this.showDiv=function(t){var e=this.$(this.target+"canvasXpress"+t);e&&(e.style.display="block")},this.hideDiv=function(t){var e=this.$(this.target+"canvasXpress"+t);e&&(e.style.display="none")},this.showCodeDiv=function(){this.showDiv("Code")},this.hideCodeDiv=function(){this.hideDiv("Code")},this.showInfoDiv=function(){this.showDiv("InfoDiv")},this.hideInfoDiv=function(){this.hideDiv("InfoDiv")},this.initializeCodeInfo=function(){this.addInfoCodeDiv()},this.initializeCodeInfo()},CanvasXpress.prototype.initDataFilter=function(){this.addDataFilterDiv=function(){if(!this.$(this.target+"-cX-DataFilter")){var t=null!=this.dataFilterLastX?parseInt(this.dataFilterLastX):.5*-this.canvas.width,e=null!=this.dataFilterLastY?parseInt(this.dataFilterLastY):.5*this.canvas.height,i="Genome"==this.graphType?60:81;this.dataFilterHeight=this.canvas.height-i,this.activeAccordion=null;var s=this.$cX("div",{id:this.target+"-cX-DataFilter",className:this.applicationLook?"CanvasXpressDataFilter fixed":"CanvasXpressDataFilter draggable-container"},{top:e+"px",left:t+"px",display:"none",zIndex:1e4}),a=this.$cX("div",{id:this.target+"-cX-DataFilterToolbar",className:this.applicationLook?"CanvasXpressDataFilterToolbar fixed":"CanvasXpressDataFilterToolbar draggable"},{width:this.dataFilterWidth+"px"}),r=this.$cX("span",{innerHTML:"Filters",className:"CanvasXpressDataFilterToolbarText"}),h=this.$cX("img",{id:this.target+"-cX-DataFilterKeyFlash",className:"CanvasXpressDataFilterToolbarImage",src:this.filterFlashingOn?this.imageDir+"lightbulb.png":this.imageDir+"lightbulb_off.png",alt:this.filterFlashingOn?"Turn off Flashing":"Turn on Flashing",title:this.filterFlashingOn?"Turn off Flashing":"Turn on Flashing"},{display:"Network"==this.graphType?"block":"none"});this.isIE&&(h.style.marginTop="-10px");var n=this.$cX("img",{id:this.target+"-cX-DataFilterKeyReset",className:"CanvasXpressDataFilterToolbarImage",src:this.imageDir+"funnel_cross.png",alt:"Reset filters",title:"Reset filters"});this.isIE&&(n.style.marginTop="-10px");var o=this.$cX("img",{id:this.target+"-cX-DataFilterKeyDock",className:"CanvasXpressDataFilterToolbarImage",src:this.applicationLook?this.imageDir+"unpin.png":this.imageDir+"pin.png",alt:this.applicationLook?"Undock":"Dock",title:this.applicationLook?"Undock":"Dock",state:this.applicationLook?"docked":"free"});this.isIE&&(o.style.marginTop="-10px");var l=this.$cX("img",{id:this.target+"-cX-DataFilterKeyClose",className:"CanvasXpressDataFilterToolbarImage",src:this.imageDir+"cancel1.png",alt:"Close",title:"Close"});this.isIE&&(l.style.marginTop="-10px");var d=this.$cX("div",{id:this.target+"-cX-DataFilterContainer",className:"CanvasXpressDataFilterContainer"},{width:this.dataFilterWidth+"px"}),c=this.$cX("div",{id:this.target+"-cX-DataFilterVariableHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:this.graphType.match(/Genome|Network/)?"none":"block"}),p=this.$cX("div",{id:this.target+"-cX-DataFilterVariableContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),g=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Variables",className:"CanvasXpressDataFilterText"}),u=this.$cX("div",{id:this.target+"-cX-DataFilterSampleHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:this.graphType.match(/Genome|Network/)?"none":"block"}),m=this.$cX("div",{id:this.target+"-cX-DataFilterSampleContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),f=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Samples",className:"CanvasXpressDataFilterText"}),v=this.$cX("div",{id:this.target+"-cX-DataFilterNodeHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:"Network"==this.graphType?"block":"none"}),x=this.$cX("div",{id:this.target+"-cX-DataFilterNodeContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),y=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nodes",className:"CanvasXpressDataFilterText"}),b=this.$cX("div",{id:this.target+"-cX-DataFilterEdgeHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:"Network"==this.graphType?"block":"none"}),w=this.$cX("div",{id:this.target+"-cX-DataFilterEdgeContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),C=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edges",className:"CanvasXpressDataFilterText"}),T=this.$cX("div",{id:this.target+"-cX-DataFilterGenomeHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:"Genome"==this.graphType?"block":"none"}),D=this.$cX("div",{id:this.target+"-cX-DataFilterGenomeContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),S=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Features",className:"CanvasXpressDataFilterText"});a.appendChild(r),a.appendChild(l),a.appendChild(o),a.appendChild(n),a.appendChild(h),c.appendChild(g),u.appendChild(f),v.appendChild(y),b.appendChild(C),T.appendChild(S),d.appendChild(c),d.appendChild(p),d.appendChild(u),d.appendChild(m),d.appendChild(v),d.appendChild(x),d.appendChild(b),d.appendChild(w),d.appendChild(T),d.appendChild(D),s.appendChild(a),s.appendChild(d);var A=this.$("east-wrapper-"+this.target);A&&(A.appendChild(s),this.addRemoveDataFilterListeners("addEvtListener"))}},this.addRemoveDataFilterListeners=function(t){var e=this.$(this.target+"-cX-DataFilterToolbar"),i=this.$(this.target+"-cX-DataFilterKeyFlash"),s=this.$(this.target+"-cX-DataFilterKeyReset"),a=this.$(this.target+"-cX-DataFilterKeyDock"),r=this.$(this.target+"-cX-DataFilterKeyClose"),h=this.$(this.target+"-cX-DataFilterVariableHeader"),n=this.$(this.target+"-cX-DataFilterSampleHeader"),o=this.$(this.target+"-cX-DataFilterNodeHeader"),l=this.$(this.target+"-cX-DataFilterEdgeHeader"),d=this.$(this.target+"-cX-DataFilterGenomeHeader");e&&i&&s&&a&&r&&h&&n&&o&&l&&d&&(this[t](e,"mousedown",this.registerMousemove,!1),this[t](i,"click",this.flashDataFilter,!1),this[t](s,"click",this.resetDataFilter,!1),this[t](a,"click",this.dockUndockDataFilter,!1),this[t](r,"click",this.hideDataFilter,!1),this[t](h,"click",this.activateAccordion,!1),this[t](n,"click",this.activateAccordion,!1),this[t](o,"click",this.activateAccordion,!1),this[t](l,"click",this.activateAccordion,!1),this[t](d,"click",this.activateAccordion,!1))},this.flashDataFilter=function(t){return function(e){e||(e=window.event);var i=t.getTargetEvent(e);return t.filterFlashingOn?(t.filterFlashingOn=!1,i.src=t.imageDir+"lightbulb_off.png",i.alt="Turn on Flashing",i.title="Turn on Flashing"):(t.filterFlashingOn=!0,i.src=t.imageDir+"lightbulb.png",i.alt="Turn off Flashing",i.title="Turn off Flashing"),!1}}(this),this.activateAccordion=function(t){return function(e,i){e||(e=window.event);var s=t;if(i||(i=t.getTargetEvent(e)),i){"span"==i.tagName.toLowerCase()&&(i=i.parentNode),i.className="CanvasXpressDataFilterHeadActive",i.firstChild.className="CanvasXpressDataFilterTextActive";var a=i.nextSibling;a&&setTimeout(function(){if(s.activeAccordion&&a.id==s.activeAccordion.id&&(a=!1),s.transitionAccordion((new Date).getTime(),250,a,s.activeAccordion),s.activeAccordion){var t=s.activeAccordion.previousSibling;t.className="CanvasXpressDataFilterHead",t.firstChild.className="CanvasXpressDataFilterText"}s.activeAccordion=a},33)}return!1}}(this),this.resizeDataFilterForScroller=function(t){var e=this.$(this.target+"-cX-DataFilter"),i=this.$(this.target+"-cX-DataFilterToolbar"),s=this.$(this.target+"-cX-DataFilterContainer"),a=this.$(this.target+"-cX-DataFilterVariableHeader"),r=this.$(this.target+"-cX-DataFilterVariableContent"),h=this.$(this.target+"-cX-DataFilterSampleHeader"),n=this.$(this.target+"-cX-DataFilterSampleContent"),o=this.$(this.target+"-cX-DataFilterNodeHeader"),l=this.$(this.target+"-cX-DataFilterNodeContent"),d=this.$(this.target+"-cX-DataFilterEdgeHeader"),c=this.$(this.target+"-cX-DataFilterEdgeContent"),p=this.$(this.target+"-cX-DataFilterGenomeHeader"),g=this.$(this.target+"-cX-DataFilterGenomeContent");if(e&&i&&s&&a&&r&&h&&n&&o&&l&&d&&c&&p&&g){this.dataFilterScroller==t?!0:!1;for(var u=[e,i,s,a,r,h,n,o,l,d,c,p,g],m=0;m<u.length;m++)u[m].style.width=t?parseInt(u[m].style.width)+18+"px":parseInt(u[m].style.width)-18+"px"}},this.moveDataFilter=function(t){var e,i,s=this.$(this.target+"-cX-DataFilter"),a=this.$(this.target+"-cX-DataFilterToolbar"),r=this.$(this.target+"-cX-DataFilterKeyDock"),h=this.$(this.remoteParentId+"-canvasXpressRemoteWindow"),n=this.$("north-container-"+this.target),o=this.$("south-container-"+this.target),l=this.$("west-container-"+this.target),d=this.$("middle-container-"+this.target),c=this.$("east-container-"+this.target),p=this.$("east-handler-"+this.target),g=this.$("east-wrapper-"+this.target),u=this;if(s&&a&&r&&n&&o&&l&&d&&c&&p&&g){var m=a.clientWidth-this.dataFilterWidth+2;if(i=parseInt(n.clientHeight)+this.canvas.height+parseInt(o.clientHeight),"free"!=r.state||t)a.className="CanvasXpressDataFilterToolbar draggable",r.src=this.imageDir+"pin.png",r.alt="Dock",r.title="Dock",r.state="free",this.dataFilterLastState="free",t&&(delete this.dataFilterLastState,this.dataFilterLastX=null,this.dataFilterLastY=null,this.fade(s,500,function(){u.resetFade(s),s.style.display="none",s.style.width=u.dataFilterWidth+"px",s.style.height=u.canvas.height+"px"})),p.style.display="none",e=parseInt(l.style.width)+this.canvas.width,h&&this.resizeMove(h,0,0,Math.max(e+7,parseInt(o.clientWidth))+48,i+54),this.resizeMove(d,0,0,e+7,this.canvas.height),this.resizeMove(c,0,0,7,this.canvas.height),this.resizeMove(g,0,0,0,this.canvas.height),t||this.resizeMove(s,0,0,0,this.canvas.height);else{a.className="CanvasXpressDataFilterToolbar fixed",r.src=this.imageDir+"unpin.png",r.alt="Undock",r.title="Undock",r.state="docked",this.dataFilterLastState="docked",this.dataFilterLastX=s.style.left,this.dataFilterLastY=s.style.top,p.style.display="block";var e=parseInt(l.style.width)+this.canvas.width+a.clientWidth+7+2;h&&this.resizeMove(h,0,0,Math.max(e,parseInt(o.clientWidth))+48,i+54),this.resizeMove(d,0,0,e,this.canvas.height),this.resizeMove(c,0,0,this.dataFilterWidth+m+7,this.canvas.height),this.resizeMove(g,0,0,this.dataFilterWidth+m,this.canvas.height),this.resizeMove(s,0,0,this.dataFilterWidth,this.canvas.height)}h&&setTimeout(function(){u.resizeExtContainer(Math.max(e+7,parseInt(o.clientWidth))+48,i+54)},500)}},this.updateDataFilter=function(){var t=this,e=function(e,i,s,a,r){var h={min:">=",max:"<=",like:"like"};t[e].push(null!=r?a+":::"+r:a),t[e+"Op"].push(h[s]),t[e+"Case"].push(!1),t[e+"Value"].push("like"==s?"^"+t.toDoFilter[i][a][s].join("$|^")+"$":t.toDoFilter[i][a][s])};if(this.filteringStringOn||this.filteringNumericOn){this.resetFilters();for(var i in this.toDoFilter)for(var s in this.toDoFilter[i])for(var a in this.toDoFilter[i][s]){var r=this.toDoFilter[i][s].ref;"ref"!=a&&("sample"==i?e("filterSmpBy",i,a,s,r):"variable"==i?e("filterVarBy",i,a,s,r):"node"==i?e("filterNodeBy",i,a,s,r):"edge"==i?e("filterEdgeBy",i,a,s,r):"feature"==i&&e("filterFeatureBy",i,a,s,r))}if(this.reset(),this.filterData(),"Network"==this.graphType&&this.filterFlashingOn){for(var h=[],n=0;n<this.data.nodes.length;n++)this.data.nodes[n].hide||h.push(this.data.nodes[n].id);this.flashNode(h,!1,5)}else this.draw()}},this.showDataFilter=function(t){return function(e){e||(e=window.event);var i=t.$(t.target+"-cX-DataFilter");if(i){if(t.dataFilterLastState&&"docked"==t.dataFilterLastState){var s=t.$("east-handler-"+t.target);t.clickViewport(e,s)}if("0px"==i.style.left&&"0px"==i.style.top){var a=t.$("west-container-"+t.target),r=t.$("middle-container-"+t.target);a&&r&&(r.style.width=parseInt(a.clientWidth)+t.canvas.width+t.dataFilterWidth+7+"px")}t.activeTarget&&(t.activeTarget.style.zIndex=1e4),t.activeTarget=i,i.style.display="block",t.loadDataFilter(),i.style.zIndex=10001}return!1}}(this),this.removeGenericDataFilterListenersOrReset=function(t){var e=[],i=[];switch(this.graphType){case"Bar":case"Line":case"BarLine":case"Area":case"AreaLine":case"Dotplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Boxplot":case"Correlation":case"Pie":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Candlestick":case"Circular":var s=this.$(this.target+"-cX-DataFilterSampleContent"),a=this.$(this.target+"-cX-DataFilterVariableContent");s&&a&&(e.push(s,a),i.push(this.getSampleData(!0)),i.push(this.getVariableData(!0)));break;case"Venn":return;case"Network":var r=this.$(this.target+"-cX-DataFilterNodeContent"),h=this.$(this.target+"-cX-DataFilterEdgeContent");r&&h&&(e.push(r,h),i.push(this.getNodeData(!0)),i.push(this.getEdgeData(!0)));break;case"Genome":var n=this.$(this.target+"-cX-DataFilterGenomeContent");n&&(e.push(n),i.push(this.getFeatureData(!0)))}for(var o=0;o<i.length;o++){var l=(e[o],i[o]),d=this.getKeys(l);d.sort();for(var c=0;c<d.length;c++){var p=l[d[c]].t,g=d[c].replace(/\W/g,"_");if("string"==p){var u=this.$(this.target+":"+g+":cX-DataFilterInput"),m=this.$(this.target+":"+g+":cX-DataFilterScroll");m&&u&&(t?(u.value="",this.resetSelectStringFilter(m)):this.addRemoveNumericDataFilterListeners("removeEvtListener",m))}else{var f=this.$(this.target+":"+g+":cX-DataFilterMin"),v=this.$(this.target+":"+g+":cX-DataFilterMinLabel"),x=this.$(this.target+":"+g+":cX-DataFilterRange"),y=this.$(this.target+":"+g+":cX-DataFilterMax"),b=this.$(this.target+":"+g+":cX-DataFilterMaxLabel");f&&v&&x&&y&&b&&(t?(f.style.left="0px",v.innerHTML=this.bestFormatNumber(x.min,x.decis),x.style.left="0px",x.style.width=this.dataFilterWidth-42+"px",y.style.left="0px",b.innerHTML=this.bestFormatNumber(x.max,x.decis)):this.addRemoveNumericDataFilterListeners("removeEvtListener",f,y))}}}},this.loadDataFilter=function(){switch(this.toDoFilter||(this.toDoFilter={}),this.graphType){case"Bar":case"Line":case"BarLine":case"Area":case"AreaLine":case"Dotplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Boxplot":case"Correlation":case"Pie":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Candlestick":case"Circular":return this.loadDataFilterSmpVar();case"Venn":return;case"Network":return this.loadDataFilterNetwork();case"Genome":return this.loadDataFilterGenome()}},this.loadDataFilterGeneric=function(t,e,i){var s=this.getKeys(i);s.sort(),e.loaded||(e.loaded={});for(var a=0;a<s.length;a++){var r=this.getKeys(i[s[a]].o),h=i[s[a]].t,n=i[s[a]].r;"string"==h?e.loaded[s[a]]||(e.appendChild(this.createStringFilter(t,s[a],r,n)),e.loaded[s[a]]=!0):e.loaded[s[a]]||(e.appendChild(this.createNumericFilter(t,s[a],r,n)),e.loaded[s[a]]=!0)}},this.loadDataFilterSmpVar=function(){var t=this.$(this.target+"-cX-DataFilterSampleContent"),e=this.$(this.target+"-cX-DataFilterVariableContent");t&&e&&(this.loadDataFilterGeneric("sample",t,this.getSampleData(!0)),this.loadDataFilterGeneric("variable",e,this.getVariableData(!0)))},this.loadDataFilterNetwork=function(){var t=this.$(this.target+"-cX-DataFilterNodeContent"),e=this.$(this.target+"-cX-DataFilterEdgeContent");t&&e&&(this.loadDataFilterGeneric("node",t,this.getNodeData(!0)),this.loadDataFilterGeneric("edge",e,this.getEdgeData(!0)))},this.loadDataFilterGenome=function(){var t=this.$(this.target+"-cX-DataFilterGenomeContent");t&&this.loadDataFilterGeneric("feature",t,this.getFeatureData(!0))},this.createNumericFilter=function(t,e,i,s){var a=function(t){var e=1e6;return((t*e-parseInt(t)*e)/e).toString().replace(/\./,"").length-1};i.sort(function(t,e){return t-e});var r=e.replace(/\W/g,"_"),h=this.$cX("div",{id:this.target+":"+r+":cX-DataFilterContainer",className:"CanvasXpressDataFilterContainerHoverable"}),n=this.$cX("div",{innerHTML:e},{width:this.dataFilterWidth-12+"px",margin:"5px"}),o=this.$cX("div",!1,{width:this.dataFilterWidth-12+"px",height:"14px",margin:"2px"}),l=this.$cX("div",{id:this.target+":"+r+":cX-DataFilterRange",className:"CanvasXpressDataFilterContainerRange",min:parseFloat(i[0]),max:parseFloat(i[i.length-1]),range:i[i.length-1]-i[0],units:(i[i.length-1]-i[0])/(this.dataFilterWidth-42),decis:a(i[i.length-1]-i[0]),filter:t,ref:s,uvalue:e},{width:this.dataFilterWidth-42+"px"}),d=this.$cX("div",{id:this.target+":"+r+":cX-DataFilterMinLabel",innerHTML:this.bestFormatNumber(i[0],l.decis)},{marginLeft:"2px",cssFloat:"left"}),c=this.$cX("div",{id:this.target+":"+r+":cX-DataFilterMaxLabel",innerHTML:this.bestFormatNumber(i[i.length-1],l.decis)},{marginRight:"2px",cssFloat:"right"}),p=this.$cX("div",{className:"CanvasXpressDataFilterContainerNumeric"},{width:this.dataFilterWidth-14+"px"}),g=this.$cX("div",{id:this.target+":"+r+":cX-DataFilterMin",className:"CanvasXpressDataFilterContainerMin"},{left:"0px"}),u=this.$cX("div",{id:this.target+":"+r+":cX-DataFilterMax",className:"CanvasXpressDataFilterContainerMax"},{left:"0px"});return o.appendChild(d),o.appendChild(c),p.appendChild(g),p.appendChild(l),p.appendChild(u),h.appendChild(n),h.appendChild(o),h.appendChild(p),this.addRemoveNumericDataFilterListeners("addEvtListener",g,u),h},this.addRemoveNumericDataFilterListeners=function(t,e,i){t&&e&&i&&(this[t](e,"mousedown",this.mousedownNumericFilter,!1),this[t](i,"mousedown",this.mousedownNumericFilter,!1))},this.mousedownNumericFilter=function(t){return function(e){e||(e=window.event);var i=t.getTargetEvent(e);return i&&(t.filteringNumericOn=i,t.xMouseDown=e.clientX,t.yMouseDown=e.clientY),!1}}(this),this.updateNumericFilter=function(t){if(this.filteringNumericOn){this.cancelEvent(t);var e,i,s,a,r,h,n=this.filteringNumericOn;if(n.id.match(/cX-DataFilterMin/)?(e=!0,i=n.id,s=n.id.replace("cX-DataFilterMin","cX-DataFilterMax"),a=n.id.replace("cX-DataFilterMin","cX-DataFilterRange"),r=n.id.replace("cX-DataFilterMin","cX-DataFilterMinLabel"),h=n.id.replace("cX-DataFilterMin","cX-DataFilterMaxLabel")):(e=!1,s=n.id,i=n.id.replace("cX-DataFilterMax","cX-DataFilterMin"),a=n.id.replace("cX-DataFilterMax","cX-DataFilterRange"),r=n.id.replace("cX-DataFilterMax","cX-DataFilterMinLabel"),h=n.id.replace("cX-DataFilterMax","cX-DataFilterMaxLabel")),i=this.$(i),s=this.$(s),a=this.$(a),r=this.$(r),h=this.$(h),i&&s&&a&&r&&h){var o=t.clientX-this.xMouseDown,l=this.dataFilterWidth-42,d=e?parseInt(a.style.width)-o:parseInt(a.style.width)+o,c=parseInt(i.style.left)+o,p=this.absoluteCoordinates(i),g=this.absoluteCoordinates(s);if(e){c>0&&d>0?(this.xMouseDown=t.clientX,c=Math.max(0,Math.min(l,c)),d=Math.max(0,Math.min(l,d))):c>0?(c-=o,d=g.x-p.x-14):(d+=c,c=0);var u=Math.min(a.units*c+a.min,parseFloat(h.innerHTML));i.style.left=c+"px",a.style.left=c+"px",a.style.width=d+"px",s.style.left=c+"px",r.innerHTML=this.bestFormatNumber(u,a.decis)}else{var u=Math.max(Math.min(a.units*(c+d)+a.min,a.max),parseFloat(r.innerHTML));l>=c+d&&d>=0?(this.xMouseDown=t.clientX,c=Math.max(0,Math.min(l,c)),d=Math.max(0,Math.min(l-c,d))):c+d>l&&(c-=o,d=l-c),a.style.width=d+"px",h.innerHTML=this.bestFormatNumber(u,a.decis)}var m=a.uvalue,f=a.filter;r.innerHTML!=a.min.toString()||h.innerHTML!=a.max.toString()?(this.toDoFilter[f]||(this.toDoFilter[f]={}),this.toDoFilter[f][m]||(this.toDoFilter[f][m]={}),r.innerHTML!=a.min.toString()&&(this.toDoFilter[f][m].min=parseFloat(r.innerHTML)),h.innerHTML!=a.max.toString()&&(this.toDoFilter[f][m].max=parseFloat(h.innerHTML)),null!=a.ref&&(this.toDoFilter[f][m].ref=a.ref)):this.toDoFilter[f]&&this.toDoFilter[f][m]&&delete this.toDoFilter[f][m],this.updateDataFilter()}}return!1},this.endNumericFilter=function(){this.filteringNumericOn&&(this.filteringNumericOn=!1)},this.createStringFilter=function(t,e,i,s){i.sort(),i.unshift("(All) "+i.length+" values"),i.push("");for(var a=e.replace(/\W/g,"_"),r=this.$cX("div",{id:this.target+":"+a+":cX-DataFilterContainer",className:"CanvasXpressDataFilterContainerHoverable"}),h=this.$cX("div",{innerHTML:e},{width:"98%",margin:"5px"}),n=this.$cX("input",{id:this.target+":"+a+":cX-DataFilterInput",type:"text"},{cursor:"default",width:"98%",marginLeft:"3px"}),o=this.$cX("div",{id:this.target+":"+a+":cX-DataFilterMask",className:"CanvasXpressDataFilterContainerMask"},{width:"96%",height:"80px"}),l=this.$cX("div",{id:this.target+":"+a+":cX-DataFilterScroll",filter:t,uvalue:e,values:i,selected:{0:!0},ref:s,skey:a,last:0},{width:"96%",height:16*(i.length+1)+"px"}),d=this.$cX("div",{id:this.target+":"+a+":cX-DataFilterOptions"},{width:"110%",margin:"2px",position:"relative"}),c=0;c<Math.min(5,i.length);c++){var p=i[c].length>30?i[c].substr(0,30)+" ...":i[c],g=this.$cX("div",{id:this.target+":"+a+":cX-DataFilterItem-"+c,className:0==c?"CanvasXpressDataFilterContainerItemSelected":"CanvasXpressDataFilterContainerItem",innerHTML:p,alt:i[c],title:i[c],index:c});d.appendChild(g)}return l.appendChild(d),o.appendChild(l),r.appendChild(h),r.appendChild(n),r.appendChild(o),this.addRemoveStringDataFilterListeners("addEvtListener",o),r},this.addRemoveStringDataFilterListeners=function(t,e){t&&e&&(this[t](e,"scroll",this.scrollStringFilter,!1),this[t](e,"mousedown",this.registerStringFilter,!1),this[t](e,"mouseup",this.endStringFilter,!1))},this.scrollStringFilter=function(t){return function(e,i){e||(e=window.event),i||(i=this);var s=i.firstChild,a=s.firstChild,r=s.skey,h=Math.max(0,Math.min(Math.floor(i.scrollTop/16),s.values.length-5));a.style.top=i.scrollTop+"px";for(var n=0;n<Math.min(5,s.values.length);n++){var o=t.$(t.target+":"+r+":cX-DataFilterItem-"+n);if(o){var i=s.values[h+n].length>30?s.values[h+n].substr(0,30)+" ...":s.values[h+n];o.className=s.selected[h+n]?"CanvasXpressDataFilterContainerItemSelected":"CanvasXpressDataFilterContainerItem",o.innerHTML=i,o.alt=s.values[h+n],o.title=s.values[h+n],o.index=h+n}}return t.filteringStringOn&&t.updateSelectStringFilter(!1,t.$(t.target+":"+r+":cX-DataFilterItem-4"),!0),!1}}(this),this.registerStringFilter=function(t){return function(e){e||(e=window.event);var i=t.getTargetEvent(e);return i.id.match(/cX-DataFilterMask/)||(t.$(i.parentNode.id.replace("cX-DataFilterOptions","cX-DataFilterInput")).value="",t.updateSelectStringFilter(!1,i,e.shiftKey,e.ctrlKey),t.filteringStringOn=i),!1}}(this),this.endStringFilter=function(t){return function(e,i){if(e||(e=window.event),!i&&t.filteringStringOn&&(i=t.filteringStringOn.parentNode.parentNode),i){var s=i.selected,a=i.filter,r=i.uvalue,h=i.ref,n=i.values;if(s[0])t.toDoFilter[a]&&t.toDoFilter[a][r]&&delete t.toDoFilter[a][r];else{t.toDoFilter[a]||(t.toDoFilter[a]={}),t.toDoFilter[a][r]||(t.toDoFilter[a][r]={like:[]}),t.toDoFilter[a][r].like=[];for(var o in s)t.toDoFilter[a][r].like.push(n[o]);null!=h&&(t.toDoFilter[a][r].ref=h)}return t.filteringStringOn=!0,t.updateDataFilter(),t.filteringStringOn=!1,!1}}}(this),this.updateStringFilter=function(t){var e=this.getTargetEvent(t),i=this.filteringStringOn?this.filteringStringOn.id.replace(/-\d$/,""):"";e.id.match(i)&&this.updateSelectStringFilter(!1,e,!0)},this.updateSelectStringFilter=function(t,e,i,s){if(t){var a=this.$(t),r=this.$(t.replace("cX-DataFilterInput","cX-DataFilterScroll"));if(a.value){var h=0,n=r.firstChild,o=n.childNodes[0].index,l=null,d=0;r.selected={};for(var c=1;c<r.values.length-1;c++)r.values[c].toLowerCase().match(a.value.toLowerCase())&&(l||(l=c,d=16*c),r.selected[c]=!0,h++);h+2==r.values.length&&(r.selected={0:!0},l=0),null!=l&&(r.parentNode.scrollTop=d,this.scrollStringFilter(!1,r.parentNode)),this.endStringFilter(!1,r)}else this.resetSelectStringFilter(r),this.endStringFilter(!1,r)}else if(e){var p=e.index,n=e.parentNode,d=e.parentNode.parentNode,g=d.last,u=d.selected,m=d.values,o=n.childNodes[0].index,h=0;if(d.selected={},d.selected[p]=!0,i)if(p>g)for(var c=g;p>=c;c++)d.selected[c]=!0,h++;else for(var c=p;g>=c;c++)d.selected[c]=!0,h++;else if(s){d.last=p;for(var c in u)d.selected[c]=!0,h++}else d.last=p;h>0&&delete d.selected[0],delete d.selected[m.length-1];for(var c=0;c<n.childNodes.length;c++)n.childNodes[c].className=d.selected[c+o]?"CanvasXpressDataFilterContainerItemSelected":"CanvasXpressDataFilterContainerItem"}},this.resetSelectStringFilter=function(t){if(t){t.selected={0:!0};var e=t.parentNode;e.scrollTop=0,this.scrollStringFilter(!1,e)}},this.hideDataFilter=function(t){return function(e){return e||(e=window.event),t.moveDataFilter(!0),!1}}(this),this.dockUndockDataFilter=function(t){return function(e){e||(e=window.event);var i=t.$(t.target+"-cX-DataFilter");return i&&t.moveDataFilter(),!1}}(this),this.resizeDataFilter=function(){var t="Genome"==this.graphType?60:81;this.dataFilterHeight=this.canvas.height-t,this.activeAccordion&&(this.activeAccordion.style.height=this.dataFilterHeight+"px");

},this.resetDataFilter=function(t){return function(e,i,s){if(t.resetFilters(),t.toDoFilter={},t.reset(),s){var a=t.$(t.target+"-cX-DataFilter");a&&(t.removeGenericDataFilterListenersOrReset(),a.parentNode.removeChild(a),t.addDataFilterDiv())}else t.removeGenericDataFilterListenersOrReset(!0);return i||t.draw(),!1}}(this),this.initializeDataFilterEvents=function(){this.addDataFilterDiv()},this.initializeDataFilterEvents()},CanvasXpress.prototype.initDataTable=function(){this.addDataTableDiv=function(t,e){if(!this.$(this.target+"-cX-DataTable")){var i=this,s=function(t,e,s){var a=i.$cX(0==e||0==s?"th":"td",{id:i.target+"-cX-DataTableCell."+e+"."+s,className:0==e||0==s?"CanvasXpressTableCellHead":"CanvasXpressTableCell"},{width:i.colWidth+"px",height:i.rowHeight+"px"});t.appendChild(a)};e||this.setDataTableDimensions(t);for(var a=20,r=44,h=null!=this.dataTableLastX?parseInt(this.dataTableLastX):.1*this.canvas.width,n=null!=this.dataTableLastY?parseInt(this.dataTableLastY):.9*-this.canvas.height,o=this.dataTableLastWidth||this.dataTableColsWidth+a,l=this.dataTableLastHeight||this.dataTableRowsHeight+r,d=3*(this.colWidth+8)+6,c=3*(this.rowHeight+4)+8,p=this.$cX("div",{id:this.target+"-cX-DataTable",className:"CanvasXpressDataTable draggable-container"},{top:n+"px",left:h+"px",width:o+"px",height:l+"px",minWidth:d+a+"px",minHeight:c+r+20+"px",zIndex:1e4,display:"none"}),g=this.$cX("div",{id:this.target+"-cX-DataTableToolbar",className:"CanvasXpressDataTableToolbar draggable"},{width:o+"px",minWidth:d+a+"px"}),u=this.$cX("img",{id:this.target+"-cX-DataTableSaveImage",className:"CanvasXpressDataTableToolbarImage",src:this.imageDir+"disk.png",alt:"Save data",title:"Save data"}),m=this.$cX("img",{id:this.target+"-cX-DataTableTransposeImage",className:"CanvasXpressDataTableToolbarImage",src:this.imageDir+"transpose.png",alt:"Transpose data",title:"Transpose data"}),f=this.$cX("img",{id:this.target+"-cX-DataTableNetworkImage",className:"CanvasXpressDataTableToolbarImage",src:"nodes"==this.networkShowDataTable?this.imageDir+"edges.png":this.imageDir+"nodes.png",alt:"nodes"==this.networkShowDataTable?"Show edge data":"Show node data",title:"nodes"==this.networkShowDataTable?"Show edge data":"Show node data"},{display:"Network"==this.graphType?"block":"none"}),v=this.$cX("img",{id:this.target+"-cX-DataTableDockImage",className:"CanvasXpressDataTableToolbarImage",src:this.dataTableLastState&&"docked"==this.dataTableLastState?this.imageDir+"unpin.png":this.imageDir+"pin.png",alt:this.dataTableLastState&&"docked"==this.dataTableLastState?"Undock":"Dock",title:this.dataTableLastState&&"docked"==this.dataTableLastState?"Undock":"Dock"}),x=this.$cX("img",{id:this.target+"-cX-DataTableCloseImage",className:"CanvasXpressDataTableToolbarImage",src:this.imageDir+"cancel1.png",alt:"Close table",title:"Close table"}),y=this.$cX("div",{id:this.target+"-cX-DataTableContainer",className:"CanvasXpressDataTableContainer"},{width:o+"px",height:l-20+"px",minWidth:d+a+"px",minHeight:c+r+"px"}),b=this.$cX("div",{id:this.target+"-cX-DataTableTableMask",className:"CanvasXpressDataTableMask"},{width:o-a+"px",height:l-r+"px",minWidth:d+"px",minHeight:c+20+"px"}),w=this.$cX("table",{id:this.target+"-cX-DataTableTable",className:"CanvasXpressDataTable"}),C=this.$cX("tbody"),T=0;T<this.maxRows;T++){for(var D=this.$cX("tr"),S=0;S<this.maxCols;S++)s(D,T,S);C.appendChild(D)}var A=this.$cX("div",{id:this.target+"-cX-DataTableVer",className:"CanvasXpressDataTableVertical"},{height:l-r+"px",minHeight:c+20+"px"}),k=this.$cX("img",{id:this.target+"-cX-DataTableVerImage",src:this.getPixelImage(),width:1,height:this.dataTableTotalHeight});A.appendChild(k);var M=this.$cX("div",{id:this.target+"-cX-DataTableHor",className:"CanvasXpressDataTableHorizontal"},{width:o-a+"px",minWidth:d+"px"}),I=this.$cX("img",{id:this.target+"-cX-DataTableHorImage",src:this.getPixelImage(),width:this.dataTableTotalWidth,height:1});M.appendChild(I);var L=this.$cX("div",{id:this.target+"-cX-DataTableResizer",className:"CanvasXpressDataTableResizer resizable"});g.appendChild(x),g.appendChild(v),g.appendChild(m),g.appendChild(u),g.appendChild(f),w.appendChild(C),b.appendChild(w),y.appendChild(b),y.appendChild(A),y.appendChild(M),y.appendChild(L),p.appendChild(g),p.appendChild(y);var N=this.$("south-wrapper-"+this.target);N&&(N.appendChild(p),this.addRemoveDataTableListeners("addEvtListener"))}},this.addRemoveDataTableListeners=function(t,e){this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableHor"),"scroll",this.scrollTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableVer"),"scroll",this.scrollTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableToolbar"),"mousedown",this.registerMousemove,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableSaveImage"),"click",this.saveTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableNetworkImage"),"click",this.networkUpdateTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableTransposeImage"),"click",this.transposeDataTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableDockImage"),"click",this.dockUndockTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCloseImage"),"click",this.hideTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableResizer"),"mousedown",this.mousedownDataTableResizer,!1);for(var i=e?e[0]:this.maxRows,s=e?e[1]:this.maxCols,a=0;s>a;a++)this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell.0."+a),"click",this.clickDataTableHeader,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell.0."+a),"mousemove",this.mousemoveDataTableHeader,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell.0."+a),"mousedown",this.mousedownDataTableHeader,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell.0."+a),"mouseover",this.mouseoverDataTableHeader,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell.0."+a),"mouseout",this.mouseoutDataTableHeader,!1);for(var a=0;i>a;a++)this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell."+a+".0"),"mouseover",this.mouseoverDataTableHeader,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell."+a+".0"),"mouseout",this.mouseoutDataTableHeader,!1);for(var a=1;i>a;a++)for(var r=1;s>r;r++)this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell."+a+"."+r),"mouseover",this.mouseoverDataTableCell,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell."+a+"."+r),"mouseout",this.mouseoutDataTableCell,!1)},this.scrollTable=function(t){return function(e){e||(e=window.event);var i=t.$(t.target+"-cX-DataTable"),s=t.$(t.target+"-cX-DataTableVer"),a=t.$(t.target+"-cX-DataTableHor");if(i&&s&&a&&!t.resizingDataTableOn){var r=Math.ceil(a.scrollLeft/(a.scrollWidth/t.totalCols)),h=Math.ceil(s.scrollTop/(s.scrollHeight/t.totalRows));t.dataTableLastScrollLeft=a.scrollLeft,t.dataTableLastScrollTop=s.scrollTop,t.dataTableLastScrollWidth=a.scrollWidth,t.dataTableLastScrollHeight=s.scrollHeight,(r!=t.startCol||h!=t.startRow)&&(t.startCol=r,t.startRow=h,t.updateDataTable(!1,!1,!1,!0))}return!1}}(this),this.saveTable=function(t){return function(e){e||(e=window.event);var i=t.maxCols,s=t.maxRows,a=t.startCol,r=t.startRow;t.maxCols=t.totalCols,t.maxRows=t.totalRows,t.startCol=0,t.startRow=0;var h=t.updateDataTable(!1,!1,!0);return t.exportToExcel(h),t.maxCols=i,t.maxRows=s,t.startCol=a,t.startRow=r,!1}}(this),this.dockUndockTable=function(t){return function(e){e||(e=window.event);var i=t.dataTableLastState&&"docked"==t.dataTableLastState?"undock":"dock",s=t.getTargetEvent(e);return"dock"==i?(s.src=t.imageDir+"unpin.png",s.alt="Undock",s.title="Undock"):(s.src=t.imageDir+"pin.png",s.alt="Dock",s.title="Dock"),t.moveDataTableDiv(i),!1}}(this),this.transposeDataTable=function(t){return function(e){return e||(e=window.event),t.dataTableTransposed=t.dataTableTransposed?!1:!0,t.sortDataTableHead=!1,t.updateDataTable(!1,!0,!1,!1,!0),t.resizeDataTable(),!1}}(this),this.minimizeTable=function(t){return function(e){return e||(e=window.event),t.moveDataTableDiv("min"),!1}}(this),this.maximizeTable=function(t){return function(e){return e||(e=window.event),t.moveDataTableDiv("max"),!1}}(this),this.hideTable=function(t){return function(e){e||(e=window.event);var i=t.$(t.target+"-cX-DataTable");return i&&(t.showDataTable=!1,t.moveDataTableDiv("hide"),setTimeout(function(){t.hideUnhideDataTable(!0),t.resetFade(i),t.resetDataTable(!0)},500)),!1}}(this),this.networkUpdateTable=function(t){return function(e){e||(e=window.event);t.getTargetEvent(e);return t.networkShowDataTable="nodes"==t.networkShowDataTable?"edges":"nodes",t.updateDataTable(!1,!0,!1,!0),!1}}(this),this.mousedownDataTableResizer=function(t){return function(e){e||(e=window.event);var i=e.target||e.srcElement;if(t.hasClass(i,"resizable")){var s=t.$(t.target+"-cX-DataTable");s&&(t.dataTableTarget=s,t.xMouseDown=e.clientX,t.yMouseDown=e.clientY,t.dataTableWidth=parseInt(t.dataTableTarget.style.width),t.dataTableHeight=parseInt(t.dataTableTarget.style.height),t.resizingDataTableOn=!0)}return!1}}(this),this.mousemoveDataTableHeader=function(t){return function(e){e||(e=window.event);var i=t.resizingDataTableColumnOn?t.dataTableColumnTarget:t.getTargetEvent(e),s=t.adjustedCoordinates(e,i),a=t.$(t.target+"-cX-DataTableHorImage");if(s&&a)if(t.resizingDataTableColumnOn){var r=t.dataTableColumnTarget.id.split("."),h=parseInt(r[2]),n=s.x-t.xMouseDown,o=Math.max(t.colWidth,(t.dataTableColumnWidth[t.startCol+h]||t.colWidth)+n);t.dataTableColumnTarget.firstChild.style.width=o+"px",a.width+=n;for(var l=t.startRow;l<t.startRow+t.totalRows;l++){var d=t.$(t.target+"-cX-DataTableCell."+l+"."+h);d&&(d.style.width=o+"px",d.firstChild.style.width=o+"px")}t.dataTableColumnWidth[t.startCol+h]=o,t.xMouseDown=s.x,t.yMouseDown=s.y,document.body.style.cursor="ew-resize"}else{var c=i.offsetLeft+i.clientWidth-s.x;i.style.cursor=5>c&&"th"==i.nodeName.toLowerCase()?"ew-resize":"default"}return!1}}(this),this.mousedownDataTableHeader=function(t){return function(e){e||(e=window.event);var i=e.target||e.srcElement,s=t.adjustedCoordinates(e,i);if(s){var a=i.offsetLeft+i.clientWidth-s.x;5>a&&"th"==i.nodeName.toLowerCase()&&(t.dataTableColumnTarget=i,t.xMouseDown=s.x,t.yMouseDown=s.y,t.resizingDataTableColumnOn=!0,document.body.style.cursor="ew-resize")}return!1}}(this),this.clickDataTableHeader=function(t){return function(e){e||(e=window.event);var i=t.getTargetEvent(e),s=t.target+"-cX-DataTableCell.0.0";if(i.tagName.match(/th/i)&&(i=i.firstChild),i.className="CanvasXpressTableCellSortDesc"==i.className?"CanvasXpressTableCellSortAsc":"CanvasXpressTableCellSortDesc",t.sortDataTableHead&&t.sortDataTableHead.id!=i.id){var a=t.$(t.sortDataTableHead.id);a&&(i.parentNode.id==s&&(t.sortDataTableHead.id=t.target+"-cX-DataTableCellContent.0.0"),a.className="CanvasXpressTableCell")}return t.sortDataTableHead=i,t.sortDataTable(),!1}}(this),this.mouseoverDataTableHeader=function(){return function(t){return t||(t=window.event),this.className="CanvasXpressTableCellHeadActive",!1}}(this),this.mouseoutDataTableHeader=function(){return function(t){return t||(t=window.event),this.className="CanvasXpressTableCellHead",!1}}(this),this.mouseoverDataTableCell=function(){return function(t){return t||(t=window.event),this.className="CanvasXpressTableCellActive",!1}}(this),this.mouseoutDataTableCell=function(){return function(t){return t||(t=window.event),this.className="CanvasXpressTableCell",!1}}(this),this.setDataTableDimensions=function(t,e){var i=0,s=0,a=0,r=!1,h=function(){for(var e=0;e<t.w.grps.length;e++)a+=t.w.grps[e].length;return a};t||(t=this.data);var n=0;if(t.x)for(var o in t.x)n++;var l=0;if(t.z)for(var o in t.z)l++;var d=this.getDataTableDimensions();if((d[0]!=this.maxRows||d[1]!=this.maxCols)&&(this.initialMaxRows=this.maxRows,this.initialMaxCols=this.maxCols),"Network"==this.graphType){var c=this.getAllNetworkAttributes(t);i=this.dataTableTransposed?1+t[this.networkShowDataTable].length:1+c[1],s=this.dataTableTransposed?1+c[1]:1+t[this.networkShowDataTable].length}else if("Genome"==this.graphType)i=1,s=1;else if("Venn"==this.graphType){var p=this.getVennCompartments(t);i=this.dataTableTransposed?1+p[1]:2,s=this.dataTableTransposed?2:1+p[1]}else"Correlation"==this.graphType?(i="samples"==this.correlationAxis?1+t.y.smps.length:1+t.y.vars.length,s=i):"Candlestick"==this.graphType?t.y?(i=this.dataTableTransposed?1+t.y.smps.length*t.y.vars.length:6,s=this.dataTableTransposed?6:1+t.y.smps.length*t.y.vars.length):t.market&&(i=this.dataTableTransposed?1+t.market.smps.length*t.market.vars.length:6,s=this.dataTableTransposed?6:1+t.market.smps.length*t.market.vars.length):t.y&&t.y.vars&&t.y.smps?(i=this.dataTableTransposed?1+l+t.y.smps.length:1+n+t.y.vars.length,s=this.dataTableTransposed?1+n+t.y.vars.length:1+l+t.y.smps.length):t.w&&t.w.vars&&t.w.grps&&(a=h(),i=this.dataTableTransposed?1+l+a:1+n+t.w.vars.length,s=this.dataTableTransposed?1+n+t.w.vars.length:1+l+a);this.maxRows>i&&(this.initialMaxRows=this.maxRows,this.maxRows=i),this.maxCols>s&&(this.initialMaxCols=this.maxCols,this.maxCols=s),null==this.totalRows||null==this.totalCols?(this.totalRows=i,this.totalCols=s):e||i!=this.totalRows||s!=this.totalCols||d[0]!=this.maxRows||d[1]!=this.maxCols||d[2]!=this.rowHeight||d[3]!=this.colWidth?(this.totalRows=i,this.totalCols=s,r=!0):(this.totalRows=i,this.totalCols=s,this.showDataTable&&this.hideUnhideDataTable()),this.dataTableTotalHeight=10;for(var o=0;o<this.totalRows;o++)this.dataTableTotalHeight+=this.setDataTableRowHeight(o);this.dataTableTotalHeight+=4*this.totalRows,this.dataTableTotalWidth=10;for(var o=0;o<this.totalCols;o++)this.dataTableTotalWidth+=this.setDataTableColumnWidth(o);this.dataTableTotalWidth+=8*this.totalCols,this.dataTableRowsHeight=10;for(var o=this.startRow;o<this.startRow+this.maxRows;o++)this.dataTableRowsHeight+=this.setDataTableRowHeight(o);this.dataTableRowsHeight+=4*this.maxRows,this.dataTableColsWidth=10;for(var o=this.startCol;o<this.startCol+this.maxCols;o++)this.dataTableColsWidth+=this.setDataTableColumnWidth(o);this.dataTableColsWidth+=8*this.maxCols,r&&this.resetDataTable(!0,d)},this.setDataTableColumnWidth=function(t,e){return this.dataTableColumnWidth[t]?e&&(this.dataTableColumnWidth[t]=Math.max(e,this.colWidth)):this.dataTableColumnWidth[t]=this.colWidth,this.dataTableColumnWidth[t]},this.setDataTableRowHeight=function(t,e){return this.dataTableRowHeight[t]?e&&(this.dataTableRowHeight[t]=Math.max(e,this.rowHeight)):this.dataTableRowHeight[t]=this.rowHeight,this.dataTableRowHeight[t]},this.getAllNetworkAttributes=function(){var t=this.getNetworkData(this.networkShowDataTable,!0),e=this.getKeys(t).length;return[t,e]},this.getVennCompartments=function(t){var e={},i=0;if(t.venn&&t.venn.data)for(var s in t.venn.data)e[s]=1,i++;return[e,i]},this.getDataTableDimensions=function(){var t=0,e=0,i=0,s=0,a=this.$(this.target+"-cX-DataTableTable"),r=this.$(this.target+"-cX-DataTableCell.0.0");if(a){var h=a.childNodes[0].rows;h&&(t=h.length,e=h[0].cells.length,i=r&&r.firstChild&&r.firstChild.style?parseInt(r.firstChild.style.height):0,s=r&&r.firstChild&&r.firstChild.style?parseInt(r.firstChild.style.width):0)}return[t,e,i,s]},this.resetDataTable=function(t,e){this.addRemoveDataTableListeners("removeEvtListener",e),this.removeTarget(this.target+"-cX-DataTable"),this.addDataTableDiv(!1,t)},this.hideUnhideDataTable=function(t){this.initialMaxRows&&(this.maxRows=this.initialMaxRows),this.initialMaxCols&&(this.maxCols=this.initialMaxCols);var e=this.$(this.target+"-cX-DataTable");e&&(e.style.display=1==t?"none":"block")},this.resizeDataTable=function(){var t=this.$(this.target+"-cX-DataTableContainer"),e=this.$(this.target+"-cX-DataTableVer"),i=this.$(this.target+"-cX-DataTableHor");if(t&&e&&i){var s=0;this.maxCols=0;for(var a=this.startCol;a<this.totalCols;a++){if(s+=this.dataTableColumnWidth[a]+8,parseInt(t.style.width)<s){this.maxCols++;break}this.maxCols++}if(s<parseInt(t.style.width)&&this.startCol>0)for(var a=this.startCol;a>=0&&s+this.dataTableColumnWidth[a]+8<parseInt(t.style.width);a--)s+=this.dataTableColumnWidth[a]+8,this.maxCols++,this.startCol--;parseInt(t.style.width)>this.dataTableTotalWidth&&(this.maxCols=this.totalCols-this.startCol),this.maxCols=Math.max(3,Math.min(this.maxCols,this.totalCols-this.startCol));var r=0;this.maxRows=0;for(var a=this.startRow;a<this.totalRows;a++){if(r+=this.dataTableRowHeight[a]+4,parseInt(t.style.height)<r){this.maxRows++;break}this.maxRows++}if(r<parseInt(t.style.height)&&this.startRow>0)for(var a=this.startRow;a>=0&&r+this.dataTableRowHeight[a]+4<parseInt(t.style.height);a--)r+=this.dataTableRowHeight[a]+4,this.maxRows++,this.startRow--;parseInt(t.style.height)>this.dataTableTotalHeight&&(this.totalRows=this.totalRows-this.startRow),this.maxRows=Math.max(3,Math.min(this.maxRows,this.totalRows-this.startRow)),this.updateDataTable(!1,!0,!1,!0),e=this.$(this.target+"-cX-DataTableVer"),i=this.$(this.target+"-cX-DataTableHor"),e&&i&&(this.isIE||(e.scrollHeight=this.dataTableLastScrollHeight),e.scrollTop=this.dataTableLastScrollTop?this.dataTableLastScrollTop:e.scrollTop,this.isIE||(i.scrollWidth=this.dataTableLastScrollWidth),i.scrollLeft=this.dataTableLastScrollLeft?this.dataTableLastScrollLeft:i.scrollLeft),"docked"==this.dataTableLastState&&this.resizeViewportSouth(!0)}},this.sortDataTable=function(){if(this.sortDir="CanvasXpressTableCellSortDesc"==this.sortDataTableHead.className?"descending":"ascending","Network"==this.graphType){if(!this.dataTableTransposed)return this.sortDataTableHead.className="CanvasXpressTableCell",void(this.sortDataTableHead=!1);if("cxb"==this.sortDataTableHead.type)return this.sortDataTableHead.className="CanvasXpressTableCell",void(this.sortDataTableHead=!1);this.sortNetworkIndices(this.sortDataTableHead.innerHTML)}else{if("Genome"==this.graphType)return this.sortDataTableHead.className="CanvasXpressTableCell",void(this.sortDataTableHead=!1);if("Venn"==this.graphType)return this.sortDataTableHead.className="CanvasXpressTableCell",void(this.sortDataTableHead=!1);if("Correlation"==this.graphType)"samples"==this.correlationAxis?"cxb"==this.sortDataTableHead.type?this.sortSamples():(this.sortSamples(!1,!1,this.sortDataTableHead.innerHTML,"cor",!0),this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1):"cxb"==this.sortDataTableHead.type?this.sortVariables():(this.sortVariables(!1,!1,this.sortDataTableHead.innerHTML,"cor",!0),this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1);else{if("Candlestick"==this.graphType)return this.sortDataTableHead.className="CanvasXpressTableCell",void(this.sortDataTableHead=!1);this.data.y.vars&&this.data.y.smps&&(this.dataTableTransposed?"cxx"==this.sortDataTableHead.type?this.sortSamplesByCategory([this.sortDataTableHead.innerHTML]):"cxv"==this.sortDataTableHead.type?this.sortSamplesByVariable(this.sortDataTableHead.innerHTML):"cxb"==this.sortDataTableHead.type&&this.sortSamples():"cxz"==this.sortDataTableHead.type?this.sortVariablesByCategory([this.sortDataTableHead.innerHTML]):"cxs"==this.sortDataTableHead.type?this.sortVariablesBySample(this.sortDataTableHead.innerHTML):"cxb"==this.sortDataTableHead.type&&this.sortVariables())}}this.updateDataTable(!1,!0,!1,!1,!0)},this.updateDataTable=function(t,e,i,s,a){var r=0,h=0,n=0,o=0,l=[],d=[],c=[],p=[],g=t?!1:!0,u=function(t,e,i,s){if(e.hasOwnProperty(t))return null!=e[t]?e[t]:"";if(i[0][t]&&i[0][t].hasOwnProperty("r")){for(var a=i[0][t].r,r=0;r<s[a].length;r++){var h=s[a][r];if(!e.hasOwnProperty(h))return"";e=e[h]}if(e.hasOwnProperty(t))return null!=e[t]?e[t]:""}return""};if(this.dataTableLastState&&"docked"==this.dataTableLastState&&s&&(this.dataTableLastX=this.configuringOn&&"docked"==this.configuringOn?0:7,this.dataTableLastY=0),t){if(this.isGroupedData){for(var m=this.getVariableIndices(t.w.vars),f=[],v=0;v<t.w.grps.length;v++)f=f.concat(t.w.grps[v]);this.isGroupedData=!1,t=this.extractDataObject(f,m),this.isGroupedData=!0}}else t=this.data;if(i||this.setDataTableDimensions(t,e),"Network"==this.graphType){var x=this.getAllNetworkAttributes(t);if(c.push(""),p.push("cxb"),this.dataTableTransposed){for(var m in x[0])h<this.maxCols&&o>=this.startCol&&(c.push(m),p.push("cxx"),h++),o++;l.push(c),d.push(p);for(var m=0;m<t[this.networkShowDataTable].length;m++){if(r<this.maxRows&&n>=this.startRow){h=0,o=0,c=[m+1],p=["cxz"];for(var v in x[0]){if(h<this.maxCols&&o>=this.startCol){var y=u(v,t[this.networkShowDataTable][m],x,this[this.networkShowDataTable+"Properties"]);c.push(y),p.push("cxy"),h++}o++}l.push(c),d.push(p),r++}n++}}else{for(var m=0;m<t[this.networkShowDataTable].length;m++)h<this.maxCols&&o>=this.startCol&&(c.push(m+1),p.push("cxz"),h++),o++;l.push(c),d.push(p);for(var m in x[0]){if(r<this.maxRows&&n>=this.startRow){h=0,o=0,c=[m],p=["cxx"];for(var v=0;v<t[this.networkShowDataTable].length;v++){if(h<this.maxCols&&o>=this.startCol){var y=u(m,t[this.networkShowDataTable][v],x,this[this.networkShowDataTable+"Properties"]);c.push(y),p.push("cxy"),h++}o++}l.push(c),d.push(p),r++}n++}}}else if("Genome"==this.graphType)l=[["Not implemented"]],d=[["cxb"]];else if("Venn"==this.graphType){var y=this.getVennCompartments(t);if(c.push(""),p.push("cxb"),this.dataTableTransposed){c.push("No"),p.push("cxz"),l.push(c),d.push(p);for(var m in y[0])r<this.maxRows&&n>=this.startRow&&(h=0,o=0,c=[m],p=["cxx"],h<this.maxCols&&o>=this.startCol&&(c.push(t.venn.data[m]),p.push("cxy"),h++),o++,l.push(c),d.push(p),r++),n++}else{for(var m in y[0])h<this.maxCols&&o>=this.startCol&&(c.push(m),p.push("cxx"),h++),o++;if(l.push(c),d.push(p),r<this.maxRows&&n>=this.startRow){h=0,o=0,c=["No"],p=["cxz"];for(var m in y[0])h<this.maxCols&&o>=this.startCol&&(c.push(t.venn.data[m]),p.push("cxy"),h++),o++;l.push(c),d.push(p)}}}else if("Correlation"==this.graphType){var b="samples"==this.correlationAxis?t.y.smps:t.y.vars,w="samples"==this.correlationAxis?this.smpIndices:this.varIndices,C="samples"==this.correlationAxis?"cxs":"cxv";c.push(""),p.push("cxb");for(var m=0;m<b.length;m++)h<this.maxCols&&o>=this.startCol&&(c.push(g?b[w[m]]:b[m]),p.push(C),h++),o++;l.push(c),d.push(p);for(var m=0;m<b.length;m++){if(r<this.maxRows&&n>=this.startRow){h=0,o=0,c=[g?b[w[m]]:b[m]],p=[C];for(var v=0;v<b.length;v++)h<this.maxCols&&o>=this.startCol&&(c.push(t.y.cor?g?t.y.cor[w[m]][w[v]]:t.y.cor[m][v]:m==v?1:t.y.data),p.push("cxy"),h++),o++;l.push(c),d.push(p),r++}n++}}else if("Candlestick"==this.graphType){var x=["open","low","high","close","volume"];if(c.push(""),p.push("cxb"),this.dataTableTransposed){for(var m=0;m<t.y.vars.length;m++)for(var v=0;v<x.length;v++){if(h<this.maxCols&&o>=this.startCol){var T=t.y.vars.length>1?t.y.vars[m]+":"+x[v]:x[v];c.push(T),p.push("cxv"),h++}o++}l.push(c),d.push(p);for(var m=0;m<t.y.smps.length;m++){if(r<this.maxRows&&n>=this.startRow){h=0,o=0,c=[t.y.smps[m]],p=["cxs"];for(var v=0;v<t.y.vars.length;v++)for(var D=0;D<x.length;D++)h<this.maxCols&&o>=this.startCol&&(c.push(null!=t.y[x[D]][v][m]?t.y[x[D]][v][m]:t.y[x[D]][m]),p.push("cxy"),h++),o++;l.push(c),d.push(p),r++}n++}}else{for(var m=0;m<t.y.smps.length;m++)h<this.maxCols&&o>=this.startCol&&(c.push(t.y.smps[m]),p.push("cxs"),h++),o++;l.push(c),d.push(p);for(var m=0;m<t.y.vars.length;m++)for(var v=0;v<x.length;v++){if(r<this.maxRows&&n>=this.startRow){h=0,o=0;var T=t.y.vars.length>1?t.y.vars[m]+":"+x[v]:x[v];c=[T],p=["cxv"];for(var D=0;D<t.y.smps.length;D++)h<this.maxCols&&o>=this.startCol&&(c.push(null!=t.y[x[v]][m][D]?t.y[x[v]][m][D]:t.y[x[v]][D]),p.push("cxy"),h++),o++;l.push(c),d.push(p),r++}n++}}}else if(t.y.vars&&t.y.smps){var S=g?this.varIndices.length:t.y.vars.length,A=g?this.smpIndices.length:t.y.smps.length;if(c.push(""),p.push("cxb"),this.dataTableTransposed){if(t.x)for(var m in t.x)h<this.maxCols&&o>=this.startCol&&(c.push(m),p.push("cxx"),h++),o++;for(var m=0;S>m;m++)h<this.maxCols&&o>=this.startCol&&(c.push(g?t.y.vars[this.varIndices[m]]:t.y.vars[m]),p.push("cxv"),h++),o++;if(l.push(c),d.push(p),t.z)for(var m in t.z){if(r<this.maxRows&&n>=this.startRow){if(h=0,o=0,c=[m],p=["cxz"],t.x)for(var v in t.x)h<this.maxCols&&o>=this.startCol&&(c.push(""),p.push("cxb"),h++),o++;for(var v=0;S>v;v++)h<this.maxCols&&o>=this.startCol&&(c.push(g?t.z[m][this.varIndices[v]]:t.z[m][v]),p.push("cxz"),h++),o++;l.push(c),d.push(p),r++}n++}for(var m=0;A>m;m++){if(r<this.maxRows&&n>=this.startRow){if(h=0,o=0,c=[g?t.y.smps[this.smpIndices[m]]:t.y.smps[m]],p=["cxs"],t.x)for(var v in t.x)h<this.maxCols&&o>=this.startCol&&(c.push(g?t.x[v][this.smpIndices[m]]:t.x[v][m]),p.push("cxx"),h++),o++;for(var v=0;S>v;v++)h<this.maxCols&&o>=this.startCol&&(c.push(g?null!=t.y.data[this.varIndices[v]][this.smpIndices[m]]?t.y.data[this.varIndices[v]][this.smpIndices[m]]:t.y.data[this.smpIndices[m]]:null!=t.y.data[v][m]?t.y.data[v][m]:t.y.data[m]),p.push("cxy"),h++),o++;l.push(c),d.push(p),r++}n++}}else{if(t.z)for(var m in t.z)h<this.maxCols&&o>=this.startCol&&(c.push(m),p.push("cxz"),h++),o++;for(var m=0;A>m;m++)h<this.maxCols&&o>=this.startCol&&(c.push(g?t.y.smps[this.smpIndices[m]]:t.y.smps[m]),p.push("cxs"),h++),o++;if(l.push(c),d.push(p),t.x)for(var m in t.x){if(r<this.maxRows&&n>=this.startRow){if(h=0,o=0,c=[m],p=["cxx"],t.z)for(var v in t.z)h<this.maxCols&&o>=this.startCol&&(c.push(""),p.push("cxb"),h++),o++;for(var v=0;A>v;v++)h<this.maxCols&&o>=this.startCol&&(c.push(g?t.x[m][this.smpIndices[v]]:t.x[m][v]),p.push("cxx"),h++),o++;l.push(c),d.push(p),r++}n++}for(var m=0;S>m;m++){if(r<this.maxRows&&n>=this.startRow){if(h=0,o=0,c=[g?t.y.vars[this.varIndices[m]]:t.y.vars[m]],p=["cxv"],t.z)for(var v in t.z)h<this.maxCols&&o>=this.startCol&&(c.push(g?t.z[v][this.varIndices[m]]:t.z[v][m]),p.push("cxz"),h++),o++;for(var v=0;A>v;v++)h<this.maxCols&&o>=this.startCol&&(c.push(g?null!=t.y.data[this.varIndices[m]][this.smpIndices[v]]?t.y.data[this.varIndices[m]][this.smpIndices[v]]:t.y.data[this.smpIndices[v]]:null!=t.y.data[m][v]?t.y.data[m][v]:t.y.data[v]),p.push("cxy"),h++),o++;l.push(c),d.push(p),r++}n++}}}return i?l:void this.loadDataTableValues(l,d,s,a)},this.loadDataTableValues=function(t,e,i,s){var a=this.$(this.target+"-cX-DataTable");if(a){for(var r=this.startRow,h=0;h<t.length;h++){for(var n=this.startCol,o=0;o<t[h].length+this.startCol;o++){var l=this.target+"-cX-DataTableCell."+h+"."+o,d=this.target+"-cX-DataTableCellContent."+r+"."+n,c=this.$(l);if(c){if(c.hasChildNodes())for(;c.childNodes.length>=1;)c.removeChild(c.firstChild);var p=null!=t[h][o]?t[h][o]:"",g=null!=e[h][o]?e[h][o]:"",u=this.$cX("div",{id:d,className:"CanvasXpressTableCell ",innerHTML:p,title:p,alt:p,type:g});0!=h?(u.style.height=this.setDataTableRowHeight(r)+"px",c.style.height=this.setDataTableRowHeight(r)+"px"):(u.style.height=this.setDataTableRowHeight(0)+"px",c.style.height=this.setDataTableRowHeight(0)+"px"),0!=o?(u.style.width=this.setDataTableColumnWidth(n)+"px",c.style.width=this.setDataTableColumnWidth(n)+"px"):(u.style.width=this.setDataTableColumnWidth(0)+"px",c.style.width=this.setDataTableColumnWidth(0)+"px"),c.appendChild(u),n++}}r++}if(this.activeTarget&&(this.activeTarget.style.zIndex=1e4),this.sortDataTableHead){var m=this.$(this.sortDataTableHead.id),f=this.$(this.target+"-cX-DataTableCell.0.0").firstChild,v=this.target+"-cX-DataTableCellContent.0.0";m&&(m.className=this.sortDataTableHead.className),f&&(f.className=this.sortDataTableHead.id==v?this.sortDataTableHead.className:"CanvasXpressTableCell")}if(this.activeTarget=a,a.style.display="block",a.style.zIndex=10001,this.dataTableLastState&&"docked"==this.dataTableLastState&&!i&&!s){var x=this.$("south-handler-"+this.target);return void this.clickViewport(!1,x)}}},this.moveDataTableDiv=function(t){var e=this.$(this.target+"-cX-DataTable");if(e){var i,s,a,r=this.$(this.remoteParentId+"-canvasXpressRemoteWindow"),h=this.$("west-handler-"+this.target),n=this.$("north-container-"+this.target),o=this.$("west-container-"+this.target),l=this.$("east-container-"+this.target),d=this.$("south-container-"+this.target),c=this.$("south-handler-"+this.target),p=this.$("south-wrapper-"+this.target),g=this;if(h&&o&&l&&d&&c&&p){if(t&&"dock"==t)this.dataTableLastState="docked",this.dataTableLastHeight=e.clientHeight,this.dataTableLastX=e.offsetLeft,this.dataTableLastY=e.offsetTop,c.style.display="block",i="none"==h.style.display?7:0,s=Math.max(e.clientWidth+i,parseInt(o.style.width)+parseInt(l.style.width)+this.canvas.width)+2,a=parseInt(n.style.height)+this.canvas.height+e.clientHeight+7+2,r&&this.resizeMove(r,0,0,s+48,a+54),this.resizeMove(d,0,0,s,e.clientHeight+7+2),this.resizeMove(p,0,0,s,e.clientHeight+2),this.resizeMove(e,i,0,e.clientWidth,e.clientHeight);else if(t&&"hide"==t)delete this.dataTableLastState,delete this.dataTableLastX,delete this.dataTableLastY,c.style.display="none",s=parseInt(o.style.width)+parseInt(l.style.width)+this.canvas.width,a=parseInt(n.style.height)+this.canvas.height+7,r&&this.resizeMove(r,0,0,s+48,a+54),this.fade(e),this.resizeMove(p,0,0,s,0),this.resizeMove(d,0,0,s,7);else{if(!t||"max"!=t&&"release"!=t&&"undock"!=t)return this.dataTableLastX=e.offsetLeft,void(this.dataTableLastY=e.offsetTop);this.dataTableLastState="free",c.style.display="none",s=parseInt(o.style.width)+parseInt(l.style.width)+this.canvas.width,a=parseInt(n.style.height)+this.canvas.height+7,r&&this.resizeMove(r,0,0,s+48,a+54),("max"==t||"undock"==t)&&this.resizeMove(e,parseInt(this.dataTableLastX),parseInt(this.dataTableLastY),e.clientWidth,parseInt(this.dataTableLastHeight)||this.dataTableRowsHeight+42),this.resizeMove(p,0,0,s,0),this.resizeMove(d,0,0,s,7)}r&&setTimeout(function(){g.resizeExtContainer(s+48,a+54)},500)}}},this.updateDataTableResizerDiv=function(t,e,i){if(t||(t=window.event),!t||null!=e&&null!=i||(e=Math.abs(this.dataTableWidth)-(this.xMouseDown-t.clientX),i=Math.abs(this.dataTableHeight)-(this.yMouseDown-t.clientY)),this.dataTableTarget&&this.dataTableTarget.style){var s=this.$(this.target+"-cX-DataTable"),a=this.$(this.target+"-cX-DataTableContainer"),r=this.$(this.target+"-cX-DataTableTableMask"),h=this.$(this.target+"-cX-DataTableVer"),n=this.$(this.target+"-cX-DataTableHor"),o=this.$(this.target+"-cX-DataTableToolbar");s&&a&&r&&h&&n&&o&&(this.dataTableTarget.style.width=this.isIE?Math.max(0,e)+"px":e+"px",a.style.width=this.isIE?Math.max(0,e)+"px":e+"px",r.style.width=this.isIE?Math.max(0,e-20)+"px":e-20+"px",n.style.width=this.isIE?Math.max(0,e-20)+"px":e-20+"px",o.style.width=this.isIE?Math.max(0,e)+"px":e+"px",this.dataTableTarget.style.height=this.isIE?Math.max(0,i)+"px":i+"px",a.style.height=this.isIE?Math.max(0,i-20)+"px":i-20+"px",r.style.height=this.isIE?Math.max(0,i-44)+"px":i-44+"px",h.style.height=this.isIE?Math.max(0,i-44)+"px":i-44+"px",this.dataTableLastWidth=e,this.dataTableLastHeight=i)}},this.endDataTableResizerDiv=function(){null!=this.dataTableTarget&&(this.resizeDataTable(),this.xMouseDown=null,this.yMouseDown=null,this.dataTableWidth=null,this.dataTableHeight=null,this.dataTableTarget=!1,this.resizingDataTableOn=!1)},this.endDataTableColumnResize=function(){this.xMouseDown=null,this.yMouseDown=null,this.resizingDataTableColumnOn=!1,this.dataTableColumnTarget=!1,document.body.style.cursor="default"},this.initializeDataTableEvents=function(){this.addDataTableDiv()},this.initializeDataTableEvents()},CanvasXpress.prototype.initCanvasResizerEvents=function(){this.addCanvasResizerDiv=function(t){if(t){if(document.getElementById("canvasXpressCanvasResize"))return}else if(document.getElementById(this.target+"canvasXpressCanvasResize"))return;var e=document.createElement("div");return e.id=t?"canvasXpressCanvasResize":this.target+"canvasXpressCanvasResize",e.style.left="0px",e.style.top="0px",e.style.width="0.5px",e.style.height="0.5px",t&&(e.style.opacity=.5,e.style.filter="alpha(opacity = 50)",e.style.backgroundColor=this.resizerBackgroundColor),e.style.position="absolute",e.style.display="none",e.style.zIndex=100001,t?(document.body.appendChild(e),
e):void this.canvas.parentNode.appendChild(e)},this.isCanvasResize=function(t){if(this.resizable){t||(t=window.event);var e=this.adjustedCoordinates(t);if(e){var i=e.x,s=e.y;return i>this.width-18&&s>this.height-18?(this.resizeCanvasCursorShow="se-resize",!0):i>this.width-18&&s>20?(this.resizeCanvasCursorShow="e-resize",!0):s>this.height-18?(this.resizeCanvasCursorShow="s-resize",!0):(this.resizeCanvasCursorShow=!1,!1)}}},this.updateCanvasResizerCursor=function(t){if(this.resizable){t||(t=window.event);var e=document.getElementById(this.target);if(e){var i=this.adjustedCoordinates(t);if(i){var s=i.x,a=i.y;s>this.width-18&&a>this.height-18?(e.style.cursor="se-resize",this.resizeCanvasCursorShow="se-resize"):s>this.width-18&&a>20?(e.style.cursor="e-resize",this.resizeCanvasCursorShow="e-resize"):a>this.height-18?(e.style.cursor="s-resize",this.resizeCanvasCursorShow="s-resize"):this.movingOn||(e.style.cursor="default",this.resizeCanvasCursorShow=!1)}}}},this.updateCanvasResizer=function(t){if(this.resizingCanvasOn&&this.resizeCanvasCursorShow){document.body.style.cursor=this.resizeCanvasCursorShow;var e=document.getElementById(this.target+"canvasXpressCanvasResize"),i=document.getElementById("canvasXpressCanvasResize"),s=this.adjustedCoordinates(t),a=this.relativeCoordinates(this.canvas);e&&s&&a&&("se-resize"==this.resizeCanvasCursorShow?(w=s.x,h=s.y):"e-resize"==this.resizeCanvasCursorShow?(w=s.x,h=this.height):"s-resize"==this.resizeCanvasCursorShow&&(w=this.width,h=s.y),i||(i=this.addCanvasResizerDiv(!0)),this.preventSelection(),dx=s.x-this.canvas.width,dy=s.y-this.canvas.height,e.style.width=w+"px",e.style.height=h+"px",e.style.display="block",i.style.left=a.x+"px",i.style.top=a.y+"px",i.style.width=w+"px",i.style.height=h+"px",i.style.display="block",CanvasXpress.resizing=!0)}},this.endCanvasResizer=function(){if(this.resizingCanvasOn){var t=document.getElementById(this.target),e=document.getElementById(this.target+"canvasXpressCanvasResize"),i=document.getElementById("canvasXpressCanvasResize"),s=(document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowBuffer"),this.$("west-container-"+this.target)),a=this.$("middle-container-"+this.target),r=this.$("east-container-"+this.target);if(t&&e&&i){this.tmpHeight=!1,this.tmpWidth=!1;var h=parseInt(e.style.width),n=parseInt(e.style.height);a.style.width=parseInt(s.style.width)+parseInt(e.style.width)+parseInt(r.style.width)+"px",a.style.height=e.style.height,this.resetAxesResizer(),this.draw(h,n),this.resizeAcknowledgementDiv(),e.style.width="0.5px",e.style.height="0.5px",e.style.display="none",t.style.cursor="default",this.updateRemoteNavigationWindow(),document.body.removeChild(i),this.resizeCanvasCursorShow=!1,this.resizingCanvasOn=!1,CanvasXpress.resizing=!1}}},this.initializeCanvasResizerEvents=function(){this.disableEvents||this.addCanvasResizerDiv()},this.initializeCanvasResizerEvents()},CanvasXpress.prototype.initAxisResizerEvents=function(){this.addAxesResizeDiv=function(){if(!document.getElementById(this.target+"canvasXpressAxesResize")){var t=["Previous","Next","Current","Middle","Min","Max","Close"],e=9001,i=document.createElement("div");i.id=this.target+"canvasXpressAxesResize",this.resizerTransparency&&(i.style.opacity=.85,i.style.filter="alpha(opacity = 85)"),i.style.position="absolute",i.style.display="none",i.style.zIndex=e;for(var s=0;s<t.length;s++){e++;var a=document.createElement("div");a.id=this.target+"canvasXpressAxesResize"+t[s],this.resizerTransparency&&(a.style.opacity=.85,a.style.filter="alpha(opacity = 85)"),a.style.position="absolute",a.style.zIndex=e,i.appendChild(a)}this.canvas.parentNode.appendChild(i)}},this.clickAxesResizeClose=function(t){return function(e){e||(e=window.event),t.stopEvent(e),t.resetAxesResizer(e),t.resetFlags(e)}}(this),this.mousemoveActiveAxesResize=function(t){return function(e){e||(e=window.event),t.activateDeactivateAxesResizer(e)}}(this),this.mousedownAxesResize=function(t){return function(e){return e||(e=window.event),t.cancelEvent(e),t.registerAxesResizer(e),!1}}(this),this.mousemoveAxesResize=function(t){return function(e){return e||(e=window.event),t.cancelEvent(e),t.updateAxesResizer(e),!1}}(this),this.addRemoveAxesResizerListeners=function(t){var e=document.getElementById(this.target+"canvasXpressAxesResize"),i=document.getElementById(this.target+"canvasXpressAxesResizeMin"),s=document.getElementById(this.target+"canvasXpressAxesResizeMax"),a=document.getElementById(this.target+"canvasXpressAxesResizeMiddle"),r=document.getElementById(this.target+"canvasXpressAxesResizeCurrent"),h=document.getElementById(this.target+"canvasXpressAxesResizeClose"),n=[e,i,s,a,r];e&&(this[t](e,"mousemove",this.mousemoveActiveAxesResize,!1),this[t](e,"mouseout",this.mousemoveActiveAxesResize,!1)),h&&this[t](h,"click",this.clickAxesResizeClose,!1);for(var o=0;o<n.length;o++)n[o]&&this[t](n[o],"mousedown",this.mousedownAxesResize,!1)},this.showAxesResizer=function(t,e,i,s,a,r,h,n,o,l,d,c,p){if(!this.axesResizerShow){var g=document.getElementById(this.target+"canvasXpressAxesResize"),u=document.getElementById(this.target+"canvasXpressAxesResizeClose");g&&u&&(this.updateResizerEventData(null,null,t,e,i,s,a,r,h,n,o,l,d,c,p),this.refreshAxesResizer(),g.style.display="block",this.resizerType&&this.layoutValid&&(u.style.display="none"),this.addRemoveAxesResizerListeners("addEvtListener"),this.layoutValid&&(this.layoutValidR=c,this.layoutValidC=p,this.layoutValidN=d),this.axesResizerShow=!0)}},this.refreshAxesResizer=function(){if(this.resizerEventData){var t=document.getElementById(this.target+"canvasXpressAxesResize"),e=document.getElementById(this.target+"canvasXpressAxesResizeMin"),i=document.getElementById(this.target+"canvasXpressAxesResizeMax"),s=document.getElementById(this.target+"canvasXpressAxesResizeMiddle"),a=document.getElementById(this.target+"canvasXpressAxesResizeCurrent"),r=document.getElementById(this.target+"canvasXpressAxesResizeClose"),h=document.getElementById(this.target+"canvasXpressAxesResizePrevious"),n=document.getElementById(this.target+"canvasXpressAxesResizeNext");if(t&&e&&i&&a&&r&&h&&n){var o=this.resizerEventData.areas.org[1]-this.resizerEventData.areas.org[0],d=this.resizerEventData.areas.org[3]-this.resizerEventData.areas.org[2],c=14,p=9,g=parseInt(p/2);"h"==this.resizerEventData.pos?(l=this.resizerEventData.l.match(/^t/)?"top":"bottom",t.style.left=this.resizerEventData.areas.org[0]-g+"px",t.style.top=this.resizerEventData.areas.org[2]+"px",t.style.width=o+p-1+"px",t.style.height=c+"px",t.style.backgroundImage="url('"+this.imageDir+"scroller_empty_hor_"+l+".png')",t.style.backgroundRepeat="repeat-x",h.style.left="0px",h.style.top="0px",h.style.width=p+"px",h.style.height=c+"px",h.style.backgroundImage="url('"+this.imageDir+"prev_"+l+".png')",e.style.left=this.resizerEventData.areas.min[0]+"px",e.style.top="0px",e.style.width=p+"px",e.style.height=c+"px",e.style.cursor="e-resize",e.style.backgroundImage="url('"+this.imageDir+"handle_left_"+l+".png')",a.style.left=this.resizerEventData.areas.cur[0]+"px",a.style.top="0px",a.style.width=this.resizerEventData.areas.cur[1]+"px",a.style.height=c+"px",a.style.cursor="move",a.style.backgroundImage="url('"+this.imageDir+"scroller_body_hor_"+l+".png')",a.style.backgroundRepeat="repeat-x",i.style.left=this.resizerEventData.areas.max[0]+"px",i.style.top="0px",i.style.width=p+"px",i.style.height=c+"px",i.style.cursor="e-resize",i.style.backgroundImage="url('"+this.imageDir+"handle_right_"+l+".png')",i.style.backgroundRepeat="no-repeat",s.style.left=this.resizerEventData.areas.min[0]+(this.resizerEventData.areas.cur[1]-1)/2+"px",s.style.top="0px",s.style.width="8px",s.style.height=c+"px",s.style.cursor="move",s.style.backgroundImage="url('"+this.imageDir+"scroller_handle_hor_"+l+".png')",n.style.left=o-1+"px",n.style.top="0px",n.style.width=p+"px",n.style.height=c+"px",n.style.backgroundImage="url('"+this.imageDir+"next_"+l+".png')",r.style.left=o+p+"px",r.style.top="0px",r.style.width=p+"px",r.style.height=c+"px",r.style.backgroundImage="url('"+this.imageDir+"close.png')"):(l=this.resizerEventData.l.match(/^l/)?"left":"right",t.style.left=this.resizerEventData.areas.org[0]+"px",t.style.top=this.resizerEventData.areas.org[2]-g+"px",t.style.width=c+"px",t.style.height=d+p+"px",t.style.backgroundImage="url('"+this.imageDir+"scroller_empty_ver_"+l+".png')",t.style.backgroundRepeat="repeat-y",h.style.left="0px",h.style.top=d+"px",h.style.width=c+"px",h.style.height=p+"px",h.style.backgroundImage="url('"+this.imageDir+"prev_"+l+".png')",e.style.left="0px",e.style.top=this.resizerEventData.areas.min[2]+"px",e.style.width=c+"px",e.style.height=p+"px",e.style.cursor="n-resize",e.style.backgroundImage="url('"+this.imageDir+"handle_bottom_"+l+".png')",e.style.backgroundRepeat="no-repeat",a.style.left="0px",a.style.top=this.resizerEventData.areas.cur[2]+"px",a.style.width=c+"px",a.style.height=this.resizerEventData.areas.cur[3]+"px",a.style.cursor="move",a.style.backgroundImage="url('"+this.imageDir+"scroller_body_ver_"+l+".png')",a.style.backgroundRepeat="repeat-y",i.style.left="0px",i.style.top=this.resizerEventData.areas.max[2]+"px",i.style.width=c+"px",i.style.height=p+"px",i.style.cursor="n-resize",i.style.backgroundImage="url('"+this.imageDir+"handle_top_"+l+".png')",i.style.backgroundRepeat="no-repeat",s.style.left="0px",s.style.top=this.resizerEventData.areas.max[2]+this.resizerEventData.areas.cur[3]/2+"px",s.style.width=c+"px",s.style.height=c+"px",s.style.cursor="move",s.style.backgroundImage="url('"+this.imageDir+"scroller_handle_ver_"+l+".png')",s.style.backgroundRepeat="no-repeat",n.style.left="0px",n.style.top="0px",n.style.width=c+"px",n.style.height=p+"px",n.style.backgroundImage="url('"+this.imageDir+"next_"+l+".png')",r.style.left=c+1+"px",r.style.top=-p+"px",r.style.width=p+"px",r.style.height=c+"px",r.style.backgroundImage="url('"+this.imageDir+"close.png')"),this.drawAxesResizerMasks()}}},this.updateResizerEventData=function(t,e,i,s,a,r,h,n,o,l,d,c,p,g,u){var m,f,v,x,y,b,w,C,T,D,S,A,k,M,I;i=i?i:this.resizerEventData.axis,s=s?s:this.resizerEventData.areas.org[0],a=a?a:this.resizerEventData.areas.org[1],r=r?r:this.resizerEventData.areas.org[2],h=h?h:this.resizerEventData.areas.org[3],n=n?n:this.resizerEventData.dim,o=o?o:this.resizerEventData.pos,l=l?l:this.resizerEventData.l,d=d?d:this.resizerEventData.vals,c=c?c:this.resizerEventData.set?this.resizerEventData.set:"",p=p?p:this.resizerEventData.c,g=g?g:this.resizerEventData.i,u=u?u:this.resizerEventData.j;var L=d.graphType,N=a-s,z=h-r;m="Heatmap"==L?"y"==n?this.isGroupedData?this.data.w.smps.length:this.data.y?this.data.y.smps.length:0:this.data.y?this.data.y.vars.length:0:this.isGroupedData?this.data.w.smps.length-1:this.data.y?this.data.y.smps.length-1:0;var F="samples"==this.resizerType||"Heatmap"==L?0:d[i+"AbsMin"],P="samples"==this.resizerType||"Heatmap"==L?m:d[i+"AbsMax"],B="h"==o?N:z,X=B/(P-F);(null==t||isNaN(t))&&("samples"==this.resizerType?t=this.isGroupedData?this.grpIndices[0]:this.smpIndices[0]:(t="Heatmap"==L?"y"==n?Math.max(0,d.smpIndicesStart):Math.max(0,d.varIndicesStart):L.match(/Scatter/)?d["setMin"+n.toUpperCase()]:"BarLine"==L&&l.match(/b|r/)?d.setMin2:d.setMin,(null==t||isNaN(t))&&(t=F))),t=Math.max(t,F),(null==e||isNaN(e))&&("samples"==this.resizerType?e=this.isGroupedData?this.grpIndices[this.grpIndices.length-1]:this.smpIndices[this.smpIndices.length-1]:("Heatmap"==L?(e="x"==n?d.varIndices.length:this.isGroupedData?d.grpIndices.length:d.smpIndices.length,e+=t):e=L.match(/Scatter/)?d["setMax"+n.toUpperCase()]:"BarLine"==L&&l.match(/b|r/)?d.setMax2:d.setMax,(null==e||isNaN(e))&&(e=P))),e=Math.min(e,P);var R=(t-F)*X,V=(e-F)*X,E=14,O=9,G=parseInt(O/2);"h"==o?(f=parseInt(R),v=O,x=0,y=E,D=parseInt(R+G+1),S=parseInt(V-(R+1)),A=0,k=E,b=parseInt(V-1),w=O,C=0,T=E,M=a+(O-1),I=h):(f=0,v=E,x=parseInt("samples"==this.resizerType||"Heatmap"==L?V:z-(R+1)),y=O,D=0,S=E,A=parseInt("samples"==this.resizerType||"Heatmap"==L?R+G:z-V+G),k=parseInt(V-R),b=0,w=E,C=parseInt("samples"==this.resizerType||"Heatmap"==L?R+1:z-V),T=O,M=a,I=h+(O-1)),this.resizerEventData={g:L,axis:i,dim:n,pos:o,l:l,vals:d,min:F,max:P,smin:t,smax:e,len:B,unit:X,width:E,set:c,c:p,i:g,j:u,areas:{org:[s,a,r,h],lim:[s,M,r,I],min:[f,v,x,y],max:[b,w,C,T],cur:[D,S,A,k]}}},this.updateAxesResizer=function(t){if(this.axesResizingOn){t||(t=window.event);var e=this.resizerEventData.areas,i=this.adjustedCoordinates(t);if(i){var s,a,r,h,n,o,l=this.xMouseDown-i.x,d=this.yMouseDown-i.y,c=null,p=null,g=8,u=parseInt(g/2);if("Heatmap"==this.resizerEventData.g?("y"==this.resizerEventData.dim?(s=this.isGroupedData?this.data.w.smps.length:this.data.y?this.data.y.smps.length:0,r=null!=this.resizerEventData.lastMax?this.resizerEventData.lastMax:null!=this.resizerEventData.smax?this.resizerEventData.smax:this.isGroupedData?this.data.w.smps.length:this.data.y.smps.length):(s=this.data.y?this.data.y.vars.length:0,r=null!=this.resizerEventData.lastMax?this.resizerEventData.lastMax:null!=this.resizerEventData.smax?this.resizerEventData.smax:this.data.y.vars.length),a=null!=this.resizerEventData.lastMin?this.resizerEventData.lastMin:null!=this.resizerEventData.smin?this.resizerEventData.smin:0,h="h"==this.resizerEventData.pos?(e.org[1]-e.org[0])/s:(e.org[3]-e.org[2])/s):(s=this.isGroupedData?this.data.w.smps.length-1:this.data.y?this.data.y.smps.length-1:0,a=null!=this.resizerEventData.lastMin?this.resizerEventData.lastMin:null!=this.resizerEventData.smin?this.resizerEventData.smin:0,r=null!=this.resizerEventData.lastMax?this.resizerEventData.lastMax:null!=this.resizerEventData.smax?this.resizerEventData.smax:this.isGroupedData?this.data.w.smps.length-1:this.data.y.smps.length-1,h="h"==this.resizerEventData.pos?(e.org[1]-e.org[0])/s:(e.org[3]-e.org[2])/s),"min"==this.resizerEventData.active)n=l>e.min[0]?this.xMouseDown-e.min[0]:l<e.min[0]+e.min[1]-e.max[0]?this.xMouseDown-(e.min[0]+e.min[1]-e.max[0]):i.x,o=d>e.min[2]-(e.max[2]+e.max[3])?this.yMouseDown-(e.min[2]-(e.max[2]+e.max[3])):d<e.lim[2]+e.min[2]+e.min[3]-e.lim[3]?e.lim[3]-(e.lim[2]+e.min[2]+e.min[3])+this.yMouseDown:i.y;else if("max"==this.resizerEventData.active)n=l>e.max[0]-(e.min[0]+e.min[1])?this.xMouseDown-(e.max[0]-(e.min[0]+e.min[1])):l<e.lim[0]+e.max[0]+e.max[1]-e.lim[1]?e.lim[1]-(e.lim[0]+e.max[0]+e.max[1])+this.xMouseDown:i.x,o=d>e.max[2]?this.yMouseDown-e.max[2]:d<e.lim[2]+e.max[2]+e.max[3]-(e.lim[2]+e.min[2])?e.lim[2]+e.min[2]-(e.lim[2]+e.max[2]+e.max[3])+this.yMouseDown:i.y;else{if("cur"!=this.resizerEventData.active)return;n=l>e.min[0]?this.xMouseDown-e.min[0]:l<e.lim[0]+e.max[0]+e.max[1]-e.lim[1]?e.lim[1]-(e.lim[0]+e.max[0]+e.max[1])+this.xMouseDown:i.x,o=d>e.max[2]?this.yMouseDown-e.max[2]:d<e.lim[2]+e.min[2]+e.min[3]-e.lim[3]?e.lim[3]-(e.lim[2]+e.min[2]+e.min[3])+this.yMouseDown:i.y}var m=n-this.xMouseDown,f=o-this.yMouseDown;("samples"==this.resizerType||"Heatmap"==this.resizerEventData.g)&&(m-=m%h,f-=f%h);var v=m/this.resizerEventData.unit,x=f/this.resizerEventData.unit,y=document.getElementById(this.target+"canvasXpressAxesResizeMin"),b=document.getElementById(this.target+"canvasXpressAxesResizeMax"),w=document.getElementById(this.target+"canvasXpressAxesResizeMiddle"),C=document.getElementById(this.target+"canvasXpressAxesResizeCurrent");y&&b&&w&&C&&("min"==this.resizerEventData.active?("h"==this.resizerEventData.pos?(y.style.left=e.min[0]+m+"px",w.style.left=e.min[0]+m+(e.cur[1]-m)/2+"px",C.style.left=e.min[0]+m+u+1+"px",C.style.width=e.cur[1]-m+"px",a=parseInt((e.min[0]+g+m)/h),c="samples"==this.resizerType?dateFormat(this.data.y.smps[a],this.timeFormat):"Heatmap"==this.resizerEventData.g?"x"==this.resizerEventData.dim?this.data.y.vars[this.resizerEventData.vals.varIndices[a]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[a]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[a]]:this.formatNumber(this.resizerEventData.smin+v)):(y.style.top=e.min[2]+f+"px",w.style.top=e.min[2]+f-(e.cur[3]+f)/2+"px",C.style.height=e.cur[3]+f+"px",r=parseInt((e.min[2]+g+f)/h),c="samples"==this.resizerType?dateFormat(this.data.y.smps[r],this.timeFormat):"Heatmap"==this.resizerEventData.g?"x"==this.resizerEventData.dim?this.data.y.vars[this.resizerEventData.vals.varIndices[r]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[r]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[r]]:this.formatNumber(this.resizerEventData.smin-x)),this.showInfoSpan(t,c)):"max"==this.resizerEventData.active?("h"==this.resizerEventData.pos?(b.style.left=e.max[0]+m+"px",w.style.left=e.min[0]+m+(e.cur[1]-m)/2+"px",C.style.width=e.cur[1]+m+"px",r=parseInt((e.max[0]+g+m)/h),p="samples"==this.resizerType?dateFormat(this.data.y.smps[r],this.timeFormat):"Heatmap"==this.resizerEventData.g?"x"==this.resizerEventData.dim?this.data.y.vars[this.resizerEventData.vals.varIndices[r]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[r]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[r]]:this.formatNumber(this.resizerEventData.smax+v)):(b.style.top=e.max[2]+f+"px",w.style.top=e.max[2]+f+(e.cur[3]-f)/2+"px",C.style.top=e.max[2]+f+u+"px",C.style.height=e.cur[3]-f+"px",a=parseInt((e.max[2]+g+f)/h),p="samples"==this.resizerType?dateFormat(this.data.y.smps[a],this.timeFormat):"Heatmap"==this.resizerEventData.g?"x"==this.resizerEventData.dim?this.data.y.vars[this.resizerEventData.vals.varIndices[a]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[a]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[a]]:this.formatNumber(this.resizerEventData.smax-x)),this.showInfoSpan(t,p)):"cur"==this.resizerEventData.active&&("h"==this.resizerEventData.pos?(y.style.left=e.min[0]+m+"px",w.style.left=e.min[0]+m+e.cur[1]/2+"px",b.style.left=e.max[0]+m+"px",C.style.left=e.min[0]+m+u+1+"px",a=parseInt((e.min[0]+g+m)/h),r=parseInt((e.max[0]+g+m)/h),"samples"==this.resizerType?(c=dateFormat(this.data.y.smps[a],this.timeFormat),p=dateFormat(this.data.y.smps[r],this.timeFormat)):"Heatmap"==this.resizerEventData.g?(c="x"==this.resizerEventData.dim?this.data.y.vars[this.resizerEventData.vals.varIndices[a]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[a]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[a]],p="x"==this.resizerEventData.dim?this.data.y.vars[this.resizerEventData.vals.varIndices[r]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[r]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[r]]):(c=this.formatNumber(this.resizerEventData.smin+v),p=this.formatNumber(this.resizerEventData.smax+v)),this.showInfoSpan(t,c+"--"+p)):(y.style.top=e.min[2]+f+"px",w.style.top=e.max[2]+f+e.cur[3]/2+"px",b.style.top=e.max[2]+f+"px",C.style.top=e.max[2]+f+u+"px",r=parseInt((e.min[2]+g+f)/h),a=parseInt((e.max[2]+g+f)/h),"samples"==this.resizerType?(c=dateFormat(this.data.y.smps[r],this.timeFormat),p=dateFormat(this.data.y.smps[a],this.timeFormat),this.showInfoSpan(t,p+"--"+c)):"Heatmap"==this.resizerEventData.g?(c="x"==this.resizerEventData.dim?this.data.y.vars[this.resizerEventData.vals.varIndices[r]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[r]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[r]],p="x"==this.resizerEventData.dim?this.data.y.vars[this.resizerEventData.vals.varIndices[a]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[a]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[a]],this.showInfoSpan(t,p+"--"+c)):(c=this.formatNumber(this.resizerEventData.smin-x),p=this.formatNumber(this.resizerEventData.smax-x),this.showInfoSpan(t,c+"--"+p)))),this.resizerEventData.lastMin="samples"==this.resizerType||"Heatmap"==this.resizerEventData.g?a:c,this.resizerEventData.lastMax="samples"==this.resizerType||"Heatmap"==this.resizerEventData.g?r:p,this.resizerDraw&&this.drawAxesResizerUpdate())}}},this.drawAxesResizerUpdate=function(t){var e=parseFloat(null!=this.resizerEventData.lastMin?this.resizerEventData.lastMin:this.resizerEventData.smin),i=parseFloat(null!=this.resizerEventData.lastMax?this.resizerEventData.lastMax:this.resizerEventData.smax),s=this.resizerEventData.c||0;if("samples"==this.resizerType){for(var a=this.isGroupedData?this.data.w.smps.length-1:this.data.y.smps.length-1,r=[],h=[],n=0;e>n;n++)h.push(!0);for(var n=e;i>=n;n++)r.push(n),h.push(!1);for(var n=i+1;a>n;n++)h.push(!0);this.isGroupedData?(this.grpIndices=r,this.hiddenGrps=h):(this.smpIndices=r,this.hiddenSmps=h)}else if("Heatmap"==this.resizerEventData.g){this.startingVarIndices&&this.startingSmpIndices||this.setOriginalIndices(s);var o=this.startingVarIndices[s],l=this.startingSmpIndices[s];if("y"==this.resizerEventData.dim)if(this.isGroupedData)if(this.layoutComb){this.layoutParams[s].grpIndices=[];for(var n=e;i>n;n++)this.layoutParams[s].grpIndices.push(l[n]);this.layoutParams[s].smpIndicesStart=e}else{this.grpIndices=[];for(var n=e;i>n;n++)this.grpIndices.push(l[n]);this.smpIndicesStart=e}else if(this.layoutComb){this.layoutParams[s].smpIndices=[];for(var n=e;i>n;n++)this.layoutParams[s].smpIndices.push(l[n]);this.layoutParams[s].smpIndicesStart=e}else{this.smpIndices=[];for(var n=e;i>n;n++)this.smpIndices.push(l[n]);this.smpIndicesStart=e}else if(this.layoutComb){this.layoutParams[s].varIndices=[];for(var n=e;i>n;n++)this.layoutParams[s].varIndices.push(o[n]);this.layoutParams[s].varIndicesStart=e}else{this.varIndices=[];for(var n=e;i>n;n++)this.varIndices.push(o[n]);this.varIndicesStart=e}}else this.resizerEventData.lastMin&&(this["setMin"+this.resizerEventData.set]=e),this.resizerEventData.lastMax&&(this["setMax"+this.resizerEventData.set]=i);t&&this.updateResizerEventData(e,i),this.draw()},this.drawAxesResizerBackgroundData=function(t,e,i,s){if(this.resizerType&&this.resizerDataIndex>-1){this.setAllSamplesVisible();for(var a,r,h,n,o="Candlestick"==this.graphType?"close":!1,l=[],d=[],c=[],p=0;p<this.smpIndices.length;p++)l.push(this.getDataAtPos(this.resizerDataIndex,p,o));var g=this.range(l);if(this.resizerPosition.match(/top|bottom/)){a=i/(this.smpIndices.length-1),r=s/(1.2*(g[1]-g[0])),h=.1*(g[1]-g[0])*r,n=e+s,d.push(t),c.push(n);for(var p=0;p<l.length;p++)d.push(t),c.push(n-((l[p]-g[0])*r+h)),t+=a;t-=a,d.push(t),c.push(n)}else{a=s/(this.smpIndices.length-1),r=i/(1.2*(g[1]-g[0])),h=.1*(g[1]-g[0])*r,d.push(t),c.push(e);for(var p=0;p<l.length;p++)d.push(t+(l[p]-g[0])*r+h),c.push(e),e+=a;e-=a,d.push(t),c.push(e)}this.drawShape("polygon",d,c,!1,!1,this.resizerBackgroundColorCurrent,this.resizerBackgroundColorOutlineCurrent,"closed")}},this.drawAxesResizerMasks=function(){if(this.resizerType){var t,e,i,s,a=this.resizerEventData.areas,r=this.isGroupedData?this.data.w.grps.length-1:this.data.y.smps.length-1,h="h"==this.resizerEventData.pos?(a.org[1]-a.org[0])/r:(a.org[3]-a.org[2])/r;"h"==this.resizerEventData.pos?(this.resizerEventData.smin>0&&(t=a.org[0]-1,e=a.org[2]-this.resizerWidth,i=h*this.resizerEventData.smin,s=this.resizerWidth,this.rectangle(t,e,i,s,this.resizerBackgroundColor,this.resizerBackgroundColor),this.drawLine("line",t,e,t+i+1,e,this.foreground),this.drawLine("line",t+i,e,t+i,e+s,this.foreground)),this.resizerEventData.smax<r&&(t=a.org[0]+a.max[0]+1,e=a.org[2]-this.resizerWidth,i=h*(r-this.resizerEventData.smax)+1,s=this.resizerWidth,this.rectangle(t,e,i,s,this.resizerBackgroundColor,this.resizerBackgroundColor),this.drawLine("line",t-1,e,t+i+2,e,this.foreground),this.drawLine("line",t-1,e,t-1,e+s,this.foreground)),t=a.org[0]+a.max[0],e=a.org[2]-1,i=a.org[0]+h*this.resizerEventData.smin,this.drawLine("line",t,e,i,e,this.foreground)):(this.resizerEventData.smin>0&&(t=a.org[0]+14,e=a.org[2],i=this.resizerWidth,s=h*this.resizerEventData.smin,this.rectangle(t,e,i,s,this.resizerBackgroundColor,this.resizerBackgroundColor),this.drawLine("line",t,e+s,t+i,e+s,this.foreground),this.drawLine("line",t+i,e,t+i,e+s,this.foreground)),this.resizerEventData.smax<r&&(t=a.org[0]+14,e=a.org[2]+a.min[2],i=this.resizerWidth,s=(r-this.resizerEventData.smax)*h,this.rectangle(t,e,i,s,this.resizerBackgroundColor,this.resizerBackgroundColor),this.drawLine("line",t,e,t+i,e,this.foreground),this.drawLine("line",t+i,e,t+i,e+s,this.foreground)),t=a.org[0]+14,e=a.org[2]+a.min[2],s=a.org[2]+h*this.resizerEventData.smin,this.drawLine("line",t,e,t,s,this.foreground))}},this.registerAxesResizer=function(t){t||(t=window.event);var e=this.adjustedCoordinates(t);if(e){var i=e.x,s=e.y,a=this.resizerEventData.areas,r=a.lim[1]-a.lim[0],h=a.lim[3]-a.lim[2],n=5,o=r>h?"h":"v";i>=a.min[0]+a.lim[0]&&i<=a.min[0]+a.min[1]+a.lim[0]&&s>=a.min[2]+a.lim[2]&&s<=a.min[2]+a.min[3]+a.lim[2]?(this.resizerEventData.active="min",this.axesResizingOn=!0):i>=a.max[0]+a.lim[0]&&i<=a.max[0]+a.max[1]+a.lim[0]&&s>=a.max[2]+a.lim[2]&&s<=a.max[2]+a.max[3]+a.lim[2]?(this.resizerEventData.active="max",this.axesResizingOn=!0):i>=a.cur[0]+a.lim[0]&&i<=a.cur[0]+a.cur[1]+a.lim[0]&&s>=a.cur[2]+a.lim[2]&&s<=a.cur[2]+a.cur[3]+a.lim[2]?(this.resizerEventData.active="cur",this.axesResizingOn=!0):"h"==o?i>=a.lim[0]&&i<a.min[0]+a.lim[0]?(this.resizerEventData.active="prev",this.axesResizingOn=!0):i>a.lim[0]+a.max[0]+a.max[1]&&i<=a.lim[1]-n&&(this.resizerEventData.active="next",this.axesResizingOn=!0):s>=a.lim[2]+a.min[2]+a.min[3]&&s<=a.lim[2]+a.lim[3]?(this.resizerEventData.active="prev",this.axesResizingOn=!0):s>=a.lim[2]&&s<=a.lim[2]+a.max[2]&&(this.resizerEventData.active="next",this.axesResizingOn=!0),this.xMouseDown=i,this.yMouseDown=s}},this.activateDeactivateAxesResizer=function(t){t||(t=window.event);var e=this.adjustedCoordinates(t);if(e){var i,s=e.x,a=e.y,r=this.resizerEventData.areas,h=r.lim[1]-r.lim[0],n=r.lim[3]-r.lim[2],o=5,l=h>n?"h":"v";"h"==l?s>=r.lim[0]&&s<=r.lim[0]+r.min[0]?i="prev":s>=r.lim[0]+r.max[0]+r.max[1]&&s<=r.lim[1]-o&&(i="next"):a>=r.lim[2]+r.min[2]+r.min[3]&&a<=r.lim[2]+r.lim[3]?i="prev":a>=r.lim[2]&&a<=r.lim[2]+r.max[2]&&(i="next");var d=document.getElementById(this.target+"canvasXpressAxesResizePrevious"),c=document.getElementById(this.target+"canvasXpressAxesResizeNext");if(d&&c)if("prev"==i){var p=d.style.backgroundImage;t.type.match(/mouseout|touchcancel/i)?p.match(/_active.png/)&&(d.style.backgroundImage=p.replace("_active.png",".png")):p.match(/_active.png/)||(d.style.backgroundImage=p.replace(".png","_active.png"))}else if("next"==i){var p=c.style.backgroundImage;t.type.match(/mouseout|touchcancel/i)?p.match(/_active.png/)&&(c.style.backgroundImage=p.replace("_active.png",".png")):p.match(/_active.png/)||(c.style.backgroundImage=p.replace(".png","_active.png"))}else{var p=d.style.backgroundImage;p.match(/_active.png/)&&(d.style.backgroundImage=p.replace("_active.png",".png")),p=c.style.backgroundImage,p.match(/_active.png/)&&(c.style.backgroundImage=p.replace("_active.png",".png"))}return!1}},this.moveAxesResizer=function(){var t=this.resizerEventData.smin,e=this.resizerEventData.smax,i="samples"==this.resizerType||"Heatmap"==this.resizerEventData.g?1:(e-t)/10;"samples"!=this.resizerType&&"Heatmap"!=this.resizerEventData.g||"v"!=this.resizerEventData.pos?"prev"==this.resizerEventData.active?t-i<this.resizerEventData.min?(i=t-this.resizerEventData.min,this.resizerEventData.lastMin=this.resizerEventData.min,this.resizerEventData.lastMax=e-i):(this.resizerEventData.lastMin=t-i,this.resizerEventData.lastMax=e-i):e+i>this.resizerEventData.max?(i=this.resizerEventData.max-e,this.resizerEventData.lastMin=t+i,this.resizerEventData.lastMax=this.resizerEventData.max):(this.resizerEventData.lastMin=t+i,this.resizerEventData.lastMax=e+i):"prev"==this.resizerEventData.active?t+i<this.resizerEventData.min?(i=t-this.resizerEventData.min,this.resizerEventData.lastMin=this.resizerEventData.min,this.resizerEventData.lastMax=e+i):(this.resizerEventData.lastMin=t+i,this.resizerEventData.lastMax=e+i):e-i>this.resizerEventData.max?(i=this.resizerEventData.max-e,this.resizerEventData.lastMin=t-i,this.resizerEventData.lastMax=this.resizerEventData.max):(this.resizerEventData.lastMin=t-i,this.resizerEventData.lastMax=e-i);var s=this.resizerEventData.areas,a=document.getElementById(this.target+"canvasXpressAxesResizeMin"),r=document.getElementById(this.target+"canvasXpressAxesResizeMax"),h=document.getElementById(this.target+"canvasXpressAxesResizeMiddle"),n=document.getElementById(this.target+"canvasXpressAxesResizeCurrent"),o=8,l=parseInt(o/2),d=i*this.resizerEventData.unit;("h"==this.resizerEventData.pos&&"prev"==this.resizerEventData.active||"v"==this.resizerEventData.pos&&"next"==this.resizerEventData.active)&&(d*=-1),"h"==this.resizerEventData.pos?(a.style.left=s.min[0]+d+1+"px",h.style.left=s.min[0]+d+s.cur[1]/2+"px",r.style.left=s.max[0]+d+"px",n.style.left=s.min[0]+d+l+1+"px"):(a.style.top=s.min[2]+d+1+"px",h.style.top=s.max[2]+d+s.cur[3]/2+"px",r.style.top=s.max[2]+d+"px",n.style.top=s.max[2]+d+l+1+"px")},this.getAxesVals=function(t){var e=["minData","maxData","xAxisMin","xAxisMax","xAxis2Min","xAxis2Max","yAxisMin","yAxisMax","zAxisMin","zAxisMax","xAxisUnit","xAxis2Unit","yAxisUnit","zAxisUnit","setMin","setMax","setMin2","setMax2","setMinX","setMaxX","setMinY","setMaxY","setMinZ","setMaxZ","xAxisAbsMin","xAxisAbsMax","xAxis2AbsMin","xAxis2AbsMax","yAxisAbsMin","yAxisAbsMax","zAxisAbsMin","zAxisAbsMax","graphType","x","y","varIndices","smpIndices","grpIndices","varIndicesStart","smpIndicesStart"],i={};if(this.layoutComb)for(var s=0;s<e.length;s++)i[e[s]]=this.layoutParams[t][e[s]];else for(var s=0;s<e.length;s++)i[e[s]]=this[e[s]];return i},this.isAxis=function(t){if(t||(t=window.event),this.resizerType&&this.layoutValid)return!1;var e=this.adjustedCoordinates(t);if(e)for(var i=e.x,s=e.y,a=0,r=1*this.margin,h=2*this.margin,n=18,o=0;o<this.layoutRows;o++)for(var l=0;l<this.layoutCols;l++){var d=this.layoutComb?this.layoutParams[a].graphType:this.graphType;if(d.match(/Network|Pie|Venn|Stacked|Area|Correlation|Circular/))return!1;var c=this.getBoundsXY(a);if(d.match(/Scatter/)){if(i>=c[0]&&i<=c[1]&&s>=c[3]&&s<=c[3]+n){var p=this.getAxesVals(a);return this.showAxesResizer("xAxis",c[0],c[1],c[3]+r,c[3]+this.getAxisFont(p.x)+h,"x","h","b",p,"X",a,o,l),!0}if(i>=c[0]-n&&i<=c[0]&&s>=c[2]&&s<=c[3]){var p=this.getAxesVals(a);return this.showAxesResizer("yAxis",c[0]-(this.getAxisFont(p.y)+h),c[0]-r,c[2],c[3],"y","v","l",p,"Y",a,o,l),!0}}else if(d.match(/Heatmap/)){if(i>=c[0]-n&&i<=c[0]&&s>=c[2]&&s<=c[3]){var p=this.getAxesVals(a);return this.showAxesResizer("xAxis",c[0]-(this.getAxisFont(p.y)+h),c[0]-r,c[2],c[3],"y","v","l",p,"",a,o,l),!0}if(i>=c[1]&&i<=c[1]+n&&s>=c[2]&&s<=c[3]){var p=this.getAxesVals(a);return this.showAxesResizer("xAxis",c[1]+r,c[1]+this.getAxisFont(p.y)+h,c[2],c[3],"y","v","r",p,"",a,o,l),!0}if(i>=c[0]&&i<=c[1]&&s>=c[2]-n&&s<=c[2]){var p=this.getAxesVals(a);return this.showAxesResizer("xAxis",c[0],c[1],c[2]-(this.getAxisFont(p.x)+h),c[2]-r,"x","h","t",p,"",a,o,l),!0}if(i>=c[0]&&i<=c[1]&&s>=c[3]&&s<=c[3]+n){var p=this.getAxesVals(a);return this.showAxesResizer("xAxis",c[0],c[1],c[3]+r,c[3]+this.getAxisFont(p.x)+h,"x","h","b",p,"",a,o,l),!0}}else if("vertical"==this.graphOrientation){if(i>=c[0]-n&&i<=c[0]&&s>=c[2]&&s<=c[3]){var p=this.getAxesVals(a);return this.showAxesResizer("xAxis",c[0]-(this.getAxisFont(p.y)+h),c[0]-r,c[2],c[3],"y","v","l",p,"",a,o,l),!0}if(i>=c[1]&&i<=c[1]+n&&s>=c[2]&&s<=c[3]){var p=this.getAxesVals(a);return"BarLine"==d?this.showAxesResizer("xAxis2",c[1]+r,c[1]+this.getAxisFont(p.y)+h,c[2],c[3],"y","v","r",p,"2",a,o,l):this.showAxesResizer("xAxis",c[1]+r,c[1]+this.getAxisFont(p.y)+h,c[2],c[3],"y","v","r",p,"",a,o,l),!0}}else{if(i>=c[0]&&i<=c[1]&&s>=c[2]-n&&s<=c[2]){var p=this.getAxesVals(a);return this.showAxesResizer("xAxis",c[0],c[1],c[2]-(this.getAxisFont(p.x)+h),c[2]-r,"x","h","t",p,"",a,o,l),!0}if(i>=c[0]&&i<=c[1]&&s>=c[3]&&s<=c[3]+n){var p=this.getAxesVals(a);return"BarLine"==d?this.showAxesResizer("xAxis2",c[0],c[1],c[3]+r,c[3]+this.getAxisFont(p.x)+h,"x","h","b",p,"2",a,o,l):this.showAxesResizer("xAxis",c[0],c[1],c[3]+r,c[3]+this.getAxisFont(p.x)+h,"x","h","b",p,"",a,o,l),!0}}a++}return!1},this.endAxesResizer=function(t){
this.axesResizingOn?(this.resetInfoSpan(t),("prev"==this.resizerEventData.active||"next"==this.resizerEventData.active)&&this.moveAxesResizer(t),this.drawAxesResizerUpdate(!0),this.axesResizingOn=!1):this.resizerType&&(this.updateResizerEventData(),this.refreshAxesResizer())},this.resetAxesResizer=function(t){if(this.axesResizerShow){var e=document.getElementById(this.target+"canvasXpressAxesResize");e&&(this.addRemoveAxesResizerListeners("removeEvtListener"),e.style.display="none",this.resizerEventData={},this.resetInfoSpan(t),this.axesResizerShow=!1)}},this.initializeAxisResizerEvents=function(){this.disableEvents||this.addAxesResizeDiv()},this.initializeAxisResizerEvents()},CanvasXpress.prototype.initDraggingEvents=function(){this.addDragDiv=function(){if(!this.$(this.target+"-cX-Drag")){var t=this.$cX("div",{id:this.target+"-cX-Drag",className:"CanvasXpressDrag"},{width:"0.5px",height:"0.5px",zIndex:9e3});this.canvas.parentNode.appendChild(t)}},this.registerDragNetwork=function(t){var e,i,s,a=this.isEvent(t,!0),r=this.getTargetEvent(t),h=a[1];if(h&&h.match(/-legend-/))this.moveLegend=h.match(/-legend-Nodes/)?"Nodes":h.match(/-legend-Edges/)?"Edges":h.match(/-legend-Decorations/)?"Decorations":h.split(/-legend-/)[1];else if(h&&h.match(/-lab$/)?(t.shiftKey&&(i=!0),e=a[0][0]):h&&h.match(/-dec$/)?t.shiftKey?(e=a[0][0],s=!0):(this.resetDrag(t),this.resetFlags(t)):e=a?a[0][0]:"NaN",!isNaN(e)&&e<this.data.nodes.length){r.style.cursor="move",this.moveNode=!0,this.moveNodeIndex=e,i?this.moveNodeLab=!0:s&&(this.moveNodeDec=!0);var n=this.data.nodes[this.moveNodeIndex];this.moveNodeW=n.width?n.width:n.size?this.nodeSize*n.size:this.nodeSize,this.moveNodeH=n.height?n.height:n.size?this.nodeSize*n.size:this.nodeSize,this.moveNodeLab?(this.moveNodeX=null!=n.labelX?n.labelX-(this.xMouseDown/this.scaleFactor-this.offsetX):0,this.moveNodeY=null!=n.labelY?n.labelY-(this.yMouseDown/this.scaleFactor-this.offsetY):0):this.moveNodeDec?(this.moveNodeX=n.decorationsX?n.decorationsX-(this.xMouseDown/this.scaleFactor-this.offsetX):0,this.moveNodeY=n.decorationsY?n.decorationsY-(this.yMouseDown/this.scaleFactor-this.offsetY):0):this.is3DNetwork?(this.moveNodeX=n.x3d-(this.xMouseDown/this.scaleFactor-this.offsetX),this.moveNodeY=n.y3d-(this.yMouseDown/this.scaleFactor-this.offsetY)):(this.moveNodeX=n.x-(this.xMouseDown/this.scaleFactor-this.offsetX),this.moveNodeY=n.y-(this.yMouseDown/this.scaleFactor-this.offsetY))}if(this.networkStack.length<1||this.networkStack.length-1!=this.networkStackIndex){var o=this.cloneObject(this.networkStack),l=this.networkStackIndex;this.clearNetworkStack();for(var d=0;l>d;d++)this.networkStack.push(this.cloneObject(o[d]));this.addToNetworkStack(),o=!1}},this.registerDragGenome=function(t){var e=this.isEvent(t,!0);this.moveGenome=e&&isNaN(e[0][0])?e[0][0]:!1},this.registerDrag=function(t){if(t||(t=window.event),this.isCanvasResize(t))this.resizingCanvasOn=!0,this.hideViewport();else{if(!t)return!1;this.touches||(this.touches=[]);var e=this.getTargetEvent(t),i=this.adjustedCoordinates(t);if(i){CanvasXpress.current=e.id;for(var s=i.x,a=i.y,r=0,h=0;h<this.layoutRows;h++)for(var n=0;n<this.layoutCols;n++){var o=this.layoutComb?this.layoutParams[r].graphType:this.graphType,l=this.getBoundsXY(r);if(o.match(/Correlation|Pie|Venn|Stacked|Area/)){if(!this.mobileApp)return!1;if(s>=l[0]&&s<=l[1]&&a>=l[2]&&a<=l[3]||this.moveGenome)return this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=s,this.yMouseDown=a,this.touches.push([s,a,(new Date).getTime()]),!1}else"Genome"==o&&this.registerDragGenome(t);if(s>=l[0]&&s<=l[1]&&a>=l[2]&&a<=l[3]||this.moveGenome){this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=s,this.yMouseDown=a,this.touches.push([s,a,(new Date).getTime()]);var d=this.$(this.target+"-cX-Drag");return"Network"==o&&this.registerDragNetwork(t),d.style.left=!o.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"==this.graphOrientation&&!t.shiftKey||!o.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"!=this.graphOrientation&&t.shiftKey?l[0]+"px":this.xMouseDown+"px",d.style.top=!o.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"!=this.graphOrientation&&!t.shiftKey||!o.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"==this.graphOrientation&&t.shiftKey||"Genome"==o?l[2]+"px":this.yMouseDown+"px",this.layoutValid&&(this.layoutValidR=h,this.layoutValidC=n,this.layoutValidN=r),!1}if(s>=l[4]&&s<=l[5]&&a>=l[6]&&a<=l[7]){var c=this.isEvent(t);if(c){this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=s,this.yMouseDown=a,this.touches.push([s,a,(new Date).getTime()]);var d=this.$(this.target+"-cX-Drag");return c[0].match("Smp")?(this.moveSmp=c[0],o.match(/Heatmap/)||"horizontal"==this.graphOrientation?(d.style.left=l[4]+"px",d.style.width=l[5]-l[4]+"px",d.style.height="3px"):(d.style.width="3px",d.style.top=l[6]+"px",d.style.height=l[7]-l[6]+"px")):c[0].match("Var")&&(this.moveVar=c[0],d.style.width="3px",d.style.top=l[6]+"px",d.style.height=l[7]-l[6]+"px"),!1}}r++}return!1}}},this.updateDragScatter3D=function(t,e,i,s,a){if(!(this.mobileApp&&this.touches&&this.touches.length>1)){var r=this,h=this.mobileApp?100:1,n=function(){clearTimeout(n);var i=r.xMouseDown,s=r.yMouseDown,h=t,o=e,l=r.lineLength(i,s,h,o),d=r.layoutComb?r.layoutParams[a].x:r.x,c=r.layoutComb?r.layoutParams[a].y:r.y,p=(h-i)*r.rotationSensitivity/d,g=(o-s)*r.rotationSensitivity/c,u=l*r.rotationSensitivity/d;r.xRotate-=p,r.yRotate+=g,r.zRotate-=u,r.draw(),r.skipClick=!0};setTimeout(n,h)}},this.updateDragNetwork=function(t,e,i){if(!(this.mobileApp&&this.touches&&this.touches.length>1)){this.movingOn=!0;var s,a,r,h,n,o,l=e,d=i,c=this.getTargetEvent(t),p={};if(this.moveNode||this.moveLegend){if(this.moveLegend)"Nodes"==this.moveLegend?(a=this.data.legend.pos.nodes.x-(l/this.scaleFactor-this.offsetX),r=this.data.legend.pos.nodes.y-(d/this.scaleFactor-this.offsetY),this.data.legend.pos.nodes.x-=a,this.data.legend.pos.nodes.y-=r):"Edges"==this.moveLegend?(a=this.data.legend.pos.edges.x-(l/this.scaleFactor-this.offsetX),r=this.data.legend.pos.edges.y-(d/this.scaleFactor-this.offsetY),this.data.legend.pos.edges.x-=a,this.data.legend.pos.edges.y-=r):"Decorations"==this.moveLegend?(a=this.data.legend.pos.decorations.x-(l/this.scaleFactor-this.offsetX),r=this.data.legend.pos.decorations.y-(d/this.scaleFactor-this.offsetY),this.data.legend.pos.decorations.x-=a,this.data.legend.pos.decorations.y-=r):(h=parseInt(this.moveLegend.replace("Text","")),a=this.data.legend.text[h].x-(l/this.scaleFactor-this.offsetX),r=this.data.legend.text[h].y-(d/this.scaleFactor-this.offsetY),this.data.legend.text[h].x-=a,this.data.legend.text[h].y-=r);else if(this.data.nodes[this.moveNodeIndex])if(s=this.data.nodes[this.moveNodeIndex],this.is3DNetwork?(a=s.x3d-(l/this.scaleFactor-this.offsetX)-this.moveNodeX,r=s.y3d-(d/this.scaleFactor-this.offsetY)-this.moveNodeY):(a=s.x-(l/this.scaleFactor-this.offsetX)-this.moveNodeX,r=s.y-(d/this.scaleFactor-this.offsetY)-this.moveNodeY),this.moveNodeLab)a=null!=s.labelX?s.labelX-(l/this.scaleFactor-this.offsetX)-this.moveNodeX:a,r=null!=s.labelY?s.labelY-(d/this.scaleFactor-this.offsetY)-this.moveNodeY:r,this.modifyXYNodeLab(s.id,a,r);else if(this.moveNodeDec)a=s.decorationsX?s.decorationsX-(l/this.scaleFactor-this.offsetX)-this.moveNodeX:a,r=s.decorationsY?s.decorationsY-(d/this.scaleFactor-this.offsetY)-this.moveNodeY:r,this.modifyXYNodeDec(s.id,a,r);else if(t.shiftKey&&!t.ctrlKey){var g=this.moveNodeW-a+(e-this.xMouseDown)/this.scaleFactor,u=this.moveNodeH-r+(i-this.yMouseDown)/this.scaleFactor;this.modifyNodeSize(s.id,Math.abs(g),Math.abs(u));for(var h in this.selectNode)h!=s.id&&this.modifyNodeSize(h,g,u)}else if(o=this.findParentNodes(s.id),"radial"!=this.networkLayoutType&&(this.moveParentsWithChildren&&!t.shiftKey&&!t.ctrlKey||!this.moveParentsWithChildren&&t.shiftKey&&t.ctrlKey)&&o&&(s=this.data.nodes[this.data.nodeIndices[o[0]]]),this.modifyXYNode(s.id,a,r),this.selectNode){if(p[s.id]=!0,o=this.findChildrenNodeIndices(s.id))for(var n=0;n<o.length;n++)p[this.data.nodes[o[n]].id]=!0;for(var h in this.selectNode)if(!p.hasOwnProperty(h)){var m=this.data.nodes[this.data.nodeIndices[h]];if(o=this.findParentNodes(m.id),"radial"!=this.networkLayoutType&&(this.moveParentsWithChildren&&!t.shiftKey&&!t.ctrlKey||!this.moveParentsWithChildren&&t.shiftKey&&t.ctrlKey)&&o&&(m=this.data.nodes[this.data.nodeIndices[o[0]]]),this.modifyXYNode(m.id,a,r),p[m.id]=!0,o=this.findChildrenNodeIndices(m.id))for(var n=0;n<o.length;n++)p[this.data.nodes[o[n]].id]=!0}}}else this.panningX=(e-this.xMouseDown)/this.scaleFactor,this.panningY=(i-this.yMouseDown)/this.scaleFactor;this.skipClick=null!=a||null!=r?!0:!1,this.draw(!1,!1,!1,!0),this.is3DNetwork&&s&&(this.moveNodeIndex=this.data.nodeIndices[s.id]);var f=this.$(c.id);f&&(f.style.cursor=t.shiftKey?"se-resize":"move")}},this.updateDragGenome=function(t,e,i){if(!(this.mobileApp&&this.touches&&this.touches.length>1))if(this.moveGenome){this.movingOn=!0;var s=this.$(this.target+"-cX-Drag");s.style.left="0px",s.style.width=this.width+"px",s.style.top=i+"px",s.style.height="3px"}else{var s=(e-this.xMouseDown)/this.xAxisUnit;null==this.setMin&&(this.setMin=this.xAxisMin),null==this.setMax&&(this.setMax=this.xAxisMax),this.setMin-=s,this.setMax-=s,this.draw(),this.xMouseDown=e}},this.updateDrag=function(t){if(this.draggingOn){t||(t=window.event);var e=this.adjustedCoordinates(t);if(this.resetOn)return this.resetOn=!1,void this.stopEvent(t);if(e){this.touchEvent="drag";var i,s=e.x,a=e.y,r=this.layoutValidR,h=this.layoutValidC,n=this.layoutValidN||0,o=this.layoutComb?this.layoutParams[n].graphType:this.graphType,l=this.layoutComb?this.layoutParams[n].varIndices:this.varIndices;if(i=this.isGroupedData?this.layoutComb?this.layoutParams[n].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[n].smpIndices:this.smpIndices,o.match(/Correlation|Pie|Venn|Stacked|Area/))return this.mobileApp&&(this.movingOn=!0,this.resetOn=!1),!1;if("Scatter3D"==o&&!t.shiftKey||this.is3DPlot)this.updateDragScatter3D(s,a,r,h,n);else if("Network"!=o||!this.moveNode&&!this.moveLegend&&(t.ctrlKey||t.shiftKey||t.altKey))if("Genome"!=o||!this.moveGenome&&t.shiftKey)if(this.moveVar||this.moveSmp){var d=this.getBoundsXY(n),c=this.$(this.target+"-cX-Drag");this.skipClick=!0,s>=d[4]&&s<=d[5]&&a>=d[6]&&a<=d[7]&&(this.moveSmp&&(o.match(/Heatmap/)||"horizontal"==this.graphOrientation)?c.style.top=a+"px":c.style.left=s+"px")}else{if(this.mobileApp&&this.touches&&this.touches.length>1)return;var p;if(p=this.varIndicesStart>0||this.smpIndicesStart>0?!0:0==this.varIndicesStart&&this.startingVarIndices&&this.startingVarIndices[n]?this.varIndicesStart+l.length<this.startingVarIndices[n].length?!0:!1:0==this.smpIndicesStart&&this.startingSmpIndices&&this.startingSmpIndices[n]&&this.smpIndicesStart+i.length<this.startingSmpIndices[n].length?!0:!1,o.match(/Heatmap|Bar|Line|Dotplot|Boxplot/)&&p){this.panningOn=!0;var g=Math.abs(this.xMouseDown-s),u=Math.abs(this.yMouseDown-a),c=!1;return g>u?g>this.x/10&&(c=this.xMouseDown>s?39:37,this.xMouseDown=s,this.yMouseDown=a):u>this.y/10&&(c=this.yMouseDown>a?40:38,this.xMouseDown=s,this.yMouseDown=a),c&&this.handlePanning(t,c),this.movingOn=!0,this.resetOn=!1,!1}var d=this.getBoundsXY(n),c=this.$(this.target+"-cX-Drag");this.skipClick=!0,!o.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"==this.graphOrientation&&!t.shiftKey||!o.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"!=this.graphOrientation&&t.shiftKey?c.style.width=d[1]-d[0]+"px":s>this.xMouseDown?c.style.width=s>d[1]?d[1]-this.xMouseDown+"px":s-this.xMouseDown+"px":s<d[0]?(c.style.left=d[0]+"px",c.style.width=this.xMouseDown-d[0]+"px"):(c.style.left=s+"px",c.style.width=this.xMouseDown-s+"px"),!o.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"!=this.graphOrientation&&!t.shiftKey||!o.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"==this.graphOrientation&&t.shiftKey||"Genome"==o?c.style.height=d[3]-d[2]+"px":a>this.yMouseDown?c.style.height=a>d[3]?d[3]-this.yMouseDown+"px":a-this.yMouseDown+"px":a<d[2]?(c.style.top=d[2]+"px",c.style.height=this.yMouseDown-d[2]+"px"):(c.style.top=a+"px",c.style.height=this.yMouseDown-a+"px")}else this.updateDragGenome(t,s,a,r,h,n);else this.updateDragNetwork(t,s,a,r,h,n)}this.movingOn=!0,this.resetOn=!1}},this.endDrag=function(t){if(this.draggingOn){var e=this.layoutComb?this.layoutParams[this.layoutValidN].graphType:this.graphType;if(e.match(/Correlation|Pie|Venn|Stacked|Area|Circular/))return!1;t||(t=window.event);var i=this.$(this.target);if(i){i.style.cursor="default";var s=this.getTargetEvent(t);s&&s.style&&(s.style.cursor="default")}if(this.panningGlobalX+=this.panningX,this.panningGlobalY+=this.panningY,this.panningX=0,this.panningY=0,"Scatter3D"==e&&!t.shiftKey||this.is3DPlot)this.resetDrag(t);else if("Network"==e&&(this.moveNode||this.moveLegend)){if(i){if(this.isSelectNodes&&this.movingOn&&(this.resetSelectedNodes(),this.draw()),this.userEvents.enddragnode&&this.movingOn){var a;if(this.moveLegend)a={legend:this.moveLegend};else{var r=this.moveNodeIndex,h=this.findChildrenNodeIndices(this.data.nodes[r].id);h?h.push(r):h=[r],a=this.extractDataObject(h)}this.resetDrag(t),this.userEvents.enddragnode.call(this,a)}else this.resetDrag(t);this.addToNetworkStack()}}else if("Genome"!=e||!this.moveGenome&&t.shiftKey)if(this.movingOn&&!this.panningOn){var n=this.adjustedCoordinates(t);if(n){var o=n.x,l=n.y;if(o!=this.xMouseDown||l!=this.yMouseDown){var d=this.$(this.target+"-cX-Drag"),c=parseInt(d.style.left),p=parseInt(d.style.top),g=c+parseInt(d.style.width),u=p+parseInt(d.style.height);this.handleDragEvent(t,c,p,g,u),this.resetDrag(t)}}}else this.resetDrag(t);else{if(this.movingOn&&this.moveGenome){var n=this.adjustedCoordinates(t);if(n){var l=n.y;if(l!=this.yMouseDown)for(var d=this.moveGenome.replace("track-","").split(":"),m=parseInt(d[0]),f=d.length>1?parseInt(d[1]):null,v=0;v<this.subtracksInfo.length;v++)if(this.subtracksInfo[v]){var x=this.subtracksInfo[v].start,y=this.subtracksInfo[v].track,b=this.subtracksInfo[v].index;if(x>l){if(m!=y&&m!=y-1){y>m&&y--;var w=this.data.tracks.splice(m,1)[0];this.data.tracks.splice(y,0,w),this.draw()}else if(null!=f&&(m==y-1&&(b=this.subtracksInfo[v-1].index,b++),f=this.subtracksInfo[f].index,f!=b)){b>f&&b--;var w=this.data.tracks[m].data.splice(f,1)[0];this.data.tracks[m].data.splice(b,0,w),this.draw()}break}}}}this.resetDrag(t)}}else this.resetDrag(t)},this.validateMinMax=function(t,e){return isNaN(t)||isNaN(e)?!1:t>e?!1:!0},this.handleDragEventNetwork=function(t,e,i,s,a){for(var r={},h=[],n=[],o=[],l=[],d={},c=0;c<this.dataEvent.length;c++){var p=this.dataEvent[c][0],g=this.dataEvent[c][1],u=this.dataEvent[c][2];this.isObjectInsideArea(g,u,e,i,s,a)&&p<this.data.nodes.length&&(r[p]=1)}for(var c=0;c<this.data.nodes.length;c++)r[c]?(n.push(this.data.nodes[c].id),o.push(c)):h.push(this.data.nodes[c].id);if(h.length<this.data.nodes.length&&(t.shiftKey?(this.setSelectNodes(n),this.isSelectNodes=n.length,this.draw(),this.draggingOn=!1,this.showInfoSpan(t,"While mouse-over nodes:<br>1. Press Shift and drag mouse to resize nodes<br>2. Drag mouse to move nodes")):(this.resetZoomPan(),this.hideUnhideNodes(h,!0),this.ctx.translate(-this.offsetX,-this.offsetY),this.ctx.scale(1/this.scaleFactor,1/this.scaleFactor),this.draw(!1,!1,!1,!0)),this.showDataTableOnSelect))if("edges"==this.networkShowDataTable){for(var c=0;c<n.length;c++)d[n[c]]=1;for(var c=0;c<this.data.edges.length;c++)(d[this.data.edges[c].id1]||d[this.data.edges[c].id2])&&l.push(this.data.nodes.length+c);this.updateDataTable(this.extractDataObject(l))}else this.updateDataTable(this.extractDataObject(o))},this.setOriginalIndices=function(t,e,i,s){if(e||(e=this.layoutComb?this.layoutParams[t].varIndices:this.varIndices),i||(i=this.isGroupedData?this.layoutComb?this.layoutParams[t].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[t].smpIndices:this.smpIndices),s&&(this.startingVarIndices=[],this.startingSmpIndices=[]),this.startingVarIndices||(this.startingVarIndices=[]),this.startingSmpIndices||(this.startingSmpIndices=[]),!this.startingVarIndices[t]){this.startingVarIndices[t]=[];for(var a=0;a<e.length;a++)this.startingVarIndices[t][a]=e[a]}if(!this.startingSmpIndices[t]){this.startingSmpIndices[t]=[];for(var a=0;a<i.length;a++)this.startingSmpIndices[t][a]=i[a]}},this.handleDragEventHeatmap=function(t,e,i,s,a){var r,h=[],n=[];this.resetAxesResizer();var o=this.layoutComb?this.layoutParams[t].varIndices:this.varIndices;r=this.isGroupedData?this.layoutComb?this.layoutParams[t].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[t].smpIndices:this.smpIndices,this.setOriginalIndices(t,o,r),this.layoutComb?(this.varIndicesStart=this.layoutParams[t].varIndicesStart<0?0:this.layoutParams[t].varIndicesStart,this.smpIndicesStart=this.layoutParams[t].smpIndicesStart<0?0:this.layoutParams[t].smpIndicesStart):(this.varIndicesStart=this.varIndicesStart<0?0:this.varIndicesStart,this.smpIndicesStart=this.smpIndicesStart<0?0:this.smpIndicesStart),this.varIndices=[],this.isGroupedData?this.grpIndices=[]:this.smpIndices=[];for(var l=0;l<this.dataEvent.length;l++){var d=this.dataEvent[l][0],c=this.dataEvent[l][2];(e<c[0]||e<c[2])&&s>c[0]&&(i<c[1]||i<c[3])&&a>c[1]&&(h[d[0]]||(this.varIndices.push(d[0]),h[d[0]]=1),n[d[1]]||(this.isGroupedData?this.grpIndices.push(d[1]):this.smpIndices.push(d[1]),n[d[1]]=1))}for(var l=0;l<o.length;l++)o[l]==this.varIndices[0]&&(this.varIndicesStart+=l);for(var l=0;l<r.length;l++)this.isGroupedData?r[l]==this.grpIndices[0]&&(this.smpIndicesStart+=l):r[l]==this.smpIndices[0]&&(this.smpIndicesStart+=l);if(this.draw(),this.showDataTableOnSelect){var p=this.extractDataObject(this.smpIndices,this.varIndices);this.updateDataTable(p)}this.skipClick=!1},this.handleDragEventScatter=function(t,e,i,s,a,r,h){this.selectDataPoint=[];var n={v:{},s:{}},o=0;if(t.shiftKey){for(var l=0;l<this.dataEvent.length;l++){var d=this.dataEvent[l][0],c=this.dataEvent[l][1],p=this.dataEvent[l][2];if(this.isObjectInsideArea(c,p,s,a,r,h)){this.addRemoveToSelectedDataPoints(e,d),n.v[d.shift()]=1;for(var g=0;g<d.length;g++)n.s[d[g]]=1;o++}}if(o>0&&(this.isSelectDataPoints=o,this.draw(),this.showDataTableOnSelect)){var u=[],m=[];for(l in n.v)u.push(parseInt(l));for(l in n.s)m.push(parseInt(l));u.sort(function(t,e){return t-e}),m.sort(function(t,e){return t-e});var f=this.extractDataObject(m,u);this.updateDataTable(f)}}else{var f=this.layoutComb?this.layoutParams[i]:this,v=f.xAxisMin+(s-(this.marginLeft+f.offsetX+f.left))/f.xAxisUnit,x=f.xAxisMin+(r-(this.marginLeft+f.offsetX+f.left))/f.xAxisUnit,y=f.yAxisMax-(a-(this.marginTop+f.offsetY+f.top))/f.yAxisUnit,b=f.yAxisMax-(h-(this.marginTop+f.offsetY+f.top))/f.yAxisUnit;this.validateMinMax(v,x)&&this.validateMinMax(b,y)&&(this.setMinX=v,this.setMaxX=x,this.setMaxY=y,this.setMinY=b,this.draw())}},this.handleDragEventGenome=function(t,e,i,s){var a,r,h=this.layoutComb?this.layoutParams[t]:this,a=h.xAxisMin+(e-(this.marginLeft+h.offsetX+h.left))/h.xAxisUnit,r=h.xAxisMin+(s-(this.marginLeft+h.offsetX+h.left))/h.xAxisUnit;this.validateMinMax(a,r)&&(this.setMin=a,this.setMax=r,this.draw())},this.handleDragEventOneDimension=function(t,e,i,s,a,r,h,n){if(this.moveVar){var o=this.moveVar.split("-")[1];if(this.showVarDendrogram&&this.varDendrogram)return alert("Ooops. Cannot change order when showing the dendrogram"),!1;for(var l,d=this.layoutComb?this.layoutParams[i].varIndices:this.varIndices,c=0;c<d.length;c++)if(d[c]==o){l=c;break}o=d.splice(l,1),this.varInfo.splice(l,1);l=d.length;for(var c=0;c<d.length;c++)if(this.varInfo[c]>s){l=c;break}d.splice(l,0,o[0]),this.draw(),this.skipClick=!1}else if(this.moveSmp){var p,o=this.moveSmp.split("-")[1],g=this.isGroupedData?this.grpIndices:this.smpIndices;if(this.isGroupedData)p=this.layoutComb?this.layoutParams[i].grpIndices:this.grpIndices;else if(p=this.layoutComb?this.layoutParams[i].smpIndices:this.smpIndices,this.showSmpDendrogram&&this.smpDendrogram)return alert("Ooops. Cannot change order when showing the dendrogram"),!1;for(var l,c=0;c<p.length;c++)if(p[c]==o){l=c;break}o=p.splice(l,1),this.smpInfo.splice(l,1);l=p.length;for(var u=e.match(/Heatmap/)||"horizontal"==this.graphOrientation?a:s,c=0;c<p.length;c++)if(this.smpInfo[c]>u){l=c;break}p.splice(l,0,o[0]),this.draw(),this.skipClick=!1}else if(t.shiftKey||n){var p,m={},f=[],d=this.layoutComb?this.layoutParams[i].varIndices:this.varIndices,g=this.isGroupedData?this.grpIndices:this.smpIndices,v=!1;p=this.isGroupedData?this.layoutComb?this.layoutParams[i].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[i].smpIndices:this.smpIndices,this.setOriginalIndices(i,d,p);for(var c=0;c<this.dataEvent.length;c++){var x=this.dataEvent[c][0],y=this.dataEvent[c][1],b=this.dataEvent[c][2];this.isObjectInsideArea(y,b,s,a,r,h)&&(m[x[1]]=!0)}for(var c=0;c<g.length;c++)m.hasOwnProperty(g[c])&&(f.push(g[c]),v||(this.smpIndicesStart=c,v=!0));if(this.setSamplesVisible(f,!0),this.draw(),this.showDataTableOnSelect){var w=this.extractDataObject(f,this.varIndices);this.updateDataTable(w)}}else{var w=this.layoutComb?this.layoutParams[i]:this,C="Candlestick"==e&&i>0&&this.showVolume,T=this.layoutComb&&this.layoutCurrent!=i,D=C&&T?w.xAxis2Min:w.xAxisMin,S=C&&T?w.xAxis2Max:w.xAxisMax,A=this.marginLeft+w.offsetX+w.left,k=A+w.x,M=this.marginTop+w.offsetY+w.top,I=M+w.y;"vertical"==this.graphOrientation?(D=C?D+(I-h)/w.xAxis2Unit:D+(I-h)/w.xAxisUnit,S=C?S-(a-M)/w.xAxis2Unit:S-(a-M)/w.xAxisUnit):(D=C?D+(s-A)/w.xAxis2Unit:D+(s-A)/w.xAxisUnit,S=C?S-(k-r)/w.xAxis2Unit:S-(k-r)/w.xAxisUnit),this.validateMinMax(D,S)&&(C?(this.setMin2=D,this.setMax2=S):(this.setMin=D,this.setMax=S),this.draw())}},this.handleDragEvent=function(t,e,i,s,a){var r=this.layoutComb?this.layoutValidN:0,h=this.layoutComb?this.layoutParams[r].graphType:this.graphType;"Network"==h?this.handleDragEventNetwork(t,e,i,s,a):"Heatmap"!=h||this.moveVar||this.moveSmp?h.match(/Scatter/)?this.handleDragEventScatter(t,h,r,e,i,s,a):"Genome"==h?this.handleDragEventGenome(r,e,i,s,a):this.handleDragEventOneDimension(t,h,r,e,i,s,a):this.handleDragEventHeatmap(r,e,i,s,a)},this.resetDrag=function(){var t=this.$(this.target+"-cX-Drag");t&&(t.style.left="0px",t.style.top="0px",t.style.width="0px",t.style.height="0px")},this.initializeDraggingEvents=function(){this.disableEvents||this.addDragDiv()},this.initializeDraggingEvents()},CanvasXpress.prototype.initKeyEvents=function(){this.getKeyCode=function(t){return t?t.charCode&&0==t.keyCode?t.charCode:t.keyCode:void 0},this.registerKey=function(t){t||(t=window.event);var e=this.getTargetEvent(t),i=this.getKeyCode(t);if(this.eventKeys||t.ctrlKey&&t.altKey&&107==i)if(27==i){if(this.animationOn)return this.animationOn=!1,!1;this.masterReset(t)}else{if(this.configuringOn)return;16==i&&this.helpKeyEvents?t.ctrlKey&&t.altKey?this.showCtrlShiftAltShorts():t.ctrlKey?this.showCtrlShiftShorts():t.altKey?this.showShiftAltShorts():this.showShiftShorts():17==i&&this.helpKeyEvents?t.shiftKey&&t.altKey?this.showCtrlShiftAltShorts():t.shiftKey?this.showCtrlShiftShorts():t.altKey?this.showCtrlAltShorts():this.showCtrlShorts():18!=i&&224!=i||!this.helpKeyEvents?t.ctrlKey&&t.shiftKey?(i>=33&&40>=i?this.arrowMove(i,!0):80!=i||this.keyOn?88!=i||this.keyOn?90!=i||"Network"!=this.graphType||this.keyOn||(this.keyOn=!0,this.alignDistributeSelectedNodes(t,i)):(this.keyOn=!0,this.clearNetworkStack()):(this.keyOn=!0,this.print()),document.defaultAction=!0):t.ctrlKey&&t.altKey?(80!=i||this.keyOn||(this.keyOn=!0,this.print()),document.defaultAction=!0):t.shiftKey&&t.altKey?(i>=50&&90>i&&!this.keyOn&&(this.keyOn=!0,this.setGraphType(i)),document.defaultAction=!0):t.ctrlKey?(i>=33&&40>=i?36==i&&this.isSelectDataPoints&&"Scatter3D"==this.graphType?this.showHideSelectedDataPoint(t,i):36==i&&this.isSelectNodes&&"Network"==this.graphType?this.showHideSelectedDataPoint(t,i):this.arrowMove(i):45!=i&&46!=i||this.keyOn?i>=48&&58>i&&!this.keyOn?(this.keyOn=!0,this.setLayout(i-48)):i>=65&&90>=i&&(80!=i||this.keyOn||(this.keyOn=!0,this.print()),"Network"!=this.graphType||this.keyOn||(this.keyOn=!0,this.alignDistributeSelectedNodes(t,i))):(this.keyOn=!0,this.showHideSelectedDataPoint(t,i)),document.defaultAction=!0):107==i||109==i||61==i||187==i||189==i?this.eventPlusMinusKeys&&!/input|textarea|select/i.test(e.tagName)&&(109==i||189==i?this.handleWheelEvent(t,-1):this.handleWheelEvent(t,1)):i>=33&&40>=i?this.eventArrowKeys&&!/input|textarea|select/i.test(e.tagName)&&this.handlePanning(t,i):t.shiftKey?document.defaultAction=!0:t.altKey&&(document.defaultAction=!0):t.ctrlKey&&t.shiftKey?this.showCtrlShiftAltShorts():t.ctrlKey?this.showCtrlAltShorts():t.shiftKey?this.showShiftAltShorts():this.showAltShorts()}},this.handlePanning=function(t,e){if("Network"==this.graphType){this.cancelEvent(t);var i=Math.abs(this.x*this.panningStep),s=Math.abs(this.y*this.panningStep);33==e?this.panningY-=5*s:34==e?this.panningY+=5*s:35==e?(this.panningX=20*i,this.panningY=20*s):36==e?(this.panningX=0,this.panningY=0):37==e?this.panningX-=i:38==e?this.panningY-=s:39==e?this.panningX+=i:40==e&&(this.panningY+=s),this.draw(!1,!1,!1,!0)}else if("Genome"==this.graphType){var a="high"==this.genomeResolution?1:this.xAxisRange*this.panningStep;null==this.setMin&&(this.setMin=this.xAxisMin),null==this.setMax&&(this.setMax=this.xAxisMax),this.cancelEvent(t),37==e||38==e?(this.setMin-=a,this.setMax-=a):39==e||40==e?(this.setMin+=a,this.setMax+=a):33==e?(this.setMin+=.95*this.xAxisRange,this.setMax+=.95*this.xAxisRange):34==e?(this.setMin-=.95*this.xAxisRange,this.setMax-=.95*this.xAxisRange):35==e?this.setMax=null:36==e&&(this.setMin=null),this.draw()}else if("Heatmap"==this.graphType){this.cancelEvent(t),this.resetAxesResizer(t);var r,h=this.layoutComb?this.layoutValidN:0,n=this.layoutComb?this.layoutParams[h].varIndices:this.varIndices;if(r=this.isGroupedData?this.layoutComb?this.layoutParams[h].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[h].smpIndices:this.smpIndices,this.setOriginalIndices(e,n,r),35==e)return!1;if(36==e)this.varIndicesStart=-1,this.smpIndicesStart=-1,this.varIndices=this.startingVarIndices[h],this.isGroupedData?this.grpIndices=this.startingSmpIndices[h]:this.smpIndices=this.startingSmpIndices[h],this.draw();else if(37==e)this.varIndicesStart>0&&(this.varIndices.unshift(this.startingVarIndices[h][this.varIndicesStart-1]),this.varIndices.pop(),this.varIndicesStart--,this.draw());else if(38==e||33==e){for(var o=33==e?5:1,l=!1,d=this.isGroupedData?this.grpIndices:this.smpIndices,c=0;o>c;c++)this.smpIndicesStart>0&&(d.unshift(this.startingSmpIndices[h][this.smpIndicesStart-1]),d.pop(),this.smpIndicesStart--,l=!0);l&&this.draw()}else if(39==e)this.varIndicesStart>-1&&this.varIndicesStart+n.length<this.startingVarIndices[h].length&&(this.varIndices.push(this.startingVarIndices[h][this.varIndicesStart+this.varIndices.length]),this.varIndices.shift(),this.varIndicesStart++,this.draw());else if(40==e||34==e){for(var o=34==e?5:1,l=!1,d=this.isGroupedData?this.grpIndices:this.smpIndices,c=0;o>c;c++)this.smpIndicesStart>-1&&this.smpIndicesStart+r.length<this.startingSmpIndices[h].length&&(d.push(this.startingSmpIndices[h][this.smpIndicesStart+d.length]),d.shift(),this.smpIndicesStart++,l=!0);l&&this.draw()}}else if(this.graphType.match(/Bar|Line|Dotplot|Boxplot|Area|Stacked/)){this.cancelEvent(t),this.resetAxesResizer(t);var r,h=this.layoutComb?this.layoutValidN:0,l=!1,n=this.layoutComb?this.layoutParams[h].varIndices:this.varIndices;if(r=this.isGroupedData?this.layoutComb?this.layoutParams[h].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[h].smpIndices:this.smpIndices,this.setOriginalIndices(h,n,r),35==e||36==e)return!1;if(37==e||38==e||33==e)for(var o=33==e?5:1,c=0;o>c;c++)this.smpIndicesStart>0&&(this.smpIndicesStart--,r.unshift(this.startingSmpIndices[h][this.smpIndicesStart]),r.pop(),l=!0);else if(39==e||40==e||34==e)for(var o=34==e?5:1,c=0;o>c;c++)this.smpIndicesStart+r.length<this.startingSmpIndices[h].length&&(r.push(this.startingSmpIndices[h][this.smpIndicesStart+r.length]),r.shift(),this.smpIndicesStart++,l=!0);l&&this.draw()}return!1},this.showCtrlShiftAltShorts=function(){var t="<table class=shorts>";t+="<tr><th colspan=2>Ctrl + Shift + Alt</th></tr>",t+="<tr><td class=k>&nbsp;</td><td class=d>&nbsp;</td></tr>",t+="</table>",this.showInfoSpan(!1,t)},this.showCtrlShiftShorts=function(){var t="<table class=shorts>";t+="<tr><th colspan=2>Shift + Ctrl</th></tr>","Network"==this.graphType?this.is3DNetwork?(t+="<tr><td class=k>&rarr;</td><td class=d>Rotate clockwise "+1*this.rotationStep+"&deg; continuously</td></tr>",t+="<tr><td class=k>&larr;</td><td class=d>Rotate anti-clockwise "+1*this.rotationStep+"&deg; continuously</td></tr>",t+="<tr><td class=k>&darr;</td><td class=d>Rotate forward "+1*this.rotationStep+"&deg; continuously</td></tr>",t+="<tr><td class=k>&uarr;</td><td class=d>Rotate backward "+1*this.rotationStep+"&deg; continuously</td></tr>",t+="<tr><td class=k>PgUp</td><td class=d>Rotate anti-clockwise and backward "+3*this.rotationStep+"&deg; continuously</td></tr>",t+="<tr><td class=k>PgDn</td><td class=d>Rotate clockwise and forward "+3*this.rotationStep+"&deg; continuously</td></tr>"):(t+="<tr><td class=k>&rarr; or &darr;</td><td class=d>Rotate clockwise "+1*this.rotationStep+"&deg; continuously</td></tr>",t+="<tr><td class=k>&larr; or &uarr;</td><td class=d>Rotate anti-clockwise "+1*this.rotationStep+"&deg; continuously</td></tr>",t+="<tr><td class=k>PgUp</td><td class=d>Rotate anti-clockwise "+3*this.rotationStep+"&deg; continuously</td></tr>",t+="<tr><td class=k>PgDn</td><td class=d>Rotate clockwise "+3*this.rotationStep+"&deg; continuously</td></tr>"):"Scatter2D"==this.graphType||"ScatterBubble2D"==this.graphType?"XYZ"==this.type2D?this.xAxis.length>1&&(t+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;</td><td class=d>Update samples in X, Y and Z axes continuously (1x)</td></tr>",t+="<tr><td class=k>PgUp or PgDn</td><td class=d>Update samples in X, Y and Z axes continuously (2x)</td></tr>"):"XY"==this.type2D?this.zAxis.length>1&&(t+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;</td><td class=d>Update sample in Z axis continuously (1x)</td></tr>",t+="<tr><td class=k>PgUp or PgDn</td><td class=d>Update sample in Z axis continuously (2x)</td></tr>"):"X"==this.type2D?this.yAxis.length>1&&(t+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;</td><td class=d>Update samples in Y and Z axes continuously (1x)</td></tr>",t+="<tr><td class=k>PgUp or PgDn</td><td class=d>Update samples in Y and Z axes continuously (2x)</td></tr>"):this.xAxis.length>1&&(t+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;</td><td class=d>Update samples in X and Z axes continuously (1x)</td></tr>",t+="<tr><td class=k>PgUp or PgDn</td><td class=d>Update samples in X and Z axes continuously (2x)</td></tr>"):"Scatter3D"==this.graphType&&(t+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;</td><td class=d>Rotate continuously</td></tr>",t+="<tr><td class=k>PgUp or PgDn</td><td class=d>Rotate continuously</td></tr>"),t+="<tr><td class=k>P</td><td class=d>Print</td></tr>",t+="</table>",this.showInfoSpan(!1,t)},this.showCtrlAltShorts=function(){var t="<table class=shorts>";t+="<tr><th colspan=2>Ctrl + Alt</th></tr>",t+="<tr><td class=k>P</td><td class=d>Print</td></tr>",t+="</table>",this.showInfoSpan(!1,t)},this.showShiftAltShorts=function(){var t="<table class=shorts>";t+="<tr><th colspan=2>Shift + Alt</th></tr>",t+="<tr><td class=k>2</td><td class=d>Scatter2D</td></tr>",t+="<tr><td class=k>3</td><td class=d>Scatter3D</td></tr>",t+="<tr><td class=k>4</td><td class=d>ScatterBubble2D</td></tr>",t+="<tr><td class=k>A</td><td class=d>Area</td></tr>",t+="<tr><td class=k>B</td><td class=d>Bar</td></tr>",t+="<tr><td class=k>C</td><td class=d>BarLine</td></tr>",t+="<tr><td class=k>D</td><td class=d>Dotplot</td></tr>",t+="<tr><td class=k>G</td><td class=d>Genome</td></tr>",t+="<tr><td class=k>H</td><td class=d>Heatmap</td></tr>",t+="<tr><td class=k>I</td><td class=d>Boxplot</td></tr>",
t+="<tr><td class=k>L</td><td class=d>Line</td></tr>",t+="<tr><td class=k>M</td><td class=d>Candlestick</td></tr>",t+="<tr><td class=k>N</td><td class=d>Network</td></tr>",t+="<tr><td class=k>P</td><td class=d>Pie</td></tr>",t+="<tr><td class=k>R</td><td class=d>Circular</td></tr>",t+="<tr><td class=k>S</td><td class=d>Stacked</td></tr>",t+="<tr><td class=k>T</td><td class=d>StackedPercent</td></tr>",t+="<tr><td class=k>U</td><td class=d>StackedLine</td></tr>",t+="<tr><td class=k>W</td><td class=d>StackedPercentLine</td></tr>",t+="<tr><td class=k>V</td><td class=d>Venn</td></tr>",t+="<tr><td class=k>X</td><td class=d>Correlation</td></tr>",t+="</table>",this.showInfoSpan(!1,t)},this.showCtrlShorts=function(){var t="<table class=shorts>";t+="<tr><th colspan=2>Ctrl</th></tr>","Network"==this.graphType?(this.is3DNetwork?(t+="<tr><td class=k>&rarr;</td><td class=d>Rotate clockwise "+1*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>&larr;</td><td class=d>Rotate anti-clockwise "+1*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>&darr;</td><td class=d>Rotate forward "+1*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>&uarr;</td><td class=d>Rotate backward "+1*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>PgUp</td><td class=d>Rotate anti-clockwise and backward "+3*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>PgDn</td><td class=d>Rotate clockwise and forward "+3*this.rotationStep+"&deg;</td></tr>"):(t+="<tr><td class=k>&rarr; or &darr;</td><td class=d>Rotate clockwise "+1*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>&larr; or &uarr;</td><td class=d>Rotate anti-clockwise "+1*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>PgUp</td><td class=d>Rotate anti-clockwise "+3*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>PgDn</td><td class=d>Rotate clockwise "+3*this.rotationStep+"&deg;</td></tr>"),t+="<tr><td class=k>click</td><td class=d>Select/Unselect node</td></tr>",this.isSelectNodes&&(t+="<tr><td class=k>Delete</td><td class=d>Hide selected nodes</td></tr>",t+="<tr><td class=k>Insert</td><td class=d>Show selected-hidden nodes</td></tr>",t+="<tr><td class=k>Home</td><td class=d>Show connected nodes to slected nodes</td></tr>",t+="<tr><td class=k>t</td><td class=d>Align top</td></tr>",t+="<tr><td class=k>r</td><td class=d>Align right</td></tr>",t+="<tr><td class=k>b</td><td class=d>Align bottom</td></tr>",t+="<tr><td class=k>l</td><td class=d>Align left</td></tr>",t+="<tr><td class=k>v</td><td class=d>Distribute verticaly</td></tr>",t+="<tr><td class=k>h</td><td class=d>Distribute Horizontaly</td></tr>",t+="<tr><td class=k>z</td><td class=d>Undo</td></tr>",t+="<tr><td class=k>y</td><td class=d>Redo</td></tr>")):"Scatter2D"==this.graphType||"ScatterBubble2D"==this.graphType?("XYZ"==this.type2D?this.xAxis.length>1&&(t+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;</td><td class=d>Update samples in X, Y and Z axes (1x)</td></tr>",t+="<tr><td class=k>PgUp or PgDn</td><td class=d>Update samples in X, Y and Z axes (2x)</td></tr>"):"XY"==this.type2D?this.zAxis.length>1&&(t+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;</td><td class=d>Update sample in Z axis (1x)</td></tr>",t+="<tr><td class=k>PgUp or PgDn</td><td class=d>Update sample in Z axis (2x)</td></tr>"):"X"==this.type2D?this.yAxis.length>1&&(t+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;</td><td class=d>Update samples in Y and Z axes (1x)</td></tr>",t+="<tr><td class=k>PgUp or PgDn</td><td class=d>Update samples in Y and Z axes (2x)</td></tr>"):this.xAxis.length>1&&(t+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;</td><td class=d>Update samples in X and Z axes (1x)</td></tr>",t+="<tr><td class=k>PgUp or PgDn</td><td class=d>Update samples in X and Z axes (2x)</td></tr>"),this.isSelectDataPoints&&(t+="<tr><td class=k>Delete</td><td class=d>Hide selected nodes</td></tr>",t+="<tr><td class=k>Insert</td><td class=d>Show selected-hidden nodes</td></tr>")):"Scatter3D"==this.graphType?(t+="<tr><td class=k>&rarr;</td><td class=d>Rotate clockwise "+1*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>&larr;</td><td class=d>Rotate anti-clockwise "+1*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>&darr;</td><td class=d>Rotate forward "+1*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>&uarr;</td><td class=d>Rotate backward "+1*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>PgUp</td><td class=d>Rotate anti-clockwise and backward "+3*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>PgDn</td><td class=d>Rotate clockwise and forward "+3*this.rotationStep+"&deg;</td></tr>",t+="<tr><td class=k>click</td><td class=d>Select/Unselect data points</td></tr>",this.isSelectDataPoints&&(t+="<tr><td class=k>Delete</td><td class=d>Hide selected nodes</td></tr>",t+="<tr><td class=k>Insert</td><td class=d>Show selected-hidden nodes</td></tr>",t+="<tr><td class=k>Home</td><td class=d>Zoom to selected nodes</td></tr>")):this.isSegregable(),t+="<tr><td class=k>P</td><td class=d>Print</td></tr>",t+="</table>",this.showInfoSpan(!1,t)},this.showShiftShorts=function(){var t="<table class=shorts>";t+="<tr><th colspan=2>Shift</th></tr>",t+=this.isSegregable()?"<tr><td class=k>Click and Drag</td><td class=d>Select Samples</td></tr>":"<tr><td class=k>&nbsp;</td><td class=d>&nbsp;</td></tr>",t+="</table>",this.showInfoSpan(!1,t)},this.showAltShorts=function(){var t="<table class=shorts>";t+="<tr><th colspan=2>Alt</th></tr>",t+="<tr><td class=k>&nbsp;</td><td class=d>&nbsp;</td></tr>",t+="</table>",this.showInfoSpan(!1,t)},this.arrowMove=function(t,e){var i=this.graphType;switch(this.is3DPlot&&(i="Scatter3D;"),i){case"Network":this.is3DNetwork?33==t?(this.xRotate+=3*this.rotationStep,this.yRotate-=3*this.rotationStep):34==t?(this.xRotate-=3*this.rotationStep,this.yRotate+=3*this.rotationStep):37==t?this.xRotate+=this.rotationStep:38==t?this.yRotate-=this.rotationStep:39==t?this.xRotate-=this.rotationStep:40==t&&(this.yRotate+=this.rotationStep):33==t?this.network2DRotate-=3*this.rotationStep:34==t?this.network2DRotate+=3*this.rotationStep:37==t||38==t?this.network2DRotate-=this.rotationStep:(39==t||40==t)&&(this.network2DRotate+=this.rotationStep);break;case"Scatter2D":case"ScatterBubble2D":var s,a;if("XYZ"==this.type2D?(s=["xAxisCurrent","yAxisCurrent","zAxisCurrent"],a=["xAxis","yAxis","zAxis"]):"XY"==this.type2D?(s=["zAxisCurrent"],a=["zAxis"]):"X"==this.type2D?(s=["yAxisCurrent","zAxisCurrent"],a=["yAxis","zAxis"]):(s=["xAxisCurrent","zAxisCurrent"],a=["xAxis","zAxis"]),33==t)for(var r=0;r<s.length;r++)this[s[r]]+=2;else if(34==t)for(var r=0;r<s.length;r++)this[s[r]]-=2;else if(35==t)for(var r=0;r<s.length;r++)this[s[r]]=this[a[r]].length-1;else if(36==t)for(var r=0;r<s.length;r++)this[s[r]]=0;else if(37==t||40==t)for(var r=0;r<s.length;r++)this[s[r]]--;else if(38==t||39==t)for(var r=0;r<s.length;r++)this[s[r]]++;this.xAxisCurrent=this.xAxisCurrent<0?this.xAxis.length-1:this.xAxisCurrent>this.xAxis.length-1?0:this.xAxisCurrent,this.yAxisCurrent=this.yAxisCurrent<0?this.xAxis.length-1:this.yAxisCurrent>this.yAxis.length-1?0:this.yAxisCurrent,this.zAxisCurrent=this.zAxisCurrent<0?this.xAxis.length-1:this.zAxisCurrent>this.zAxis.length-1?0:this.zAxisCurrent;break;case"Scatter3D":33==t?(this.xRotate+=3*this.rotationStep,this.yRotate-=3*this.rotationStep):34==t?(this.xRotate-=3*this.rotationStep,this.yRotate+=3*this.rotationStep):35==t?(this.xRotate=0,this.yRotate=0,this.zRotate=45):36==t?(this.xRotate=45,this.yRotate=0,this.zRotate=0):37==t?this.xRotate+=this.rotationStep:38==t?this.yRotate-=this.rotationStep:39==t?this.xRotate-=this.rotationStep:40==t&&(this.yRotate+=this.rotationStep)}e&&!this.animationOn?(this.animationOn=!0,this.animate(t)):this.draw(!1,!1,!1,!0)},this.animate=function(t){var e=this,i=function(){this.update=function(){e.animationOn||clearInterval(i),e.arrowMove(t);var s=e.graphType;switch(e.is3DPlot&&(s="Scatter3D"),s){case"Network":this.is3DNetwork?33==t?(this.xRotate+=3*this.rotationStep,this.yRotate-=3*this.rotationStep):34==t?(this.xRotate-=3*this.rotationStep,this.yRotate+=3*this.rotationStep):37==t?this.xRotate-=this.rotationStep:38==t?this.yRotate-=this.rotationStep:39==t?this.xRotate+=this.rotationStep:40==t&&(this.yRotate+=this.rotationStep):33==t?this.network2DRotate+=3*this.rotationStep:34==t?this.network2DRotate-=3*this.rotationStep:37==t||38==t?this.network2DRotate-=this.rotationStep:(39==t||40==t)&&(this.network2DRotate+=this.rotationStep);break;case"Scatter2D":case"ScatterBubble2D":37!=t?"ScatterBubble2D"==e.graphType&&e.xAxisIndices.length>1&&e.xAxisIndices.length==e.yAxisIndices.length&&e.xAxisIndices.length==e.zAxisIndices.length?e.xAxisCurrent>=e.xAxis.length-1&&(e.xAxisCurrent=e.xAxis.length-1,e.yAxisCurrent=e.yAxis.length-1,e.zAxisCurrent=e.zAxis.length-1,t=37):e.xAxisIndices.length>1&&e.xAxisIndices.length==e.yAxisIndices.length?e.zAxisCurrent>=e.zAxis.length-1&&(e.zAxisCurrent=e.zAxis.length-1,t=37):e.xAxisIndices.length>e.yAxisIndices.length?(e.yAxisCurrent>=e.yAxis.length-1&&(e.yAxisCurrent=e.yAxis.length-1),e.zAxisCurrent>=e.zAxis.length-1&&(e.zAxisCurrent=e.zAxis.length-1),e.yAxisCurrent>=e.yAxis.length-1&&e.zAxisCurrent>=e.zAxis.length-1&&(t=37)):(e.xAxisCurrent>=e.xAxis.length-1&&(e.xAxisCurrent=e.xAxis.length-1),e.zAxisCurrent>=e.zAxis.length-1&&(e.zAxisCurrent=e.zAxis.length-1),e.xAxisCurrent>=e.xAxis.length-1&&e.zAxisCurrent>=e.zAxis.length-1&&(t=37)):39!=t&&("ScatterBubble2D"==e.graphType&&e.xAxisIndices.length>1&&e.xAxisIndices.length==e.yAxisIndices.length&&e.xAxisIndices.length==e.zAxisIndices.length?e.xAxisCurrent<=0&&(e.xAxisCurrent=0,e.yAxisCurrent=0,e.zAxisCurrent=0,t=39):e.xAxisIndices.length>1&&e.xAxisIndices.length==e.yAxisIndices.length?e.zAxisCurrent<=0&&(e.zAxisCurrent=0,t=39):e.xAxisIndices.length>e.yAxisIndices.length?(e.yAxisCurrent<=0&&(e.yAxisCurrent=0),e.zAxisCurrent<=0&&(e.zAxisCurrent=0),e.yAxisCurrent<=0&&e.zAxisCurrent<=0&&(t=39)):(e.xAxisCurrent<=0&&(e.xAxisCurrent=0),e.zAxisCurrent<=0&&(e.zAxisCurrent=0),e.xAxisCurrent<=0&&e.zAxisCurrent<=0&&(t=39)));break;case"Scatter3D":e.xRotate<=0&&(39==t||37>t)?(e.xRotate=0,e.yRotate=0,t=40):e.xRotate>=90&&(37==t||37>t)?(e.xRotate=90,e.yRotate=90,t=38):e.yRotate<=0&&(38==t||37>t)?(e.yRotate=0,e.xRotate=90,t=39):e.yRotate>=90&&(40==t||37>t)&&(e.yRotate=90,e.xRotate=0,t=37)}};var i=setInterval(this.update,e.animationTime)};i.call()},this.setGraphType=function(t){var e;66==t?e="Bar":76==t?e="Line":65==t?e="Area":67==t?e="BarLine":73==t?e="Boxplot":68==t?e="Dotplot":72==t?e="Heatmap":83==t?e="Stacked":85==t?e="StackedLine":84==t?e="StackedPercent":87==t?e="StackedPercentLine":50==t?e="Scatter2D":52==t?e="ScatterBubble2D":51==t?e="Scatter3D":88==t?e="Correlation":86==t?e="Venn":80==t?e="Pie":78==t?e="Network":71==t?e="Genome":77==t?e="Candlestick":82==t&&(e="Circular"),e&&this.isValidGraphType(e)?(this.graphType=e,this.draw()):alert("Dude! You cannot plot this data in a "+e+" graph")},this.reset=function(){switch(this.varIndicesStart=-1,this.smpIndicesStart=-1,this.graphType){case"Area":case"AreaLine":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Heatmap":case"Correlation":case"Venn":case"Pie":case"Bar":case"Line":case"BarLine":case"Boxplot":case"Dotplot":case"Candlestick":case"Circular":this.setAllVariablesVisible(),this.setAllSamplesVisible();break;case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":this.resetSelectedDataPoints(),this.setAllVariablesVisible(),this.setAllSamplesVisible();break;case"Network":this.resetSelectedNodes(),this.setAllNodesVisible(),this.ctx.translate(-this.offsetX,-this.offsetY),this.ctx.scale(1/this.scaleFactor,1/this.scaleFactor);break;case"Genome":this.setAllFeaturesVisible()}},this.redraw=function(){switch(this.setInitialConfig(),this.varIndicesStart=-1,this.smpIndicesStart=-1,this.graphType){case"Area":case"AreaLine":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Correlation":case"Venn":case"Pie":case"Circular":return this.setAllVariablesVisible(),this.setAllSamplesVisible(),!0;case"Bar":case"Line":case"BarLine":case"Boxplot":case"Dotplot":case"Genome":case"Candlestick":this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.setMin=null,this.setMax=null,this.setMin2=null,this.setMax2=null,this.xRotate=45,this.yRotate=0;break;case"Scatter2D":case"ScatterBubble2D":this.resetSelectedDataPoints(),this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.setMinX=null,this.setMaxX=null,this.setMinY=null,this.setMaxY=null;break;case"Scatter3D":this.resetSelectedDataPoints(),this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.xRotate=45,this.yRotate=0;break;case"Heatmap":this.setAllVariablesVisible(),this.setAllSamplesVisible();break;case"Network":this.resetSelectedNodes(),this.setAllNodesVisible(),this.network2DRotate=0,this.randomNetwork&&(this.layoutDone=!1),this.ctx.translate(-this.offsetX,-this.offsetY),this.ctx.scale(1/this.scaleFactor,1/this.scaleFactor)}return this.draw(),!0},this.resetZoomPan=function(){this.zoom=1,this.panningX=0,this.panningY=0,this.panningGlobalX=0,this.panningGlobalY=0,this.padX=this.x/2,this.padY=this.y/2,this.padZ=this.y/2},this.resetSelectedObjects=function(){(this.isSelectDataPoints||this.isSelectNodes)&&(this.resetSelectedDataPoints(),this.resetSelectedNodes(),this.redraw())},this.masterReset=function(t){this.resetTooltipDivs(),this.resetDrag(t),this.resetSelectedDataPoints(),this.resetSelectedNodes(),this.dataTableLastState&&"docked"!=this.dataTableLastState&&this.hideUnhideDataTable(!0),this.resetConfigurator(),this.resetAxesResizer(t),this.resetFlags(t),this.resetZoomPan(),this.redraw()}},CanvasXpress.prototype.initSelectEvents=function(){this.showHideSelectedDataPoint=function(t,e){t&&this.stopEvent(t);var i=this.layoutComb?this.layoutValidN:0,s=this.layoutComb?this.layoutParams[i].graphType:this.graphType,a=[];if(45==e||46==e){if("Network"==s){var r=[],h=45==e?!1:!0;for(var n in this.selectNode)r.push(n);r.length>0&&this.hideUnhideNodes(r,h)}else if(s.match(/Scatter/)&&(45==e?(this.selectDataPoint=this.hideDataPoint,this.hideDataPoint=[]):46==e&&(this.hideDataPoint=this.selectDataPoint,this.selectDataPoint=[]),"Scatter3D"==s)){for(var o=this.xAxisIndex+":"+this.yAxisIndex+":"+this.zAxisIndex,l=0;l<this.data.y.vars.length;l++)this.isVisibleSelectedDataPoint(l,o)&&a.push(l);this.varIndices=a}this.draw()}else if(36==e)if("Network"==s){for(var d={},c=[],r=this.data.nodes,p=this.data.edges,l=0;l<p.length;l++)(this.selectNode.hasOwnProperty(p[l].id1)||this.selectNode.hasOwnProperty(p[l].id2))&&(d[p[l].id1]=!0,d[p[l].id2]=!0);for(var l=0;l<r.length;l++)(!d.hasOwnProperty(r[l].id)||r[l].hide)&&c.push(r[l].id);this.resetSelectedNodes(),c.length>0&&(this.hideUnhideNodes(c,!0),this.draw())}else if("Scatter3D"==s&&this.isSelectDataPoints){for(var l in this.selectDataPoint){var g=parseInt(l);isNaN(g)||a.push(this.varIndices[g])}this.isSelectDataPoints=0,this.selectDataPoint=[],this.varIndices=a,this.draw()}},this.addRemoveToSelectedDataPoints=function(t,e){for(var i=this.broadcast?CanvasXpress.references:[this],s=0;s<i.length;s++){var a=i[s];if(!t){var r=a.layoutComb?a.layoutValidN:0;t=a.layoutComb?a.layoutParams[r].graphType:a.graphType}if("Network"==t){var h=parseInt(e.join(", "));if(h<a.data.nodes.length){var n=a.data.nodes[h].id;a.selectNode.hasOwnProperty(n)?(a.isSelectNodes--,delete a.selectNode[n]):(a.isSelectNodes++,a.selectNode[n]=!0)}}else if(t.match(/Scatter/)){var n;a.selectDataPoint[e[0]]||(a.selectDataPoint[e[0]]={}),n="Scatter3D"==t?e[1]+":"+e[2]+":"+e[3]:e[1]+":"+e[2],a.selectDataPoint[e[0]].hasOwnProperty(n)?(a.isSelectDataPoints--,"var"==this.broadcastType?delete a.selectDataPoint[e[0]]:delete a.selectDataPoint[e[0]][n]):(a.isSelectDataPoints++,"var"==this.broadcastType?a.selectDataPoint[e[0]]=!0:a.selectDataPoint[e[0]][n]=!0)}this.userEvents.select&&("Network"==t?this.userEvents.select.call(a,a.selectNode):this.userEvents.select.call(a,a.selectDataPoint))}},this.resetSelectedDataPoints=function(){this.isSelectDataPoints&&(this.selectDataPoint=[],this.hideDataPoint=[],this.isSelectDataPoints=0)},this.resetSelectedNodes=function(){this.isSelectNodes&&(this.selectNode={},this.isSelectNodes=0)}},CanvasXpress.prototype.initDendrogramEvents=function(){this.modifyDendrogram=function(t){var e=("varDendrogram"==t.t.t?this.varIndicesStart:this.smpIndicesStart,t.t.t.replace("Dendrogram","s")),i=this[t.t.t].object,s=t.t.d+"-"+t.t.o,a=this.findDendrogramBranch(i,s),r=(this.reverseDendrogramBranch(a),this.writeNewick(i,!0));this.data.t[e]=r,this.draw()},this.findDendrogramBranch=function(t,e,i){return t.id==e&&(i=t),i?i:(t.left&&(i=this.findDendrogramBranch(t.left,e,i)),t.right&&(i=this.findDendrogramBranch(t.right,e,i)),i)},this.reverseDendrogramBranch=function(t){if(t&&t.right&&t.left){t.right=this.reverseDendrogramBranch(t.right),t.left=this.reverseDendrogramBranch(t.left);var e=t.left;t.left=t.right,t.right=e,t.mid&&(t.mid=t.mid.reverse())}return t}},CanvasXpress.prototype.initCanvasEvents=function(){this.contextmenuCanvas=function(t){return function(e){if(e||(e=window.event),e){if(t.Ext&&t.Ext.contextmenu)return;t.cancelEvent(e);var i=t.getEventDataId(e);t.handleMouseEvents("contextmenu",e,i)}return!1}}(this),this.mousedownCanvas=function(t){return function(e){if(e||(e=window.event),(e&&e.which?3!=e.which:2!=e.button)&&(!t.configuringOn||t.configuratorLastState&&"docked"==t.configuratorLastState)&&(t.touchEvent="hold",t.registerDrag(e),t.mobileApp)){var i=function(){clearTimeout(i),t.touches&&1==t.touches.length&&"hold"==t.touchEvent&&t.masterReset(e)};setTimeout(i,500)}return!1}}(this),this.clickCanvas=function(t){return function(e){e||(e=window.event),t.resetMenuLinks(),t.closeHelp(),t.clickBuffer=function(){if(!t.doubleClick){if(!t.configuringOn||t.configuratorLastState&&"docked"==t.configuratorLastState){if(!t.skipClick&&"drag"!=t.lastCanvasEvent)if(t.isHelp(e))t.stopEvent(e),t.showInfoSpan(e,'Modify "helpKeyEvents"<br>&nbsp;&nbsp;&nbsp;to show or hide help<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on key events"');else if(t.isAxis(e))t.stopEvent(e);else if(t.axesResizerShow&&!t.resizerType)t.stopEvent(e),t.resetAxesResizer(e);else if(t.mobileApp)t.stopEvent(e),t.addConfigurator(e);else{var i=t.getEventDataId(e);i?t.handleMouseEvents("click",e,i):t.resetSelectedObjects()}}else t.resetConfigurator();t.lastCanvasEvent="click"}},setTimeout(t.clickBuffer,250),setTimeout(function(){t.doubleClick=!1},500)}}(this),this.dblclickCanvas=function(t){return function(e){if(e||(e=window.event),t.doubleClick=!0,t.clickBuffer&&(clearTimeout(t.clickBuffer),t.clickBuffer=null),!t.skipClick){var i=t.getEventDataId(e);i?"Network"==t.graphType||"Genome"==t.graphType?t.addConfigurator(e,i):t.handleMouseEvents("dblclick",e,i):(t.cancelEvent(e),t.addConfigurator(e)),t.lastCanvasEvent="dblclick"}return!1}}(this),this.wheelCanvas=function(t){return function(e){e||(e=window.event);var i=0;e||(e=window.event),e.wheelDelta?(i=e.wheelDelta/120,window.opera&&(i=-i)):e.detail&&(i=-e.detail/3),i&&t.handleWheelEvent(e,i)}}(this),this.addRemoveCanvasListeners=function(t){this[t](this.canvas,"contextmenu",this.contextmenuCanvas,!1),this[t](this.canvas,"mousedown",this.mousedownCanvas,!1),this[t](this.canvas,"touchstart",this.mousedownCanvas,!1),this[t](this.canvas,"click",this.clickCanvas,!1),this[t](this.canvas,"dblclick",this.dblclickCanvas,!1),this[t](this.canvas,"mousewheel",this.wheelCanvas,!1)},this.isVersion=function(t){if(this.showVersion){var e=this.adjustedCoordinates(t);return e&&e.x>0&&e.x<=10&&e.y>0&&e.y<=10?!0:!1}},this.isHelp=function(t){var e=this.adjustedCoordinates(t);return e&&e.x>0&&e.x<=10&&e.y>0&&e.y<=10?!0:!1},this.handleWheelEvent=function(t,e,i){var s=this.getTargetEvent(t);if(/CanvasXpress/.test(s.className)&&(CanvasXpress.current=s.id),"Network"==this.graphType){if(this.cancelEvent(t),i||(i=this.adjustedCoordinates(t)),i){"keydown"==t.type&&(i.x=this.width/2,i.y=this.height/2);var a=this.scaleFactor*this.zoomStep,r=this.widthBounds/2-i.x/this.scaleFactor,h=this.heightBounds/2-i.y/this.scaleFactor;this.scaleFactor=e>0?this.scaleFactor+a:this.scaleFactor-a,this.widthBounds=this.x/this.scaleFactor,this.heightBounds=this.y/this.scaleFactor;var n=this.widthBounds/2-i.x/this.scaleFactor,o=this.heightBounds/2-i.y/this.scaleFactor;this.panningX=r-n,this.panningY=h-o,this.networkFreeze||(a=this.zoom*this.zoomStep,this.zoom=e>0?this.zoom+a:this.zoom-a),this.draw(!1,!1,!1,!0),this.panningGlobalX+=this.panningX,this.panningGlobalY+=this.panningY}}else if("Genome"==this.graphType){if(this.cancelEvent(t),this.xAxisUnit>100&&e>0)return;if(i||(i=this.adjustedCoordinates(t)),i){var l=(i.x-(this.marginLeft+this.left))/this.x,d=1-l,c=this.xAxisRange*this.zoomStep;e>0?(this.setMin=null!=this.setMin?this.setMin+c*l:this.xAxisMin+c*l,this.setMax=null!=this.setMax?this.setMax-c*d:this.xAxisMax-c*d):(this.setMin=null!=this.setMin?this.setMin-c*l:this.xAxisMin-c*l,this.setMax=null!=this.setMax?this.setMax+c*d:this.xAxisMax+c*d),this.draw()}}else if("Heatmap"==this.graphType){this.cancelEvent(t),this.resetAxesResizer(t);{var p,g=this.layoutComb?this.layoutValidN:0,u=this.layoutComb?this.layoutParams[g].varIndices:this.varIndices;this.isGroupedData?this.grpIndices:this.smpIndices}if(p=this.isGroupedData?this.layoutComb?this.layoutParams[g].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[g].smpIndices:this.smpIndices,this.setOriginalIndices(g,u,p),i||(i=this.adjustedCoordinates(t)),i){"keydown"==t.type&&(i.x=this.width/2,i.y=this.height/2),i.x-=this.marginLeft+this.left,i.y-=this.marginTop+this.top;var m=Math.min(Math.max(i.x,0),this.x)/this.x,f=2*Math.ceil(u.length/10),v=Math.round(m*f),x=f-v,y=Math.min(Math.max(i.y,0),this.y)/this.y,b=2*Math.ceil(p.length/10),w=Math.round(y*b),C=b-w,T=!1;if(e>0){if(!this.zoomVariablesDisable&&u.length>3){this.varIndicesStart<0&&this.varIndicesStart++;for(var D=0;v>D;D++)this.varIndices.shift(),this.varIndicesStart++;for(var D=0;x>D;D++)this.varIndices.pop();T=!0}if(!this.zoomSamplesDisable&&p.length>3){this.smpIndicesStart<0&&this.smpIndicesStart++;for(var D=0;w>D;D++)this.smpIndices.shift(),this.smpIndicesStart++;for(var D=0;C>D;D++)this.smpIndices.pop();T=!0}}else{if(!this.zoomVariablesDisable){for(var D=0;v>D;D++)this.varIndicesStart>=0&&this.varIndicesStart+u.length<this.startingVarIndices[g].length?(this.varIndices.push(this.startingVarIndices[g][this.varIndicesStart+u.length]),T=!0):this.varIndicesStart>0&&(this.varIndicesStart--,this.varIndices.unshift(this.startingVarIndices[g][this.varIndicesStart]),T=!0);for(var D=0;x>D;D++)this.varIndicesStart>0?(this.varIndicesStart--,this.varIndices.unshift(this.startingVarIndices[g][this.varIndicesStart]),T=!0):this.varIndicesStart>=0&&this.varIndicesStart+u.length<this.startingVarIndices[g].length&&(this.varIndices.push(this.startingVarIndices[g][this.varIndicesStart+u.length]),T=!0)}if(!this.zoomSamplesDisable){for(var D=0;w>D;D++)this.smpIndicesStart>=0&&this.smpIndicesStart+p.length<this.startingSmpIndices[g].length?(this.smpIndices.push(this.startingSmpIndices[g][this.smpIndicesStart+p.length]),T=!0):this.smpIndicesStart>0&&(this.smpIndicesStart--,this.smpIndices.unshift(this.startingSmpIndices[g][this.smpIndicesStart]),T=!0);for(var D=0;C>D;D++)this.smpIndicesStart>0?(this.smpIndicesStart--,this.smpIndices.unshift(this.startingSmpIndices[g][this.smpIndicesStart]),T=!0):this.smpIndicesStart>=0&&this.smpIndicesStart+p.length<this.startingSmpIndices[g].length&&(this.smpIndices.push(this.startingSmpIndices[g][this.smpIndicesStart+p.length]),T=!0)}}T&&this.draw()}}else if(this.graphType.match(/Bar|Line|Dotplot|Boxplot|Area|Stacked|Circular/)&&!this.is3DPlot){this.cancelEvent(t),this.resetAxesResizer(t);{var p,g=this.layoutComb?this.layoutValidN:0,u=this.layoutComb?this.layoutParams[g].varIndices:this.varIndices;this.isGroupedData?this.grpIndices:this.smpIndices}if(p=this.isGroupedData?this.layoutComb?this.layoutParams[g].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[g].smpIndices:this.smpIndices,this.setOriginalIndices(g,u,p),i||(i=this.adjustedCoordinates(t)),i){"keydown"==t.type&&(i.x=this.width/2,i.y=this.height/2),i.x-=this.marginLeft+this.left,i.y-=this.marginTop+this.top;var S="vertical"==this.graphOrientation?Math.min(Math.max(i.x,0),this.x)/this.x:Math.min(Math.max(i.y,0),this.y)/this.y,A=2*Math.ceil(p.length/10),k=Math.round(S*A),M=A-k,I=[];if(e>0){if(p.length>3){this.smpIndicesStart<0&&this.smpIndicesStart++,this.smpIndicesStart+=k;for(var D=k;D<p.length-M;D++)I.push(p[D]);this.setSamplesVisible(I,!0),this.draw()}}else if(this.startingSmpIndices[g].length>p.length){I=p;for(var D=0;M>D;D++)this.startingSmpIndices[g].length>this.smpIndicesStart+p.length?I.push(this.startingSmpIndices[g][this.smpIndicesStart+p.length]):this.smpIndicesStart>0&&(this.smpIndicesStart--,I.unshift(this.startingSmpIndices[g][this.smpIndicesStart]));for(var D=0;k>D;D++)this.smpIndicesStart>0?(this.smpIndicesStart--,I.unshift(this.startingSmpIndices[g][this.smpIndicesStart])):this.startingSmpIndices[g].length>this.smpIndicesStart+p.length&&I.push(this.startingSmpIndices[g][this.smpIndicesStart+p.length]);this.setSamplesVisible(I,!0),this.draw()}}}else if("Scatter3D"==this.graphType||this.is3DPlot){if(this.cancelEvent(t),i||(i=this.adjustedCoordinates(t)),i){i.x-=this.marginLeft+this.left,i.y-=this.marginTop+this.top;var L=Math.min(Math.max(i.x,0),this.x)/this.x-.5,N=Math.min(Math.max(i.y,0),this.y)/this.y-.5}if(e>0){if(this.zoom>=4)return;this.zoom*=1.1,this.padX-=L*this.padX/4,this.padY-=N*this.padY/4}else{if(this.zoom<=.5)return;this.zoom*=.9,this.padX+=L*this.padX/4,this.padY+=N*this.padY/4}this.draw()}else if("Scatter2D"==this.graphType||"ScatterBubble2D"==this.graphType){return void this.cancelEvent(t);var L,N}return!1},this.setLayoutValidIndices=function(t){if(this.layoutComb){var e=this.adjustedCoordinates(t);if(e)for(var i=e.x,s=e.y,a=0,r=0;r<this.layoutRows;r++)for(var h=0;h<this.layoutCols;h++){var n=this.getBoundsXY(a);i>=n[0]&&i<=n[1]&&s>=n[2]&&s<=n[3]&&this.layoutValid&&(this.layoutValidR=r,this.layoutValidC=h,this.layoutValidN=a),a++}}},this.getNetworkEventDataId=function(t){var e=this.isEvent(t,!0),i=e[0],s=e[1];return i?s&&s.match(/-legend-/)?!1:i:!1},this.getEventDataId=function(t){return"Network"==this.graphType?this.getNetworkEventDataId(t):this.isEvent(t)},this.getEventAreaData=function(t){return this.extractDataObject(this.getEventDataId(t))},this.handleMouseEvents=function(t,e,i){if(-1==i[0])this.showInfoSpan(e,"CanvasXpress ("+this.version+")");else{this.layoutComb&&!this.layoutValidN&&this.setLayoutValidIndices(e);var s=this.extractDataObject(i);this.userEvents[t]&&("object"==typeof this.userEvents[t]&&this.userEvents[t].handler&&this.userEvents[t].scope?e.ctrlKey&&"click"==t?e.shiftKey&&"click"==t?alert(this.prettyJSON(s)):e.shiftKey&&"click"==t?(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(e)),this.draw()):(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(e)),this.draw()):e.shiftKey&&"click"==t&&"Network"==this.graphType&&"radial"==this.networkLayoutType?this.reRootRadialNetwork(this.getEventDataId(e)):e.shiftKey&&"click"==t||e.altKey&&"click"==t||this.userEvents[t].handler.apply(this.userEvents[t].scope,[s,e,this,i]):"object"==typeof this.userEvents[t]&&this.userEvents[t].handler?e.ctrlKey&&"click"==t?e.shiftKey&&"click"==t?alert(this.prettyJSON(s)):e.shiftKey&&"click"==t?(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(e)),this.draw()):(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(e)),this.draw()):e.shiftKey&&"click"==t&&"Network"==this.graphType&&"radial"==this.networkLayoutType?this.reRootRadialNetwork(this.getEventDataId(e)):e.shiftKey&&"click"==t||e.altKey&&"click"==t||this.userEvents[t].handler(s,e,this,i):e.ctrlKey&&"click"==t?e.shiftKey&&"click"==t?alert(this.prettyJSON(s)):e.shiftKey&&"click"==t?(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(e)),this.draw()):(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(e)),this.draw()):e.shiftKey&&"click"==t&&"Network"==this.graphType&&"radial"==this.networkLayoutType?this.reRootRadialNetwork(this.getEventDataId(e)):e.shiftKey&&"click"==t||e.altKey&&"click"==t||this.userEvents[t](s,e,this,i))}},this.formatCoords=function(t,e){var i=[];if("Network"!=this.graphType)for(var s=0;s<e.length;s++)i.push(s%2?sprintf("%.0f",(e[s]+this.translateY)*this.scaleY):this.layoutValid&&"circle"==t&&2==s?sprintf("%.0f",e[s]*((this.scaleX+this.scaleY)/2)):sprintf("%.0f",(e[s]+this.translateX)*this.scaleX));else for(var s=0;s<e.length;s++)i.push(sprintf("%.0f",parseInt(e[s])));if("rect"==t){var a=Math.min(i[0],i[2]),r=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),n=Math.max(i[1],i[3]);i=[a,r,h,n]}return i.join(",")},this.addArea=function(t,e,i){if(t&&e){var s=t.shift();if(s&&t){switch(s){case"rect":t[0]-=this.outlineWidth,t[1]-=this.outlineWidth,t[2]+=2*this.outlineWidth,t[3]+=2*this.outlineWidth;break;case"circle":t[2]+=2*this.outlineWidth;break;case"poly":}this.dataEvent.push([e,s,t,i])}}},this.flash=function(t,e,i,s,a,r){var h=this.$cX("div",{id:this.target+"canvasXpressFlash"+(new Date).getTime()},{left:t-i/2+"px",top:e-s/2+"px",width:i+"px",height:s+"px",borderRadius:"999px",WebkitBorderRadius:"999px",MozBorderRadius:"999px",opacity:.6,filter:"alpha(opacity = 60)",position:"absolute",zIndex:1e5,display:"block",backgroundColor:a?a:this.resizerBackgroundColor});this.canvas.parentNode.appendChild(h),r||(r=3);var n=this,o=1,l=function(){this.update=function(){h.style.display=o%2?"none":"block",o>=2*r&&(n.canvas.parentNode.removeChild(h),clearInterval(t)),o++};var t=setInterval(this.update,300)};l.call()},this.initializeCanvasEvents=function(){this.disableEvents||this.addRemoveCanvasListeners("addEvtListener")},this.initializeCanvasEvents()},CanvasXpress.prototype.initCleanupEvents=function(){this.destroy=function(t){if(t){if(1==CanvasXpress.references.length&&CanvasXpress.references[0].target==t)return this.destroy();this.removeReference(t)}else{for(;CanvasXpress.references.length>0;)t=CanvasXpress.references[0],this.removeReference(t.target);CanvasXpress.cacheImages={},CanvasXpress.cacheText={},CanvasXpress.stack={},CanvasXpress.current=!1}},this.monitorReference=function(){for(var t=[],e=0;e<CanvasXpress.references.length;e++){var i=this.$(CanvasXpress.references[e].target);i||t.push(CanvasXpress.references[e].target)}for(var e=0;e<t.length;e++)this.destroy(t[e])},this.removeReference=function(t,e){var i=CanvasXpress.references;CanvasXpress.references=[];for(var s=0;s<i.length;s++)if(i[s].target!=t)CanvasXpress.references.push(i[s]);else{var a=i[s];a.resetTooltipDivs(),a.cleanEvtListeners(e),a.removeTarget("container-"+a.target)}},this.cleanEvtListeners=function(){this.addRemoveLinkListeners("removeEvtListener"),this.addRemoveViewportListeners("removeEvtListener"),this.addRemoveToolbarListeners("removeEvtListener"),this.addRemoveItemListeners("removeEvtListener"),this.addRemoveConfiguratorListeners("removeEvtListener"),this.addRemoveDataTableListeners("removeEvtListener"),this.removeGenericDataFilterListenersOrReset(),this.addRemoveDataFilterListeners("removeEvtListener"),this.addRemoveCanvasListeners("removeEvtListener"),this.addRemoveAxesResizerListeners("removeEvtListener"),this.addRemoveNavigationTopListeners("removeEvtListener"),this.addRemoveNavigationLeftRightListeners("removeEvtListener"),this.removeEvtListener(document,"mousemove",this.mousemoveDoc,!1),this.removeEvtListener(document,"touchmove",this.mousemoveDoc,!1),this.removeEvtListener(document,"mouseup",this.mouseupDoc,!1),this.removeEvtListener(document,"touchend",this.mouseupDoc,!1),this.removeEvtListener(document,"keydown",this.keydownDoc,!1),this.removeEvtListener(document,"keyup",this.keyupDoc,!1),this.removeEvtListener(window,"resize",this.resizeWindow,!1)},this.initializeCleanupEvents=function(){if(this.destroyCanvasXpressZombies){var t=this,e=function(){this.monitor=function(){CanvasXpress.references.length<1&&clearInterval(e),
t.monitorReference()};var e=setInterval(this.monitor,t.monitorCanvasXpressZombiesTime)};e.call()}},this.initializeCleanupEvents()},CanvasXpress.prototype.initEvents=function(){this.relativeCoordinates=function(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},this.absoluteCoordinates=function(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft-t.scrollLeft,e.y+=t.offsetTop-t.scrollTop,t=t.offsetParent;return e},this.adjustedCoordinates=function(t,e){if(t||(t=window.event),e||(e=this.$(this.target)),(!(this.isIE&&this.useFlashIE&&this.browserVersion<9)||window.event)&&e){var i={},s=e.parentNode.getClientRects(),a=t&&t.changedTouches?t.changedTouches[0]:!1;if(s&&s[0]){var r=s[0].left,h=s[0].top,n=t&&t.clientX?t.clientX:a?a.clientX:t&&t[0]?t[0]:r,o=t&&t.clientY?t.clientY:a?a.clientY:t&&t[1]?t[1]:h;i.x=document.body.scrollLeft>Math.abs(r)+n&&n>document.body.scrollLeft-r?Math.abs(r)+n:n-r,i.y=document.body.scrollTop>Math.abs(h)+o&&o>document.body.scrollTop-h?Math.abs(h)+o:o-h}else i.x=0,i.y=0;return i}},this.isObjectInsideArea=function(t,e,i,s,a,r){var h,n;switch(t){case"rect":h=(e[0]+e[2])/2,n=(e[1]+e[3])/2;break;case"circle":h=e[0],n=e[1];break;case"poly":for(var o=[],l=[],d=0;d<e.length;d++)d%2?l.push(e[d]):o.push(e[d]);o.sort(function(t,e){return t-e}),l.sort(function(t,e){return t-e}),h=(o[0]+o[o.length-1])/2,n=(l[0]+l[l.length-1])/2}return this.isPointInsideArea("rect",h,n,[i,s,a,r])},this.isPointInsideArea=function(t,e,i,s){switch(t){case"rect":return s[0]>s[2]&&(s[4]=s[0],s[0]=s[2],s[2]=s[4]),s[1]>s[3]&&(s[4]=s[1],s[1]=s[3],s[3]=s[4]),e>=s[0]&&e<=s[2]&&i>=s[1]&&i<=s[3]?!0:!1;case"circle":var a=s[2]/2;return e>=s[0]-a&&e<=s[0]+a&&i>=s[1]-a&&i<=s[1]+a?!0:!1;case"poly":for(var r=[],h=[],n=!1,o=0;o<s.length;o++)o%2?h.push(s[o]):r.push(s[o]);h[0]<h[1]&&(h=h.reverse(),r=r.reverse());for(var o=0,l=r.length-1;o<r.length;l=o++)(h[o]<=i&&i<h[l]||h[l]<=i&&i<h[o])&&e<(r[l]-r[o])*(i-h[o])/(h[l]-h[o])+r[o]&&(n=!n);return n}},this.isEvent=function(t,e,i){var s=this.adjustedCoordinates(t);if(s){var a=this.getTargetEvent(t);if(a&&a.id&&a.id.match(this.target)){for(var r=s.x,h=s.y,n=this.dataEvent,o=[],l=n.length-1;l>=0;l--){var d=n[l][0],c=n[l][1],p=n[l][2],g=n[l][3];if(this.isPointInsideArea(c,r,h,p)){if(g&&(g=d[0]+g),!i)return e?[d,g]:g?[g]:d;o.push(g?g:d[0])}}if(o.length>0)return o}}return!1},this.getBoundsXY=function(t){var e=this.layoutComb?this.layoutParams[t]:this,i="Network"==this.graphType?0:this.marginLeft+e.offsetX,s="Network"==this.graphType?0:this.marginTop+e.offsetY;return[i+e.left,i+e.left+e.x,s+e.top,s+e.top+e.y,i,i+e.left+e.x+e.right,s,s+e.top+e.y+e.bottom]},this.extractDataObject=function(t,e){var i=this,s=this.layoutComb&&this.layoutValidN>-1?this.layoutParams[this.layoutValidN].graphType:this.graphType,a=[],r=[],h=function(t){var e={};for(var s in i.data.x){e[s]=[];for(var a=0;a<t.length;a++)e[s].push(i.data.x[s][t[a]])}return e},n=function(t){var e={};for(var s in i.data.z){e[s]=[];for(var a=0;a<t.length;a++)e[s].push(i.data.z[s][t[a]])}return e},o=function(t){for(var e=[],s=0;s<t.length;s++)e.push(i.data.y.vars[t[s]]);return e},l=function(t,e){for(var s=e?i.data.w.smps:i.data.y.smps,a=[],r=0;r<t.length;r++)a.push(s[t[r]]);return a},d=function(t){for(var e=[],s=0;s<t.length;s++)e.push(i.data.w.grps[t[s]]);return e},c=function(t,e,s){var a=[];if(s||(s="data"),e)for(var r=0;r<t.length;r++){a[r]=[];for(var h=0;h<e.length;h++)a[r].push(i.data.y[s][t[r]][e[h]])}else for(var r=0;r<t.length;r++)a.push(i.data.y[s][t[r]]);return a};switch(s){case"Area":case"AreaLine":case"Bar":case"Line":case"BarLine":case"Boxplot":case"Dotplot":case"Heatmap":case"Pie":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Candlestick":case"Circular":if(!t||0==t.length||null==t[0])return;if(isNaN(t[0])){if(t[0]&&t[0].match(/Dendrogram/)){var p={t:{}},g=t[0].split("-");return p.t.d=parseInt(g[1]),p.t.o=parseInt(g[2]),p.t.t=g[3],p.objectType="Dendrogram",p}if(t[0]&&t[0].match(/Var/)){var g=t[0].split("-"),u=parseInt(g[1]),m=[u];m=m.concat(this.smpIndices);var p=this.extractDataObject(m);return p.display=this.data.y.vars[u],p.objectType="Var",p}if(t[0]&&t[0].match(/Smp/)){var g=t[0].split("-"),u=parseInt(g[1]),p=this.extractDataObject([u],this.varIndices);return p.display=this.isGroupedData?this.data.w.smps[u]:this.data.y.smps[u],p.objectType="Smp",p}return}if(e)a=e,r=t;else{a=[t[0]],r=[];for(var u=1;u<t.length;u++)r.push(t[u])}if(s.match(/Scatter/)&&(this.colorBy&&this.getSampleIndices(this.colorBy)>-1&&r.push(this.getSampleIndices(this.colorBy)),this.shapeBy&&this.getSampleIndices(this.shapeBy)>-1&&r.push(this.getSampleIndices(this.shapeBy)),this.sizeBy&&this.getSampleIndices(this.sizeBy)>-1&&r.push(this.getSampleIndices(this.sizeBy))),s.match(/Area/))return{x:this.data.x,y:{vars:o(a),smps:this.data.y.smps,data:c(a)},z:n(a)};if(this.isGroupedData){var p={x:{},w:{},z:n(a)};"Boxplot"==s&&null!=r[1]&&(p.y={data:this.data.y.data[a[0]][r[1]],vars:this.data.y.vars[r[1]],smps:this.data.y.smps[r[1]]});for(var g in this.data.w)"smps"==g?p.w[g]=l(r,!0):"grps"==g?p.w[g]=d(r):"vars"==g?p.w[g]=o(a):this.data.w[g].length>a[0]&&this.data.w[g][a[0]].length>r[0]&&(p.w[g]=[],p.w[g].push(this.data.w[g][a[0]][r[0]]));for(var g in this.data.x){for(var f=[],u=0;u<p.w.grps[0].length;u++)f.push(this.data.x[g][p.w.grps[0][u]]);p.x[g]=f}}else{var p={x:h(r),y:{vars:o(a),smps:l(r)},z:n(a)};if("Candlestick"==s){for(var g in this.data.y)if(g&&"vars"!=g&&"smps"!=g&&"desc"!=g){p.y[g]=[];for(var u=0;u<a.length;u++){p.y[g][u]=[];for(var v=0;v<r.length;v++)p.y[g][u].push(this.data.y[g][a[u]][r[v]])}}}else if(p.y.data=c(a,r),this.isMultidimensionalHeatmap)for(var x=["outline","shape","size"],u=0;u<x.length;u++){var y=x[u]+"ByData";this.data.y[this[y]]&&(p.y[this[y]]=c(a,r,this[y]))}}return p;case"Correlation":if(!t||isNaN(t[0])&&!t[0].match(/^\d/))return;var b=this.isGroupedData?this.data.w.cor:this.data.y.cor;if("samples"==this.correlationAxis){var p={x:{},y:{}};for(var g in this.data.x){for(var f=[],u=0;u<t.length;u++)f.push(this.data.x[g][t[u]]);p.x[g]=f}p.y.smps=[this.data.y.smps[t[0]],this.data.y.smps[t[1]]]}else{var p={y:{},z:{}};for(var g in this.data.y){for(var w=[],u=0;u<t.length;u++)w.push(this.data.y[g][t[u]]);p.z[g]=w}p.y.vars=[this.data.y.vars[t[0]],this.data.y.vars[t[1]]]}return p.y.data=b[t[0]][t[1]],p;case"Venn":var p={venn:{data:{}}};return p.venn.data[this.vennCompartments[t[0]]]=this.data.venn.data[this.vennCompartments[t[0]]],p;case"Network":var p={};if(!t||0==t.length)return;if(isNaN(t[0])){if(t[0]=t[0].toString(),t[0].match(/legend/))if(t[0].match(/Nodes/))p={nodeLegend:this.data.legend.nodes};else if(t[0].match(/Edges/))p={edgeLegend:this.data.legend.edges};else if(t[0].match(/Decorations/))p={decorationLegend:this.data.legend.decorations};else{var C=parseInt(t[0].replace("-1-legend-Text",""));p={textLegend:this.data.legend.text[C]}}}else for(var u=0;u<t.length;u++)t[u]>=this.data.nodes.length?(p.edges||(p.edges=[]),p.edges.push(this.data.edges[t[u]-this.data.nodes.length])):(p.nodes||(p.nodes=[]),p.nodes.push(this.data.nodes[t[u]]));return p;case"Genome":var s,p=[];p[0]={data:[]};for(var C=0,T=isNaN(t[0])&&t[0].match(":")?t[0].match(/:(\d+)/)[1]:!1,u=0;u<this.data.tracks.length;u++){var D=this.data.tracks[u].data.length;if(C+=D,isNaN(t[0])){if(t[0]=="track-"+u)return{name:this.data.tracks[u].name};if(t[0]=="track-"+u+":"+T){var S=parseInt(T)-(C-D);for(var g in this.data.tracks[u])"data"==g?p[0][g].push(this.data.tracks[u][g][S]):p[0][g]=this.data.tracks[u][g];return p}}else if(t[t.length-1]<C){for(var v=0;v<t.length;v++){var S=t[v]-(C-D);for(var g in this.data.tracks[u])"data"==g?p[0][g].push(this.data.tracks[u][g][S]):p[0][g]=this.data.tracks[u][g]}return p}}}},this.getSummaryDataObject=function(t){if(!t)return"";switch(this.graphType){case"Bar":case"Line":case"Area":case"AreaLine":case"BarLine":case"Boxplot":case"Dotplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Circular":var e="";if(t.display)return"<b>"+t.display+"</b><br>";if(this.isGroupedData&&t.w){if(e="<b>"+t.w.vars[0]+"</b><br>","mean"==this.summaryType)for(var i=0;i<t.w.smps.length;i++)e+="<b>"+t.w.smps[i]+"</b>: "+t.w.mean[i]+"<br>";else if("median"==this.summaryType||"iqr"==this.summaryType)for(var i=0;i<t.w.smps.length;i++)e+="<b>"+t.w.smps[i]+"</b>: "+t.w.median[i]+"<br>";else if("sum"==this.summaryType)for(var i=0;i<t.w.smps.length;i++)e+="<b>"+t.w.smps[i]+"</b>: "+t.w.sum[i]+"<br>"}else if(t.y){e="<b>"+t.y.vars[0]+"</b><br>";for(var i=0;i<t.y.smps.length;i++)if(this.isMultidimensionalHeatmap){for(var s=[t.y.data[0][i]],a=["outline","shape","size"],r=0;r<a.length;r++){var h=a[r]+"ByData";t.y[this[h]]&&t.y[this[h]][0][i]&&s.push(t.y[this[h]][0][i])}e+="<b>"+t.y.smps[i]+"</b>: "+s.join(", ")+"<br>"}else e+="<b>"+t.y.smps[i]+"</b>: "+t.y.data[0][i]+"<br>"}else t.t&&(e="<b>"+t.t.t+"</b><br>Depth: "+t.t.d+"<br>");return e;case"Pie":for(var n="<b>"+t.y.smps[0]+"</b><br>",i=0;i<t.y.vars.length;i++){var o=sprintf("%."+this.pieSegmentPrecision+"f",t.y.data[i]/this.varPie.tot*100);n+="<b>"+t.y.vars[i]+"</b>: "+t.y.data[i]+" ("+o+"%)<br>"}return n;case"Candlestick":return dateFormat(t.y.smps[0],this.timeFormat)+", "+t.y.close[0];case"Correlation":var n;return n="samples"==this.correlationAxis?t.y.smps[0]+" vs "+t.y.smps[1]:t.y.vars[0]+" vs "+t.y.vars[1];case"Venn":for(var l in t.venn.data)return l+" = "+t.venn.data[l];case"Network":var n;if(t&&t.nodes)t.nodes[0]&&(n=t.nodes[0].hideTooltip?"":t.nodes[0].tooltip||t.nodes[0].name||t.nodes[0].label||t.nodes[0].id);else if(t&&t.edges){var d=this.nodes[t.edges[0].id1],c=this.nodes[t.edges[0].id2];n=(d.label||d.id)+" - "+(c.label||c.id),n=t.edges[0].hideTooltip?"":t.edges[0].tooltip||t.edges[0].name||t.edges[0].label||n}return n;case"Genome":return t.name||t[0].data[0].id}},this.setUserEvents=function(){if(this.userEvents={},!this.disableEvents){var t=this;this.events&&this.events.enddragnode&&(this.userEvents.enddragnode=this.events.enddragnode),this.events&&this.events.stackchange&&(this.userEvents.stackchange=this.events.stackchange),this.events&&this.events.select&&(this.userEvents.select=this.events.select),this.events&&this.events.enddraw&&(this.userEvents.enddraw=this.events.enddraw),this.userEvents.mouseout=this.events&&this.events.mouseout?this.events.mouseout:function(t,e,i){i.resetInfoSpan(e)},this.userEvents.contextmenu=this.events&&this.events.contextmenu?this.events.contextmenu:function(t,e,i,s){"Network"==i.graphType&&(t&&t.nodes&&1==t.nodes.length?i.selectNode&&!i.selectNode[t.nodes[0].id]&&i.addRemoveToSelectedDataPoints(!1,s):t&&t.edges&&1==t.edges.length),i.addMenu(e)},this.userEvents.click=this.events&&this.events.click?this.events.click:function(t,e,i){return t&&t.t?i.modifyDendrogram(t):t.nodes&&1==t.nodes.length&&t.nodes[0].links?i.showLinkDiv(e,t.nodes[0].links,null!=t.nodes[0].label?t.nodes[0].label:t.nodes[0].name?t.nodes[0].name:t.nodes[0].id):t.edges&&1==t.edges.length&&t.edges[0].links?i.showLinkDiv(e,t.edges[0].links,null!=t.edges[0].label?t.edges[0].label:t.edges[0].name?t.edges[0].name:t.edges[0].id1+"-"+t.edges[0].id2):i.updateDataTable(t),!1},this.userEvents.dblclick=this.events&&this.events.dblclick?this.events.dblclick:function(e){return e&&alert(t.prettyJSON(e)),!1};for(var e=["mouseover","mousemove"],i=0;i<e.length;i++)this.userEvents[e[i]]=this.events&&this.events[e[i]]?this.events[e[i]]:function(e,i){var s=t.getSummaryDataObject(e);s&&""!=s&&t.showInfoSpan(i,s)}}},this.resetFlags=function(t){this.resetOn=!0,this.animationOn=!1,this.draggingOn=!1,this.movingOn=!1,this.panningOn=!1,this.changingColorOn=!1,this.keyOn=!1,this.xMouseDown=!1,this.yMouseDown=!1,this.touches=!1,this.toucheEvent=!1,this.moveNode=!1,this.moveNodeIndex=!1,this.moveNodeLab=!1,this.moveNodeDec=!1,this.moveLegend=!1,this.moveNodeX=!1,this.moveNodeY=!1,this.moveNodeW=!1,this.moveNodeH=!1,this.moveGenome=!1,this.moveVar=!1,this.moveSmp=!1,t&&this.stopEvent(t),document.defaultAction=!0,document.body.style.cursor="default"},this.mousemoveDoc=function(t){return function(e){e||(e=window.event);var i=t.getTargetEvent(e);if("CanvasXpress"!=i.className||CanvasXpress.resizing||(CanvasXpress.current=i.id),CanvasXpress.current&&CanvasXpress.current==t.target||CanvasXpress.resizing){if(this.toolbarPermanent||t.isToolbar(e),t.isVersion(e)){var s=this.$(t.target);s.style.cursor="help",t.showInfoSpan([e.clientX,e.clientY+50],"CanvasXpress ("+t.version+")")}else if(t.filteringNumericOn)t.preventSelection(),t.updateNumericFilter(e);else if(t.filteringStringOn)t.preventSelection(),t.updateStringFilter(e);else if(t.draggingTargetOn)t.preventSelection(),t.updateMousemove(e);else if(t.resizingDataTableOn)t.preventSelection(),t.updateDataTableResizerDiv(e);else if(t.axesResizingOn)t.preventSelection(),t.mousemoveAxesResize(e);else if(t.resizingDataTableColumnOn)t.preventSelection(),t.mousemoveDataTableHeader(e);else if(t.changingColorOn)t.preventSelection(),t.updateColorValue(e);else if(!t.configuringOn||t.configuratorLastState&&"docked"==t.configuratorLastState){t.draggingOn?(t.preventSelection(),t.cancelEvent(e),t.updateDrag(e),t.lastCanvasEvent="drag"):t.resizingCanvasOn&&t.resizeCanvasCursorShow?(t.preventSelection(),t.cancelEvent(e),t.updateCanvasResizer(e),t.lastCanvasEvent="resize"):t.mobileApp||(t.cancelEvent(e),t.updateCanvasResizerCursor(e));var a="Genome"==t.graphType?t.isEvent(e,!1,!0):t.isEvent(e);a?"CanvasXpress"==i.className&&t.handleMouseEvents("mousemove",e,a):t.resetInfoSpan(e,!0)}}else t.cancelEvent(e);return!1}}(this),this.registerMousemove=function(t){return function(e){e||(e=window.event);var i=e.target||e.srcElement;(1==e.button&&null!=window.event||0==e.button)&&t.hasClass(i,"draggable")&&(t.activeTarget&&(t.activeTarget.style.zIndex=1e4),t.draggableTarget=i.parentNode&&t.hasClass(i.parentNode,"draggable-container")?i.parentNode:i,t.activeTarget=t.draggableTarget,t.activeTarget.style.zIndex=10001,t.xMouseDown=e.clientX,t.yMouseDown=e.clientY,t.draggableXoffset=parseInt(t.draggableTarget.style.left)||0,t.draggableYoffset=parseInt(t.draggableTarget.style.top)||0,t.draggingTargetOn=!0)}}(this),this.updateMousemove=function(t){if(t||(t=window.event),this.draggableTarget&&this.draggableTarget.style){var e=this.draggableXoffset+t.clientX-this.xMouseDown,i=this.draggableYoffset+t.clientY-this.yMouseDown;this.draggableTarget.style.left=e+"px",this.draggableTarget.style.top=i+"px",this.draggableLastX=e,this.draggableLastY=i,this.draggableTarget.id==this.target+"-cX-DataTable"&&"docked"==this.dataTableLastState&&this.moveDataTableDiv("release")}},this.endMousemove=function(){null!=this.draggableTarget&&(this.moveDataTableDiv(),document.onselectstart=null,this.xMouseDown=null,this.yMouseDown=null,this.draggableXoffset=null,this.draggableYoffset=null,this.draggableTarget.ondragstart=null,this.draggableTarget=!1,this.draggingTargetOn=!1)},this.mouseupDoc=function(t){return function(e){e||(e=window.event),CanvasXpress.current&&CanvasXpress.current==t.target&&(t.draggingTargetOn?t.endMousemove(e):t.resizingDataTableOn?t.endDataTableResizerDiv(e):t.resizingDataTableColumnOn?t.endDataTableColumnResize(e):t.changingColorOn?t.endColorChange(e):(!t.configuringOn||t.configuratorLastState&&"docked"==t.configuratorLastState)&&(t.stopEvent(e),t.endDrag(e),t.endCanvasResizer(e),t.endAxesResizer(e),t.endNumericFilter(e),t.endStringFilter(e),t.resetFlags(e)))}}(this),this.touchendDoc=function(t){return function(e){if(CanvasXpress.current&&CanvasXpress.current==t.target){if(!t.touchEvent||!t.mobileApp||!t.touches)return t.mouseupDoc(e);var i=(t.layoutComb?t.layoutParams[t.layoutValidN].graphType:t.graphType,t),s=function(){if(clearTimeout(s),i.touches.length>1){{var t=i.touches[0],a=i.touches[1],r=Math.abs(a[0]-t[0]),h=Math.abs(a[1]-t[1]);180*Math.atan2(a[1]-t[1],a[0]-t[0])/Math.PI}i.touchEvent=20>r&&20>h?"dbltap":"pinch"}else if("drag"!=i.touchEvent){if("dbltap"==i.touchEvent||"pinch"==i.touchEvent)return!1;i.touchEvent="tap"}if("pinch"==i.touchEvent&&i.touchesEnd.length>1){if(i.graphType.match(/Network|Genome|Heatmap|Bar|Line|Dotplot|Boxplot|Area|Stacked|Scatter3D|Circular/)){var n=i.euclidianDistance([i.touches[0][0],i.touches[1][0]],[i.touches[0][1],i.touches[1][1]]),o=i.euclidianDistance([i.touchesEnd[0][0],i.touchesEnd[1][0]],[i.touchesEnd[0][1],i.touchesEnd[1][1]]),l=(i.touchesEnd[0][0]+i.touchesEnd[1][0])/2,d=(i.touchesEnd[0][1]+i.touchesEnd[1][1])/2,c=i.zoomStep;i.zoomStep*=3,i.resetFlags(e),i.handleWheelEvent(e,o-n,{x:l,y:d}),i.zoomStep=c}return i.touchesEnd=!1,!1}if("dbltap"==i.touchEvent)return i.stopEvent(e),i.addConfigurator(e,!1,3,3),i.resetFlags(e),!1;if("tap"==i.touchEvent){var p=i.getEventDataId(e);return p?i.handleMouseEvents("click",e,p):i.resetSelectedObjects(),i.resetFlags(e),!1}i.stopEvent(e),i.endDrag(e),i.endCanvasResizer(e),i.endAxesResizer(e),i.resetFlags(e)},a=t.adjustedCoordinates(e);a&&(t.touchesEnd||(t.touchesEnd=[]),t.touchesEnd.push([a.x,a.y,(new Date).getTime()]),setTimeout(s,250))}}}(this),this.keydownDoc=function(t){return function(e){e||(e=window.event),CanvasXpress.current&&CanvasXpress.current==t.target&&t.registerKey(e)}}(this),this.keyupDoc=function(t){return function(e){e||(e=window.event);var i=t.getTargetEvent(e);CanvasXpress.current&&CanvasXpress.current==t.target&&(t.keyOn=!1,i.id.match(/cX-DataFilterInput/)?t.updateSelectStringFilter(i.id):t.configuringOn?t.selectConfig(e):t.remoteService&&t.selectDataSet(e))}}(this),this.resizeWindow=function(t){return function(e){return e||(e=window.event),t.resizeImage&&t.resizeImage(!0),!1}}(this),this.initDocEvents=function(){this.addEvtListener(document,"mousemove",this.mousemoveDoc,!1),this.addEvtListener(document,"touchmove",this.mousemoveDoc,!1),this.addEvtListener(document,"mouseup",this.mouseupDoc,!1),this.addEvtListener(document,"touchend",this.touchendDoc,!1),this.addEvtListener(document,"keydown",this.keydownDoc,!1),this.addEvtListener(document,"keyup",this.keyupDoc,!1),this.addEvtListener(window,"resize",this.resizeWindow,!1)},this.initializeEvents=function(){this.setUserEvents(),this.initViewport(),this.initToolbarTooltip(),this.initMenuLinks(),this.initConfigurator(),this.initDataFilter(),this.initDataTable(),this.initDraggingEvents(),this.initCanvasResizerEvents(),this.initAxisResizerEvents(),this.initKeyEvents(),this.initSelectEvents(),this.initDendrogramEvents(),this.initCanvasEvents(),this.initAcknowlegments(),this.initCodeInfo(),this.initDocEvents(),this.initCleanupEvents()},this.initializeEvents()},CanvasXpress.prototype.initAnimation=function(){this.saveSnapshot=function(){var t=this.cloneVisualData(this.data);t&&this.snapshots.push(t)},this.playSnapshot=function(t,e,i){if(!(this.snapshots.length<1)){this.stopSnapshotPlay();var s=this;this.snapshotPlay={idx:0,time:t,task:setTimeout(function(){s.nextSnapshot(i)},0),callback:e,oldData:this.data},this.snapshotPaused=!1}},this.nextSnapshot=function(t){if(this.snapshotPlay.idx>=this.snapshots.length&&(this.snapshotPlay.callback?this.snapshotPlay.callback.call(this,t):this.snapshotPlay.idx=0),this.snapshotPlay){var e=this.snapshotPlay.time||this.snapshots[this.snapshotPlay.idx].time||50;this.loadData(this.snapshots[this.snapshotPlay.idx++],!0);var i=this;this.snapshotPlay.task=setTimeout(function(){i.nextSnapshot(t)},e),this.snapshotPaused=!1}},this.stopSnapshotPlay=function(t){this.snapshotPlay&&(clearTimeout(this.snapshotPlay.task),this.loadData(this.snapshotPlay.oldData,t),delete this.snapshotPlay,this.snapshotPaused=!1)},this.clearSnapshot=function(){this.stopSnapshotPlay(!0),this.snapshots=[],this.snapshotPaused=!1},this.duplicateSnapshot=function(){if(!(this.snapshots.length<1)){var t=(this.snapshotPlay?this.snapshotPlay.idx:this.snapshots.length)-1,e=this.cloneVisualData(this.snapshots[t]);this.snapshotPlay?(this.snapshots.splice(t+1,0,e),this.snapshotPlay.idx++):this.snapshots.push(e)}},this.makeSnapshotPlay=function(){this.snapshotPlay?this.pauseSnapshot():this.snapshotPlay={idx:this.snapshots.length,oldData:this.data}},this.moveSnapshot=function(t){if(!(this.snapshots.length<1)){this.makeSnapshotPlay();var e=this.snapshotPlay.idx-1,i=e+t;i>=0&&i<=this.snapshots.length&&this.snapshots.splice(i,0,this.snapshots.splice(e,1)[0]),this.snapshotPlay.idx=i+1}},this.prevSnapshotOnce=function(){this.snapshots.length<2||(this.makeSnapshotPlay(),this.snapshotPlay.idx-=2,this.snapshotPlay.idx<0&&(this.snapshotPlay.idx=0),this.loadData(this.snapshots[this.snapshotPlay.idx++],!0),this.snapshotPaused=!0)},this.nextSnapshotOnce=function(){this.snapshotPlay&&(this.snapshotPlay.idx<this.snapshots.length&&this.loadData(this.snapshots[this.snapshotPlay.idx++],!0),this.snapshotPaused=!0)},this.hasNextSnapshot=function(){return this.snapshots.length>1&&this.snapshotPlay&&this.snapshotPaused&&this.snapshotPlay.idx<this.snapshots.length},this.hasPrevSnapshot=function(){return this.snapshots.length>1&&(!this.snapshotPlay||this.snapshotPlay.idx>1&&this.snapshotPaused)},this.updateSnapshot=function(){this.snapshotPlay&&(this.snapshots[this.snapshotPlay.idx-1]=this.cloneVisualData(this.data))},this.pauseSnapshot=function(){this.snapshotPlay&&(this.snapshotPlay.task&&clearTimeout(this.snapshotPlay.task),this.snapshotPaused=!0)},this.setSnapshotTime=function(t){t>0&&(this.snapshots[this.snapshotPlay.idx-1].time=t)},this.getSnapshotTime=function(){return this.snapshots[this.snapshotPlay.idx-1].time||50},this.assembleObj=function(t,e,i){var s=[];if(!e[i])return t[i];e[i].indices||(e[i].indices={});for(var a=0;a<t[i].length;a++){var r=t[i][a],h=r.id||r.id1+"-"+r.id2;if(!e[i].deleted[h]){var n=e[i].changed[h];if(n)for(var o in n)r[o]=n[o];var l=null!=e[i].indices[h]?e[i].indices[h]:"nodes"==i?t.nodeIndices[h]:t.edgeIndices[h];s[l]=r,e[i].indices[h]=l}}for(var h in e[i].added)s[e[i].indices[h]]=e[i].added[h];return s},this.assembleData=function(t,e){var i={};return i.nodes=this.assembleObj(t,e,"nodes"),i.nodeIndices=e.nodes&&e.nodes.indices?e.nodes.indices:t.nodeIndices,i.edges=this.assembleObj(t,e,"edges"),i.legend=e.legend||t.legend,i},this.loadData=function(t,e){switch(this.data=t,this.graphType){case"Bar":case"Line":case"BarLine":case"Dotplot":case"Scatter2D":case"ScatterBubble2D":case"Circular":break;case"Scatter3D":case"Area":case"AreaLine":case"Boxplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Candlestick":case"Correlation":case"Venn":case"Pie":case"Genome":return!1;case"Network":"changedData"==this.data.type&&(this.data=this.assembleData(this.cloneObject(this.snapshotsBase),this.cloneObject(this.data))),this.edges=this.data.edges;for(var i={},s=0;s<this.data.nodes.length;s++){var a=this.data.nodes[s];i[a.id]=a}this.nodes=i}e&&this.draw(!1,!1,!0)},this.changedNodeData=function(t,e){var i={deleted:{},changed:{},added:{}};for(var s in t.nodeIndices){var a=e.nodeIndices[s];if(null==a)i.deleted[s]=1;else{var r=t.nodes[t.nodeIndices[s]],h=e.nodes[a],n={id:s},o=!1;for(var l in h)this.isSameObject(h[l],r[l])||(n[l]=h[l],o=!0);o&&(i.changed[s]=n)}}for(var s in e.nodeIndices)null==t.nodeIndices[s]&&(i.added[s]=e.nodes[e.nodeIndices[s]]);return i.indices=this.changedIndices(t.nodeIndices,e.nodeIndices),i},this.getEdgeIndices=function(t){var e={};if(t.edges.length)for(var i=0;i<t.edges.length;i++){var s=t.edges[i];e[s.id1+"-"+s.id2]=i}return e},this.changedEdgeData=function(t,e){var i={deleted:{},changed:{},added:{}};t.edgeIndices||(t.edgeIndices=this.getEdgeIndices(t));var s=this.getEdgeIndices(e);for(var a in t.edgeIndices){var r=s[a];if(null==r)i.deleted[a]=1;else{var h=e.edges[r];this.isSameObject(t.edges[t.edgeIndices[a]],h)||(i.changed[a]=h)}}for(var a in s)null==t.edgeIndices[a]&&(i.added[a]=e.edges[s[a]]);return i.indices=this.changedIndices(t.edgeIndices,s),i},this.changedIndices=function(t,e){var i={};for(var s in e)(null==t[s]||t[s]!=e[s])&&(i[s]=e[s]);return i},this.getSnapshotChanged=function(t){var e=this.snapshotsBase;return{type:"changedData",nodes:this.changedNodeData(e,t),edges:this.changedEdgeData(e,t),legend:this.isSameObject(e.legend,t.legend)?null:t.legend}},this.cloneVisualData=function(t){switch(this.graphType){case"Bar":case"Line":case"BarLine":case"Dotplot":case"Scatter2D":case"ScatterBubble2D":case"Circular":return this.cloneObject(t);case"Scatter3D":case"Area":case"AreaLine":case"Boxplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Candlestick":case"Correlation":case"Venn":case"Pie":case"Genome":return!1;case"Network":if(this.snapshotCopyChangeOnly)return this.snapshots.length?"changedData"==t.type?this.cloneObject(t):this.getSnapshotChanged(t):(this.snapshotsBase=this.cloneObject(t),{type:"changedData"});if(!this.snapshotNoCopyData)return this.cloneObject(t);var e={nodes:[],edges:[]};if(t.nodes&&t.nodes.length)for(var i=0;i<t.nodes.length;i++){for(var s={},a=t.nodes[i],r=["outline","width","height","pattern","rotate","color","shape","size","x","y","id","hideLabel","hideChildren","hideParent","label","labelX","labelY","labelSize","name","hide","anchor","parentNode","imagePath"],h=0;h<r.length;h++)s[r[h]]=a[r[h]];e.nodes.push(s)}if(t.edges&&t.edges.length)for(var i=0;i<t.edges.length;i++){for(var s={},a=t.edges[i],r=["color","width","type","id1","id2","anchor"],h=0;h<r.length;h++)s[r[h]]=a[r[h]];e.edges.push(s)}return e}},this.isValidAnimation=function(){switch(this.graphType){case"Bar":case"Line":case"BarLine":case"Dotplot":case"Scatter2D":case"ScatterBubble2D":return!0;case"Scatter3D":case"Area":case"AreaLine":case"Boxplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Candlestick":case"Correlation":case"Venn":case"Pie":case"Genome":case"Network":case"Circular":return!1}},this.createAnimation=function(t){switch(this.graphType){case"Bar":case"Line":case"BarLine":case"Dotplot":case"Scatter2D":case"ScatterBubble2D":this.isAnimation=!0;var e=this.cloneVisualData(this.data);if(t.match(/grow|spring|random/)&&this.data.y.data)for(var i=this.animationCycles,s=0;i>s;s++){for(var a=0;a<this.data.y.data.length;a++)for(var r=0;r<this.data.y.data[a].length;r++)if(!isNaN(this.data.y.data[a][r])){var h=this.data.y.data[a][r];this.data.y.data[a][r]="grow"==t?h/i*s:"spring"==t?h/(i-1.5)*(s+1):h/i*Math.floor(Math.random()*s)}this.saveSnapshot(),this.data=this.cloneVisualData(e)}this.data=e,this.saveSnapshot(),this.playSnapshot(this.animationTime,this.stopAnimation);break;case"Scatter3D":case"Area":case"AreaLine":case"Boxplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Candlestick":case"Correlation":case"Venn":case"Pie":case"Genome":case"Network":case"Circular":return}},this.stopAnimation=function(){this.stopSnapshotPlay(),this.snapshots=[],this.isAnimation=!1},this.setSnapshotsData=function(t){this.snapshots=t.ss||t,this.snapshotsBase=t.base},this.getSnapshotsData=function(){return{base:this.snapshotsBase,ss:this.snapshots}},this.createDemoNetworkAnimation=function(t){for(var e=[],i={},s=[],a=0;t>a;a++){var r=a+1;e.push({size:.5,x:Math.floor(Math.random()*t*5),y:Math.floor(Math.random()*t*5),outline:"rgb(255,255,255)",color:"rgb(255,0,0)",id:r,label:r,hideLabel:!0,labelSize:.7,name:"Node "+r,pattern:"closed",shape:"star"}),i[r]=a}var h={nodes:e,nodeIndices:i,edges:[],edgeIndices:{}};s.push({type:"changedData"});for(var n=10,o=5,l=255/o,d=.5/o,c=0;n>c;c++)for(var p=Math.floor(Math.random()*e.length),a=0;o>a;a++){var g=Math.floor(255-(a+1)*l),u=Math.floor((a+1)*l),m=[g,u,u],f={};f[e[p].id]={size:.5+d*(a+1),color:"rgb("+m.join(",")+")"},s.push({type:"changedData",nodes:{deleted:{},added:{},changed:f},time:5})}this.setSnapshotsData({base:h,ss:s})},this.createDemoNetworkAnimation1=function(){var t=[],e=10,i=200,s="ball",a={width:e,x:100,y:0,color:"rgb(0,255,0)",id:s,label:s,hideLabel:!0,labelSize:.7,name:s,pattern:"closed",shape:"sphere"};s="plank";var r={width:200,height:5,x:100,y:i,color:"rgb(255,255,0)",id:s,label:s,hideLabel:!0,labelSize:.7,name:s,pattern:"closed",shape:"rectangle"};s="ref";var h={width:10,x:80,y:0,color:"rgb(0,0,255)",id:s,label:s,hideLabel:!0,labelSize:.7,name:s,pattern:"closed",shape:"sphere"},n={nodes:[a,r,h],nodeIndices:{ball:0,plank:1,ref:2},edges:[],edgeIndices:{}};t.push({type:"changedData"});for(var o=1,l=0;i-e/2>l;l+=e/2,o+=.1){var d=o*o;t.push({type:"changedData",nodes:{deleted:{},added:{},changed:{ball:{y:l,time:25*e>l?50-2*l/e:5}}},time:100/d})}this.setSnapshotsData({base:n,ss:t})},this.fade=function(t,e,i,s){if(t)if(e||(e=1e3),null==t.fadeState&&(t.fadeState=null==t.style.opacity||""==t.style.opacity||"1"==t.style.opacity?2:-2),1==t.fadeState||-1==t.fadeState)t.fadeState=1==t.fadeState?-1:1,t.fadeleft=e-t.fadeleft;else{var a=this;t.fadeState=2==t.fadeState?-1:1,t.fadeleft=e,setTimeout(function(){a.animateFade((new Date).getTime(),t,i,s)},33)}},this.animateFade=function(t,e,i,s){var a=this,r=(new Date).getTime(),h=r-t;if(e.fadeleft<=h)return e.style.opacity=1==e.fadeState?"1":"0",e.style.filter="alpha(opacity = "+(1==e.fadeState?"100":"0")+")",e.fadeState=1==e.fadeState?2:-2,null!=i&&i(),void(s&&setTimeout(function(){a.resetFade(e);for(var t=0;t<s.length;t++)delete e.style[s[t]]},500));e.fadeleft-=h;var n=e.fadeleft/1e3;1==e.fadeState&&(n=1-n),e.style.opacity=n,e.style.filter="alpha(opacity = "+100*n+")",setTimeout(function(){a.animateFade(r,e,i)},33)},this.resetFade=function(t){t&&(t.style.opacity=1,t.style.filter="alpha(opacity = 100)",this.isIE||(delete t.fadeState,delete t.fadeleft))},this.resizeMove=function(t,e,i,s,a,r,h){if(t){r||(r=500);var n=parseInt(t.style.left)||0,o=parseInt(t.style.top)||0,l=parseInt(t.style.width)||0,d=parseInt(t.style.height)||0,c=1;r>0&&(c=r/40);var p=e-n;0!=p&&(p/=c);var g=i-o;0!=g&&(g/=c);var u=s-l;0!=u&&(u/=c);var m=a-d;0!=m&&(m/=c),this.updateResizeMove(t,n,e,p,o,i,g,l,s,u,d,a,m,h)}},this.updateResizeMove=function(t,e,i,s,a,r,h,n,o,l,d,c,p,g){if(t){var u=this;if(e=this.stepResizeMove(e,i,s),a=this.stepResizeMove(a,r,h),n=this.stepResizeMove(n,o,l),d=this.stepResizeMove(d,c,p),t.style.left=Math.round(e)+"px",t.style.top=Math.round(a)+"px",t.style.width=Math.round(n)+"px",t.style.height=Math.round(d)+"px",e==i&&a==r&&d==c&&n==o)return void(null!=g&&g());setTimeout(function(){u.updateResizeMove(t,e,i,s,a,r,h,n,o,l,d,c,p,g)},40)}},this.stepResizeMove=function(t,e,i){return 0==i||t==e?e:(t+=i,i>0&&t>=e||0>i&&e>=t?e:t)},this.transitionAccordion=function(t,e,i,s){var a=this,r=(new Date).getTime(),h=r-t;if(h>=e)return i&&(i.style.height=this.dataFilterHeight+"px"),s&&(s.style.height="0px",s.style.display="none"),void(i&&(i.clientWidth-i.scrollWidth?this.resizeDataFilterForScroller(!0):i.clientHeight<this.canvas.height&&this.dataFilterScroller&&this.resizeDataFilterForScroller()));e-=h;var n=Math.round(e/250*this.dataFilterHeight);i&&("block"!=i.style.display&&(i.style.display="block"),i.style.height=this.dataFilterHeight-n+"px"),s&&(s.style.height=n+"px"),setTimeout(function(){a.transitionAccordion(r,e,i,s)},33)}},CanvasXpress.prototype.initExample=function(){this.exampleRawData={x:{Tissue:["Kidney","Liver","Kidney","Liver","Kidney","Liver","Kidney","Liver"],Donor:["D1","D1","D1","D1","D2","D2","D2","D2"],Time:["1h","1h","2h","2h","1h","1h","2h","2h"]},z:{Symbol:["abc","def","ghi","jkl","mno","pqr"],Cat:["A","A","B","C","D","C"],Class:["A","A","A","A","A","B"]},y:{vars:["Gene1","Gene2","Gene3","Gene4","Gene5","Gene6"],smps:["Smp1","Smp2","Smp3","Smp4","Smp5","Smp6","Smp7","Smp8"],desc:["Intensity","Normalized Intensity"],data:[[10,12,3,4,100,73,42,64],[12,4,60,5,24,14,32,13],[7,12,20,13,49,52,42,92],[21,10,30,8,65,166,47,58],[15,14,100,5,34,30,82,51],[100,82,73,4,3,4,5,2]]},a:{xAxis:["Gene1","Gene2","Gene3"],xAxis2:["Gene4","Gene5","Gene6"]},t:{vars:"((Gene6:0.2,Gene3:0.3):0.2,((Gene1:0.25,(Gene4:0.15,Gene2:0.3):0.2):0.3,Gene5:0.7):0.1)",
smps:"((Smp2:0.8,(Smp4:0.7,((Smp1:0.6,(Smp6:0.2,Smp5:0.1):0.2):0.15,(Smp8:0.15,Smp3:0.05):0.1):0.15):0.2):0.05,Smp7:0.9)"},d:{nlfit:[{param:[1,100,50,1,1.23e-7],label:"Fit Example",type:"reg"}]},l:{vars:[["Gene1","Gene2","Gene3","Gene4","Gene5"],["Gene6"]],weight:[.7,.3],type:["Bar","Line"],desc:["Intensity","Score"]},venn:{data:{A:340,B:562,C:620,D:592,AB:639,AC:456,AD:257,BC:915,BD:354,CD:143,ABC:552,ABD:578,ACD:298,BCD:613,ABCD:148},legend:{A:"List 1",B:"List 2",C:"List 3",D:"List 4"}},nodes:[{id:"Gene1",color:"rgb(255,0,0)",shape:"square",size:1},{id:"Gene2",color:"rgb(255,0,0)",shape:"square",size:1.8},{id:"Gene3",color:"rgb(255,0,0)",shape:"square",size:1.4},{id:"Gene4",color:"rgb(255,0,0)",shape:"square",size:1.2},{id:"Gene5",color:"rgb(255,0,0)",shape:"square",size:1.3},{id:"Gene6",color:"rgb(255,0,0)",shape:"square",size:1},{id:"Gene7",color:"rgb(255,0,0)",shape:"square",size:1},{id:"Gene8",color:"rgb(255,0,0)",shape:"square",size:1},{id:"SNP1",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP2",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP3",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP4",color:"rgb(0,255,0)",shape:"sphere",size:1.5},{id:"SNP5",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP6",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP7",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP8",color:"rgb(0,255,0)",shape:"sphere",size:1.2},{id:"PH1",color:"rgb(0,255,255,0.5)",shape:"triangle",size:1,hideChildren:!1},{id:"PH2",color:"rgb(0,255,255,0.6)",shape:"triangle",size:1,parentNode:"PH1"},{id:"PH3",color:"rgb(0,255,255,0.7)",shape:"triangle",size:1,parentNode:"PH1"},{id:"PH4",color:"rgb(0,255,255,0.8)",shape:"triangle",size:1,parentNode:"PH3"}],edges:[{id1:"Gene1",id2:"Gene2",color:"rgb(51,102,255)",width:"1",type:"line"},{id1:"Gene2",id2:"Gene3",color:"rgb(51,102,255)",width:"1",type:"arrowHeadLine"},{id1:"Gene1",id2:"Gene4",color:"rgb(51,102,255)",width:"1",type:"arrowHeadLine"},{id1:"Gene3",id2:"Gene5",color:"rgb(51,102,255)",width:"1",type:"dashedArrowHeadLine"},{id1:"Gene6",id2:"Gene5",color:"rgb(51,102,255)",width:"1",type:"arrowHeadSquareTailLine"},{id1:"Gene7",id2:"Gene5",color:"rgb(153,153,255)",width:"1",type:"dottedArrowHeadLine"},{id1:"Gene8",id2:"Gene7",color:"rgb(51,102,255)",width:"1",type:"line"},{id1:"Gene4",id2:"Gene7",color:"rgb(51,102,255)",width:"1",type:"squareHeadArrowTailLine"},{id1:"Gene1",id2:"SNP2",color:"rgb(153,102,255)",width:"1",type:"bezierLine"},{id1:"SNP1",id2:"SNP4",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"SNP5",id2:"Gene5",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"SNP1",id2:"PH2",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"SNP1",id2:"Gene2",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"PH4",id2:"SNP7",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"PH2",id2:"Gene5",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"PH1",id2:"Gene7",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"PH3",id2:"Gene2",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"SNP6",id2:"Gene2",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"SNP3",id2:"Gene4",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"SNP4",id2:"Gene5",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"SNP5",id2:"Gene7",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"SNP7",id2:"Gene5",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"SNP8",id2:"Gene6",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"SNP8",id2:"Gene2",color:"rgb(51,102,152)",width:"1",type:"line"}],legend:{nodes:[],edges:[]},tracks:[{name:"Affy Probes",type:"box",connect:!0,fill:"rgb(255,255,51)",outline:"rgb(0,0,0)",data:[{id:"123456_at",dir:"right",data:[[10,20],[30,40],[50,60],[70,80],[90,100]]},{id:"234567_at",dir:"left",data:[[135,145],[155,165],[175,185],[195,205],[215,225]]},{id:"345678_at",dir:"right",data:[[300,310],[320,330],[340,350],[360,370],[380,390]]}]},{name:"Sanger Sequencing",subtype:"DNA",type:"sequence",data:[{id:"Reference Sequence",fill:"rgb(51,255,255)",outline:"rgb(0,0,0)",dir:"right",offset:1,sequence:"TACGTACGTACGTACGTACGTACGTACGT",translate:[-1,2]},{id:"R1-0000-1234",fill:"rgb(255,255,51)",outline:"rgb(0,0,0)",dir:"right",offset:1,gaps:[[4,2],[8,1]],sequence:"TACGCGTAGTACGT",trace:{A:[15,27,47,72,93,101,93,72,47,27,15,54,120,224,350,459,502,459,350,224,120,54,3,4,6,12,24,43,67,86,94,86,67,43,24,12,6,4,3,13,26,45,69,89,97,89,69,45,26,13,13,26,46,70,92,100,92,70,46,26,13,5,12,26,48,75,99,108,99,75,48,26,12,5,2,4,10,22,41,64,83,91,83,64,41,22,10,4,2,22,55,122,226,353,462,505,462,353,226,122,55,22,4,11,24,45,70,92,100,92,70,45,24,11,4,2,3,6,13,28,50,78,102,111,102,78,50,28,13,6,3,2,6,11,26,62,135,249,388,506,553,506,388,249,135,62,26,11,6,6,8,14,26,45,68,87,95,87,68,45,26,14,8,6,11,23,43,67,88,96,88,67,43,23,11,5,6,8,15,28,48,73,94,102,94,73,48,28,15,8,6,5],C:[10,16,26,39,50,54,50,39,26,16,10,7,14,26,40,51,56,51,40,26,14,7,4,8,20,50,109,203,317,414,453,414,317,203,109,50,20,8,4,9,16,26,39,51,55,51,39,26,16,9,56,123,229,357,467,511,467,357,229,123,56,2,6,12,22,35,45,49,45,35,22,12,6,2,1,3,6,13,25,39,50,55,50,39,25,13,6,3,1,5,8,15,26,39,50,55,50,39,26,15,8,5,2,5,11,21,32,42,46,42,32,21,11,5,2,2,2,3,6,12,22,33,43,47,43,33,22,12,6,3,2,2,5,5,6,9,16,25,37,47,51,47,37,25,16,9,6,5,5,10,24,56,121,223,347,453,495,453,347,223,121,56,24,10,6,13,24,37,48,52,48,37,24,13,6,5,5,6,9,15,25,36,46,50,46,36,25,15,9,6,5,5],G:[7,10,15,20,25,27,25,20,15,10,7,4,7,13,19,25,27,25,19,13,7,4,3,3,3,5,8,14,20,25,27,25,20,14,8,5,3,3,3,56,122,226,353,461,504,461,353,226,122,56,5,8,13,19,24,26,24,19,13,8,5,22,58,130,245,383,502,549,502,383,245,130,58,22,1,1,3,7,12,18,24,26,24,18,12,7,3,1,1,3,5,8,13,19,24,26,24,19,13,8,5,3,19,51,114,213,334,437,478,437,334,213,114,51,19,2,2,3,4,8,14,21,26,29,26,21,14,8,4,3,2,2,5,5,5,7,10,15,20,25,27,25,20,15,10,7,5,5,5,5,5,7,10,15,20,25,27,25,20,15,10,7,5,5,53,119,223,349,457,500,457,349,223,119,53,5,5,5,7,10,15,21,26,28,26,21,15,10,7,5,5,5],T:[62,135,249,388,507,554,507,388,249,135,62,2,4,6,8,10,11,10,8,6,4,2,3,3,3,4,5,7,9,12,12,12,9,7,5,4,3,3,3,5,6,8,11,13,14,13,11,8,6,5,4,5,7,10,12,13,12,10,7,5,4,1,2,3,5,8,10,11,10,8,5,3,2,1,7,22,58,130,244,383,501,548,501,383,244,130,58,22,7,3,4,5,7,10,12,13,12,10,7,5,4,3,1,2,3,5,8,10,11,10,8,5,3,2,1,3,8,21,54,119,222,347,454,497,454,347,222,119,54,21,8,3,5,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,5,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,2,3,5,7,9,10,9,7,5,3,2,6,11,25,61,131,242,377,492,538,492,377,242,131,61,25,11,6],peak:[5,16,30,44,55,67,81,95,108,123,140,156,169,183]}},{id:"R1-0000-2345",fill:"rgb(255,255,102)",outline:"rgb(0,0,0)",dir:"right",offset:6,gaps:[[3,1],[10,1]],sequence:"ACGACGTACGACG",trace:{A:[49,110,206,323,424,463,424,323,206,110,49,3,5,12,24,45,69,90,98,90,69,45,24,12,5,3,5,7,14,28,49,75,97,105,97,75,49,28,14,7,5,5,10,25,61,132,245,382,499,545,499,382,245,132,61,25,10,5,7,13,27,48,74,96,105,96,74,48,27,13,7,4,6,13,25,46,70,91,100,91,70,46,25,13,6,4,4,7,14,27,49,76,99,108,99,76,49,27,14,7,4,3,8,22,57,125,234,366,479,524,479,366,234,125,57,22,8,3,5,8,15,30,52,80,104,113,104,80,52,30,15,8,5,7,13,25,44,66,86,94,86,66,44,25,13,7,23,58,127,236,368,482,527,482,368,236,127,58,23,3,4,6,13,26,47,73,95,104,95,73,47,26,13,6,4,3,5,6,9,16,30,52,79,102,111,102,79,52,30,16,9,6,5],C:[5,12,21,33,43,47,43,33,21,12,5,7,21,53,117,218,341,447,488,447,341,218,117,53,21,7,4,5,9,15,26,38,49,53,49,38,26,15,9,5,4,4,4,6,9,16,27,40,51,56,51,40,27,16,9,6,4,4,20,50,109,203,317,415,453,415,317,203,109,50,20,3,4,8,14,25,37,48,52,48,37,25,14,8,4,3,3,4,8,14,24,36,46,50,46,36,24,14,8,4,3,2,2,3,6,13,22,34,44,48,44,34,22,13,6,3,2,2,9,23,55,118,219,342,447,489,447,342,219,118,55,23,9,5,9,16,26,39,50,54,50,39,26,16,9,5,4,8,14,25,37,48,52,48,37,25,14,8,4,4,9,22,55,120,224,349,457,500,457,349,224,120,55,22,9,4,5,5,7,10,17,27,40,51,56,51,40,27,17,10,7,5,5],G:[3,6,11,17,22,24,22,17,11,6,3,2,2,4,7,12,17,22,24,22,17,12,7,4,2,2,10,24,59,129,239,373,487,533,487,373,239,129,59,24,10,4,4,4,6,9,14,20,25,27,25,20,14,9,6,4,4,4,3,5,8,13,19,24,26,24,19,13,8,5,3,9,23,59,129,239,374,489,534,489,374,239,129,59,23,9,3,3,5,8,13,18,23,25,23,18,13,8,5,3,3,2,2,2,4,7,12,17,22,24,22,17,12,7,4,2,2,2,4,4,6,9,14,19,24,26,24,19,14,9,6,4,4,22,52,113,209,325,425,465,425,325,209,113,52,22,3,5,8,13,19,24,26,24,19,13,8,5,3,3,3,3,5,8,14,20,26,28,26,20,14,8,5,3,3,3,6,11,26,62,133,246,383,501,547,501,383,246,133,62,26,11,6],T:[2,3,5,7,10,10,10,7,5,3,2,2,2,2,4,6,8,10,11,10,8,6,4,2,2,2,4,4,4,6,8,10,12,13,12,10,8,6,4,4,4,4,4,4,5,6,8,11,13,14,13,11,8,6,5,4,4,4,3,4,5,7,10,12,13,12,10,7,5,4,3,3,3,3,5,7,9,11,12,11,9,7,5,3,3,3,8,21,52,115,213,333,436,476,436,333,213,115,52,21,8,2,2,2,3,4,6,8,10,11,10,8,6,4,3,2,2,2,4,4,4,6,8,10,12,13,12,10,8,6,4,4,4,4,4,6,8,10,12,13,12,10,8,6,4,4,3,4,5,7,9,11,12,11,9,7,5,4,3,3,3,3,4,5,7,10,12,13,12,10,7,5,4,3,3,3,5,5,5,6,7,9,11,14,14,14,11,9,7,6,5,5,5],peak:[5,18,33,49,64,78,93,109,125,139,152,167,184]}},{id:"R1-0000-3456",fill:"rgb(255,51,255)",outline:"rgb(0,0,0)",dir:"left",offsetLeft:"23",gaps:[[7,2]],sequence:"GTACGTATAC",trace:{A:[4,10,22,41,64,84,92,84,64,41,22,10,4,5,8,15,29,51,79,102,111,102,79,51,29,15,8,5,11,24,58,124,228,356,465,508,465,356,228,124,58,24,11,13,25,45,69,89,97,89,69,45,25,13,1,2,4,11,24,44,69,90,99,90,69,44,24,11,4,2,1,3,6,13,26,48,75,98,107,98,75,48,26,13,6,3,11,24,58,124,228,355,464,507,464,355,228,124,58,24,11,4,7,13,27,49,75,98,107,98,75,49,27,13,7,4,7,19,50,110,206,322,421,460,421,322,206,110,50,19,7,5,8,15,28,50,76,99,108,99,76,50,28,15,8,5],C:[2,6,13,23,36,47,51,47,36,23,13,6,2,4,5,8,14,24,35,45,49,45,35,24,14,8,5,4,5,7,10,17,28,41,53,57,53,41,28,17,10,7,5,59,130,242,377,494,540,494,377,242,130,59,1,1,2,6,12,22,34,44,48,44,34,22,12,6,2,1,1,2,3,6,13,22,34,44,48,44,34,22,13,6,3,2,5,6,9,15,25,36,46,50,46,36,25,15,9,6,5,3,5,8,15,26,39,51,55,51,39,26,15,8,5,3,2,3,7,13,23,35,46,50,46,35,23,13,7,3,2,10,24,57,125,231,360,470,514,470,360,231,125,57,24,10],G:[21,54,122,228,357,467,511,467,357,228,122,54,21,4,4,6,9,14,21,26,28,26,21,14,9,6,4,4,5,6,7,11,16,23,29,31,29,23,16,11,7,6,5,5,8,13,19,24,26,24,19,13,8,5,2,7,21,56,126,236,370,485,531,485,370,236,126,56,21,7,2,2,2,4,7,13,19,24,26,24,19,13,7,4,2,2,5,6,7,11,17,24,30,32,30,24,17,11,7,6,5,3,3,5,8,13,19,24,26,24,19,13,8,5,3,3,2,3,4,8,14,21,26,29,26,21,14,8,4,3,2,4,4,6,10,15,21,27,29,27,21,15,10,6,4,4],T:[1,1,3,5,7,9,10,9,7,5,3,1,1,10,23,57,124,230,358,468,512,468,358,230,124,57,23,10,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,4,5,7,10,12,13,12,10,7,5,4,1,1,1,2,3,5,8,10,11,10,8,5,3,2,1,1,1,8,23,59,130,243,380,498,545,498,380,243,130,59,23,8,5,5,5,7,9,11,13,14,13,11,9,7,5,5,5,8,20,50,110,205,320,418,457,418,320,205,110,50,20,8,2,2,3,4,6,8,10,11,10,8,6,4,3,2,2,4,4,5,6,8,11,13,14,13,11,8,6,5,4,4],peak:[6,20,35,48,62,78,93,108,123,138]}},{id:"R1-0000-4567",fill:"rgb(255,102,255)",outline:"rgb(0,0,0)",dir:"right",offset:15,gaps:[[5,1]],sequence:"CGTACTACGTA",trace:{A:[9,16,29,51,78,100,110,100,78,51,29,16,9,15,28,50,77,100,109,100,77,50,28,15,4,5,7,13,25,44,67,86,94,86,67,44,25,13,7,5,4,4,8,21,53,115,214,335,438,479,438,335,214,115,53,21,8,4,2,3,5,11,23,42,65,85,93,85,65,42,23,11,5,3,2,8,15,29,52,80,103,113,103,80,52,29,15,8,4,9,23,57,126,233,365,477,522,477,365,233,126,57,23,9,4,2,4,10,23,42,66,87,95,87,66,42,23,10,4,2,3,5,12,25,46,71,93,101,93,71,46,25,12,5,3,4,5,8,14,28,50,76,99,108,99,76,50,28,14,8,5,4,19,49,108,202,316,413,452,413,316,202,108,49,19],C:[24,56,121,223,348,454,496,454,348,223,121,56,24,8,14,24,36,46,50,46,36,24,14,8,4,4,5,8,15,24,36,46,50,46,36,24,15,8,5,4,4,3,3,4,8,14,25,38,48,53,48,38,25,14,8,4,3,3,3,8,21,54,119,222,348,455,498,455,348,222,119,54,21,8,3,5,9,15,25,38,48,52,48,38,25,15,9,5,3,3,5,8,15,26,39,51,55,51,39,26,15,8,5,3,3,6,18,48,107,201,315,412,451,412,315,201,107,48,18,6,2,3,6,12,22,33,43,47,43,33,22,12,6,3,2,4,4,6,9,16,28,42,54,58,54,42,28,16,9,6,4,4,3,7,13,24,37,47,52,47,37,24,13,7,3],G:[6,7,11,16,23,29,31,29,23,16,11,7,6,56,121,223,348,455,498,455,348,223,121,56,4,4,5,6,10,16,23,28,31,28,23,16,10,6,5,4,4,3,3,4,5,9,14,21,26,29,26,21,14,9,5,4,3,3,2,2,2,4,7,12,18,24,26,24,18,12,7,4,2,2,2,4,6,9,14,19,24,26,24,19,14,9,6,4,3,3,3,5,8,13,19,24,26,24,19,13,8,5,3,3,3,1,2,3,7,12,19,24,27,24,19,12,7,3,2,1,7,20,51,113,211,330,432,473,432,330,211,113,51,20,7,4,4,4,6,9,15,21,26,29,26,21,15,9,6,4,4,4,3,4,8,13,20,26,28,26,20,13,8,4,3],T:[5,6,7,9,11,13,14,13,11,9,7,6,5,4,6,8,10,12,13,12,10,8,6,4,5,10,24,60,130,241,376,492,538,492,376,241,130,60,24,10,5,3,3,3,3,5,7,9,11,12,11,9,7,5,3,3,3,3,2,2,2,2,4,6,8,10,11,10,8,6,4,2,2,2,2,22,53,114,211,328,429,469,429,328,211,114,53,22,3,3,3,3,5,7,9,11,12,11,9,7,5,3,3,3,3,1,1,2,3,5,7,9,10,9,7,5,3,2,1,1,2,2,2,4,6,8,10,11,10,8,6,4,2,2,2,5,10,24,58,127,235,366,479,524,479,366,235,127,58,24,10,5,2,3,4,6,8,10,11,10,8,6,4,3,2],peak:[6,18,32,49,66,81,96,112,127,143,158]}},{id:"R1-0000-5678",fill:"rgb(51,255,255)",outline:"rgb(0,0,0)",dir:"right",offset:18,gaps:[[7,1]],sequence:"ACGTACGACGT",trace:{A:[10,25,60,131,244,380,497,544,497,380,244,131,60,25,10,5,6,8,15,28,48,73,95,103,95,73,48,28,15,8,6,5,4,6,13,26,47,72,94,102,94,72,47,26,13,6,4,6,8,15,28,49,74,95,104,95,74,49,28,15,8,6,2,7,22,58,129,243,380,498,545,498,380,243,129,58,22,7,2,11,23,43,66,86,94,86,66,43,23,11,5,8,15,28,50,77,100,109,100,77,50,28,15,8,5,6,11,24,58,125,232,361,471,515,471,361,232,125,58,24,11,6,12,24,43,66,85,93,85,66,43,24,12,14,28,50,76,99,108,99,76,50,28,14,5,7,14,27,47,72,93,101,93,72,47,27,14,7,5],C:[4,5,8,15,24,36,46,50,46,36,24,15,8,5,4,6,11,26,62,135,249,388,506,554,506,388,249,135,62,26,11,6,3,5,8,15,25,38,49,54,49,38,25,15,8,5,3,5,6,9,15,25,36,46,50,46,36,25,15,9,6,5,1,1,3,6,13,24,37,49,53,49,37,24,13,6,3,1,1,53,117,219,342,447,489,447,342,219,117,53,4,5,8,15,25,36,47,51,47,36,25,15,8,5,4,5,5,7,10,17,28,41,53,57,53,41,28,17,10,7,5,5,57,124,231,360,471,516,471,360,231,124,57,9,16,27,40,51,55,51,40,27,16,9,4,6,9,16,27,41,52,57,52,41,27,16,9,6,4],G:[4,5,6,10,16,22,28,31,28,22,16,10,6,5,4,5,5,5,7,10,15,21,26,28,26,21,15,10,7,5,5,5,8,21,53,116,216,337,440,482,440,337,216,116,53,21,8,5,6,7,11,17,23,29,32,29,23,17,11,7,6,5,1,1,1,3,6,11,17,22,24,22,17,11,6,3,1,1,1,4,8,13,20,25,27,25,20,13,8,4,9,21,52,111,206,321,420,459,420,321,206,111,52,21,9,5,5,5,7,10,16,22,27,30,27,22,16,10,7,5,5,5,5,8,14,20,25,27,25,20,14,8,5,57,124,230,358,468,512,468,358,230,124,57,4,4,6,9,14,20,25,28,25,20,14,9,6,4,4],T:[4,4,5,6,8,11,14,14,14,11,8,6,5,4,4,5,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,5,3,3,4,5,7,10,12,13,12,10,7,5,4,3,3,11,24,57,122,224,349,456,498,456,349,224,122,57,24,11,1,1,1,2,3,5,8,10,11,10,8,5,3,2,1,1,1,3,4,6,8,11,11,11,8,6,4,3,4,4,5,6,8,11,13,14,13,11,8,6,5,4,4,5,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,5,4,5,7,10,12,13,12,10,7,5,4,4,6,8,10,12,13,12,10,8,6,4,10,25,60,131,242,378,494,540,494,378,242,131,60,25,10],peak:[7,23,39,54,70,84,97,113,127,138,151]}}]},{name:"Tissue Distribution",type:"bar",height:20,fill:["rgb(255,0,0)","rgb(0,0,255)","rgb(255,255,0)"],outline:["rgb(255,0,0)","rgb(0,0,255)","rgb(255,255,0)"],data:[{id:"123456_at",offset:10,data:[25,35,46]},{id:"234567_at",offset:135,data:[80,45,10]},{id:"345678_at",offset:300,data:[65,46,29]}]}],market:[{symbol:"BMY",data:[[20100824,26.26,26.37,25.95,26.02,11625900,26.02],[20100823,26.48,26.76,26.38,26.48,12146600,26.48],[20100820,26.31,26.54,26.08,26.44,18140100,26.44],[20100819,26.2,26.29,25.81,26.06,8218e3,26.06],[20100818,26.53,26.57,26.23,26.28,12235800,26.28],[20100817,26.4,26.79,26.26,26.59,12325700,26.59],[20100816,26.24,26.34,26.04,26.28,10377700,26.28],[20100813,26.24,26.46,26.1,26.32,5760100,26.32],[20100812,26.01,26.39,26,26.33,7350500,26.33],[20100811,26.32,26.5,26.15,26.25,8808100,26.25],[20100810,26.32,26.78,26.3,26.66,7009500,26.66],[20100809,26.37,26.54,26.3,26.51,6825300,26.51],[20100806,26.29,26.45,26.05,26.37,8774900,26.37],[20100805,25.83,26.38,25.8,26.38,12264600,26.38],[20100804,25.7,26.13,25.61,26.03,10233700,26.03],[20100803,25.65,25.85,25.58,25.68,6842900,25.68],[20100802,25.33,25.61,25.29,25.53,9770900,25.53],[20100730,24.98,25.13,24.78,24.92,11435700,24.92],[20100729,25.37,25.5,24.85,25.08,9463800,25.08],[20100728,25.25,25.36,25.02,25.12,8072400,25.12],[20100727,25.09,25.35,24.84,25.32,14152600,25.32],[20100726,24.57,25.03,24.57,24.97,8817400,24.97],[20100723,24.94,24.95,24.26,24.65,13043700,24.65],[20100722,24.96,25.22,24.75,24.93,10385300,24.93],[20100721,24.92,25.11,24.59,24.75,983e4,24.75],[20100720,24.65,25.09,24.46,25.02,10655500,25.02],[20100719,25.27,25.27,24.78,24.84,11804800,24.84],[20100716,25.44,25.47,25.1,25.17,13136300,25.17]]}]},this.exampleBasicData={x:{Tissue:["Kidney","Liver","Breast","Brain"],Donor:["D1","D2","D2","D1"]},z:{Symbol:["abc","def","ghi","jkl","mno","pqr"],Desc:["blah","yeah","maybe","good","bad","awsome"]},y:{vars:["Gene1","Gene2","Gene3","Gene4","Gene5","Gene6"],smps:["Smp1","Smp2","Smp3","Smp4"],desc:["Intensity"],mean:[[1,2,3,4],[2,1,3,6],[3,2,1,5],[4,2,1,3],[4,3,2,1],[9,2,7,4]],stdev:[[1,3,2,1],[2,3,2,1],[2,2,2,1],[2,3,1,1],[1,1,1,1],[3,1,3,1]],n:[[4,5,5,5],[4,5,5,5],[6,4,4,5],[6,4,5,6],[5,5,5,5],[6,5,5,5]]},a:{xAxis:["Gene1","Gene2","Gene3"],xAxis2:["Gene4","Gene5","Gene6"]}}},CanvasXpress.prototype.initData=function(data){this.isValidPlotData=function(t){var e=this.isGroupedData?this.data.w:this.data.y;return"cor"==t&&e.cor?!0:"venn"==t&&this.data.venn?!0:"network"==t&&this.data.nodes?!0:"genome"==t&&this.data.tracks?!0:"sum"==t&&e.sum&&e.sum[0].length>0?!0:"mean"==t&&e.mean&&e.mean[0].length>0?!0:"median"==t&&e.median&&e.median[0].length>0?!0:"iqr"==t&&e.iqr1&&e.qtl1&&e.median&&e.qtl3&&e.iqr3&&e.median[0].length>0?!0:"candle"==t&&e.close&&e.open&&e.high&&e.low&&e.close[0].length>0?!0:"volume"==t&&e.volume&&e.volume[0].length>0?!0:"raw"==t&&this.isRawData?!0:"video"==t&&this.data.video?!0:!1},this.setAllNodesVisible=function(){this.nodes={},this.data.nodeIndices={};for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t];e.hide=!1,this.nodes[e.id]=e,this.data.nodeIndices[e.id]=t}for(var t=0;t<this.data.edges.length;t++)this.data.edges[t].hide=!1;this.filterData()},this.setNodeIndices=function(){this.nodes={},this.data.nodeIndices={};for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t];this.nodes[e.id]=e,this.data.nodeIndices[e.id]=t}},this.setNodes=function(){if(this.data.nodeIndices){this.nodes={};for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t];this.nodes[e.id]=e}this.data.nodes=[];for(var i in this.data.nodeIndices)this.data.nodes[this.data.nodeIndices[i]]=this.nodes[i]}else this.setNodeIndices()},this.hideUnhideNodes=function(t,e){if(e=e?!0:!1,t){if(this.isArray(t))for(var i=0;i<t.length;i++){var s=t[i],a=this.data.nodes[this.data.nodeIndices[s]];a.hide=e,this.nodes&&this.nodes[s]&&(this.nodes[s].hide=e)}}else for(var i=0;i<this.data.nodes.length;i++){var a=this.data.nodes[i];a.hide=e,a.hideChildren=e,this.nodes&&this.nodes[a.id]&&(this.nodes[a.id].hide=e,this.nodes[a.id].hideChildren=e)}},this.hideUnhideChildrenNodes=function(t,e){if(e=e?!0:!1,this.nodeParentHood[t]&&this.nodeParentHood[t].children)for(var i=0;i<this.nodeParentHood[t].children.length;i++){var s=this.nodeParentHood[t].children[i];this.data.nodes[this.data.nodeIndices[s]].hiddenParent=e,this.hideUnhideChildrenNodes(s,e)}},this.resetNodeFilters=function(t){null!=t&&this.filterNodeBy.length>0?(this.filterNodeBy.splice(t,1),this.filterNodeByOp.splice(t,1),this.filterNodeByValue.splice(t,1),this.filterNodeByCase.splice(t,1)):(this.filterNodeBy=[],this.filterNodeByOp=[],this.filterNodeByValue=[],this.filterNodeByCase=[])},this.resetEdgeFilters=function(t){null!=t&&this.filterEdgeBy.length>0?(this.filterEdgeBy.splice(t,1),this.filterEdgeByOp.splice(t,1),this.filterEdgeByValue.splice(t,1),this.filterEdgeByCase.splice(t,1)):(this.filterEdgeBy=[],this.filterEdgeByOp=[],this.filterEdgeByValue=[],this.filterEdgeByCase=[])},this.setAllFeaturesVisible=function(){for(var t=0;t<this.data.tracks.length;t++){var e=this.data.tracks[t];e.hide=!1;for(var i=e.data,s=0;s<i.length;s++)i[s].hide=!1}},this.resetFeatureFilters=function(t){null!=t&&this.filterFeatureBy.length>0?(this.filterFeatureBy.splice(t,1),this.filterFeatureByOp.splice(t,1),this.filterFeatureByValue.splice(t,1),this.filterFeatureByCase.splice(t,1)):(this.filterFeatureBy=[],this.filterFeatureByOp=[],this.filterFeatureByValue=[],this.filterFeatureByCase=[])},this.setSelectNodes=function(t){this.selectNode={},this.isSelectNodes=0;for(var e=0;e<t.length;e++)this.selectNode[t[e]]=!0,this.isSelectNodes++},this.getAnnotations=function(t){var e=[];if(t){if(this.data.z)for(var i in this.data.z)e.push(i)}else if(this.data.x)for(var i in this.data.x)e.push(i);return e},this.getNetworkImages=function(){var t=[];if("Network"==this.graphType)for(var e=0;e<this.data.nodes.length;e++){var i=this.data.nodes[e];i.imagePath&&(i.imagePath.match(/^http:\/\//)||(i.imagePath=this.imageDir+i.imagePath),t.push(i.imagePath))}return t},this.setAllVariablesVisible=function(t){if(this.data.y){if(!this.data.y.vars&&this.data.y.data){this.data.y.vars=[];for(var e=0;e<this.data.y.data.length;e++)this.data.y.vars.push("var"+(e+1))}if(this.varIndices=[],this.hiddenVars=[],t)for(var e=0;e<t.length;e++)this.varIndices.push(t[e]),this.hiddenVars.push(!1);else for(var e=0;e<this.data.y.vars.length;e++)this.varIndices.push(e),this.hiddenVars.push(!1);this.filterData();var i=this.layoutComb?this.layoutCurrent:0;this.startingVarIndices&&(this.startingVarIndices[i]&&this.startingVarIndices[i].length==this.varIndices.length?this.varIndices=this.startingVarIndices[i]:this.startingVarIndices[i]=[])}this.data.y&&this.data.a&&(this.xAxisVarIndices=[],this.xAxis2VarIndices=[],this.data.a.xAxis&&(this.xAxisVarIndices=this.getVariableIndices(this.data.a.xAxis)),this.data.a.xAxis2&&(this.xAxis2VarIndices=this.getVariableIndices(this.data.a.xAxis2)))},this.resetVariablesVisibleByAxis=function(t){this.data.a&&this.setVariablesVisibleByAxis(t,this.getVariableIndices(this.data.a[t]))},this.setVariablesVisibleByAxis=function(t,e){var i=t+"VarIndices";this[i]=[];for(var s=0;s<e.length;s++)this[i].push(e[s])},this.getVariablesVisibleByAxis=function(t){return this[t+"VarIndices"]},this.getVariablesByAxis=function(t){return this.data.a&&this.data.a[t]?this.data.a[t]:[]},this.getVariablesByAnnotationLevel=function(t,e){var i=[];if(t&&this.data.z[t])if(e)for(var s=0;s<this.varIndices.length;s++){var a=this.varIndices[s];this.data.z[t][a]!=e||this.hiddenVars[a]||i.push(a)}else for(var s=0;s<this.varIndices.length;s++){var a=this.varIndices[s];this.data.z[t][a]||this.hiddenVars[a]||i.push(a)}return i},this.setVariablesVisible=function(t){this.varIndices=[];for(var e=0;e<t.length;e++)this.varIndices.push(t[e])},this.getVariableIndices=function(t){if(t&&this.data.y.vars){var e=[];if(!this.isArray(t)){for(var i=0;i<this.data.y.vars.length;i++)if(this.data.y.vars[i]==t)return i;return-1}if(t.length>0){for(var i=0;i<t.length;i++)for(var s=0;s<this.data.y.vars.length;s++)if(this.data.y.vars[s]==t[i]){e.push(s);break}return e}}},this.hideUnhideVars=function(t){if(t){if(this.isArray(t)){for(var e=0;e<t.length;e++)for(var i=0;i<this.data.y.vars.length;i++)if(this.data.y.vars[i]==t[e]){this.hiddenVars[i]=this.hiddenVars[i]?!1:!0;break}}else for(var e=0;e<this.data.y.vars.length;e++)if(this.data.y.vars[e]==t){this.hiddenVars[e]=this.hiddenVars[e]?!1:!0;break}for(var s=[],e=0;e<this.data.y.vars.length;e++)this.hiddenVars[e]||s.push(e);this.setVariablesVisible(s);var a=["xAxis","xAxis2"];if(this.data.a)for(var e=0;e<a.length;e++){var r=this.getVariableIndices(this.data.a[a[e]]);if(r.length>0){for(var s=[],i=0;i<r.length;i++){var h=r[i];this.hiddenVars[h]||s.push(h)}this.setVariablesVisibleByAxis(a[e],s)}}this.draw()}},this.getVariables=function(){for(var t=[],e=0;e<this.data.y.vars.length;e++){for(var i=-1,s=0;s<this.varIndices.length;s++)if(this.varIndices[s]==e){i=s;break}t.push({name:this.data.y.vars[e],hidden:this.hiddenVars[e],index:i})}return t},this.resetVarFilters=function(t){null!=t&&this.filterVarBy.length>0?(this.filterVarBy.splice(t,1),this.filterVarByOp.splice(t,1),this.filterVarByValue.splice(t,1),this.filterVarByCase.splice(t,1),this.filteredVarIndices.splice(t,1)):(this.filterVarBy=[],this.filterVarByOp=[],this.filterVarByValue=[],this.filterVarByCase=[],this.filteredVarIndices=[])},this.setAllSamplesVisible=function(t){if(this.data.y&&this.data.y.smps){if(!this.data.y.smps&&this.data.y.data&&this.data.y.vars){this.data.y.smps=[];for(var e=0;e<this.data.y.data.vars[0].length;e++)this.data.y.smps.push("smp"+(e+1))}if(this.smpIndices=[],this.hiddenSmps=[],t)for(var e=0;e<t.length;e++)this.smpIndices.push(t[e]),this.hiddenSmps.push(!1);else for(var e=0;e<this.data.y.smps.length;e++)this.smpIndices.push(e),this.hiddenSmps.push(!1);this.filterData(!0)}if(this.data.w&&this.data.w.smps){this.grpIndices=[],this.hiddenGrps=[];for(var e=0;e<this.data.w.smps.length;e++)this.grpIndices.push(e),this.hiddenGrps.push(!1)}var i=this.layoutComb?this.layoutCurrent:0;this.isGroupedData?this.startingSmpIndices&&(this.startingSmpIndices[i]&&this.startingSmpIndices[i].length==this.grpIndices.length?this.grpIndices=this.startingSmpIndices[i]:this.startingSmpIndices[i]=[]):this.startingSmpIndices&&(this.startingSmpIndices[i]&&this.startingSmpIndices[i].length==this.smpIndices.length?this.smpIndices=this.startingSmpIndices[i]:this.startingSmpIndices[i]=[])},this.getSamplesByAxis=function(t){return this[t]?this[t]:[]},this.getSamplesByAnnotationLevel=function(t,e){var i=[];if(t&&this.data.x[t])if(e)for(var s=0;s<this.smpIndices.length;s++){var a=this.smpIndices[s];this.data.x[t][a]!=e||this.hiddenSmps[a]||i.push(a)}else for(var s=0;s<this.smpIndices.length;s++){var a=this.smpIndices[s];this.data.x[t][a]||this.hiddenSmps[a]||i.push(a)}return i},this.setSamplesVisible=function(t,e){if(this.isGroupedData){this.grpIndices=[];for(var i=0;i<t.length;i++)this.grpIndices.push(t[i])}else{this.smpIndices=[];for(var i=0;i<t.length;i++)this.smpIndices.push(t[i])}if(e)for(var s=this.getObjectArray(t),a=this.isGroupedData?this.data.w:this.data.y,r=this.isGroupedData?this.hiddenGrps:this.hiddenSmps,i=0;i<a.smps.length;i++)r[i]=s.hasOwnProperty(i)?!1:!0},this.getSampleIndices=function(t){var e=this.isGroupedData?this.data.w:this.data.y;if(t&&e.smps){var i=[];if(!this.isArray(t)){for(var s=0;s<e.smps.length;s++)if(e.smps[s]==t)return s;return-1}if(t.length>0){for(var s=0;s<t.length;s++)for(var a=0;a<e.smps.length;a++)if(e.smps[a]==t[s]){i.push(a);break}return i}}},this.hideUnhideSmps=function(t){if(t){var e=this.isGroupedData?this.data.w:this.data.y,i=this.isGroupedData?this.hiddenGrps:this.hiddenSmps;if(this.isArray(t)){for(var s=0;s<t.length;s++)for(var a=0;a<e.smps.length;a++)if(e.smps[a]==t[s]){i[a]=i[a]?!1:!0;break}}else for(var s=0;s<e.smps.length;s++)if(e.smps[s]==t){i[s]=i[s]?!1:!0;break}for(var r=[],s=0;s<e.smps.length;s++)i[s]||r.push(s);this.setSamplesVisible(r),this.draw()}},this.getSamples=function(){for(var t=[],e=this.isGroupedData?this.data.w.smps:this.data.y.smps,i=(this.isGroupedData?this.data.w:this.data.y,this.isGroupedData?this.hiddenGrps:this.hiddenSmps),s=this.isGroupedData?this.grpIndices:this.smpIndices,a=0;a<e.length;a++){for(var r=-1,h=0;h<s.length;h++)if(s[h]==a){r=h;break}t.push({name:e[a],hidden:i[a],index:r})}return t},this.resetSmpFilters=function(t){null!=t&&this.filterSmpBy.length>0?(this.filterSmpBy.splice(t,1),this.filterSmpByOp.splice(t,1),this.filterSmpByValue.splice(t,1),this.filterSmpByCase.splice(t,1),this.filteredSmpIndices.splice(t,1)):(this.filterSmpBy=[],this.filterSmpByOp=[],this.filterSmpByValue=[],this.filterSmpByCase=[],this.filteredSmpIndices=[])},this.setIndices=function(t,e){"Network"==this.graphType?this.setNodes():"Genome"!=this.graphType&&"Venn"!=this.graphType&&(this.setAllVariablesVisible(t),this.setAllSamplesVisible(e))},this.resetIndices=function(){this.isGroupedData&&this.setIndices()},this.setMaxSmpStringAttr=function(t,e){this.setMaxSmpStringAnnt(t,e),this.setMaxSmpStringLabel(t,e),this.setMaxSmpStringDesc(e),this.setMaxSmpStringName(e)},this.setMaxSmpStringAnnt=function(t,e){e||(e=this.smpLabelFont);var i=0;if(this.maxSmpAnnt=0,this.maxSmpAnntStr="",this.data.x){if(t&&this.data.x[t])return t;for(var s in this.data.x){var a=this.measureText(s,e);a>i&&(i=a,this.maxSmpAnnt=s.length,this.maxSmpAnntStr=s)}}},this.setMaxSmpStringLabel=function(t,e){e||(e=this.smpLabelFont);var i=0,s={};if(this.maxSmpLabel=0,this.maxSmpLabelStr="",this.data.x){if(t&&this.data.x[t]){for(var a="",r=0;r<this.smpIndices.length;r++){var h=this.data.x[t][this.smpIndices[r]];if(!s.hasOwnProperty(h)){var n=this.measureText(h,e);n>i&&(i=n,a=h),s[h]=!0}}return a}for(var o in this.data.x)for(var r=0;r<this.smpIndices.length;r++){var h=this.data.x[o][this.smpIndices[r]];if(h&&!s.hasOwnProperty(h)){var n=this.measureText(h,e);n>i&&(i=n,this.maxSmpLabel=this.data.x[o][this.smpIndices[r]].length,this.maxSmpLabelStr=this.data.x[o][this.smpIndices[r]]),s[h]=!0}}}},this.setMaxSmpStringDesc=function(t){t||(t=this.smpLabelFont);var e=0,i={};if(this.maxSmpLabelDesc=0,this.maxSmpLabelDescStr="",this.data.x&&this.smpLabelDescription&&this.data.x[this.smpLabelDescription])for(var s=0;s<this.smpIndices.length;s++){var a=this.data.x[this.smpLabelDescription][this.smpIndices[s]];if(a&&!i.hasOwnProperty(a)){var r=this.measureText(a,t);r>e&&(e=r,this.maxSmpLabelDesc=a.length,this.maxSmpLabelDescStr=a)}}},this.setMaxSmpStringName=function(t){if(t||(t=this.smpLabelFont),this.data.y||this.data.w){var e=this.isGroupedData?this.data.w:this.data.y,i=0;if(this.maxSmpName=0,this.maxSmpNameStr="",this.isGroupedData)for(var s=0;s<e.smps.length;s++){var a=this.measureText(e.smps[s],t);a>i&&(i=a,this.maxSmpName=e.smps[s].length,this.maxSmpNameStr=e.smps[s])}else for(var s=0;s<this.smpIndices.length;s++){var r=e.smps[this.smpIndices[s]],a=this.measureText(r,t);a>i&&(i=a,this.maxSmpName=r.length,this.maxSmpNameStr=r)}}},this.getSmpAnnotations=function(t,e,i,s){var a={},r=[],h=!1;if(this.data.x.hasOwnProperty(t)){for(var n=0;n<e.length;n++){var o=e[n];null!=this.data.x[t][o]?(a[this.data.x[t][o]]=!0,r.push(this.data.x[t][o])):h=!0}if(h&&r.push(""),s)return i?r.join("+"):r;r=[];for(var n in a)r.push(n);return h&&r.push(""),i?r.join("+"):r}},this.setMaxVarStringAttr=function(t,e){this.setMaxVarStringAnnt(t,e),this.setMaxVarStringLabel(t,e),this.setMaxVarStringDesc(e),this.setMaxVarStringName(e)},this.setMaxVarStringAnnt=function(t,e){e||(e=this.varLabelFont);var i=0;if(this.maxVarAnnt=0,this.maxVarAnntStr="",this.data.z){if(t&&this.data.z[t])return t;for(var s in this.data.z){var a=this.measureText(s,e);a>i&&(i=a,this.maxVarAnnt=s.length,this.maxVarAnntStr=s)}}},this.setMaxVarStringLabel=function(t,e){e||(e=this.varLabelFont);var i=0,s={};if(this.maxVarLabel=0,this.maxVarLabelStr="",this.data.z){if(t&&this.data.z[t]){for(var a="",r=0;r<this.varIndices.length;r++){var h=this.data.z[t][this.varIndices[r]];if(!s.hasOwnProperty(h)){var n=this.measureText(h,e);n>i&&(i=n,a=h),s[h]=!0}}return a}for(var o in this.data.z)for(var r=0;r<this.varIndices.length;r++){var h=this.data.z[o][this.varIndices[r]];if(h&&!s.hasOwnProperty(h)){var n=this.measureText(h,e);n>i&&(i=n,this.maxVarLabel=h.length,this.maxVarLabelStr=h),s[h]=!0}}}},this.setMaxVarStringDesc=function(t){t||(t=this.varLabelFont);var e=0,i={};if(this.maxVarLabelDesc=0,this.maxVarLabelDescStr="",this.data.z&&this.varLabelDescription&&this.data.z[this.varLabelDescription])for(var s=0;s<this.varIndices.length;s++){var a=this.data.z[this.varLabelDescription][this.varIndices[s]];if(a&&!i.hasOwnProperty(a)){var r=this.measureText(a,t);r>e&&(e=r,this.maxVarLabelDesc=a.length,this.maxVarLabelDescStr=a),i[a]=!0}}},this.setMaxVarStringName=function(t){if(t||(t=this.varLabelFont),this.data.y||this.data.w){var e=this.graphType.match(/BarLine|StackedLine|StackedPercentLine/)?this.data.y:this.isGroupedData?this.data.w:this.data.y,i=0;if(this.maxVarName=0,this.maxVarNameStr="",e.vars)for(var s=0;s<this.varIndices.length;s++){var a=e.vars[this.varIndices[s]],r=this.measureText(a,t);r>i&&(i=r,this.maxVarName=a.length,this.maxVarNameStr=a)}}},this.getVarAnnotations=function(t,e,i,s){
var a={},r=[],h=!1;if(this.data.z.hasOwnProperty(t)){for(var n=0;n<e.length;n++){var o=e[n];null!=this.data.z[t][o]?(a[this.data.z[t][o]]=!0,r.push(this.data.z[t][o])):h=!0}if(h&&r.push(""),s)return i?r.join("+"):r;r=[];for(var n in a)r.push(n);return h&&r.push(""),i?r.join("+"):r}},this.filterData=function(){var or={},and={},edgs={},re=!1,getValue=function(t,e,i){if(e.hasOwnProperty(t))return e[t];if(t.match(":::")){var s=t.split(":::");if(i[s[1]]){s[1]=parseInt(s[1]);for(var a=0;a<i[s[1]].length;a++){var r=i[s[1]][a];if(!e.hasOwnProperty(r))return!1;e=e[r]}if(e.hasOwnProperty(s[0]))return e[s[0]]}}return!1},evaluate=function(ts,op,vl,cs){if(op.match(/[\>\<\=]/))return eval(parseFloat(ts)+" "+op+" "+parseFloat(vl));if(op.match("null"))return"not null"==op&&null!=ts?!0:"null"==op&&null==ts?!0:!1;var r=cs?new RegExp(vl):new RegExp(vl,"i");return"like"==op?r.test(ts):r.test(ts)?!1:!0},addEdge=function(t){edgs[t]||(edgs[t]=0),edgs[t]++};if("Genome"==this.graphType&&this.filterFeatureBy.length>0){for(var i=0;i<this.filterFeatureBy.length;i++)if(this.filterFeatureBy[i])for(var j=0;j<this.data.tracks.length;j++)for(var track=this.data.tracks[j],features=track.data,k=0;k<features.length;k++){var feature=features[k];if(!this.filterSkipNullKeys||feature.hasOwnProperty(this.filterFeatureBy[i])){var v=getValue(this.filterFeatureBy[i],feature,this.featuresProperties);evaluate(v,this.filterFeatureByOp[i],this.filterFeatureByValue[i],this.filterFeatureByCase[i])?(or[j+":"+k]=!0,"or"==this.filterType&&and[j+":"+k]&&(feature.hide=!1)):(feature.hide="and"==this.filterType?!0:or[j+":"+k]?!1:!0,and[j+":"+k]=!0)}}}else if("Network"==this.graphType&&(this.filterNodeBy.length>0||this.filterEdgeBy.length)){for(var i=0;i<this.filterNodeBy.length;i++)if(this.filterNodeBy[i])for(var j=0;j<this.data.nodes.length;j++)if((!this.filterSkipNullKeys||this.data.nodes[j].hasOwnProperty(this.filterNodeBy[i]))&&!this.data.nodes[j].hide){var v=getValue(this.filterNodeBy[i],this.data.nodes[j],this.nodesProperties);evaluate(v,this.filterNodeByOp[i],this.filterNodeByValue[i],this.filterNodeByCase[i])?(or[this.data.nodes[j].id]=!0,"or"==this.filterType&&and[this.data.nodes[j].id]&&(this.data.nodes[j].hide=!1)):(this.data.nodes[j].hide="and"==this.filterType?!0:or[this.data.nodes[j].id]?!1:!0,and[this.data.nodes[j].id]=!0)}for(var i=0;i<this.filterEdgeBy.length;i++)if(this.filterEdgeBy[i])for(var j=0;j<this.data.edges.length;j++){var n1=this.data.nodes[this.data.nodeIndices[this.data.edges[j].id1]],n2=this.data.nodes[this.data.nodeIndices[this.data.edges[j].id2]],id=n1.id+":"+n2.id;if(!this.filterSkipNullKeys||this.data.edges[j].hasOwnProperty(this.filterEdgeBy[i])){var v=getValue(this.filterEdgeBy[i],this.data.edges[j],this.edgesProperties);evaluate(v,this.filterEdgeByOp[i],this.filterEdgeByValue[i],this.filterEdgeByCase[i])?(or[id]=!0,"or"==this.filterType&&and[id]&&(this.data.edges[j].hide=!1)):(this.data.edges[j].hide="and"==this.filterType?!0:or[id]?!1:!0,and[id]=!0),this.data.edges[j].hide||(addEdge(n1.id),addEdge(n2.id))}}if(this.filterEdgeBy.length>0)for(var i=0;i<this.data.nodes.length;i++){var nd=this.data.nodes[i];nd.hide=edgs[nd.id]?!1:!0}}else{if(this.filterSmpBy.length>0){for(var i=0;i<this.filterSmpBy.length;i++)if(this.filterSmpBy[i]){re=!0;for(var j=0;j<this.smpIndices.length;j++){var jj=this.smpIndices[j],tr="smps"==this.filterSmpBy[i]?this.data.y.smps[jj]:this.data.x[this.filterSmpBy[i]][jj];evaluate(tr,this.filterSmpByOp[i],this.filterSmpByValue[i],this.filterSmpByCase[i])?(or[jj]=!0,"or"==this.filterType&&and[jj]&&(this.hiddenSmps[jj]=!1)):(this.hiddenSmps[jj]="and"==this.filterType?!0:or[jj]?!1:!0,and[jj]=!0)}}if(re){for(var arr=[],i=0;i<this.smpIndices.length;i++){var ii=this.smpIndices[i];this.hiddenSmps[ii]||arr.push(ii)}this.smpIndices=arr}}if(this.filterVarBy.length>0){for(var i=0;i<this.filterVarBy.length;i++)if(this.filterVarBy[i]){re=!0;for(var j=0;j<this.varIndices.length;j++){var jj=this.varIndices[j],tr="vars"==this.filterVarBy[i]?this.data.y.vars[jj]:this.data.z[this.filterVarBy[i]][jj];evaluate(tr,this.filterVarByOp[i],this.filterVarByValue[i],this.filterVarByCase[i])?(or[jj]=!0,"or"==this.filterType&&and[jj]&&(this.hiddenVars[jj]=!1)):(this.hiddenVars[jj]="and"==this.filterType?!0:or[jj]?!1:!0,and[jj]=!0)}}if(re){for(var arr=[],i=0;i<this.varIndices.length;i++){var ii=this.varIndices[i];this.hiddenVars[ii]||arr.push(ii)}this.varIndices=arr}}}},this.setRangeData=function(t,e,i,s){var a=this.isGroupedData&&!e?this.data.w:this.data.y,r=Number.MAX_VALUE,h=-1*Number.MAX_VALUE;if(null!=this.setMin&&null!=this.setMax)return this.minData=this.setMin,void(this.maxData=this.setMax);if(this.isGroupedData&&!t&&(t=this.summaryType),"genome"==t)for(var n=0;n<this.data.tracks.length;n++)for(var o=0;o<this.data.tracks[n].data.length;o++)if("box"==this.data.tracks[n].type)for(var l=0;l<this.data.tracks[n].data[o].data.length;l++)T=this.data.tracks[n].data[o].data[l],h=Math.max(h,Math.max(T[0],T[1])),r=Math.min(r,Math.min(T[0],T[1]));else"sequence"==this.data.tracks[n].type?(T=this.data.tracks[n].data[o].offset,h=Math.max(h,T+this.data.tracks[n].data[o].sequence.length),r=Math.min(r,T)):this.data.tracks[n].type.match(/bar|heatmap|line|stacked/)?(T=this.data.tracks[n].data[o].offset,h=this.data.tracks[n].autowidth?Math.max(h,T+this.data.tracks[n].data[o].data.length):Math.max(h,T),r=Math.min(r,T)):(T=this.data.tracks[n].data[o].offset,h=Math.max(h,T),r=Math.min(r,T));else if("circular"==t){var d=this.getVariableIndices(this.rAxis);if(d>=0){var c=this.range(this.data.y.data[d]);r=c[0],h=c[1]}else r=0,h=1}else if("km"!=t||e)if("video"==t)r=0,h=1;else if("percentile"!=t||e)if("mean"!=t&&"median"!=t&&"sum"!=t||e)if("iqr"!=t||e)if("candle"==t){this.isTransformedData&&(alert("Transformation not allowed"),this.isTransformedData=!1);for(var p=this.isGroupedData?this.grpIndices:this.smpIndices,n=0;n<this.varIndices.length;n++)for(var g=this.varIndices[n],o=0;o<p.length;o++){var u=p[o],m=a.high[g][u],f=a.low[g][u];isNaN(m)||isNaN(f)||(r=Math.min(f,r),h=Math.max(m,h))}}else if("volume"==t)for(var p=this.isGroupedData?this.grpIndices:this.smpIndices,n=0;n<this.varIndices.length;n++)for(var g=this.varIndices[n],o=0;o<p.length;o++){var u=p[o];isNaN(a.volume[g][u])||(r=Math.min(a.volume[g][u],r),h=Math.max(a.volume[g][u],h))}else if("cor"==t)for(var p="variables"==this.correlationAxis?this.varIndices:this.isGroupedData?this.grpIndices:this.smpIndices,n=0;n<p.length;n++)for(var o=0;o<p.length;o++){var v=this.isTransformedData?a.trans[n][o]:a.cor[n][o];isNaN(v)||(i?v>0&&(r=Math.min(v,r),h=Math.max(v,h)):(r=Math.min(v,r),h=Math.max(v,h)))}else{var x=this.isTransformedData?a.trans:a.data;if(s){for(var n=0;n<this.smpIndices.length;n++){for(var y=0,o=0;o<this.varIndices.length;o++){var v=x[this.varIndices[o]][this.smpIndices[n]];!isNaN(v)&&v>0&&(y+=v)}h=Math.max(y,h)}r=0}else for(var n=0;n<this.varIndices.length;n++)for(var o=0;o<this.smpIndices.length;o++){var v=x[this.varIndices[n]][this.smpIndices[o]];isNaN(v)||(i?v>0&&(r=Math.min(v,r),h=Math.max(v,h)):(r=Math.min(v,r),h=Math.max(v,h)))}}else{this.isTransformedData&&(alert("Transformation not allowed"),this.isTransformedData=!1);for(var n=0;n<this.varIndices.length;n++)for(var g=this.varIndices[n],o=0;o<a.iqr1[g].length;o++){var b=a.iqr1[g][o],w=a.iqr3[g][o],C=a.out[g][o];if(isNaN(b)||isNaN(w)||(i?b>0&&w>0&&(r=Math.min(b,r),h=Math.max(w,h)):(r=Math.min(b,r),h=Math.max(w,h))),C)for(var l=0;l<C.length;l++)isNaN(C[l])||(i?C[l]>0&&(r=Math.min(C[l],r),h=Math.max(C[l],h)):(r=Math.min(C[l],r),h=Math.max(C[l],h)))}}else if(s){for(var p=this.isGroupedData?this.grpIndices:this.smpIndices,x=this.isTransformedData?a.trans:a[this.summaryType],n=0;n<p.length;n++){for(var g=p[n],y=0,o=0;o<this.varIndices.length;o++){var u=this.varIndices[o],v=x[u][g];!isNaN(v)&&v>0&&(y+=v)}h=Math.max(y,h)}r=0}else for(var n=0;n<this.varIndices.length;n++){var T,g=this.varIndices[n];this.isTransformedData?T=a.trans[g]:"mean"==this.summaryType?T=a.mean[g]:"median"==this.summaryType?T=a.median[g]:"sum"==this.summaryType&&(T=a.sum[g]);for(var o=0;o<T.length;o++){var D,v=T[o];D=a.stdev&&!this.isTransformedData?a.stdev[g][o]:Number.NaN,isNaN(v)||(isNaN(D)?i?v>0&&(r=Math.min(v,r),h=Math.max(v,h)):(r=Math.min(v,r),h=Math.max(v,h)):i?v>0&&(r=Math.min(v,r),h=Math.max(v+D,h)):(r=Math.min(v,r),h=Math.max(v+D,h)))}}else r=0,h=100;else r=0,h=1;this.minData=null!=this.setMin?this.setMin:r,this.maxData=null!=this.setMax?this.setMax:h},this.setRangeDataObject=function(t){for(var e=Number.MAX_VALUE,i=-1*Number.MAX_VALUE,s=0;s<this.varIndices.length;s++)for(var a=0;a<this.smpIndices.length;a++){var r=t[this.varIndices[s]][this.smpIndices[a]];isNaN(r)||(e=Math.min(r,e),i=Math.max(r,i))}return[e,i]},this.sortNetworkIndices=function(t){for(var e=this.data[this.networkShowDataTable],i=t,s=[],a=[],r=0;r<e.length;r++)s.push(r),a.push(e[r][i]?e[r][i]:null);if(this.isNumeric(a)){var h=-1*Number.MAX_VALUE;s.sort(function(t,e){return(a[t]||h)-(a[e]||h)})}else s.sort(function(t,e){return a[t]>a[e]?1:a[t]<a[e]?-1:0});for(var n=[],r=0;r<e.length;r++)n.push(e[s[r]]);"ascending"==this.sortDir&&n.reverse(),this.data[this.networkShowDataTable]=n,"nodes"==this.networkShowDataTable&&this.setNodeIndices(),this.draw()},this.sortIndices=function(t,e,i,s,a,r,h){var n=this,o=this.isGroupedData?this.grpIndices:"vars"==t?this.varIndices:this.smpIndices;if(this.tmpAsciiArray=[],this.tmpAsciiArray1=[],this.tmpAsciiArray2=[],this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.tmpAsciiArrayAscii2=!1,i&&(i=this.toArray(i)),s&&(s=this.toArray(s)),a&&(a=this.toArray(a)),e||(e=this.sortDir),i&&"vars"==t)1==i.length&&this.data.z&&this.data.z[i[0]]?(this.tmpAsciiArray=this.data.z[i[0]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray)):2==i.length&&this.data.z&&this.data.z[i[0]]&&this.data.z[i[1]]?(this.tmpAsciiArray=this.data.z[i[0]],this.tmpAsciiArray1=this.data.z[i[1]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray),this.tmpAsciiArrayAscii1=this.isAsciiArray(this.tmpAsciiArray1)):3==i.length&&this.data.z&&this.data.z[i[0]]&&this.data.z[i[1]]&&this.data.z[i[2]]&&(this.tmpAsciiArray=this.data.z[i[0]],this.tmpAsciiArray1=this.data.z[i[1]],this.tmpAsciiArray2=this.data.z[i[2]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray),this.tmpAsciiArrayAscii1=this.isAsciiArray(this.tmpAsciiArray1),this.tmpAsciiArrayAscii2=this.isAsciiArray(this.tmpAsciiArray2)),this.smpSort=-1,this.varSort=i;else if(i&&"smps"==t)1==i.length&&this.data.x&&this.data.x[i[0]]?(this.tmpAsciiArray=this.data.x[i[0]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray)):2==i.length&&this.data.x&&this.data.x[i[0]]&&this.data.x[i[1]]?(this.tmpAsciiArray=this.data.x[i[0]],this.tmpAsciiArray1=this.data.x[i[1]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray),this.tmpAsciiArrayAscii1=this.isAsciiArray(this.tmpAsciiArray1)):3==i.length&&this.data.x&&this.data.x[i[0]]&&this.data.x[i[1]]&&this.data.x[i[2]]&&(this.tmpAsciiArray=this.data.x[i[0]],this.tmpAsciiArray1=this.data.x[i[1]],this.tmpAsciiArray2=this.data.x[i[2]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray),this.tmpAsciiArrayAscii1=this.isAsciiArray(this.tmpAsciiArray1),this.tmpAsciiArrayAscii2=this.isAsciiArray(this.tmpAsciiArray2)),this.varSort=-1,this.smpSort=i;else if(r&&h){var l=parseInt(s?this.getVariableIndices(s[0]):this.getSampleIndices(a[0]));this.tmpAsciiArray=this.data.y[r][l],this.tmpAsciiArrayAscii=!1,this.smpSort=[l]}else if(s){for(var d=[],l=0;l<this.varIndices.length;l++)d.push(l);1==s.length?(this.tmpAsciiArray=this.getDataForSmpGrpAtIndex(s[0]-1,d,r),this.tmpAsciiArrayAscii=!1,this.smpSort=[s[0]-1]):2==s.length?(this.tmpAsciiArray=this.getDataForSmpGrpAtIndex(s[0]-1,d,r),this.tmpAsciiArray1=this.getDataForSmpGrpAtIndex(s[1]-1,d,r),this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.smpSort=[s[0]-1,s[1]-1]):3==s.length&&(this.tmpAsciiArray=this.getDataForSmpGrpAtIndex(s[0]-1,d,r),this.tmpAsciiArray1=this.getDataForSmpGrpAtIndex(s[1]-1,d,r),this.tmpAsciiArray2=this.getDataForSmpGrpAtIndex(s[2]-1,d,r),this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.tmpAsciiArrayAscii2=!1,this.smpSort=[s[0]-1,s[1]-1,s[2]-1])}else if(a){var c=r?this.data.y[r]:this.data.y.data;1==a.length?(this.tmpAsciiArray=c[a[0]-1],this.tmpAsciiArrayAscii=!1,this.smpSort=[a[0]-1]):2==a.length?(this.tmpAsciiArray=c[a[0]-1],this.tmpAsciiArray1=c[a[1]-1],this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.smpSort=[a[0]-1,a[1]-1]):3==s.length&&(this.tmpAsciiArray=c[a[0]-1],this.tmpAsciiArray1=c[a[1]-1],this.tmpAsciiArray2=c[a[2]-1],this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.tmpAsciiArrayAscii2=!1,this.smpSort=[a[0]-1,a[1]-1,a[2]-1])}else this.tmpAsciiArray=this.isGroupedData?this.data.w.smps:"vars"==t?this.data.y.vars:this.data.y.smps,this.tmpAsciiArrayAscii=!0,"vars"==t?this.varSort=!1:this.smpSort=!1;o.sort(this.tmpAsciiArrayAscii?function(t,e){return n.sortAsciibetically(t,e)}:function(t,e){return n.sortNumerically(t,e)}),"ascending"!=e&&o.reverse(),this.tmpAsciiArray=[],this.tmpAsciiArray1=[],this.tmpAsciiArray2=[],this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.tmpAsciiArrayAscii2=!1},this.isAsciiArray=function(t){for(var e=0;e<t.length;e++)if(null!=t[e]&&isNaN(t[e]))return!0;return!1},this.sortAsciibetically=function(t,e){var i=this;return this.tmpAsciiArray[t]==this.tmpAsciiArray[e]&&this.tmpAsciiArray1.length>0?this.tmpAsciiArrayAscii1?i.sortAsciibetically1(t,e):i.sortNumerically1(t,e):this.tmpAsciiArray[t]>this.tmpAsciiArray[e]?1:this.tmpAsciiArray[t]<this.tmpAsciiArray[e]?-1:0},this.sortAsciibetically1=function(t,e){var i=this;return this.tmpAsciiArray1[t]==this.tmpAsciiArray1[e]&&this.tmpAsciiArray2.length>0?this.tmpAsciiArrayAscii2?i.sortAsciibetically2(t,e):i.sortNumerically2(t,e):this.tmpAsciiArray1[t]>this.tmpAsciiArray1[e]?1:this.tmpAsciiArray1[t]<this.tmpAsciiArray1[e]?-1:0},this.sortAsciibetically2=function(t,e){return this.tmpAsciiArray2[t]>this.tmpAsciiArray2[e]?1:this.tmpAsciiArray2[t]<this.tmpAsciiArray2[e]?-1:0},this.sortNumerically=function(t,e){var i=this,s=-1*Number.MAX_VALUE;return(this.tmpAsciiArray[t]||s)-(this.tmpAsciiArray[e]||s)==0&&this.tmpAsciiArray1.length>0?this.tmpAsciiArrayAscii1?i.sortAsciibetically1(t,e):i.sortNumerically1(t,e):(this.tmpAsciiArray[t]||s)-(this.tmpAsciiArray[e]||s)},this.sortNumerically1=function(t,e){var i=this,s=-1*Number.MAX_VALUE;return(this.tmpAsciiArray1[t]||s)-(this.tmpAsciiArray1[e]||s)==0&&this.tmpAsciiArray2.length>0?this.tmpAsciiArrayAscii2?i.sortAsciibetically2(t,e):i.sortNumerically2(t,e):(this.tmpAsciiArray1[t]||s)-(this.tmpAsciiArray1[e]||s)},this.sortNumerically2=function(t,e){var i=-1*Number.MAX_VALUE;return(this.tmpAsciiArray2[t]||i)-(this.tmpAsciiArray2[e]||i)},this.radixSort=function(t){var e,i,s,a,r,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=new Int32Array(t.length),o=[].concat(h),l=[].concat(h),d=[].concat(h),c=[].concat(h),p=0,g=0,u=0,m=0;for(r=0;r<t.length;r++)e=255&t[r],i=t[r]>>8&255,s=t[r]>>16&255,a=t[r]>>24&255^128,o[e]++,l[i]++,d[s]++,c[a]++;for(r=0;256>r;r++)e=p+o[r],i=g+l[r],s=u+d[r],a=m+c[r],o[r]=p,l[r]=g,d[r]=u,c[r]=m,p=e,g=i,u=s,m=a;for(r=0;r<t.length;r++)e=255&t[r],n[o[e]]=t[r],o[e]++;for(r=0;r<t.length;r++)i=n[r]>>8&255,t[l[i]]=n[r],l[i]++;for(r=0;r<t.length;r++)s=t[r]>>16&255,n[d[s]]=t[r],d[s]++;for(r=0;r<t.length;r++)a=n[r]>>24&255^128,t[c[a]]=n[r],c[a]++;return t},this.isNumeric2DArray=function(t){for(var e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++)if(t[e][i]&&isNaN(t[e][i]))return!1;return!0},this.isNumeric=function(t,e,i){if(e)for(var s=0;s<this.smpIndices.length;s++){var a=this.smpIndices[s];if(t[a]&&isNaN(t[a]))return!1}else if(i)for(var s=0;s<this.varIndices.length;s++){var a=this.varIndices[s];if(t[a]&&isNaN(t[a]))return!1}else for(var a=0;a<t.length;a++)if(t[a]&&isNaN(t[a]))return!1;return!0},this.precedence={sin:16,cos:16,tan:16,sec:16,csc:16,cot:16,asin:16,acos:16,atan:16,asec:16,acsc:16,acot:16,sinh:16,cosh:16,tanh:16,sech:16,csch:16,coth:16,asinh:16,acosh:16,atanh:16,asech:16,acsch:16,acoth:16,exp:16,ln:16,log:16,logb:16,pow:16,sq:16,sqrt:16,abs:16,sgn:16,chs:16,floor:16,ceil:16,ip:16,fp:16,inv:16,min:16,max:16,gamma:16,fact:16,comb:16,perm:16,rand:16,gcd:16,lcm:16,prime:16,and:16,or:16,xor:16,x:16,y:16,pi:16,e:16,neg:15,not:15,"^":14,"*":13,"/":13,mod:13,div:13,"+":12,"-":12,"<":10,"<=":10,"==":10,"!=":10,">=":10,">":10,"&&":5,"||":4,",":1},this.expects={sin:1,cos:1,tan:1,sec:1,csc:1,cot:1,asin:1,acos:1,atan:1,asec:1,acsc:1,acot:1,sinh:1,cosh:1,tanh:1,sech:1,csch:1,coth:1,asinh:1,acosh:1,atanh:1,asech:1,acsch:1,acoth:1,exp:1,ln:1,log:1,logb:2,pow:2,sq:1,sqrt:1,abs:1,sgn:1,chs:1,floor:1,ceil:1,ip:1,fp:1,inv:1,min:2,max:2,gamma:1,fact:1,comb:2,perm:2,gcd:2,lcm:2,prime:1,and:2,or:2,xor:2,neg:1,not:1,"^":2,"*":2,"/":2,mod:2,div:2,"+":2,"-":2,"<":2,"<=":2,"==":2,"!=":2,">=":2,">":2,"&&":2,"||":2},this.alias={"+":"add","-":"sub","*":"mul","/":"div","!":"fact","x^y":"pow","^":"pow","10^":"pow10",div:"idiv","<":"lt","<=":"le","==":"eq","!=":"ne",">=":"ge",">":"gt","%":"pc","%ch":"pcch"},this.add=function(t,e){return new Number(e)+new Number(t)},this.sub=function(t,e){return e-t},this.mul=function(t,e){return e*t},this.div=function(t,e){return e/t},this.sin=function(t){return Math.sin(t)},this.cos=function(t){return Math.cos(t)},this.tan=function(t){return Math.tan(t)},this.sec=function(t){return 1/Math.cos(t)},this.csc=function(t){return 1/Math.sin(t)},this.cot=function(t){return 1/Math.tan(t)},this.asin=function(t){return Math.asin(t)},this.acos=function(t){return Math.acos(t)},this.atan=function(t){return Math.atan(t)},this.asec=function(t){return Math.acos(1/t)},this.acsc=function(t){return Math.asin(1/t)},this.acot=function(t){return Math.atan(1/t)},this.sinh=function(t){return.5*(Math.exp(t)-Math.exp(-t))},this.cosh=function(t){return.5*(Math.exp(t)+Math.exp(-t))},this.tanh=function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},this.sech=function(t){return 1/cosh(t)},this.csch=function(t){return 1/sinh(t)},this.coth=function(t){return 1/tanh(t)},this.asinh=function(t){return Math.log(t+Math.sqrt(t*t+1))},this.acosh=function(t){return Math.log(t+Math.sqrt(t*t-1))},this.atanh=function(t){return.5*Math.log((1+t)/(1-t))},this.asech=function(t){return acosh(1/t)},this.acsch=function(t){return asinh(1/t)},this.acoth=function(t){return atanh(1/t)},this.exp=function(t){return Math.exp(t)},this.ln=function(t){return Math.log(t)},this.log=function(t){return Math.log(t)/Math.LN10},this.logb=function(t,e){return Math.log(e)/Math.log(t)},this.pow=function(t,e){return Math.pow(e,t)},this.pow10=function(t){return Math.pow(10,t)},this.sq=function(t){return t*t},this.sqrt=function(t){return Math.sqrt(t)},this.abs=function(t){return t>=0?t:-t},this.sgn=function(t){return 0==t?0:t>0?1:-1},this.chs=function(t){return-t},this.neg=function(t){return-t},this.floor=function(t){return Math.floor(t)},this.ceil=function(t){return Math.ceil(t)},this.ip=function(t){return parseInt(t)},this.fp=function(t){return abs(t)-ip(abs(t))},this.inv=function(t){return 1/t},this.idiv=function(t,e){return parseInt(e/t)},this.mod=function(t,e){return e%t},this.and=function(t,e){return e&t},this.or=function(t,e){return e|t},this.xor=function(t,e){return e^t},this.not=function(t){return~t},this.lt=function(t,e){return t>e?1:0},this.le=function(t,e){return t>=e?1:0},this.eq=function(t,e){return e==t?1:0},this.ne=function(t,e){return e!=t?1:0},this.ge=function(t,e){return e>=t?1:0},this.gt=function(t,e){return e>t?1:0},this.Min=function(t,e){return Math.min(e,t)},this.Max=function(t,e){return Math.max(e,t)},this.pc=function(t,e){return e*t/100},this.pcch=function(t,e){return 100*t/e},this.gammaConsts=new Array(76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18),this.gammaLn=function(t){var e=new Number(t),i=new Number(t+5.5),s=new Number(1.000000000190015);i-=(t+.5)*Math.log(i);for(var a in this.gammaConsts)s+=this.gammaConsts[a]/++e;return Math.log(2.5066282746310007*s/t)-i},this.gamma=function(t){return Math.exp(this.gammaLn(t))},this.fact=function(t){var e=new Number(t);if(1>=t)return 1;if(t>100||t%1)return Math.exp(this.gammaLn(t+1));for(;--t;)e*=t;return e},this.comb=function(t,e){return Math.floor(.5+Math.exp(this.gammaLn(e+1)-this.gammaLn(t+1)-this.gammaLn(e-t+1)))},this.perm=function(t,e){return Math.floor(.5+Math.exp(this.gammaLn(e+1)-this.gammaLn(e-t+1)))},this.gcd=function(t,e){return 0==t?e||1:e?this.gcd(e,t%e):t},this.lcm=function(t,e){return t/this.gcd(t,e)*e},this.prime=function(t){var e=new Number(5),i=new Number(4),s=parseInt(t/e);if(2==t||3==t||5==t)return 1;if(5>t||0==(1&t)||t%3==0)return 0;for(;t>e*s&&s>e;)s=parseInt(t/(e+=i=6-i));return e*s==t?0:1},this.degreesToArcLength=function(t,e){return t*e},this.radiansToArcLength=function(t,e){return t*Math.PI*e/180},this.arcLengthToDegrees=function(t,e){return 180*e/(t*Math.PI)},this.arcLengthToRadians=function(t,e){return e/t},this.cleanArray=function(t,e,i){var s=[];if(e)for(var a=0;a<this.smpIndices.length;a++){var r=this.smpIndices[a];isNaN(t[r])||s.push(t[r])}else if(i)for(var a=0;a<this.varIndices.length;a++){var r=this.varIndices[a];isNaN(t[r])||s.push(t[r])}else for(var r=0;r<t.length;r++)isNaN(t[r])||s.push(t[r]);return s},this.cleanArrays=function(t,e,i,s){var a=[],r=[];if(i)for(var h=0;h<this.smpIndices.length;h++){var n=this.smpIndices[h];isNaN(t[n])||isNaN(e[n])||(a.push(t[n]),r.push(e[n]))}else if(s)for(var h=0;h<this.varIndices.length;h++){var n=this.varIndices[h];isNaN(t[n])||isNaN(e[n])||(a.push(t[n]),r.push(e[n]))}else for(var n=0;n<t.length;n++)isNaN(t[n])||isNaN(e[n])||(a.push(t[n]),r.push(e[n]));return[a,r]},this.sortArray=function(t,e){var i=[];if(t.length!=e.length)return t;for(var s=0;s<t.length;s++){if(!t[e[s]])return t;i[s]=t[e[s]]}return i},this.reverseArray=function(t){for(var e=[],i=0,s=t.length-1;s>=0;s--)e[i]=t[s],i++;return e},this.percentile=function(t,e,i){var s=e-t;if(0==s)return 50;var a=i-t;return 100*a/s},this.rank=function(t){for(var e=[],i=0;i<t.length;i++)e.push(i);return e.sort(function(e,i){return t[e]-t[i]}),e},this.min=function(t,e,i){if(this.isArray(t)){t=this.cleanArray(t,e,i);for(var s=Number.MAX_VALUE,a=0;a<t.length;a++)s=Math.min(s,t[a]);return s}return this.Min(t,e)},this.max=function(t,e,i){if(this.isArray(t)){t=this.cleanArray(t,e,i);for(var s=Number.MIN_VALUE,a=0;a<t.length;a++)s=Math.max(s,t[a]);return s}return this.Max(t,e)},this.sum=function(t,e,i,s){t=this.cleanArray(t,e,i);for(var a=0,r=0;r<t.length;r++)s?t[r]>0&&(a+=t[r]):a+=t[r];return a},this.mean=function(t,e,i){t=this.cleanArray(t,e,i);for(var s=0,a=0,r=0;r<t.length;r++)isNaN(t[r])||(s+=t[r],a++);return a>0&&(s/=a),s},this.range=function(t,e,i){t=this.cleanArray(t,e,i);for(var s=Number.MAX_VALUE,a=-1*Number.MAX_VALUE,r=0;r<t.length;r++)s=Math.min(t[r],s),a=Math.max(t[r],a);return[s,a]},this.median=function(t,e,i){t=this.cleanArray(t,e,i);var s=[],a=[],r=0;s[0]=Number.NaN,s[1]=Number.NaN;for(var h=0;h<t.length;h++)a.push(t[h]),r++;return r>0&&(s[1]=r,a.sort(function(t,e){return t-e}),s[0]=r%2?a[parseInt(r/2)]:(a[parseInt((r-1)/2)]+a[r/2])/2),s},this.meanStandardDeviationN=function(t,e,i){t=this.cleanArray(t,e,i);for(var s=[],a=0,r=0,h=0,n=0;n<t.length;n++)r+=t[n],a+=t[n]*t[n],h++;return h>0?(r/=h,a=Math.sqrt(a/h-r*r),s.push(r),s.push(a),s.push(h)):(s.push(""),s.push(""),s.push("")),s},this.quantiles=function(t,e,i){t=this.cleanArray(t,e,i);var s=[],a=[],r=t.length;if(r>2){var h=Math.floor(.25*r),n=Math.floor(.5*r),o=Math.floor(.75*r);t.sort(function(t,e){return t-e});var l,d,c;d=r%2?t[n]:this.mean([t[n-1],t[n]]),r/2%2?(l=t[h],c=t[o]):(l=this.mean([t[h-1],t[h]]),c=this.mean([t[o-1],t[o]]));for(var p,g,u=1.5*(c-l),m=0;h>=m;m++){if(!(t[m]<l-u)){p=t[m];break}a.push(t[m])}for(var m=r-1;m>=o;m--){if(!(t[m]>c+u)){g=t[m];break}a.push(t[m])}s.push(l),s.push(d),s.push(c),s.push(p),s.push(g),s.push(a),s.push(r)}else r>1?(s.push(t[0]),s.push(t[1]),s.push(t[1]),s.push(t[0]),s.push(t[1]),s.push(a),s.push(r)):r>0?(s.push(t[0]),s.push(t[0]),s.push(t[0]),s.push(t[0]),s.push(t[0]),s.push(a),s.push(r)):(s.push(Number.NaN),s.push(Number.NaN),s.push(Number.NaN),s.push(Number.NaN),s.push(Number.NaN),s.push(Number.NaN));return s},this.covariance=function(t,e,i,s){var a=this.cleanArrays(t,e,i,s);t=a[0],e=a[1];for(var r=0,h=0,n=this.mean(t),o=this.mean(e),l=0;l<t.length;l++)r+=t[l]*e[l],h++;return h>0?(r/=h,r-n*o):r},this.correlation=function(t,e,i,s){var a=this.cleanArrays(t,e,i,s);t=a[0],e=a[1];for(var r=0,h=0,n=0,o=0,l=0,d=this.covariance(t,e),c=0,p=0;p<t.length;p++)h+=t[p],n+=e[p],o+=t[p]*t[p],l+=e[p]*e[p],r++;return r>0&&(c=r*r*d/Math.sqrt((r*o-h*h)*(r*l-n*n))),c},this.regression=function(t,e,i,s){var a=this.cleanArrays(t,e,i,s);t=a[0],e=a[1];for(var r=0,h=0,n=0,o=0,l=0,d=0,c=this.covariance(t,e),p=0,g=0,u=0,m=0;m<t.length;m++)h+=t[m],n+=e[m],o+=t[m]*e[m],l+=t[m]*t[m],d+=e[m]*e[m],r++;return r>2&&(g=(r*o-h*n)/(r*l-h*h),u=(n-g*h)/r,p=r*r*c/Math.sqrt((r*l-h*h)*(r*d-n*n))),[g,u,p]},this.slope=function(t,e,i,s){return e!=s?(i-t)/(s-e):0},this.intercept=function(t,e,i){return e-t*i},this.slopeIntercept=function(t,e,i,s){var a=this.slope(t,e,i,s);return[a,this.intercept(t,e,a)]},this.normalize=function(t){for(var e=0;e<t.length;e++)for(var i=this.meanStandardDeviationN(t[e]),s=0;s<t[e].length;s++)t[e][s]=(t[e][s]-i[0])/i[1];return t},this.euclidianDistance=function(t,e,i,s){var a=this.cleanArrays(t,e,i,s);t=a[0],e=a[1];var r=0;if(t.length==e.length){for(var h=0;h<t.length;h++)r+=Math.pow(t[h]-e[h],2);r=Math.sqrt(r)}return r},this.manhattanDistance=function(t,e,i,s){var a=this.cleanArrays(t,e,i,s);t=a[0],e=a[1];var r=0;if(t.length==e.length)for(var h=0;h<t.length;h++)r+=Math.abs(t[h]-e[h]);return r},this.maxDistance=function(t,e,i,s){var a=this.cleanArrays(t,e,i,s);t=a[0],e=a[1];var r=0;if(t.length==e.length)for(var h=0;h<t.length;h++)r=Math.max(r,Math.abs(t[h]-e[h]));return r},this.addVectors=function(t,e,i,s){var a=this.cleanArrays(t,e,i,s);t=a[0],e=a[1];var r=[];if(t.length==e.length)for(var h=0;h<t.length;h++)r.push(t[h]+e[h]);return r},this.compareVectors=function(t,e){if(this.isArray(t)&&this.isArray(e)){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++){if(this.isArray(t[i])&&this.isArray(e[i])&&!this.compareArrays(t[i],e[i]))return!1;if(t[i]!==e[i])return!1}return!0}},this.vectorDotProduct=function(t,e,i,s){var a=this.cleanArrays(t,e,i,s);t=a[0],e=a[1];var r=0;if(t.length==e.length)for(var h=0;h<t.length;h++)r+=t[h]*e[h];return r},this.multiplyVectorByValue=function(t,e,i,s){t=this.cleanArray(t,i,s);for(var a=0;a<t.length;a++)t[a]*=e;return t},this.getCentroid=function(t,e,i,s){var a=[];if(e.length==s.length)for(var r=t+i,h=0;h<e.length;h++)a.push((t*e[h]+i*s[h])/r);return a},this.createNode=function(t,e,i,s,a,r){var h={id:t,left:e,right:i,dist:s,centroid:a};return r&&(h.mid=r),null==e&&null==i?(h.size=1,h.depth=0):(h.size=e.size+i.size,h.depth=1+Math.max(e.depth,i.depth)),h},this.createRandomVectors=function(t,e){var i=e.length;if(t>i)return null;for(var s,a,r=[],h=[],n={},o=0,l=0;t>l;){if(o==i)return null;var d=Math.floor(Math.random()*i);if(!(d in n)){n[d]=1,o++,s=e[d],a=!0;for(var c=0;l>c;c++)if(this.compareVectors(s,r[c])){a=!1;break}a&&(r[l]=s,h[l]=d,l++)}}return{vectors:r,indices:h}},this.imputeDatum=function(t){var e=[];if("samples"==this.clusterAxis)for(var i=0;i<this.varIndices.length;i++){var s=this.varIndices[i];e.push(this.data.y.data[s][t])}else for(var i=0;i<this.smpIndices.length;i++){var s=this.smpIndices[i];e.push(this.data.y.data[t][s])}return this[this.imputeMethod](e)},this.getIdsForClustering=function(){var t=[];if("samples"==this.clusterAxis)for(var e=0;e<this.smpIndices.length;e++){var i=this.smpIndices[e];t[e]=this.useSmpVarIndexOnClustering?i:this.data.y.smps[i]}else for(var e=0;e<this.varIndices.length;e++){var i=this.varIndices[e];t[e]=this.useSmpVarIndexOnClustering?i:this.data.y.vars[i]}return t},this.getDataForClustering=function(){var t=[],e=[];if("samples"==this.clusterAxis){for(var i=0;i<this.smpIndices.length;i++)t[i]=[];for(var i=0;i<this.varIndices.length;i++)for(var s=this.varIndices[i],a=0;a<this.smpIndices.length;a++){var r=this.smpIndices[a],h=this.data.y.data[s][r];isNaN(h)&&(e[a]||(e[a]=this.imputeDatum(r)),h=e[a]),t[a][i]=h}}else{for(var i=0;i<this.varIndices.length;i++)t[i]=[];for(var i=0;i<this.varIndices.length;i++)for(var s=this.varIndices[i],a=0;a<this.smpIndices.length;a++){var r=this.smpIndices[a],h=this.data.y.data[s][r];isNaN(h)&&(e[i]||(e[i]=this.imputeDatum(s)),h=e[i]),t[i][a]=h}}return this.centerData&&(t=this.normalize(t)),t},this.cluster=function(){this.useSmpVarIndexOnClustering=!0;for(var t,e=this.getDataForClustering(),i=this.getIdsForClustering(),s=[],a=[],r=[],h=[],n=0;n<e.length;n++)s[n]=[];for(var n=0;n<e.length;n++){s[n][n]=Number.POSITIVE_INFINITY;for(var o=n+1;o<e.length;o++)s[n][o]=this[this.distance+"Distance"](e[n],e[o]),s[o][n]=s[n][o]}for(var n=0;n<e.length;n++){a[n]=0;for(var o=0;o<e.length;o++)s[n][a[n]]>s[n][o]&&(a[n]=o)}for(var n=0;n<e.length;n++)h[n]=[],h[n][0]=this.createNode(i[n],null,null,0,e[n]),r[n]=1;for(var l=0;l<e.length-1;l++){for(var d=0,n=0;n<e.length;n++)s[n][a[n]]<s[d][a[d]]&&(d=n);var c=a[d],p=h[d][0],g=h[c][0],u=this.getCentroid(p.size,p.centroid,g.size,g.centroid),m=this.createNode(-1,p,g,s[d][c],u);h[d].splice(0,0,m),r[d]+=r[c];for(var o=0;o<e.length;o++)"single"==this.linkage?s[d][o]>s[c][o]&&(s[o][d]=s[d][o]=s[c][o]):"complete"==this.linkage?s[d][o]<s[c][o]&&(s[o][d]=s[d][o]=s[c][o]):"average"==this.linkage&&(s[o][d]=s[d][o]=(r[d]*s[d][o]+r[c]*s[c][o])/(r[d]+r[o]));s[d][d]=Number.POSITIVE_INFINITY;for(var n=0;n<e.length;n++)s[n][c]=s[c][n]=Number.POSITIVE_INFINITY;for(var o=0;o<e.length;o++)a[o]==c&&(a[o]=d),s[d][o]<s[d][a[d]]&&(a[d]=o);t=m}return this.writeNewick(t)},this.isLeafNode=function(t){return null==t.left&&null==t.right?!0:!1},this.writeNewick=function(t,e){var i="",s="";if(this.isLeafNode(t))i=t.id;else{var a=this.writeNewick(t.left,e),r=this.writeNewick(t.right,e);if(t.mid)for(var h=0;h<t.mid.length;h++)s+=e&&t.mid[h].dist?","+t.mid[h].id+":"+t.mid[h].dist:","+t.mid[h].id,s+=t.mid[h].id;i="("+a+s+","+r+")"}return e&&t.dist&&(i+=":"+t.dist),i},this.kmeans=function(){var t=this.getDataForClustering(),e=(this.getIdsForClustering(),[]),i=[],s=!0,a=0,r=null,h=this.createRandomVectors(this.kmeansClusters,t);if(null==h)return null;for(r=h.vectors;s;){for(var n=0;n<this.kmeansClusters;n++)i[n]=0;for(var n=0;n<t.length;n++){for(var o,l=t[n],d=Number.MAX_VALUE,c=0;c<this.kmeansClusters;c++){var p=this.euclidianDistance(r[c],l);d>p&&(d=p,o=c)}i[o]++,e[n]=o}for(var g=[],n=0;n<this.kmeansClusters;n++)g[n]=null;for(var n=0;n<t.length;n++)g[e[n]]=null==g[e[n]]?t[n]:this.addVectors(g[e[n]],t[n]);for(var n=0;n<this.kmeansClusters;n++)g[n]=this.multiplyVectorByValue(g[n],1/i[n]);s=!1;for(var n=0;n<this.kmeansClusters;n++)if(!this.compareVectors(g[n],r[n])){s=!0;break}r=g,a++,a>this.maxIterations&&(s=!1)}for(var n=0;n<e.length;n++)e[n]="K-"+(e[n]+1);return e},this.transpose=function(t,e){if(t){for(var i=[],s=0;s<t.length;s++)for(var a=0;a<t[s].length;a++)i[a]||(i[a]=[]),i[a][s]=t[s][a];return i}if(this.ungroupSamples(),this.transform("reset"),this.data.l&&delete this.data.l,this.data.d&&delete this.data.d,this.data.a&&delete this.data.a,this.data.t){var r=this.data.t.vars,h=this.data.t.smps;r&&(this.data.t.smps=r),h&&(this.data.t.vars=h)}var n=this.data.x,o=this.data.z;n&&(this.data.z=n),o&&(this.data.x=o);var h=this.data.y.smps;this.data.y.smps=this.data.y.vars,this.data.y.vars=h;

var i=this.data.y.data;this.data.y.data=[];for(var s=0;s<this.data.y.vars.length;s++){this.data.y.data[s]=[];for(var a=0;a<this.data.y.smps.length;a++)this.data.y.data[s][a]=i[a][s]}e||(this.initializeData(this.data),this.resetObject(),this.draw())},this.checkObject=function(){var t=this.data.y;this.isGroupedData&&(this.data.w={},t=this.data.w);for(var e=["vars","smps","desc","data","mean","median","stdev","n","qtl1","qtl3","iqr1","iqr3","out","trans","cor","sum","grps","close","open","high","low","volume"],i=0;i<e.length;i++)t[e[i]]||(t[e[i]]=[])},this.resetObject=function(t){var e=["mean","median","stdev","n","qtl1","qtl3","iqr1","iqr3","out","cor","sum","grps","close","open","high","low","volume"];if(this.isGroupedData){this.isTransformedData||e.push("trans");for(var i=0;i<e.length;i++)delete this.data.y[e[i]];delete this.data.w}else if(this.isTransformedData||e.push("trans"),this.isRawData)for(var i=0;i<e.length;i++)delete this.data.y[e[i]];else delete this.data.y.data;t&&this.checkObject()},this.getDataAtPos=function(t,e,i,s,a,r){var h=Number.NaN,n=this.isGroupedData?this.data.w:this.data.y;return this.isGroupedData||!this.isRawData?this.isTransformedData?h=n.trans[t][e]:(i=i?i:this.summaryType,h=n.hasOwnProperty(i)?n[i][t][e]:0):i?n[i]&&n[i][t]&&(h=n[i][t][e]):h=this.isTransformedData?n.trans[t][e]:n.data[t][e],s&&(isNaN(h)||("log2"==s?h=Math.log(h)/Math.LN2:"log10"==s?h=Math.log(h)/Math.LN10:"exp2"==s?h=Math.pow(2,h):"exp10"==s?h=Math.pow(2,h):"percentile"==s&&(h=this.percentile(a,r,h)))),h},this.getDataForSmpGrpAtIndex=function(t,e,i){var s=[];if(e||(e=this.varIndices),this.isGroupedData||!this.isRawData){var a=this.isGroupedData?this.data.w:this.data.y;if(this.isTransformedData)s.push(a.trans[h][t]);else if(i=this.summaryType,a.hasOwnProperty(i))for(var r=0;r<e.length;r++){var h=e[r];s.push(a[i][h][t])}}else{var n=i?this.data.y[i]:this.data.y.data;if(this.isTransformedData)for(var r=0;r<e.length;r++){var h=e[r];s.push(this.data.y.trans[h][t])}else for(var r=0;r<e.length;r++){var h=e[r];s.push(n[h][t])}}return s},this.getDataForVariableAtIndex=function(t){var e=[];if(this.isTransformedData)for(var i=0;i<this.smpIndices.length;i++){var s=this.smpIndices[i];e.push(this.data.y.trans[t][s])}else for(var i=0;i<this.smpIndices.length;i++){var s=this.smpIndices[i];e.push(this.data.y.data[t][s])}return e},this.getMetaDataForVariableAtIndex=function(t){var e={};if(this.data.z)for(var i in this.data.z)e[i]=this.data.z[i][t];return e[name]=this.data.y.vars[t],e},this.getMetaDataForSampleAtIndex=function(t){return this.isGroupedData?this.getMetaDataForGrpAtIndex(t):this.getMetaDataForSmpAtIndex(t)},this.getMetaDataForSmpAtIndex=function(t){var e={};if(this.data.x)for(var i in this.data.x)e[i]=this.data.x[i][t];return e[name]=this.data.y.vars[t],e},this.getMetaDataForGrpAtIndex=function(t){for(var e=[],i=0;i<this.data.w.grps[t].length;i++){var s=this.data.w.grps[t][i];e.push(this.getMetaDataForSmpAtIndex[s])}return e},this.summarize=function(t,e){var i=this.isGroupedData?this.data.w:this.data.y,s=this.isGroupedData?!1:!0;if(this.isGroupedData||this.checkObject(),"cor"==t)if(this.isBoxPlotCalc=!1,"samples"==this.correlationAxis)for(var a=this.isGroupedData?this.grpIndices:this.smpIndices,r=0;r<a.length;r++){var h=a[r],n=this.getDataForSmpGrpAtIndex(h);i.cor[h]||(i.cor[h]=[]);for(var o=r;o<a.length;o++){var l=a[o];i.cor[l]||(i.cor[l]=[]);var d=this.getDataForSmpGrpAtIndex(l);r==o?(this.isTransformedData&&(i.trans[h][l]=1),i.cor[h][l]=1):(i.cor[h][l]=this.correlation(n,d),i.cor[l][h]=i.cor[h][l],this.isTransformedData&&(i.trans[h][l]=i.cor[h][l],i.trans[l][h]=i.cor[l][h]))}}else for(var r=0;r<this.varIndices.length;r++){var h=this.varIndices[r];i.cor[h]||(i.cor[h]=[]);for(var o=r;o<this.varIndices.length;o++){var l=this.varIndices[o];i.cor[l]||(i.cor[l]=[]),r==o?(i.cor[h][l]=1,this.isTransformedData&&(i.trans[h][l]=1)):(i.cor[h][l]=this.correlation(i.data[h],i.data[l],s),i.cor[l][h]=i.cor[h][l],this.isTransformedData&&(i.trans[h][l]=i.cor[h][l],i.trans[l][h]=i.cor[l][h]))}}else{this.isBoxPlotCalc="iqr"==t?!0:!1;for(var r=0;r<this.varIndices.length;r++){var c,h=this.varIndices[r];if(i.mean[h]||(i.trans[h]=[],i.mean[h]=[],i.median[h]=[],i.stdev[h]=[],i.qtl1[h]=[],i.qtl3[h]=[],i.iqr1[h]=[],i.iqr3[h]=[],i.out[h]=[],i.n[h]=[],i.sum[h]=[]),this.isGroupedData)c=e[h];else{i.grps=[],c=[];for(var o=0;o<this.smpIndices.length;o++){var l=this.smpIndices[o];i.grps[o]=[],i.grps[o].push(l),c[o]=[i.data[h][l]]}}if("iqr"==t){this.summaryType="iqr";for(var o=0;o<c.length;o++){var p=this.quantiles(c[o],s);this.isTransformedData&&(i.trans[h][o]=p[1]),i.median[h][o]=p[1],i.qtl1[h][o]=p[0],i.qtl3[h][o]=p[2],i.iqr1[h][o]=p[3],i.iqr3[h][o]=p[4],i.out[h][o]=p[5],i.n[h][o]=p[6]}}else if("median"==t){this.summaryType="median";for(var o=0;o<c.length;o++){var p=this.median(c[o],s);this.isTransformedData&&(i.trans[h][o]=p[1]),i.median[h][o]=p[0],i.n[h][o]=p[1]}}else if("mean"==t){this.summaryType="mean";for(var o=0;o<c.length;o++){var p=this.meanStandardDeviationN(c[o],s);this.isTransformedData&&(i.trans[h][o]=p[1]),i.mean[h][o]=p[0],i.stdev[h][o]=p[1],i.n[h][o]=p[2]}}else if("sum"==t){this.summaryType="sum";for(var o=0;o<c.length;o++){var g=this.sum(c[o],s);this.isTransformedData&&(i.trans[h][o]=g),i.sum[h][o]=g,i.n[h][o]=c[o].length}}}}},this.copySummarizedData=function(){for(var t,e=this.isGroupedData?this.data.w:this.data.y,i=0;i<this.varIndices.length;i++){var s=this.varIndices[i];if(e.data[s]=[],e.trans[s]=[],"mean"==this.summaryType)for(var a=0;a<e.mean[s].length;a++)e.data[s][a]=e.mean[s][a];else if("median"==this.summaryType||"iqr"==this.summaryType)for(var a=0;a<e.median[s].length;a++)e.data[s][a]=e.median[s][a];else if("candle"==this.summaryType)for(var a=0;a<e.close[s].length;a++)e.data[s][a]=e.close[s][a];else if("volume"==this.summaryType)for(var a=0;a<e.volume[s].length;a++)e.data[s][a]=e.volume[s][a];else if("sum"==this.summaryType)for(var a=0;a<e.volume[s].length;a++)e.data[s][a]=e.sum[s][a];t||(t=s)}return t},this.transformValue=function(t,e,i){switch(t){case"log2":return i?Math.pow(2,e):Math.log(e)/Math.LN2;case"log10":return i?Math.pow(10,e):Math.log(e)/Math.LN10;case"exp2":return i?Math.log(e)/Math.LN2:Math.pow(2,e);case"exp10":return i?Math.log(e)/Math.LN10:Math.pow(10,e);default:return e}},this.transform=function(t,e,i){var s=0;this.isGroupedData||this.checkObject(),(!this.isRawData||this.isGroupedData)&&(s=this.copySummarizedData()),this.transformType=t,"reset"==t||"undo"==t?(this.transformReset(),this.transformType=!1,this.isTransformedData=!1):"save"==t?(this.transformSave(),this.transformType=!1,this.isTransformedData=!1):"log2"==t||"log10"==t||"exp2"==t||"exp10"==t?(this.transformLogExp(t),this.isTransformedData=!0):"ratio"==t||"ratio2"==t||"ratio10"==t?(this.transformRatio(t,i),this.isTransformedData=!0):(this.transformRelative(t,e,s),this.isTransformedData=!0),this.draw()},this.transformReset=function(){for(var t=this.isGroupedData?this.data.w:this.data.y,e=0;e<this.varIndices.length;e++)for(var i=this.varIndices[e],s=0;s<t.data[i].length;s++)t.trans[i]&&!isNaN(t.data[i][s])&&(t.trans[i][s]=t.data[i][s])},this.transformSave=function(){for(var t=this.isGroupedData?this.data.w:this.data.y,e=0;e<this.varIndices.length;e++)for(var i=this.varIndices[e],s=0;s<t.data[i].length;s++)isNaN(t.data[i][s])||(t.data[i][s]=t.trans[i][s])},this.transformLogExp=function(t){var e=this.isGroupedData?this.data.w:this.data.y;"log"==t?t=2==this.transformBase?"type2":"type10":"exp"==t&&(t=2==this.transformBase?"exp2":"exp10");for(var i=0;i<this.varIndices.length;i++){var s=this.varIndices[i];e.trans[s]||(e.trans[s]=[]);for(var a=0;a<e.data[s].length;a++)isNaN(e.data[s][a])||("log2"==t?(this.isLogData=!0,this.transformBase=2,e.trans[s][a]=Math.log(e.data[s][a])/Math.LN2):"log10"==t?(this.isLogData=!0,this.transformBase=10,e.trans[s][a]=Math.log(e.data[s][a])/Math.LN10):"exp2"==t?(this.isLogData=!1,this.transformBase=2,e.trans[s][a]=Math.pow(2,e.data[s][a])):"exp10"==t&&(this.isLogData=!1,this.transformBase=10,e.trans[s][a]=Math.pow(10,e.data[s][a])))}},this.transformRatio=function(t,e){var i=this.isGroupedData?this.data.w:this.data.y;e=e?e:this.ratioReference?this.ratioReference:0;for(var s=0;s<this.varIndices.length;s++){var a=this.varIndices[s];i.trans[a]||(i.trans[a]=[]);for(var r=0;r<i.data[a].length;r++)if(!isNaN(i.data[a][r])&&!isNaN(i.data[a][e]))if(this.isLogData){"ratio"==t&&(t=2==this.transformBase?"ratio2":"ratio10");var h;i.data[a][r]>=i.data[a][e]?(h=i.data[a][r]-i.data[a][e],"ratio2"==t?i.trans[a][r]=Math.pow(2,h):"ratio10"==t&&(i.trans[a][r]=Math.pow(10,h))):(h=i.data[a][e]/i.data[a][s],i.trans[a][r]="ratio2"==t?-1*Math.pow(2,h):-1*Math.pow(10,h))}else i.trans[a][r]=i.data[a][r]>=i.data[a][e]?i.data[a][r]/i.data[a][e]:i.data[a][e]/i.data[a][r]*-1}},this.transformRelative=function(t,e,i){var s=this.isGroupedData?this.data.w:this.data.y,a=this.isGroupedData?!1:!0;if(e=e?e:this.zscoreAxis?this.zscoreAxis:"samples","samples"==e)for(var r=0;r<s.data[i].length;r++){for(var h=[],n=0;n<this.varIndices.length;n++){var o=this.varIndices[n];h.push(s.data[o][r])}if("percentile"==t)var l=this.range(h,a);else if("zscore"==t)var l=this.meanStandardDeviationN(h,a);for(var n=0;n<this.varIndices.length;n++){var o=this.varIndices[n];s.trans[o]||(s.trans[o]=[]),isNaN(s.data[o][r])||("percentile"==t?s.trans[o][r]=this.percentile(l[0],l[1],s.data[o][r]):"zscore"==t&&(s.trans[o][r]=(s.data[o][r]-l[0])/l[1]))}}else for(var r=0;r<this.varIndices.length;r++){var d=this.varIndices[r];s.trans[d]=[];var h=s.data[d];if("percentile"==t)var l=this.range(h,a);else if("zscore"==t)var l=this.meanStandardDeviationN(h,a);for(var n=0;n<h.length;n++)isNaN(s.data[d][n])||("percentile"==t?s.trans[d][n]=this.percentile(l[0],l[1],s.data[d][n]):"zscore"==t&&(s.trans[d][n]=(s.data[d][n]-l[0])/l[1]))}},this.sortSamples=function(t,e,i,s,a){this.sortIndices("smps",t,e,!1,i,s,a),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.sortSamplesByCategory=function(t){this.sortIndices("smps",!1,t),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.sortSamplesByVariable=function(t,e){var i=parseInt(this.getVariableIndices(t));this.sortIndices("smps",!1,!1,!1,i+1,e),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.sortVariables=function(t,e,i,s,a){this.sortIndices("vars",t,e,i,!1,s,a),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.sortVariablesByCategory=function(t){this.sortIndices("vars",!1,t),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.sortVariablesBySample=function(t){var e=parseInt(this.getSampleIndices(t));this.sortIndices("vars",!1,!1,e+1),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.getGroupingFactors=function(t){return t?this.groupingFactors:this.getObjectArray(this.groupingFactors)},this.modifyGroupingFactors=function(t,e){this.modifyObjectArray(t,e,"groupingFactors")},this.segregateSamplesVariables=function(t,e,i,s,a){delete this.data.l,this.deleteSubGraphAttributes(),this.data.l={},this.data.l.smps=t,this.data.l.vars=e,this.data.l.weight=[],this.data.l.type=[],this.data.l.name=[],this.data.l.desc=[];for(var r=1/t.length,h=1/e.length,n=this.data.y.desc[0]?this.data.y.desc[0]:"",o=0;o<e.length;o++)for(var l=0;l<t.length;l++)this.data.l.weight.push([h,r]),this.data.l.type.push(this.graphType),this.data.l.name.push([s[o],i[l]]),this.data.l.desc.push(n);this.layoutComb=!0,this.layout=t.length+"X"+e.length,this.isValidLayout(),a||this.draw()},this.desegregateSamples=function(t){this.segregateSamplesBy=!1,this.showAnimation=this.showAnimationTemp,this.resetLayout(),this.segregateVariablesBy?this.segregateVariables(this.segregateVariablesBy,t):this.isValidLayout(),t||this.draw()},this.segregateSamples=function(t,e){if(this.data.x&&this.data.x[t]){delete this.layoutParams;for(var i={},s=0,a=[],r=[],h=0;h<this.data.x[t].length;h++){var n=this.data.x[t][h];i.hasOwnProperty(n)||(i[n]=[],s++),i[n].push(this.data.y.smps[h])}var o=1/s;if(this.segregateVariablesBy){vars=this.data.l.vars;for(var n in i)a.push(n),r.push(i[n]);this.segregateSamplesBy=t,this.segregateSamplesVariables(r,this.data.l.vars,a,this.data.l.name,e)}else{delete this.data.l,this.deleteSubGraphAttributes(),this.data.l={},this.data.l.smps=[],this.data.l.weight=[],this.data.l.type=[],this.data.l.name=[],this.data.l.desc=[];for(var n in i)this.data.l.smps.push(i[n]),this.data.l.weight.push(o),this.data.l.type.push(this.graphType),this.data.l.name.push(n),this.data.l.desc.push(this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:"");this.segregateSamplesBy=t,this.layoutComb=!0,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1,this.layout="1X"+this.data.l.smps.length,this.isValidLayout()}e||this.draw()}},this.desegregateVariables=function(t){this.segregateVariablesBy=!1,this.showAnimation=this.showAnimationTemp,this.resetLayout(),this.segregateSamplesBy?this.segregateSamples(this.segregateSamplesBy,t):this.isValidLayout(),t||this.draw()},this.segregateVariables=function(t,e){if(this.data.z&&this.data.z[t]){delete this.layoutParams;for(var i={},s=0,a=[],r=[],h=0;h<this.data.z[t].length;h++){var n=this.data.z[t][h];i.hasOwnProperty(n)||(i[n]=[],s++),i[n].push(this.data.y.vars[h])}var o=1/s;if(this.segregateSamplesBy){for(var n in i)r.push(n),a.push(i[n]);this.segregateVariablesBy=t,this.segregateSamplesVariables(this.data.l.smps,a,this.data.l.name,r,e)}else{delete this.data.l,this.deleteSubGraphAttributes(),this.data.l={},this.data.l.vars=[],this.data.l.weight=[],this.data.l.type=[],this.data.l.name=[],this.data.l.desc=[];for(var n in i)this.data.l.vars.push(i[n]),this.data.l.weight.push(o),this.data.l.type.push(this.graphType),this.data.l.name.push(n),this.data.l.desc.push(this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:"");this.segregateVariablesBy=t,this.layoutComb=!0,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1,this.layout="1X"+this.data.l.vars.length,this.isValidLayout()}e||this.draw()}},this.deleteSubGraphAttributes=function(){if(this.layoutRows&&this.layoutCols)for(var t=0,e=0;e<this.layoutRows;e++)for(var i=0;i<this.layoutCols;i++)delete this["subGraphWeight"+t],delete this["subGraphType"+t],delete this["subGraphSummaryType"+t],delete this["subGraphTransformType"+t],t++},this.unsetAllVsAll=function(){if(this.graphType.match(/Scatter/)){if(this.xAxisTemp&&this.xAxisTemp.length>0&&(this.xAxis=this.xAxisTemp,this.xAxisTmp=[]),this.yAxisTemp&&this.yAxisTemp.length>0&&(this.yAxis=this.yAxisTemp,this.yAxisTmp=[]),this.zAxisTemp&&this.zAxisTemp.length>0&&(this.zAxis=this.zAxisTemp,this.zAxisTmp=[]),!this.xAxis||!this.yAxis){this.xAxis=[],this.yAxis=[],this.xAxisIndices=[],this.yAxisIndices=[],this.xAxis=[this.data.y.smps[0]];for(var t=1;t<this.data.y.smps.length;t++)this.yAxis.push(this.data.y.smps[t]);this.xAxisIndices=this.getSampleIndices(this.xAxis),this.yAxisIndices=this.getSampleIndices(this.yAxis),this.initAxes(!0)}this.allVsAll=!1,this.showAnimationTemp&&(this.showAnimation=this.showAnimationTemp),this.resetLayout(),this.isValidLayout()}},this.setAllVsAll=function(){if(this.graphType.match(/Scatter/)){var t=this.data.y.data[0].length,e=1/t;this.xAxisTemp=this.xAxisTemp||this.xAxis,this.xAxis=[],this.yAxisTemp=this.yAxisTemp||this.yAxis,this.yAxis=[],this.zAxisTemp=this.zAxisTemp||this.zAxis,this.zAxis=[],this.data.l={},this.data.l.smps=[],this.data.l.weight=[],this.data.l.type=[],this.data.l.desc=[];for(var i=0;t>i;i++)for(var s=0;t>s;s++)this.data.l.weight.push(e),this.data.l.desc.push(this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:""),this.data.l.type.push(this.graphType),this.data.l.smps.push(i==s?{}:"upper"==this.allVsAllType?s>i?{xAxis:[this.data.y.smps[s]],yAxis:[this.data.y.smps[i]]}:{}:"lower"==this.allVsAllType?i>s?{xAxis:[this.data.y.smps[s]],yAxis:[this.data.y.smps[i]]}:{}:{xAxis:[this.data.y.smps[s]],yAxis:[this.data.y.smps[i]]});this.layoutComb=!0,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1,this.layout=t+"X"+t,this.isValidLayout()}},this.setMultiplePies=function(){if(this.graphType.match(/Pie/)){var t,e,i=this.xAxis.length;if(this.layout){var s=this.layout.split(/X/i);t=parseInt(s[0]),e=parseInt(s[1]),i>t*e&&(t=Math.ceil(Math.sqrt(i)),e=Math.floor(Math.sqrt(i)),this.layout=t+"X"+e)}else t=Math.ceil(Math.sqrt(i)),e=Math.floor(Math.sqrt(i)),this.layout=t+"X"+e;var a=1/t,r=1/e;delete this.layoutParams,delete this.data.l,this.deleteSubGraphAttributes(),this.data.l={},this.data.l.smps=[],this.data.l.weight=[],this.data.l.type=[],this.data.l.desc=[];for(var h=0;i>h;h++)this.data.l.smps.push([this.xAxis[h]]),this.data.l.weight.push([r,a]),this.data.l.desc.push(this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:""),this.data.l.type.push(this.graphType);this.layoutComb=!0,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1,this.isValidLayout()}},this.ungroupSamples=function(){this.isGroupedData=!1,this.groupingFactors=[],this.grpIndices=[],this.hiddenGrps=[],this.setMaxSmpStringName(),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.createHistogram=function(t){var e,i,s,a,r,h=0,n=[],o=[],l=[],d={};if(d.y={},d.y.data=[],d.y.vars=[],d.y.smps=[],this.graphType.match(/Scatter/)){if("XYZ"==this.type2D)e="y"==t?this.yAxisIndices[this.yAxisCurrent]:this.xAxisIndices[this.xAxisCurrent],n.push(e);else if("XY"==this.type2D)for(var c=0;c<this.xAxisIndices.length;c++)e="y"==t?this.yAxisIndices[c]:this.xAxisIndices[c],n.push(e);else if("X"==this.type2D)if("y"==t)n.push(this.yAxisIndices[this.yAxisCurrent]);else for(var c=0;c<this.xAxisIndices.length;c++)n.push(this.xAxisIndices[c]);else if("y"==t)for(var c=0;c<this.yAxisIndices.length;c++)n.push(this.yAxisIndices[c]);else n.push(this.xAxisIndices[this.xAxisCurrent]);for(var c=0;c<this.histogramBins;c++)d.y.vars.push("Bin"+(c+1)),d.y.data[c]=[];for(var c=0;c<n.length;c++){d.y.smps.push(this.data.y.smps[n[c]]),d.y.smps.push(this.data.y.smps[n[c]]+" counts"),o.push(this.data.y.smps[n[c]]),l.push(this.data.y.smps[n[c]]+" counts");for(var p=[],g=0;g<this.histogramBins;g++)p[g]=0;i=this.getDataForSmpGrpAtIndex(n[c]),s=this.range(i),a=(s[1]-s[0])/this.histogramBins+s[0]/(2*this.histogramBins);for(var g=0;g<i.length;g++)r=Math.floor((i[g]-s[0])/a),p[r]++;for(var g=0;g<this.histogramBins;g++)d.y.data[g][h]=a*(g+1);h++;for(var g=0;g<this.histogramBins;g++)d.y.data[g][h]=p[g];h++}this.isCreateHistogram=!0,this.isHistogram=!0,this.histogramBarWidthStndBy=this.histogramBarWidth,this.dataStndBy=this.data,this.data={},this.resetConfig(["graphType","isHistogram"]),this.xAxis=o,this.yAxis=l,this.showLegend=!1,this.histogramBarWidth=1.5,this.initializeData(d)}},this.removeHistogram=function(){this.isCreateHistogram=!1,this.histogramBarWidth=this.histogramBarWidthStndBy,this.switchData()},this.addRegressionLine=function(){var t,e,i,s,a,r,h;if(this.graphType.match(/Scatter/))if("XYZ"==this.type2D)t=this.xAxisIndices[this.xAxisCurrent],e=this.yAxisIndices[this.yAxisCurrent],r=this.data.y.smps[t]+" vs "+this.data.y.smps[e],i=this.getDataForSmpGrpAtIndex(t),s=this.getDataForSmpGrpAtIndex(e),a=this.regression(i,s),this.addRegressionDecoration(a,r,this.foreground);else if("XY"==this.type2D)for(var n=0;n<this.xAxisIndices.length;n++)h=n%this.colors.length,t=this.xAxisIndices[n],e=this.yAxisIndices[n],r=this.data.y.smps[t]+" vs "+this.data.y.smps[e],i=this.getDataForSmpGrpAtIndex(t),s=this.getDataForSmpGrpAtIndex(e),a=this.regression(i,s),this.addRegressionDecoration(a,r,this.colors[h]);else if("X"==this.type2D){e=this.yAxisIndices[this.yAxisCurrent],s=this.getDataForSmpGrpAtIndex(e);for(var n=0;n<this.xAxisIndices.length;n++)h=n%this.colors.length,t=this.xAxisIndices[n],r=this.data.y.smps[t]+" vs "+this.data.y.smps[e],i=this.getDataForSmpGrpAtIndex(t),a=this.regression(i,s),this.addRegressionDecoration(a,r,this.colors[h])}else{t=this.xAxisIndices[this.xAxisCurrent],i=this.getDataForSmpGrpAtIndex(t);for(var n=0;n<this.yAxisIndices.length;n++)h=n%this.colors.length,e=this.yAxisIndices[n],s=this.getDataForSmpGrpAtIndex(e),r=this.data.y.smps[t]+" vs "+this.data.y.smps[e],a=this.regression(i,s),this.addRegressionDecoration(a,r,this.colors[h])}},this.addRegressionDecoration=function(t,e,i){this.showDecorations=!0,this.data.d||(this.data.d={}),this.data.d.reg||(this.data.d.reg=[]),this.data.d.reg.push({slope:t[0],intercept:t[1],cor:t[2],label:e,color:i})},this.addNormalDistributionLine=function(t){var e,i,s,a,r,h,n,o,l,o,d,c;if(this.graphType.match(/Scatter/))if("XYZ"==this.type2D)s="y"==t?this.yAxisIndices[this.yAxisCurrent]:this.xAxisIndices[this.xAxisCurrent],a="y"==t?this.xAxisIndices[this.xAxisCurrent]:this.yAxisIndices[this.yAxisCurrent],r=this.getDataForSmpGrpAtIndex(s),h=this.getDataForSmpGrpAtIndex(a),n=this.max(h),o=this.data.y.smps[s],l=this.meanStandardDeviationN(r),this.addNormalDistributionDecoration(l,n,o,this.foreground,t);else{e="y"==t?this.yAxisIndices:this.xAxisIndices,i="y"==t?this.xAxisIndices:this.yAxisIndices,c="y"==t?this.xAxisCurrent:this.yAxisCurrent;for(var p=0;p<e.length;p++)d=p%this.colors.length,s=e[p],a=i[p]?i[p]:i[c],r=this.getDataForSmpGrpAtIndex(s),h=this.getDataForSmpGrpAtIndex(a),n=this.max(h),o=this.data.y.smps[s],l=this.meanStandardDeviationN(r),this.addNormalDistributionDecoration(l,n,o,this.colors[d],t)}},this.addNormalDistributionDecoration=function(t,e,i,s,a){this.showDecorations=!0,this.data.d||(this.data.d={}),this.data.d.nor||(this.data.d.nor=[]),this.data.d.nor.push(a&&"y"==a?{mu:t[0],sigma:t[1],yAxis:!0,max:e,label:i,color:s}:{mu:t[0],sigma:t[1],max:e,label:i,color:s})},this.addKaplanMeierCurve=function(t,e,i,s){var a,r,h,n,o,l,d=!1,c={d:{},c:{}},p={},g=1.95996,u=g*g;if(t&&e){var m=this.getSampleIndices(t),f=this.getSampleIndices(e);if(null!=m&&null!=f){for(var v=0;v<this.varIndices.length;v++){var x=this.data.y.data[v][m],y=this.data.y.data[v][f];isNaN(y)||(isNaN(y)||0!=y?(c.c[x]=c.c[x]?c.c[x]+1:1,p[x]=!0):(c.d[x]=c.d[x]?c.d[x]+1:1,p[x]=!0))}p=this.getKeys(p),p.sort(function(t,e){return t-e}),d={times:p,data:[]};for(var v=0;v<p.length;v++)d.data.push([c.c[p[v]]||0,c.d[p[v]]||0]);d.data[0].push(this.varIndices.length);for(var v=1;v<p.length;v++)d.data[v].push(d.data[v-1][2]-(d.data[v-1][0]+d.data[v-1][1]));a=1;for(var v=0;v<p.length;v++)a*=1-d.data[v][1]/d.data[v][2],r=1-a,h=2*a*this.varIndices.length+u+1+g*Math.sqrt(u+2-1/this.varIndices.length+4*a*(r*this.varIndices.length-1)),n=2*(this.varIndices.length+u),o=h/n,1==a&&(o=1),h=2*a*this.varIndices.length+u-1-g*Math.sqrt(u-2-1/this.varIndices.length+4*a*(r*this.varIndices.length+1)),l=h/n,0==a&&(l=0),d.data[v].push(a,o,l);this.addKaplanMeierDecoration(t,d,i,s)}}},this.addKaplanMeierDecoration=function(t,e,i,s){this.showDecorations=!0,this.data.d||(this.data.d={}),this.data.d.kaplanMeier||(this.data.d.kaplanMeier=[]),this.data.d.kaplanMeier.push({time:t,data:e,label:i||"Kaplan - Meier "+(this.data.d.kaplanMeier.length+1),color:s||this.colors[this.data.d.kaplanMeier.length%this.colors.length]})},this.addLineDecoration=function(t,e,i,s){this.graphType.match(/Scatter|Network|Genome|Correlation|Venn|Circular/)||(this.data.d||(this.data.d={}),this.data.d.lines||(this.data.d.lines=[]),t&&"solid"==t&&(t="line"),this.data.d.lines.push({type:t||"line",color:e||this.foreground,value:i||0,label:s||!1}))},this.createRandomData=function(){var t={};t.y={},t.y.data=[],t.y.vars=[],t.y.smps=[];for(var e=0;e<this.randomDataSamples;e++)t.y.smps[e]="Sample"+(e+1);for(var e=0;e<this.randomDataVariables;e++){t.y.data[e]=[],t.y.vars[e]="Variable"+(e+1);for(var i=0;i<this.randomDataSamples;i++)t.y.data[e].push(Math.floor((2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1))*this.randomDataSigma+this.randomDataMean))}t.x={};for(var s=Math.floor(this.randomDataSamples/this.randomDataSampleAnnotationRatio),e=0;e<this.randomDataSampleAnnotations;e++){t.x["Factor"+(e+1)]=[];for(var i=0;i<this.randomDataSamples;i++)t.x["Factor"+(e+1)][i]="Level"+(Math.floor(Math.random()*s)+1)}t.z={};for(var s=Math.floor(this.randomDataVariables/this.randomDataVariableAnnotationRatio),e=0;e<this.randomDataVariableAnnotations;e++){t.z["Annt"+(e+1)]=[];for(var i=0;i<this.randomDataVariables;i++)t.z["Annt"+(e+1)][i]="Desc"+(Math.floor(Math.random()*s)+1)}this.data&&!this.dataStndBy&&(this.dataStndBy=this.data,this.data={}),this.resetConfig(["graphType"]),this.initializeData(t),this.draw()},this.restoreRandomData=function(){this.switchData()},this.groupSamples=function(t,e,i){if(t.length<1)return this.ungroupSamples();for(var s=0;s<t.length;s++)if(!t||!this.data.x[t[s]])return this.ungroupSamples();if(this.layoutComb&&this.data.l.comp){this.varIndices=[];for(var s=0;s<this.data.l.comp.length;s++)for(var a=0;a<this.data.l.comp[s].length;a++)this.varIndices.push(this.data.l.comp[s][a])}this.resetIndices(),this.isGroupedData=!0,this.groupingFactors=t,this.resetObject(!0),this.hiddenGrps=[];for(var r={},h=[],n=0,s=0;s<this.smpIndices.length;s++){for(var o,l=this.smpIndices[s],d=[],a=0;a<t.length;a++){var c=t[a];o=this.data.x[c][l],o||(o="NA"),d.push(o)}o=d.join(" - "),r.hasOwnProperty(o)?r[o].push(l):(this.data.w.smps.push(o),h[n]=o,r[o]=[],r[o].push(l),n++)}for(var s=0;s<h.length;s++){var o=h[s];this.data.w.grps.push(r[o])}if(this.grpIndices=[],i)for(var s=0;s<i.length;s++)this.grpIndices.push(i[s]),this.hiddenGrps.push(!1);else for(var s=0;s<this.data.w.grps.length;s++)this.grpIndices.push(s),this.hiddenGrps.push(!1);for(var s=0;s<this.varIndices.length;s++)this.data.w.vars.push(this.data.y.vars[this.varIndices[s]]);var p=[];e?this.isArray(e)?p=e:p.push(e):(e="Boxplot"==this.graphType?"iqr":"mean",p.push(e));for(var g=0;g<p.length;g++){var u=[],m=p[g];data=this.isTransformedData?this.data.y.trans:this.isRawData?this.data.y.data:"median"==this.summaryType||"iqr"==this.summaryType?this.data.y.median:"mean"==this.summaryType?this.data.y.mean:"cor"==this.summaryType?this.data.y.cor:"sum"==this.summaryType?this.data.y.sum:this.data.y[this.summaryType];for(var s=0;s<this.varIndices.length;s++){var l=this.varIndices[s];u[l]=[];for(var a=0;a<this.data.w.grps.length;a++){u[l][a]=[];for(var f=0;f<this.data.w.grps[a].length;f++){var v=this.data.w.grps[a][f];u[l][a].push(data[l][v])}}}this.summarize(m,u)}this.setMaxVarStringName(),this.setMaxSmpStringName(),this.xAxisValues=[],this.xAxis2Values=[],this.yAxisValues=[],this.zAxisValues=[],this.layoutComb&&this.layoutAdjust||"function"==typeof this.setAxes&&this.setAxes(),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.initializeDataAttributes=function(t,e){this.setIndices(t,e),"Network"!=this.graphType&&"Genome"!=this.graphType&&"Venn"!=this.graphType&&(this.setMaxVarStringAttr(),this.setMaxSmpStringAttr())},this.initializeData=function(t){if(data&&!t?(this.isExample=!1,this.data=data,delete data):t?(this.isExample=!1,this.data=t,delete t):(this.remoteService||(this.isExample=!0),this.data=this.exampleRawData),this.samplesData=!1,this.variablesData=!1,this.nodesData=!1,this.edgesData=!1,this.featuresData=!1,this.validGraphTypes=[],this.data.y||this.data.venn||this.data.nodes||this.data.tracks||this.data.market||this.data.fx||this.data.video){if(this.data.fx&&this.FunctionData(),this.data.market&&(this.setMarketData(),this.summaryType="candle",this.validGraphTypes.push("Candlestick")),this.data.venn&&(this.summaryType="venn",this.validGraphTypes.push("Venn")),this.data.video&&(this.summaryType="video",this.validGraphTypes.push("Video")),this.data.nodes&&(this.summaryType="network",this.validGraphTypes.push("Network")),this.data.tracks&&(this.summaryType="genome",this.validGraphTypes.push("Genome")),this.data.y){if(!(this.data.y.data||this.data.y.mean||this.data.y.median||this.data.y.cor||this.data.y.sum||this.data.y.close))return void alert("Dude! there is not a valid data structure");this.data.y.data?(this.isRawData=!0,this.summaryType="raw"):(this.isRawData=!1,this.data.y.iqr1&&this.data.y.qtl1&&this.data.y.median&&this.data.y.qtl3&&this.data.y.iqr3?this.summaryType="iqr":this.data.y.median?this.summaryType="median":this.data.y.mean?this.summaryType="mean":this.data.y.cor?this.summaryType="cor":this.data.y.sum&&(this.summaryType="sum")),this.validGraphTypes.push("Bar"),this.validGraphTypes.push("Line"),this.validGraphTypes.push("Area"),this.validGraphTypes.push("AreaLine"),this.validGraphTypes.push("BarLine"),this.validGraphTypes.push("Boxplot"),this.validGraphTypes.push("Dotplot"),this.validGraphTypes.push("Heatmap"),this.validGraphTypes.push("Stacked"),this.validGraphTypes.push("StackedLine"),this.validGraphTypes.push("StackedPercent"),this.validGraphTypes.push("StackedPercentLine"),this.validGraphTypes.push("Pie"),this.validGraphTypes.push("Correlation"),this.validGraphTypes.push("Circular"),this.data.y.smps&&(this.data.y.smps.length>2?(this.validGraphTypes.push("Scatter2D"),this.validGraphTypes.push("ScatterBubble2D"),this.validGraphTypes.push("Scatter3D")):this.data.y.smps.length>1&&this.validGraphTypes.push("Scatter2D"))}this.validGraphTypes.sort()}this.initializeDataAttributes(this.data.initialVarIndices,this.data.initialSmpIndices),delete this.data.initialVarIndices,delete this.data.initialSmpIndices},this.setMarketTechnicalData=function(){if(this.stockIndicators.length>0){for(var t={},e=!1,i={Sma5:5,Sma10:10,Sma20:20,Sma25:25,Sma50:50},s=[],a=0;a<this.stockIndicators.length;a++)i.hasOwnProperty(this.stockIndicators[a])&&s.push(this.stockIndicators[a]);if(s.length>0){this.stockIndicators=s;for(var r={},a=0;a<this.stockIndicators.length;a++){var h=this.stockIndicators[a];if(i.hasOwnProperty(h)&&!this.data.y.hasOwnProperty(h)){t[h]=!0,e=!0,r[h]=[],this.data.y[h]=[];for(var n=0;n<this.data.y.vars.length;n++)r[h][n]=[],this.data.y[h][n]=[]}}if(e)for(var a=0;a<this.data.y.smps.length;a++)for(var n=0;n<this.data.y.vars.length;n++)for(var o=0;o<this.stockIndicators.length;o++){var h=this.stockIndicators[o];t.hasOwnProperty(h)&&(isNaN(this.data.y.close[n][a])||(r[h][n].push(this.data.y.close[n][a]),r[h][n].length==i[h]&&h.match(/Sma/)&&(this.data.y[h][n][a]=this.mean(r[h][n]),r[h][n].shift())))}}}},this.setMarketData=function(){if(this.data.market&&!this.isMarketDataFormated){var t=this.data.market;this.data.market={},this.data.market.smps=[],this.data.market.vars=[],this.data.market.close=[],this.data.market.open=[],this.data.market.high=[],this.data.market.low=[],this.data.market.volume=[],this.data.market.desc=["Price","Vol"];for(var e={},i=0,s=0;s<t.length;s++){this.data.market.vars.push(t[s].symbol),this.data.market.close[s]=[],this.data.market.open[s]=[],this.data.market.high[s]=[],this.data.market.low[s]=[],this.data.market.volume[s]=[];for(var a=t[s].data,r=a.length-1;r>=0;r--){var h=this.parseDate(a[r][0]),n=0;e.hasOwnProperty(h)?n=e[h]:(n=i,e[h]=i,this.data.market.smps.push(h),i++),this.data.market.open[s][n]=a[r][1],this.data.market.high[s][n]=a[r][2],this.data.market.low[s][n]=a[r][3],this.data.market.close[s][n]=a[r][4],this.data.market.volume[s][n]=a[r][5]}}}this.isMarketDataFormated=!0},this.switchToMarketData=function(){var t=this.data.market;this.dataStndBy=this.data,this.data={},this.data.y=t,this.initializeDataAttributes(),this.showVolume&&(this.deleteSubGraphAttributes(),this.data.l={},this.data.l.vars=[this.data.y.vars,this.data.y.vars],this.data.l.weight="vertical"==this.graphOrientation?[.75,.25]:[.25,.75],this.data.l.type=["Candlestick","Candlestick"],this.data.l.name="vertical"==this.graphOrientation?["Price","Volume"]:["Volume","Price"],this.data.l.desc="vertical"==this.graphOrientation?["Price","Volume"]:["Volume","Price"],this.segregateSamplesBy=!1,this.segregateVariablesBy=!1,this.layoutComb=!0,this.layout="1X2",this.isValidLayout())},this.switchFromMarketData=function(){this.switchData(),this.showVolume&&(this.resetLayout(),this.isValidLayout())},this.switchData=function(){this.dataStndBy&&(this.initConfig(),this.data=this.dataStndBy,this.initializeData(this.data))},this.updateData=function(t){this.initializeData(t),this.initializeGraph()},this.initializeData()},CanvasXpress.prototype.FunctionData=function(){this.implied=function(t){return"neg"==t?!1:/^(\d+\.\d+|\d+\.?|\.\d+)(e[-+]?\d+)?|\w+$/.test(t)},this.tokenize=function(t){
var e,i=[],s=new String(""),a=/(\d+\.\d+|\d+\.?|\.\d+)(e[-+]?\d+)?|[xy]|[a-z]+|[-+*\/(),^]|<=?|>=?|==|!=|&&|\|\|/g;for(t=t.toLowerCase(),t=t.replace(/\s/g,""),t=t.replace(/\+\+/g,"+"),t=t.replace(/\+-/g,"-"),t=t.replace(/-\+/g,"-"),t=t.replace(/--/g,"+"),t=t.replace(/^\+/,""),t=t.replace(/([(*\/&\|<>=])\+/g,"$1"),t=t.replace(/^-/,"neg "),t=t.replace(/([(*\/&\|<>=])-/g,"$1neg "),t=t.replace(/\)(\(|\w)/g,")*$1"),t=t.replace(/(\d)\(/g,"$1*(");e=a.exec(t);)this.implied(s)&&this.implied(e[0].toString())&&i.push("*"),i.push(s=e[0]);return i},this.isValidEnd=function(t){return/^(\d+\.\d+|\d+\.?|\.\d+)(e[-+]?\d+)?|[)xye]|pi|rand$/.test(t)},this.toPostFx=function(t){for(var e=new String,i=new String(""),s=new Array,a=new Array;e=t.shift();){if("("==e)s.push(e);else if(this.precedence[e]){for(;s.length&&"("!=s[s.length-1]&&this.precedence[s[s.length-1]]>=this.precedence[e];)a.push(s.pop());","!=e||this.isValidEnd(i)||a.push("Unexpected: "+i),","!=e&&s.push(e)}else if(")"==e){for(this.isValidEnd(i)||a.push("Unexpected: "+i);s.length&&"("!=s[s.length-1];)a.push(s.pop());0==s.length&&a.push("Unmatched: )"),s.pop()}else a.push(/^[-+]?(\d+\.?|\d*\.\d+)(e[-+]?\d+)?$/.test(e)?e:"Unknown: "+e);i=e}for(this.isValidEnd(i)||a.push("Unexpected: "+i);e=s.pop();)"("==e&&a.push("Unmatched: ("),a.push(e);return a},this.syntaxCheck=function(t){for(var e=new Number(0),i=new String,s=0;s<t.length;s++,e++){if(/^Un(matched|known|expected).*/.test(i=t[s]))return i;if(this.expects[i]){if(e<this.expects[i])return"Invalid use of: "+i;e-=this.expects[i]}}return 1==e?!1:t.length?"Unused arguments":"No function"},this.evaluate=function(t,e,i){for(var s=new Array,a=new String,r=0;r<t.length;r++)if(a=t[r],s.push("x"==a?e:"y"==a?i:"pi"==a?Math.PI:"e"==a?Math.E:"rand"==a?Math.random():this[this.alias[a]||a]?this[this.alias[a]||a](s.pop(),this[this.alias[a]||a].length>1?s.pop():0):a),isNaN(s[s.length-1]))return Number.NaN;return parseFloat(s.pop())},this.set2DPlot=function(t,e){var i={vars:[],smps:["X","Y"],data:[]},s=this.setMinX?this.setMinX:-1,a=this.setMaxX?this.setMaxX:1,r=this.setMinY?this.setMinY:-1,h=this.setMaxY?this.setMaxY:1,n=(a-s)/this.functionIntervals,o=(h-r)/this.functionIntervals,l=1;if(1==e)for(var d=s,c=0;c<this.functionIntervals;c++){var p=this.evaluate(t,d,0);isNaN(p)&&(p=""),d+=n,i.vars.push("v"+l),i.data.push([d,p]),l++}else for(var p=r,c=0;c<this.functionIntervals;c++){var d=this.evaluate(t,0,p);isNaN(d)&&(d=""),p+=o,i.vars.push("v"+l),i.data.push([d,p]),l++}return i},this.set3DPlot=function(t){for(var e={vars:[],smps:["X","Y","Z"],data:[]},i=this.setMinX?this.setMinX:-Math.PI/2,s=this.setMaxX?this.setMaxX:Math.PI/2,a=this.setMinY?this.setMinY:-Math.PI/2,r=this.setMaxY?this.setMaxY:Math.PI/2,h=this.width<=180?20:this.width<=600?30:40,n=1,o=0;h>=o;o++)for(var l=a+(r-a)*o/h,d=0;h>=d;d++){var c=i+(s-i)*d/h,p=this.evaluate(t,c,l);isFinite(p)||(p=0),e.vars.push("v"+n),e.data.push([c,p,l]),n++}return e},this.initializeFunctionData=function(){var t=this.toPostFx(this.tokenize(this.data.fx)),e=this.syntaxCheck(t);if(e)return void alert(e);var i=0;for(var s in t)"x"==t[s]?i|=1:"y"==t[s]&&(i|=2);0==i&&(i=1),3==i?(this.data.y=this.set3DPlot(t),this.graphType="Scatter3D",this.colorBy="Y"):(this.data.y=this.set2DPlot(t,i),this.graphType="Scatter2D",this.lineType="spline"),this.scatterType="function"},this.initializeFunctionData()},CanvasXpress.prototype.initRemote=function(){this.ajaxRequest=function(url,callback,format,method){format="json"==format?"json":"text",method="POST"==method?"POST":"GET";var http=!1,that=this;if(window.XMLHttpRequest)try{http=new XMLHttpRequest}catch(e){http=!1}else if("undefined"!=typeof ActiveXObject)try{http=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{http=new ActiveXObject("Microsoft.XMLHTTP")}catch(E){http=!1}}if(http&&url&&callback){var now="uid="+(new Date).getTime();if(url+=url.indexOf("?")+1?"&":"?",url+=now,http.open(method,url,!0),"GET"==method)http.overrideMimeType&&http.overrideMimeType("text/xml");else{var parameters=!1,parts=url.split("?");url=parts[0],parameters=parts[1],http.setRequestHeader("Content-type","application/x-www-form-urlencoded"),http.setRequestHeader("Content-length",parameters.length),http.setRequestHeader("Connection","close")}http.onreadystatechange=function(){if(4==http.readyState)if(200==http.status){var result="";http.responseText&&(result=http.responseText),"json"==format&&(result=result.replace(/[\n\r]/g,""),result=eval("("+result+")")),callback&&callback(result)}else 0==http.status||alert(http.status)},http.send(parameters)}},this.requestRemoteData=function(t){this.hideViewport();var e="index="+this.remoteDataIndex+"&dir="+this.remoteDirection;for(var i in this.remoteParams)e+="&"+i+"="+this.remoteParams[i];t&&(e+="&records=true");var s=this.remoteService+"?"+e;this.ajaxRequest(s,this.updateRemoteData,"json","GET")},this.requestRemoteIds=function(t){if(this.remoteUpdate){var e="update=true";for(var i in this.remoteParams)e+="&"+i+"="+this.remoteParams[i];var s=this.remoteService+"?"+e,a=this,r=function(){this.update=function(){clearInterval(e),a.ajaxRequest(s,a.updateRemoteIds,"json","GET")};var e=setInterval(this.update,t/5||1)};r.call()}},this.updateRemoteIds=function(t){return function(e){var i=t,s=document.getElementById(t.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect");if(s){e.ids&&(i.remoteIds=e.ids);var a=s.selectedIndex,r=s.childNodes[a].text,h=function(){this.update=function(){s.childNodes.length>=i.remoteIds.length?(i.remoteUpdate=!1,clearInterval(t)):(i.resetSelectOptionsRemoteData(s,r),i.requestRemoteIds())};var t=setInterval(this.update,i.remoteUpdateDelay)};h.call()}}}(this),this.saveRemoteParameters=function(){var t="index="+this.remoteDataIndex+"&save=true";for(var e in this.remoteParams)t+="&"+e+"="+this.remoteParams[e];t+="&params="+JSON.stringify(this.userConfig);var i=this.remoteService+"?"+t;this.ajaxRequest(i,function(){alert("Parameters saved")},"json","POST")},this.castRemoteParameters=function(t){t.remoteParentId=this.remoteParentId,t.remoteService=this.remoteService,t.remoteDirection=this.remoteDirection,t.remoteDataIndex=this.remoteDataIndex,t.remoteWindow=this.remoteWindow,t.remoteAutoPlay=this.remoteAutoPlay,t.remoteAutoPlayDelay=this.remoteAutoPlayDelay;for(var e in this.remoteParams)t.remoteParams[e]=this.remoteParams[e];t.addRemoveNavigationTopListeners("addEvtListener"),t.addRemoveNavigationLeftRightListeners("addEvtListener")},this.maintainIndices=function(t){this.graphType.match(/Network|Genome|Venn/)||t.config.graphType.match(/Network|Genome|Venn/)||(this.data.y.vars.length==t.data.y.vars.length&&(t.data.initialVarIndices=this.varIndices),this.data.y.smps.length==t.data.y.smps.length&&(t.data.initialSmpIndices=this.smpIndices))},this.maintainState=function(t){if(!this.graphType.match(/Network|Genome|Venn/)&&!t.graphType.match(/Network|Genome|Venn/)&&this.isGroupedData&&t.data.x){for(var e=0;e<this.groupingFactors.length;e++)if(!t.data.x[this.groupingFactors[e]])return;this.isCompatibleGraphType(this.graphType,t.graphType)&&(t.graphType=this.graphType);var i=this.data.y.smps.length==t.data.y.smps.length?this.grpIndices:!1;t.groupSamples(this.groupingFactors,!1,i)}},this.updateRemoteData=function(t){return function(e){if(e&&e.data){var i=t.appendUserConfig(e.data),s="next"==t.remoteDirection?!0:!1,a=document.getElementById("container-"+t.target);if(a){var r=a.parentNode,h=a.getClientRects(),n=document.getElementById(t.target),o=t.target;t.insertTarget(i.renderTo,a,n.width,n.height,s),i.hidden=!0,t.maintainIndices(i);var l=new CanvasXpress(i);if(t.castRemoteParameters(l),t.maintainState(l),t.addSelectOptionsRemoteData(e.ids),t.resetInfoSpan(!1,!0),t.animateTransition(r,h[0],o),t.requestRemoteIds(t.remoteUpdateDelay),t.Ext&&(l.Ext||(l.Ext={canvasId:i.renderTo,canvas:l,extId:t.Ext.id||t.Ext.extId})),e.postprocess)for(var d=0;d<e.postprocess.length;d++){var c=e.postprocess[d].func,p=e.postprocess[d].param;c&&(p?l[c].apply(l,p):l[c]())}e.info&&(l.updateInfoDiv(e.info),l.showInfoDiv()),t.showCode&&l.updateCodeDiv()}}else t.remoteDataIndex="next"==t.remoteDirection?t.remoteDataIndex-1:t.remoteDataIndex+1,t.remoteUpdating=!1}}(this),this.appendUserConfig=function(t){for(var e in this.userConfig)e.match(/decrease|remote/)||t.config[e]||(t.config[e]=this.userConfig[e]);return t},this.updateCurrentRemoteData=function(t,e){if(t||(t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect")),e||(e=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarCurrent")),t&&e){if(t.selectedIndex=this.remoteDataIndex,0==this.remoteIds.length)for(var i=0;i<t.childNodes.length;i++)this.remoteIds.push(t.childNodes[i].text);if(t.childNodes[t.selectedIndex]){var s=t.childNodes[t.selectedIndex].text;e.value=s.length>40?s.substring(0,37)+"...":s}else this.resetSelectOptionsRemoteData(t)}},this.resetSelectOptionsRemoteData=function(t,e){if(t||(t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect")),t){if(0==this.remoteIds.length)for(var i=0;i<t.childNodes.length;i++)this.remoteIds.push(t.childNodes[i].text);this.clearSelectOptionsRemoteData(t),this.addSelectOptionsRemoteData(this.remoteIds,t,e)}},this.clearSelectOptionsRemoteData=function(t){if(t||(t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect")),t&&t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild)},this.addSelectOptionsRemoteData=function(t,e,i){if(t&&(this.remoteIds=t,e||(e=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect")),e)){for(var s=0;s<this.remoteIds.length;s++){var a=document.createElement("option");a.text=this.remoteIds[s],a.value=s,i?this.remoteIds[s]==i&&(a.selected="selected",this.remoteDataIndex=s,e.selectedIndex=this.remoteDataIndex):this.remoteDataIndex==s&&(a.selected="selected",e.selectedIndex=this.remoteDataIndex);try{e.add(a,null)}catch(r){e.add(a)}}1==this.remoteIds.length?this.hideNavigation():this.showNavigation()}},this.animateTransition=function(t,e,i){if(t&&e){{var s=this,a=15,r=0,h=t.firstChild,n=t.lastChild,o=e.width;e.height}if(t.parentNode.style.overflow="hidden",this.isIE)t.removeChild("next"==this.remoteDirection?h:n),t.parentNode.style.overflow="visible",this.remoteUpdating=!1;else{var l=function(){this.update=function(){var l=.5*Math.atan(r/a*10-5)/Math.atan(5)+.5,d=o*l;r>=a?(clearInterval(e),s.destroy(i),"next"==s.remoteDirection?n.style.left="0px":h.style.left="0px",t.parentNode.style.overflow="visible",s.remoteUpdating=!1,s.updateCurrentRemoteData()):("next"==s.remoteDirection?(h.style.left=-1*d+"px",n.style.left=-1*d+"px"):(h.style.left=-o+d+"px",n.style.left=-o+d+"px"),h.style.display="block",n.style.display="block"),r++};var e=setInterval(this.update,100)};l.call()}}},this.handleRemoteSelect=function(t){return function(e){var i=t.getTargetEvent(e),s=i.children[i.selectedIndex].value,a=document.getElementById(t.remoteParentId+"-canvasXpressRemoteWindowTopBarCurrent");t.remoteDirection=s>t.remoteDataIndex?"next":"previous",t.remoteDataIndex=s;var r=i.children[i.selectedIndex].text;a&&i&&(i.style.display="none",t.resetSelectOptionsRemoteData(i),a.value=r.length>40?r.substring(0,37)+"...":r),t.requestRemoteData()}}(this),this.handleRemoteClickStop=function(t){return function(){t.remoteStop=!0}}(this),this.handleRemoteClickPlay=function(t){return function(e){var i=t.getTargetEvent(e);t.remoteDirection="next",t.remoteStop=!1,t.playRemoteData(i.parentNode.lastChild)}}(this),this.playRemoteData=function(t){var e=function(){that=CanvasXpress.references[0],that&&(that.remoteUpdating||that.remoteStop||(that.remoteUpdating=!0,that.showInfoSpan(!1,"Updating ...",!0),t&&t.tagName.match(/select/i)&&that.remoteDataIndex>=t.length-1?that.remoteDataIndex=0:that.remoteDataIndex++,that.requestRemoteData())),this.update=function(){that=CanvasXpress.references[0],that?(that.remoteUpdating||that.remoteStop||(that.remoteUpdating=!0,that.showInfoSpan(!1,"Updating ...",!0),t&&t.tagName.match(/select/i)&&that.remoteDataIndex>=t.length-1?that.remoteDataIndex=0:that.remoteDataIndex++,that.requestRemoteData()),that.remoteStop&&clearInterval(e)):clearInterval(e)};var e=setInterval(this.update,that.remoteAutoPlayDelay)};e.call()},this.handleRemoteClickPrev=function(t){return function(e){if(!t.remoteUpdating){var i=t.getTargetEvent(e),s=i.parentNode.lastChild;t.remoteUpdating=!0,t.showInfoSpan(!1,"Updating ...",!0),t.remoteDirection="previous",s&&s.tagName.match(/select/i)&&t.remoteDataIndex<=0?t.remoteDataIndex=s.length-1:t.remoteDataIndex--,t.requestRemoteData()}}}(this),this.handleRemoteClickNext=function(t){return function(e){if(!t.remoteUpdating){var i=t.getTargetEvent(e),s=i.parentNode.lastChild;t.remoteUpdating=!0,t.showInfoSpan(!1,"Updating ...",!0),t.remoteDirection="next",s&&s.tagName.match(/select/i)&&t.remoteDataIndex>=s.length-1?t.remoteDataIndex=0:t.remoteDataIndex++,t.requestRemoteData()}}}(this),this.handleRemoteClickDown=function(t){return function(){if(!t.remoteUpdating){var e=document.getElementById(t.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect");e&&("none"==e.style.display?(e.style.display="block",e.options[e.selectedIndex].selected=!0):e.style.display="none")}}}(this),this.addRemoteNavigationTop=function(t){var e="5px",i=document.createElement("div");i.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBar",i.style.padding="2px",i.style.color=this.skinColor,i.style.border="1px solid "+this.skinBorderColor,i.style.backgroundColor=this.skinBackgroundColor,i.style.boxShadow="2px 2px 2px "+this.skinShadowColor,i.style.MozBoxShadow="2px 2px 2px "+this.skinShadowColor,i.style.borderRadius="4px",i.style.width="435px",i.style.position="absolute",i.style.marginLeft=t+"px",i.style.zIndex=9500,i.style.display="none";var s=document.createElement("img");s.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarPrev",s.src=this.imageDir+this.previousButton,s.alt="Previous graph",s.title="Previous graph",s.style.margin=e,i.appendChild(s);var a=document.createElement("img");a.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarPlay",a.src=this.imageDir+this.playButton,a.alt="Iterate over graphs",a.title="Iterate over graphs",a.style.margin=e,i.appendChild(a);var r=document.createElement("img");r.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarStop",r.src=this.imageDir+this.stopButton,r.alt="Stop iteration",r.title="Stop iteration",r.style.margin=e,i.appendChild(r);var h=document.createElement("img");h.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarNext",h.src=this.imageDir+this.nextButton,h.alt="Next graph",h.title="Next graph",h.style.margin=e,i.appendChild(h);var n=document.createElement("input");n.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarCurrent",n.type="text",n.style.padding="1px 1px 2px 1px",n.style.position="absolute",n.style.cursor="default",n.style.display="block",n.style.left="102px",n.style.top="0px",n.style.margin="5px",n.style.width="322px",n.style.borderRadius="4px",n.style.MozBorderRadius="4px",i.appendChild(n);var o=document.createElement("img");o.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarDown",o.src=this.imageDir+this.dropdownButton,o.alt="Select graph",o.title="Select graph",o.style.margin=e,o.style.position="absolute",o.style.top="3px",o.style.right="4px",i.appendChild(o);var l=document.createElement("select");return l.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect",l.style.position="absolute",l.style.margin="5px",l.style.color=this.skinColor,l.style.backgroundColor=this.skinBackgroundColor,l.style.border="1px solid "+this.skinBorderColor,l.style.marginTop="1px",l.style.left="102px",l.style.top="26px",l.style.maxWidth="800px",l.style.display="none",l.size=10,i.appendChild(l),i},this.addRemoveNavigationTopListeners=function(t){var e=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarPrev"),i=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarPlay"),s=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarStop"),a=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarNext"),r=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarDown"),h=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect");e&&this[t](e,"click",this.handleRemoteClickPrev,!1),i&&this[t](i,"click",this.handleRemoteClickPlay,!1),s&&this[t](s,"click",this.handleRemoteClickStop,!1),a&&this[t](a,"click",this.handleRemoteClickNext,!1),r&&this[t](r,"click",this.handleRemoteClickDown,!1),h&&this[t](h,"change",this.handleRemoteSelect,!1)},this.selectDataSet=function(){var t=document.activeElement;if(t.id==this.remoteParentId+"-canvasXpressRemoteWindowTopBarCurrent"){var e=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect"),i=[];if(e&&t.value.length>0){if(0==this.remoteIds.length)for(var s=0;s<e.childNodes.length;s++)this.remoteIds.push(e.childNodes[s].text);this.clearSelectOptionsRemoteData(e);for(var s=0;s<this.remoteIds.length;s++)this.remoteIds[s].toLowerCase().indexOf(t.value.toLowerCase())>=0&&i.push(s);for(var s=0;s<i.length;s++){var a=document.createElement("option");a.text=this.remoteIds[i[s]],a.value=i[s];try{e.add(a,null)}catch(r){e.add(a)}}e.style.display="block"}}},this.addRemoteNavigationBottom=function(t){var e=document.createElement("div");return e.id=this.remoteParentId+"-canvasXpressRemoteWindowBottomBar",e.style.position="absolute",e.style.marginLeft=t+"px",e.style.display="none",e.style.height="18px",e},this.addRemoteNavigationLeftRight=function(t,e,i,s,a){var r=document.createElement("div"),h=document.createElement("img");return r.style.height=i+a+"px",r.style.width=s+"px",r.style.marginLeft="3px",r.style.marginRight="3px",r.style.top="0px",h.style.position="absolute",h.style.top=i/2+"px",h.style.left="1px","l"==t?(r.style.position="relative",r.id=this.remoteParentId+"-canvasXpressRemoteWindowPrevBar",r.style.left="0px",r.style.display="none",h.src=this.imageDir+this.previousButton):(r.style.position="absolute",r.id=this.remoteParentId+"-canvasXpressRemoteWindowNextBar",r.style.left=s+e+14+"px",r.style.display="none",h.src=this.imageDir+this.nextButton),h.style.margin="auto",r.appendChild(h),r},this.addRemoveNavigationLeftRightListeners=function(t){var e=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowPrevBar"),i=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowNextBar");e&&this[t](e,"click",this.handleRemoteClickPrev,!1),i&&this[t](i,"click",this.handleRemoteClickNext,!1)},this.updateRemoteNavigationWindow=function(){var t=document.getElementById(this.target),e=24,i=36,s=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowPrevBar"),a=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowNextBar"),r=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindow"),h=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowBuffer");if(s&&a&&r&&h){var n=s.childNodes[0];s.style.left="7px",s.style.height=t.height+i+7+"px",n.style.top=t.height/2+"px";var o=a.childNodes[0];a.style.left=t.width+e+7+"px",a.style.height=t.height+i+7+"px",o.style.top=t.height/2+"px",r.style.height=2*i+t.height+"px",r.style.width=2*e+t.width+"px",h.style.width=2*parseInt(t.parentNode.parentNode.clientWidth)+"px",h.style.left=e+7+"px",h.style.top=i+7+"px",this.resizeExtContainer(2*e+t.width)}},this.addRemoteWindow=function(){var t=document.getElementById("container-"+this.target),e=document.getElementById(this.target),i=t.parentNode,s=24,a=36;if(i.id&&!i.id.match(/canvasXpressRemoteWindow/)){this.remoteParentId=i.id;var r=document.createElement("div"),h=this.addRemoteNavigationTop(s+7),n=this.addRemoteNavigationLeftRight("l",e.width,e.height,s,a+14),o=document.createElement("div"),l=this.addRemoteNavigationLeftRight("r",e.width,e.height,s,a+14),d=this.addRemoteNavigationBottom(s+7);r.id=this.remoteParentId+"-canvasXpressRemoteWindow",r.style.marginTop="3px",r.style.height=a+18+e.height+14+"px",r.style.width=2*s+e.width+14+"px",r.style.position="relative",o.id=this.remoteParentId+"-canvasXpressRemoteWindowBuffer",o.style.width=2*(parseInt(e.parentNode.parentNode.clientWidth)+7)+"px",o.style.position="absolute",o.style.left=s+"px",o.style.top=a+"px",o.style.overflow="hidden",r.appendChild(h),r.appendChild(n),r.appendChild(o),r.appendChild(l),r.appendChild(d),i.insertBefore(r,t),o.appendChild(t.parentNode.appendChild(t)),this.addRemoveNavigationTopListeners("addEvtListener"),this.addRemoveNavigationLeftRightListeners("addEvtListener"),this.requestRemoteData(!0),this.initialRemoteDataRequest=!0,this.remoteAutoPlay&&(this.remoteUpdating=!0,this.remoteDirection="next",this.remoteStop=!1,this.playRemoteData(h.lastChild))}else this.initialRemoteDataRequest=!1},this.resizeExtContainer=function(t){if(this.Ext&&this.Ext.extId&&Ext){var e=Ext.getCmp(this.Ext.extId),i=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindow");if(e&&i){var s=e.getWidth(),a=(e.getHeight(),e.ownerCt);if(a){var r=a.getXType(),h=a.getWidth(),n=(a.getHeight(),0);"window"==r||"panel"==r&&(n=h>=t?0:15,h>=s&&h>t&&(t=h,n=-15)),e.setWidth(t+n),e.doLayout(),a.doLayout(),a.ownerCt.doLayout()}}}},this.hideNavigation=function(){var t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBar"),e=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowPrevBar"),i=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowNextBar"),s=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowBottomBar");t&&(t.style.display="none"),e&&(e.style.display="none"),i&&(i.style.display="none"),s&&(s.style.display="none")},this.showNavigation=function(){var t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBar"),e=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowPrevBar"),i=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowNextBar"),s=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowBottomBar");t&&(t.style.display="block"),e&&(e.style.display="block"),i&&(i.style.display="block"),s&&(s.style.display="block")},this.initializeRemote=function(){this.remoteService&&this.addRemoteWindow()},this.initializeRemote()},CanvasXpress.prototype.initGraph=function(){this.draw=function(t,e,i,s){this.setUserEvents(),this.initializeGraph(!0,t,e,i,s),this.userEvents.enddraw&&this.userEvents.enddraw.call(this)},this.isValidGraphType=function(t){switch(t){case"Bar":case"Line":case"Area":case"AreaLine":case"Dotplot":case"Heatmap":case"Stacked":case"StackedPercent":case"Boxplot":case"Correlation":case"Pie":case"Circular":return this.data.y?!0:!1;case"BarLine":case"StackedLine":case"StackedPercentLine":return this.data.y&&this.data.a&&this.data.a.xAxis&&this.data.a.xAxis2?!0:!1;case"Scatter2D":return this.data.y&&this.data.y.smps&&this.data.y.smps.length>1?!0:!1;case"ScatterBubble2D":case"Scatter3D":return this.data.y&&this.data.y.smps&&this.data.y.smps.length>2?!0:!1;case"Candlestick":return this.data.market?!0:!1;case"Venn":return this.data.venn?!0:!1;case"Network":return this.data.nodes?!0:!1;case"Genome":return this.data.tracks?!0:!1;case"Video":return this.data.video?!0:!1}return!1},this.setColorScheme=function(){switch(this.colorScheme){case"reset":this.colors=this.colors0;break;case"basic":this.colors=this.colors1;break;case"dark":this.colors=this.colors2;break;case"strong":this.colors=this.colors3;break;case"light":this.colors=this.colors4;break;case"pastel":this.colors=this.colors5;break;case"balanced":this.colors=this.colors6;break;case"user":this.colors=this.colors}},this.reinitializeGraph=function(){"Candlestick"==this.graphType?(this.isGraphTime=!0,this.isMarketSwitched||(this.switchToMarketData(),this.initAxes(),this.summaryType="candle",this.initializeDataAttributes(),this.isMarketSwitched=!0),this.setMarketTechnicalData()):this.isExample&&this.isMarketSwitched?(this.switchFromMarketData(),this.isMarketSwitched=!1,this.summaryType=this.data.y.data?"raw":"mean",this.initializeDataAttributes(),this.isGraphTime=!1,this.showVolume&&(this.layoutComb=!1)):this.graphType.match(/Scatter/)&&this.allVsAll?this.setAllVsAll():this.graphType.match(/Pie/)&&this.xAxis.length>1&&this.setMultiplePies()},this.initializeGraph=function(t,e,i,s,a){var r=this,h=5,n=0,o=[],l=function(){for(var t=0;t<o.length;t++)if(!CanvasXpress.cacheImages.hasOwnProperty(o[t]))return!1;return!0};if("Network"==this.graphType)o=this.getNetworkImages();else if(this.graphType.match(/scatter/i))for(var d=0;d<this.images.length;d++)this.images[d].match(/^http:\/\//)||(this.images[d]=this.imageDir+this.images[d]),o.push(this.images[d]);if(this.backgroundImage&&(this.backgroundImage.match(/^http:\/\//)||(this.backgroundImage=this.imageDir+this.backgroundImage),o.push(this.backgroundImage)),o.length>0&&("Network"==this.graphType?this.Network(!0):"Scatter3D"==this.graphType?this.Scatter3D(!0):("Scatter2D"==this.graphType||"ScatterBubble2D"==this.graphType)&&this.Scatter2D(!0)),o.length>0&&!l()){for(var d=0;d<o.length;d++)if(!CanvasXpress.cacheImages.hasOwnProperty(o[d])){CanvasXpress.cacheImages[o[d]]=!0;var c=new Image;c.onload=function(){CanvasXpress.cacheImages[this.src]=this,n<h*o.length?l()?r.renderGraph(t,e,i,s,a):n++:alert("Problem loading images")},c.src=o[d]}}else this.renderGraph(t,e,i,s,a)},this.renderGraph=function(t,e,i,s,a){if(!this.initialRemoteDataRequest)if(this.setColorScheme(),this.reinitializeGraph(),this.layoutComb&&this.layoutAdjust||s||("Candlestick"!=this.graphType||"Candlestick"==this.graphType&&!this.showVolume)&&this.initAxes(t),t?this.resizeCanvas(!0,e,i):this.resizeCanvas(!1,e,i),this.isVML&&(this.showShadow=!1),this.isValidAnimation()&&this.showAnimation&&!this.isAnimation)this.createAnimation(this.animationType);else{var r=this.layoutComb?!0:!1;switch(this.graphType){case"Bar":case"Dotplot":this.isBoxPlotCalc&&this.isGroupedData&&this.groupSamples(this.getGroupingFactors(!0)),this.is3DPlot?this.Scatter3D():this.oneDPlot();break;case"Line":case"Area":case"AreaLine":case"BarLine":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Candlestick":this.isBoxPlotCalc&&this.isGroupedData&&this.groupSamples(this.getGroupingFactors(!0)),this.oneDPlot();break;case"Boxplot":!this.isBoxPlotCalc&&this.isGroupedData&&this.groupSamples(this.getGroupingFactors(!0)),this.oneDPlot();break;case"Scatter2D":case"ScatterBubble2D":this.Scatter2D();break;case"Scatter3D":this.Scatter3D();break;case"Correlation":this.Correlation();break;case"Venn":this.Venn();break;case"Pie":this.Pie();break;case"Circular":this.Circular();break;case"Network":if(a){var h=this.calculateLayout,r=this.randomNetwork;this.calculateLayout=!1,this.randomNetwork=!1,this.Network(),this.calculateLayout=h,this.randomNetwork=r}else this.Network();break;case"Genome":this.Genome();break;case"Video":this.Video()}this.drawCanvasBox(),this.showCode&&this.updateCodeDiv(),this.showDataTable?this.updateDataTable():this.dataTableLastState&&"docked"!=this.dataTableLastState&&this.hideUnhideDataTable(!0),this.setAcknowledgementVisibility(),"Network"!=this.graphType&&this.drawCitation(),this.setVideoControls()}},this.initializeGraph()},CanvasXpress.prototype.initAxes=function(t,e){this.getValidAxes=function(t){var e=[];if("Scatter2D"==this.graphType)e.push("xAxis"),e.push("yAxis");else if("ScatterBubble2D"==this.graphType||"Scatter3D"==this.graphType)e.push("xAxis"),e.push("yAxis"),e.push("zAxis");else if(this.graphType.match(/Network|Genome|Correlation|Venn|Heatmap|Pie|Video/)){if(!t)return!1;e.push("xAxis")}else this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)||"Candlestick"==this.graphType&&this.showVolume?(e.push("xAxis"),e.push("xAxis2")):"Circular"==this.graphType?(e.push("xAxis"),e.push("rAxis")):e.push("xAxis");return e},this.addRemoveSamplesInAxis=function(t,e,i){return"Scatter2D"==this.graphType||"ScatterBubble2D"==this.graphType?i?this.removeSamplesFromAxis(t,e):this.addSamplesToAxis(t,e):"Scatter3D"==this.graphType||"Pie"==this.graphType?this.switchSampleInAxis(t,e):void 0},this.addSamplesToAxis=function(t,e){if(this[e]){if(this.isArray(t))for(var i=0;i<t.length;i++)this[e].push(t[i]);else this[e].push(t);return!1}return"Not a valid axis"},this.removeSamplesFromAxis=function(t,e){if(this[e]){if(this[e].length>1){var i={},s=[];if(this.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=1;else i[t]=1;for(var a=0;a<this[e].length;a++)i.hasOwnProperty(this[e][a])||s.push(this[e][a]);return this[e]=s,!1}return e+" cannot be null"}return"Not a valid axis"},this.switchSampleInAxis=function(t,e){return this[e]?(this[e][0]=t,!1):"Not a valid axis"},this.addRemoveVariablesInAxis=function(t,e,i){return i?this.removeVariablesFromAxis(t,e):this.addVariablesToAxis(t,e)},this.addVariablesToAxis=function(t,e){if(this.data.a||(this.data.a={}),this.data.a[e]||(this.data.a[e]=[]),this.isArray(t))for(var i=0;i<t.length;i++)this.data.a[e].push(t[i]);else this.data.a[e].push(t);return this.resetVariablesVisibleByAxis(e),!1},this.removeVariablesFromAxis=function(t,e){if(this.data.a&&this.data.a[e]){var i={},s=[];if(this.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=1;else i[t]=1;for(var a=0;a<this.data.a[e].length;a++)i.hasOwnProperty(this.data.a[e][a])||s.push(this.data.a[e][a]);this.data.a[e]=s}return this.resetVariablesVisibleByAxis(e),!1},this.formatAxisValue=function(t,e){return this[e+"TickFormat"]?"Candlestick"==this.graphType&&"volume"==this.summaryType&&this.xAxis2TickFormat?sprintf(this.xAxis2TickFormat,t):sprintf(this[e+"TickFormat"],t):"Candlestick"==this.graphType&&"volume"==this.summaryType?sprintf("%."+this.xAxis2Decs+"f",t):sprintf("%."+this[e+"Decs"]+"f",t)},this.getAxisRangeBySample=function(t){var e=[];if(this.isArray(t))for(var i=0;i<this.varIndices.length;i++)for(var s=this.varIndices[i],a=0;a<t.length;a++)e.push(this.getDataAtPos(s,a));else for(var i=0;i<this.varIndices.length;i++){var s=this.varIndices[i];e.push(this.getDataAtPos(s,t))}return this.range(e)},this.getAxisIncrements=function(t,e,i,s,a){if(e-t<=Number.MIN_VALUE)return.1;var r,h=((a||e)-t)*this.axisExtension,n=t-h,o=(a||e)+h,l=o-n,d=-Math.floor(Math.log(l/i)/Math.LN10),c=Math.pow(10,-d),p=this.getAxisDecimals(c),g=l/i/c;return r=s?parseFloat(this.formatNumber(((a||e)-t)/i,p)):1.5>g?c:2>g?2*c:2.5>g?2.5*c:5>g?5*c:7.5>g?7.5*c:10*c,this.getAxisMin(t,r)+r*i<e?this.getAxisIncrements(t,e,i,s,(a||e)+r):r},this.getAxisMin=function(t,e){var i=e*Math.floor(t/e);return isNaN(i)?0:0>i&&this.minData>=0?0:i},this.getAxisDecimals=function(t){var e=1e6,i=((t*e-parseInt(t)*e)/e).toString().replace(/\./,"").length-1;return i},this.setAxis=function(t){var e=this.isGroupedData?this.data.w:this.data.y;0==this[t].length?"xAxis"==t?this[t].push(e.smps[this.smpIndices[0]]):"yAxis"==t?this[t].push(e.smps.length>1?e.smps[this.smpIndices[1]]:e.smps[this.smpIndices[0]]):"zAxis"==t&&this[t].push(e.smps.length>2?e.smps[this.smpIndices[2]]:e.smps.length>1?e.smps[this.smpIndices[1]]:e.smps[this.smpIndices[0]]):"Scatter3D"==this.graphType&&this[t].length>1&&(this[t]=[this[t][0]])},this.setAxisValues=function(e){var i,s,a,r,h,n,o,l={},d=e+"MinorValues",c=e+"Values",p=e+"Ticks",g=e+"TickFormat",u=e+"Incr",m=e+"Decs",f=e+"Min",v=e+"Transform",x=e+"MaxStrLength";if("percentile"==this[v]){this[m]=0,this[c]=[],this[d]=[];for(var y=[0,25,50,75,100],b=0;b<y.length;b++)this[c].push(y[b]);for(var b=5;100>b;b+=5)this[d].push(b)}else if(0==this[c].length||t){t&&(this[c]=[],this[d]=[]),i=this[f],h=this[u]/this[p];for(var b=1;b<=this[p];b++){for(var w=1;w<this[p];w++)this[d].push(i+h*w);i+=this[u],0==this[m]&&i.toString().match(/\.5$/)&&(this[m]=1),s=this[g]?sprintf(this[g],i):this.formatNumber(sprintf("%."+this[m]+"f",i),this[m]),l.hasOwnProperty(s)&&!this[g]?n=!0:l[s]=1,this[c].push(s)}}else{a=this[c],this[c]=[];for(var b=0;b<a.length;b++)i=a[b],r=parseFloat(i),s=this[g]?sprintf(this[g],r):this.formatNumber(sprintf("%."+this[m]+"f",r),this[m]),
l.hasOwnProperty(s)&&!this[g]?n=!0:l[s]=1,this[c].push(s)}n?(this[m]++,this[c]=[],this[d]=[],this.setAxisValues(e)):(o=this.getMaxText(this[c]),this[x]=this[x]?this.getMaxText([this[x],o]):o)},this.setAxisAttributes=function(t,e,i,s,a){var r=s&&s.match(/log/)?!0:!1,h=t+"Ticks",n=t+"Incr",o=t+"Exact",l=t+"AbsMin",d=t+"AbsMax",c=t+"Min",p=t+"Max",g=t+"Range",u=t+"Decs";this.setRangeData(e,i,r,a),s&&("log2"==s?(this.minData=Math.log(this.minData)/Math.LN2,this.maxData=Math.log(this.maxData)/Math.LN2):"log10"==s?(this.minData=Math.log(this.minData)/Math.LN10,this.maxData=Math.log(this.maxData)/Math.LN10):"exp2"==s?(this.minData=Math.pow(2,this.minData),this.maxData=Math.pow(2,this.maxData)):"exp10"==s?(this.minData=Math.pow(10,this.minData),this.maxData=Math.pow(10,this.maxData)):"percentile"==s&&(this.minData=-12.5,this.maxData=112.5)),this[l]=null==this.setMin?this.minData:this[l],this[d]=null==this.setMax?this.maxData:this[d],this[n]=this.getAxisIncrements(this.minData,this.maxData,this[h],this[o]),this[u]=this.getAxisDecimals(this[n]),a?(this[c]=0,this[p]=this.graphType.match(/Percent/)?100:this[c]+this[n]*this[h]):this[o]||s&&"percentile"==s?(this[c]=this.minData,this[p]=this.maxData):(this[c]=this.getAxisMin(this.minData,this[n]),this[p]=this[c]+this[n]*this[h],this[p]-2*this[n]>this.maxData&&(this[c]-this[n]>0&&(this[c]-=this[n],this[p]-=this[n]),this.minData>0&&this[c]<0&&(this[c]+=this[n],this[p]+=this[n]))),this[g]=this[p]-this[c],this.setAxisValues(t)},this.setAxes=function(t){if(this.graphType.match(/Correlation/)){var e=this.isGroupedData?this.data.w:this.data.y;this.setMin=null,this.setMax=null,this.correlationAnchorLegend&&this.setAxisAttributes("xAxis"),e.cor&&0!=e.cor.length||(this.summarize("cor"),this.setRangeData("cor")),this.yAxisTitle||(this.yAxisTitle="Correlation")}else if(this.graphType.match(/Scatter|Pie/)){var i=this.smpIndices,s=["xAxis"],a=["X"];this.setMin=null,this.setMax=null,this.graphType.match(/Scatter/)&&(s.push("yAxis"),a.push("Y")),this.graphType.match(/ScatterBubble2D|Scatter3D/)&&(s.push("zAxis"),a.push("Z")),"Scatter3D"==this.graphType&&(this.xAxisTicks=10,this.yAxisTicks=10,this.zAxisTicks=10);for(var r=0;r<s.length;r++){var h=s[r]+"Indices",n="setMin"+a[r],o="setMax"+a[r];this.setAxis(s[r]),this[h]=this.getSampleIndices(this[s[r]]),this.setSamplesVisible(this[h]),this[n]&&(this.setMin=this[n]),this[o]&&(this.setMax=this[o]),this.setAxisAttributes(s[r],r>0?t:!1,!1,this[s[r]+"Transform"]),this.setSamplesVisible(i)}this.xAxisTitle||(this.xAxisTitle=1==this.xAxis.length?this.xAxis[0]:" "),this.yAxisTitle||(this.yAxisTitle=1==this.yAxis.length?this.yAxis[0]:" "),this.zAxisTitle||(this.zAxisTitle=1==this.zAxis.length?this.zAxis[0]:" ")}else if(this.graphType.match(/Genome/)){var l=this.setMin,d=this.setMax;this.setRangeData("genome"),this.xAxisExact=!0,this.xAxisTransform=!1,this.xAxisAbsMin=this.minData,this.xAxisAbsMax=this.maxData,null!=l&&(this.setMin=l),null!=d&&(this.setMax=d),this.xAxisMin=null!=this.setMin?this.setMin:this.minData-1,this.xAxisMax=null!=this.setMax?this.setMax:this.maxData+1,this.xAxisDecs=0,this.xAxisRange=this.xAxisMax-this.xAxisMin,this.xAxisTicks=this.ticks,this.xAxisIncr=this.xAxisRange/this.xAxisTicks,this.setAxisValues("xAxis")}else{var c=this.smpIndices,p=this.varIndices,g=this.grpIndices,u=this.varIndices,m="Dotplot"==this.graphType&&this.isGroupedData?!0:!1,f=this.graphType.match(/Percent/)?"percentile":!1,v=this.graphType.match(/Stacked/)||this.graphType.match(/Area/)&&this.areaIsCumulative?!0:!1,x="Candlestick"==this.graphType?"candle":f?f:!1;if(this.varIndicesStart>-1||this.smpIndicesStart>-1?(this.setAllVariablesVisible(),this.setAllSamplesVisible(),"Heatmap"==this.graphType&&(this.graphOrientation="horizontal")):"StackedPercent"==this.graphType||"StackedPercentLine"==this.graphType?(this.setMin=null,this.setMax=null,this.axisExact=!0,this.xAxisExact=!0):"Boxplot"!=this.graphType||this.isGroupedData||this.data.y.median||this.summarize("iqr"),this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&this.data.a&&this.setVariablesVisible(this.getVariablesVisibleByAxis("xAxis")),this.setAxisAttributes("xAxis",x,m,f,v),this.xAxisTitle=!this.xAxisTitle&&this.data.y.desc?this.data.y.desc[0]:"",this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&this.data.a||"Candlestick"==this.graphType&&this.showVolume){x="Candlestick"==this.graphType?"volume":!1,this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&(this.setVariablesVisible(u),this.setVariablesVisible(this.getVariablesVisibleByAxis("xAxis2")));var o=null!=this.setMax?this.setMax:null,n=null!=this.setMin?this.setMin:null;this.setMax=null!=this.setMax2?this.setMax2:null,this.setMin=null!=this.setMin2?this.setMin2:null,this.setAxisAttributes("xAxis2",x,m),this.xAxis2Title=!this.xAxis2Title&&this.data.y.desc?this.data.y.desc[1]:"",this.setMax=null!=o?o:null,this.setMin=null!=n?n:null}"Circular"==this.graphType&&this.rAxis&&this.setAxisAttributes("rAxis","circular",m,f,!1,!0),this.setVariablesVisible(u),this.smpIndices=c,this.varIndices=p,this.grpIndices=g}},this.setScatterPointSize=function(){this.scatterPointSize=this.varIndices.length>50?this.sizes[1]:this.varIndices.length>20?this.sizes[2]:this.sizes[3],this.layoutComb&&(this.scatterPointSize=Math.ceil(this.scatterPointSize/this.layoutRows))},this.setAxisUnits=function(t,e){var i=t+"Unit",s=t+"Range",a=e?e:t.substring(0,1);this[i]=this[a]/this[s]},this.setAxisFont=function(t,e){var i="Venn"==this.graphType?16:12;if(!this.autoScaleFont&&this.axisTickFont&&this.decorationFont&&this.axisTitleFont)this.axisTickFont=parseInt(this.axisTickFontSize)+"Pt "+this.fontName,this.decorationFont=parseInt(this.decorationFontSize)+"Pt "+this.fontName,this.axisTitleFont=parseInt(this.axisTitleFontSize)+"Pt "+this.fontName;else{var s,a,r;e>=600?(s=12*this.tickScaleFontFactor,r=10*this.decorationScaleFontFactor,a=this.getFontPt(this.scaleTextToFont(t,i,e-2))*this.axisTitleScaleFontFactor):e>=400?(s=10*this.tickScaleFontFactor,r=8*this.decorationScaleFontFactor,a=this.getFontPt(this.scaleTextToFont(t,i,e-2))*this.axisTitleScaleFontFactor):e>=200?(s=8*this.tickScaleFontFactor,r=6*this.decorationScaleFontFactor,a=8*this.axisTitleScaleFontFactor):e>=100?(s=6*this.tickScaleFontFactor,r=4*this.decorationScaleFontFactor,a=6*this.axisTitleScaleFontFactor):(s=4*this.tickScaleFontFactor,r=2*this.decorationScaleFontFactor,a=4*this.axisTitleScaleFontFactor),this.axisTickFont=parseInt(s)+"Pt "+this.fontName,this.decorationFont=parseInt(r)+"Pt "+this.fontName,this.axisTitleFont=parseInt(a)+"Pt "+this.fontName}},this.getAxisFont=function(t){return t>=600?12:t>=400?10:t>=200?8:6},this.getHeatmapShades=function(t,e){switch(t){case"white":case"black":return e&&"white"!=e&&"black"!=e?this.getHeatmapShades(e):this.greys;case"grey":return this.greys;case"green":return this.greens;case"red":return this.reds;case"blue":return this.blues;case"yellow":return this.yellows;case"cyan":return this.cyans;case"purple":return this.purples}},this.setHeatmapColors=function(t){this.setRGB();var e=t?t:this.maxData-this.minData,i=this.heatmapType.split("-"),s=256/this.indicatorBins,a=this.getHeatmapShades(i[0],i[1]);if(this.heatmapColors=[],this.heatmapBin=(e?e:1)/this.indicatorBins,this.indicatorCenter.match("rainbow")&&i.length>1){var r=["red","purple","blue","cyan","green","yellow"];"rainbow-green"==this.indicatorCenter&&r.reverse();for(var h=null,n=0;n<r.length;n++)r[n]==i[0]&&(h=n);if(null==h)return alert("Dude! "+i[0]+" ain't a valid color ... This is not looking good ..."),void(this.heatmapColors=this.blues);var o=[r[h]];for(h++;o.length<6;)h>5&&(h=0),o.push(r[h]),h++;h=null;for(var n=0;n<o.length;n++)o[n]==i[1]&&(h=n);if(null==h)return alert("Dude! "+i[1]+" ain't a valid color ... This is not looking good ..."),void(this.heatmapColors=this.blues);for(var n=0;h>n;n++){a=this.getHeatmapShades(o[n]);for(var l=0;s>l;l++)this.heatmapColors.push(a[l])}}else if(i.length>1)if("white"==i[0]&&"black"!=i[1]||"black"==i[0]&&"white"!=i[1])this.heatmapType=i[1],this.setHeatmapColors(t);else if("white"==i[1])if("black"==i[0]){this.heatmapColors.push("rgb(0,0,0)");for(var n=s-1;n>=0;n--)this.heatmapColors.push(a[n]),this.heatmapColors.push(a[n])}else{for(var n=0;s>n;n++)this.heatmapColors.push(a[n]),this.heatmapColors.push(a[n]);this.heatmapColors.push("rgb(255,255,255)")}else if("black"==i[1])if("white"==i[0]){this.heatmapColors.push("rgb(255,255,255)");for(var n=0;s>n;n++)this.heatmapColors.push(a[n]),this.heatmapColors.push(a[n])}else{for(var n=0;s>n;n++)this.heatmapColors.push(a[n]),this.heatmapColors.push(a[n]);this.heatmapColors.push("rgb(0,0,0)")}else{for(var n=0;s>n;n++)this.heatmapColors.push(a[n]);this.heatmapColors.push("black"==this.indicatorCenter?"rgb(0,0,0)":"rgb(255,255,255)"),a=this.getHeatmapShades(i[1]);for(var n=s-1;n>=0;n--)this.heatmapColors.push(a[n])}else{this.heatmapColors.push("black"==this.indicatorCenter&&"grey"!=color[0]?"rgb(0,0,0)":"rgb(255,255,255)");for(var n=s-1;n>=0;n--)this.heatmapColors.push(a[n]),this.heatmapColors.push(a[n])}},this.initializeAxis=function(){this.graphType.match(/Venn|Network|Video/)||e||(this.setAxes(),this.setHeatmapColors())},this.initializeAxis()},CanvasXpress.prototype.Pie=function(){this.setVarPie=function(){var t=[],e=this.smpIndices[0];if(this.varIndices.length>=this.maxPieSectors-1){var i=this;this.varIndices.sort(function(t,s){return i.data.y.data[s][e]-i.data.y.data[t][e]})}for(var s=0;s<this.varIndices.length;s++){var a=this.varIndices[s];t.push(this.getDataAtPos(a,e))}this.varPie=this.setPieData(t,!0)},this.getPieLegendDimensions=function(){this.setLegendFont();var t=this.getFontPt(this.legendFont),e=this.shortenText(this.maxVarNameStr,this.maxVarStringLen),i=this.measureText(e,this.legendFont);i>this.width/2&&(this.legendFont=this.scaleTextToFont(i,t,this.width/2));var s=t+this.measureText(e,this.legendFont)+5*this.margin,a=this.varIndices.length>this.maxPieSectors?this.maxPieSectors:this.varIndices.length,r=a*(t+this.margin)+3*this.margin;return[s,r]},this.setPieXYDimensions=function(){var t=this.getPieLegendDimensions();this.showLegend&&("right"==this.legendPosition?this.right=this.layoutComb?this.layoutRight:t[0]:this.bottom=this.layoutComb?this.layoutBottom:t[1]),this.x=this.layoutComb?this.layoutWidth:this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.y=this.layoutComb?this.layoutHeight:this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.setAxisFont("Pie",this.x)},this.drawPieDataPoints=function(){var t=Math.min(this.x,this.y),e=(t-t/5)/2,i=this.marginLeft+this.offsetX+this.left+this.x/2,s=this.marginTop+this.offsetY+this.top+this.y/2;this.setVarPie(),this.drawPie(this.varPie,i,s,e,!0)},this.drawPieLegend=function(){if(this.showLegend){var t,e,i=this.getPieLegendDimensions(),s=this.getFontPt(this.legendFont),a=s/2;"right"==this.legendPosition?(t=this.layoutComb?this.width-(this.marginRight+i[0])+this.marginLeft+this.left:this.marginLeft+this.left+this.x+2*this.margin+a,e=this.layoutComb?this.layoutTop+3*this.margin+(this.height-(this.layoutTop+this.layoutBottom))/2-i[1]/2:this.marginTop+this.top+(this.y/2-i[1]/2)+this.margin):(t=this.layoutComb?this.layoutLeft+3*this.margin+(this.width-(this.layoutLeft+this.layoutRight))/2-i[0]/2:this.marginLeft+this.left+(this.x/2-i[0]/2)+this.margin,e=this.layoutComb?this.height-(this.marginBottom+i[1])+this.marginTop+this.top:this.marginTop+this.top+this.y+2*this.margin+a);for(var r=t+a+this.margin,h=e,n=0;n<this.varPie.ids.length;n++){var o=this.varPie.ids[n],l=n%this.colors.length,d=o>-1?this.shortenText(this.data.y.vars[o],this.maxVarStringLen):"Other";this.drawShape("square",t,h,s,s,this.colors[l],this.foreground,"closed"),this.drawText(d,r,h,this.legendFont,this.legendColor,"left","middle"),h+=s+this.margin}this.legendBox&&this.rectangle(t-2*this.margin,e-2*this.margin,i[0]-s,i[1]-s,!1,this.legendBoxColor,"open")}},this.drawPiePlot=function(){this.setPieXYDimensions(),this.drawTitle(),this.drawPieDataPoints(),this.drawPieLegend()},this.initializePiePlot=function(){return this.xAxisMin<0?void alert("Dude you can't draw a pie chart with negative numbers!"):void(this.layoutValid?this.drawLayoutCompartments(this.drawPiePlot):this.drawPiePlot())},this.initializePiePlot()},CanvasXpress.prototype.Venn=function(){this.setVennXYDimensions=function(){if(this.vennMarginLeft=0,this.vennMarginTop=0,this.setLegendFont(),this.setAxisFont("Venn",this.width),this.showLegend&&(this.bottom=this.margin+(this.getFontPt(this.legendFont)+this.margin)*this.vennGroups),this.x=this.width<=this.height?this.width-(this.marginLeft+this.left+this.right+this.marginRight):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y=4==this.vennGroups?.8*this.x:3==this.vennGroups?.95*this.x:2==this.vennGroups?.65*this.x:this.x,this.vennMarginTop=(this.height-(this.marginTop+this.top+this.y+this.bottom+this.marginBottom))/2,this.vennMarginLeft=(this.width-(this.marginLeft+this.left+this.x+this.right+this.marginRight))/2,this.x<400){var t=this.getFontPt(this.axisTickFont)-2;this.x<200&&(t-=1),this.axisTickFont=t+"Pt "+this.fontName}this.resizeCanvas()},this.drawVennBubble=function(t,e,i){4==this.vennGroups?this.isIE&&!this.useFlashIE?(i=i.replace("rgb","rgba"),i=i.replace(")",",0.5)"),this.drawShape("ellipse2",0,0,this.x/1.4,this.x/1.4,i,this.foreground,"closed")):(this.drawShape("ellipse2",0,0,this.x/1.4,this.x/1.4,i,this.foreground,"closed"),this.ctx.globalCompositeOperation="lighter"):this.isIE&&!this.useFlashIE?(i=i.replace("rgb","rgba"),i=i.replace(")",",0.5)"),this.drawShape("circle",t,e,this.x/2,this.x/2,i,this.foreground,"closed")):(this.drawShape("circle",t,e,this.x/2,this.x/2,i,this.foreground,"closed"),this.ctx.globalCompositeOperation="lighter")},this.drawVennLayout=function(){var t,e,i,s,a=["A","B","C","D"];if(this.ctx.clearRect(0,0,this.width,this.height),4==this.vennGroups?(this.ctx.save(),t=this.vennMarginLeft+this.marginLeft+this.margin+this.x/4.94,e=this.vennMarginTop+this.marginTop+this.top+this.x/13,this.ctx.translate(t,e),this.ctx.rotate(Math.PI/4),this.drawVennBubble(0,0,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),t=this.x/22.4,e=this.x/-5.32,this.ctx.translate(t,e),this.drawVennBubble(0,0,this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,153,51)"),t=this.x/1.84,e=this.x/-5.32,this.ctx.translate(t,e),this.ctx.rotate(Math.PI/2),t=this.x/-22.4,e=this.x/-5.32,this.ctx.translate(t,e),this.drawVennBubble(0,0,this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)"),t=this.x/22.4,e=this.x/5.32,this.ctx.translate(t,e),this.drawVennBubble(0,0,this.vennColors.length>3&&this.validateColor(this.vennColors[3])?this.validateColor(this.vennColors[3]):"rgb(153,204,0)"),this.ctx.restore(),i=[11.2,3.05,1.46,1.08],s=[7,42,42,7]):3==this.vennGroups?(this.ctx.save(),t=this.vennMarginLeft+this.marginLeft+this.left+this.x/2,e=this.vennMarginTop+this.marginTop+this.top+this.x/2.86,this.drawVennBubble(t,e,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),e+=this.x/3.33,t=this.vennMarginLeft+this.marginLeft+this.left+this.x/3,this.drawVennBubble(t,e,this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,255,0)"),t=this.vennMarginLeft+this.marginLeft+this.left+this.x/1.5,this.drawVennBubble(t,e,this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)"),this.ctx.restore(),i=[2,8.66,1.13],s=[20,2.3,2.3]):2==this.vennGroups?(this.ctx.save(),t=this.vennMarginLeft+this.marginLeft+this.left+this.x/3,e=this.vennMarginTop+this.marginTop+this.top+this.x/2.67,this.drawVennBubble(t,e,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(0,0,255)"),t=this.vennMarginLeft+this.marginLeft+this.left+this.x/1.5,e=this.vennMarginTop+this.marginTop+this.top+this.x/2.67,this.drawVennBubble(t,e,this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(255,0,0)"),this.ctx.restore(),i=[3,1.5],s=[16,16]):1==this.vennGroups&&(t=this.vennMarginLeft+this.marginLeft+this.left+this.x/2,e=this.vennMarginTop+this.marginTop+this.top+this.x/2,this.drawShape("circle",t,e,this.x,this.x,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)",this.foreground,"closed"),i=[100],s=[100]),!this.vennLegendColors)for(var r=0;r<this.vennGroups;r++){var h=this.vennMarginLeft+this.marginLeft+this.left+this.x/i[r],n=this.vennMarginTop+this.marginTop+this.top+this.x/s[r];this.drawText(a[r],h,n,this.axisTickFont,this.axisTickColor,"center","middle")}},this.drawVennDataPoints=function(){var t,e;4==this.vennGroups?(t=[5.6,2.94,3.5,1.54,3.29,2,2.59,1.212,2,1.442,1.4,1.757,2.31,1.624,2],e=[2.94,7,3.92,7,1.89,4.06,2.66,2.94,1.54,1.89,3.92,1.729,1.729,2.66,2.03],this.y=1.1*this.x/1.4):3==this.vennGroups?(t=[2,3.5,2.55,1.4,1.6,2,2],e=[3.6,1.54,2.07,1.54,2.07,1.54,1.83],this.y=.95*this.x):2==this.vennGroups?(t=[3.5,1.4,2],e=[2.66,2.66,2.66],this.y=.65*this.x):1==this.vennGroups&&(t=[2],e=[2]);for(var i=0;i<t.length;i++){var s=this.vennMarginLeft+this.marginLeft+this.left+this.x/t[i],a=this.vennMarginTop+this.marginTop+this.top+this.x/e[i],r=this.getFontPt(this.axisTickFont),h=this.data.venn.data[this.vennCompartments[i]]?this.data.venn.data[this.vennCompartments[i]]:0;this.drawText(h,s,a,this.axisTickFont,this.axisTickColor,"center","middle"),this.addArea(["circle",s,a,r],[i])}},this.drawVennLegend=function(){if(this.showLegend){var t=["A","B","C","D"],e=this.getFontPt(this.legendFont),i=this.vennMarginLeft+this.marginLeft+this.left,s=i+2*e,a=this.vennMarginTop+this.marginTop+this.top+this.y+this.margin+e/2,r=[];4==this.vennGroups?(r.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),r.push(this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,153,51)"),r.push(this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[3]):"rgb(153,204,0)"),r.push(this.vennColors.length>3&&this.validateColor(this.vennColors[3])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)")):3==this.vennGroups?(r.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),r.push(this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,255,0)"),r.push(this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)")):2==this.vennGroups?(r.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(0,0,255)"),r.push(this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(255,0,0)")):r.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)");for(var h=0;h<this.vennGroups;h++){this.vennLegendColors||this.drawText(t[h]+": ",i,a,this.legendFont,this.legendColor,"left","middle");var n=this.data.venn.legend&&this.data.venn.legend[t[h]]?this.data.venn.legend[t[h]]:"N/A",o=this.measureText(n,this.legendFont)>this.x?this.scaleTextToFont(n,e,this.x-this.margin):this.legendFont;this.vennLegendColors?this.drawText(n,i,a,o,r[h],"left","middle"):this.drawText(n,s,a,o,this.legendColor,"left","middle"),a+=this.margin+e}}},this.drawVennPlot=function(){this.setVennXYDimensions(),this.drawTitle(),this.showShadow=!1,this.drawVennLayout(),this.showShadow=this.tmpshowShadow,this.drawVennDataPoints(),this.drawVennLegend()},this.initializeVennPlot=function(){this.transparency=null,this.tmpshowShadow=this.showShadow,this.background="rgb(255,255,255)",this.foreground="rgb(0,0,0)",this.drawVennPlot()},this.initializeVennPlot()},CanvasXpress.prototype.Correlation=function(){this.setCorrelationVarSmpLabelFont=function(t){var e=this.scaleTextToSize(t);e="samples"==this.correlationAxis?e*this.smpLabelScaleFontFactor:e*this.varLabelScaleFontFactor,e=Math.min(e,this.maxTextSize),this.smpLabelFont=e+"Pt "+this.fontName,this.varLabelFont=e+"Pt "+this.fontName},this.getCorrelationLabelsHeight=function(){var t=0;return t+="samples"==this.correlationAxis?this.maxSmpName>this.maxSmpStringLen?this.measureText(this.maxSmpNameStr.substring(0,this.maxSmpStringLen),this.smpLabelFont):this.measureText(this.maxSmpNameStr,this.smpLabelFont):this.maxVarName>this.maxVarStringLen?this.measureText(this.maxVarNameStr.substring(0,this.maxVarStringLen),this.varLabelFont):this.measureText(this.maxVarNameStr,this.varLabelFont),this.correlationAnchorLegend&&(t+=this.correlationAnchorLegendAlignWidth+this.margin),t},this.setCorrelationXYDimensions=function(){this.corMarginLeft=0,this.corMarginTop=0,this.yAxisShow&&(this.setAxisFont(this.yAxisTitle,this.height),this.left=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.x=this.width<=this.height?this.width-(this.marginLeft+this.left+this.right+this.marginRight):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom);var t="variables"==this.correlationAxis?this.varIndices.length:this.isGroupedData?this.grpIndices.length:this.smpIndices.length;this.diamondSize=this.x/t,this.setCorrelationVarSmpLabelFont(t),this.y=this.x/2+this.diamondSize/2,this.xAxisShow&&(this.top+=this.margin+this.getCorrelationLabelsHeight()+this.margin),this.autoAdjust?(this.height=this.marginTop+this.top+this.y+this.bottom+this.marginBottom,this.width=this.marginLeft+this.left+this.x+this.right+this.marginRight):(this.corMarginTop=(this.height-(this.marginTop+this.top+this.y+this.bottom+this.marginBottom))/2,this.corMarginLeft=(this.width-(this.marginLeft+this.left+this.x+this.right+this.marginRight))/2),this.resizeCanvas()},this.drawCorrelationLayout=function(){if(this.yAxisShow&&this.drawText(this.yAxisTitle,this.corMarginLeft+this.marginLeft+this.left/2,this.marginTop+this.top+this.y/2,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2),this.xAxisShow){var t,e,i,s=this.corMarginLeft+this.marginLeft+this.left+this.diamondSize/2,a=this.corMarginTop+this.marginTop+this.top-this.margin,r=this.corMarginTop+this.marginTop+this.top-(this.getCorrelationLabelsHeight()+this.margin),h=r+this.correlationAnchorLegendAlignWidth,n=this.isGroupedData?this.data.w:this.data.y,o="variables"==this.correlationAxis?this.varIndices:this.isGroupedData?this.grpIndices:this.smpIndices,l="samples"==this.correlationAxis?this.maxSmpStringLen:this.maxVarStringLen;this.correlationAnchorLegend&&(i="samples"==this.correlationAxis?n.data[0]:this.getDataForSmpGrpAtIndex(0),o.sort(function(t,e){return i[t]-i[e]}),this.setAxisUnits("xAxis")),"samples"==this.correlationAxis?(t=n.smps,e=this.smpLabelFont):(t=n.vars,e=this.varLabelFont);for(var d=0;d<o.length;d++){var c=o[d],p=this.shortenText(t[c],l),g="samples"==this.correlationAxis?this.getSmpColor(t[c]):this.getVarColor(t[c]),u=d/this.correlationLabelInterval;if(parseInt(u)==parseFloat(u)&&this.drawText(p,s,a,e,g,"left","middle",-Math.PI/2),this.correlationAnchorLegend){var m=i[c],f=this.corMarginLeft+this.marginLeft+this.left+(m-this.xAxisMin)*this.xAxisUnit;this.drawLine("line",f,r-this.margin,f,r,g),this.drawLine("line",f,r,s,h,g)}s+=this.diamondSize}}s=this.corMarginLeft+this.marginLeft+this.left+this.x/3-this.heatmapColors.length*this.indicatorWidth,a=this.corMarginTop+this.marginTop+this.top+7*this.y/8,this.correlationAnchorLegend&&this.setRangeData("cor"),(null==this.minData||null==this.maxData)&&this.setRangeData("cor"),this.drawColorIndicator(s,a,this.minData,this.maxData,2)},this.drawCorrelationDataPoints=function(){var t,e,i,s,a=this.diamondSize/2,r=this.isGroupedData?this.data.w.cor:this.data.y.cor,h="variables"==this.correlationAxis?this.varIndices:this.isGroupedData?this.grpIndices:this.smpIndices;t=this.corMarginLeft+this.marginLeft+this.left+a,e=this.corMarginTop+this.marginTop+this.top+a;for(var n=0;n<Math.ceil(h.length/2);n++){var o=h[n];i=t+this.diamondSize*n,s=e;for(var l=n;l<h.length-n;l++){var d=h[l],c=r[o][d],p=this.getHeatmapColor(this.minData,this.maxData,c);isNaN(c)?this.addArea(this.drawShape("diamond",i,s,this.diamondSize,this.diamondSize,this.missingDataColor,this.missingDataColor,"closed"),[o,d]):this.addArea(this.drawShape("diamond",i,s,this.diamondSize,this.diamondSize,p,p,"closed"),[o,d]),i+=a,s+=a}s-=this.diamondSize;for(var g=l-2;g>=n;g--){var u=h[h.length-g-1],c=r[u][d],p=this.getHeatmapColor(this.minData,this.maxData,c);isNaN(c)?this.addArea(this.drawShape("diamond",i,s,this.diamondSize,this.diamondSize,this.missingDataColor,this.missingDataColor,"closed"),[u,d]):this.addArea(this.drawShape("diamond",i,s,this.diamondSize,this.diamondSize,p,p,"closed"),[u,d]),i+=a,s-=a}}this.drawLine("line",this.corMarginLeft+this.marginLeft+this.left,this.corMarginTop+this.marginTop+this.top+a,this.corMarginLeft+this.marginLeft+this.left+this.x/2,this.corMarginTop+this.marginTop+this.top+this.y,this.foreground,!1,"butt"),this.drawLine("line",this.corMarginLeft+this.marginLeft+this.left+this.x,this.corMarginTop+this.marginTop+this.top+a,this.corMarginLeft+this.marginLeft+this.left+this.x/2,this.corMarginTop+this.marginTop+this.top+this.y,this.foreground,!1,"butt"),t=this.corMarginLeft+this.marginLeft+this.left+a,e=this.corMarginTop+this.marginTop+this.top,i=t+this.x/2,s=this.corMarginTop+this.marginTop+this.top+this.y-a;for(var n=0;n<h.length;n++)this.drawLine("line",t,e,i,s,this.foreground,!1,"butt"),t+=this.diamondSize,i+=a,s-=a;t=this.corMarginLeft+this.marginLeft+this.left+this.x-a,e=this.corMarginTop+this.marginTop+this.top,i=this.corMarginLeft+this.marginLeft+this.left+this.x/2-a,s=this.corMarginTop+this.marginTop+this.top+this.y-a;for(var n=0;n<h.length;n++)this.drawLine("line",t,e,i,s,this.foreground,!1,"butt"),t-=this.diamondSize,i-=a,s-=a},this.drawCorrelationPlot=function(){this.setCorrelationXYDimensions(),this.drawCorrelationLayout(),this.drawTitle(),this.drawCorrelationDataPoints()},this.initializeCorrelationPlot=function(){this.drawCorrelationPlot()},this.initializeCorrelationPlot()},CanvasXpress.prototype.Scatter2D=function(t){this.get2DYAxisWidth=function(){return this.allVsAll?this.yAxisShow?this.measureText(this.yAxisMaxStrLength,this.axisTickFont)+3*this.margin:this.margin:this.yAxisShow?this.getFontPt(this.axisTitleFont)+this.measureText(this.yAxisMaxStrLength,this.axisTickFont)+5*this.margin:this.margin},this.get2DXAxisHeight=function(){return this.allVsAll?this.xAxisShow?this.getFontPt(this.axisTitleFont)+5*this.margin:this.margin:this.xAxisShow?this.getFontPt(this.axisTickFont)+this.getFontPt(this.axisTitleFont)+5*this.margin:this.margin},this.set2DType=function(){this.type2D=this.isValidKaplanMeier()?"KM":"ScatterBubble2D"==this.graphType&&this.xAxisIndices.length>1&&this.xAxisIndices.length==this.yAxisIndices.length&&this.xAxisIndices.length==this.zAxisIndices.length?"XYZ":this.xAxisIndices.length>1&&this.xAxisIndices.length==this.yAxisIndices.length?"XY":this.xAxisIndices.length>this.yAxisIndices.length?"X":"Y"},this.set2DText=function(){var t=this.xAxisTitle.length>this.yAxisTitle.length?this.xAxisTitle:this.yAxisTitle,e=this.layoutComb?Math.min(this.layoutWidth,this.layoutHeight):Math.min(this.width,this.height);this.setAxisFont(t,e)},this.setDecorationsLegendPositions=function(){this.showDecorations&&(this.setDecorationLegendDimension(),this.showLegend&&(this.decorationsPosition="bottom"==this.legendPosition?"right":"bottom"))},this.reRangeData=function(){this.xAxis=[];for(var t=0;t<this.data.d.kaplanMeier.length;t++)this.xAxis.push(this.data.d.kaplanMeier[t].time),this.xAxisTitle=this.data.d.kaplanMeier[t].time;this.yAxisTitle="Probability of Survival",this.setAxes("km")},this.set2DXYDimensions=function(){this.setDecorationsLegendPositions(),this.setLegendDimensions(),this.right=0,(this.showLegend||this.showIndicators)&&(this.right=this.legendWidth),this.showDecorations&&"right"==this.decorationsPosition&&(this.right+=this.legendDecorationWidth+2*this.margin),this.right+="ScatterBubble2D"==this.graphType&&this.zAxisShow?this.getFontPt(this.axisTitleFont)+this.margin:this.margin,this.left=this.get2DYAxisWidth(),this.bottom=this.get2DXAxisHeight(),(this.showLegend||this.showIndicators)&&(this.bottom+=this.legendHeight),this.showDecorations&&"bottom"==this.decorationsPosition&&(this.bottom+=this.legendDecorationHeight+2*this.margin),this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.setScatterPointSize(),this.isValidKaplanMeier()&&this.reRangeData(),this.setAxisUnits("xAxis"),this.setAxisUnits("yAxis")},this.set2DWireFrame=function(){var t,e,i,s,a,r;if(t=this.marginLeft+this.offsetX+this.left,i=t+this.x,a="dotted"==this.yAxisTickStyle?"dottedLine":"line",this.yAxisMinorTicks)for(var h=0;h<this.yAxisMinorValues.length;h++)r=parseFloat(this.yAxisMinorValues[h]),e=this.marginTop+this.offsetY+this.top+this.y-(r-this.yAxisMin)*this.yAxisUnit,this.drawLine(a,t,e,i,e,this.yAxisTickColor,this.outlineWidth/3,"butt");for(var h=0;h<this.yAxisValues.length;h++)r=parseFloat(this.yAxisValues[h]),e=this.marginTop+this.offsetY+this.top+this.y-(r-this.yAxisMin)*this.yAxisUnit,this.drawLine(a,t,e,i,e,this.yAxisTickColor,!1,"butt");if(e=this.marginTop+this.offsetY+this.top,s=e+this.y,a="dotted"==this.xAxisTickStyle?"dottedLine":"line",this.xAxisMinorTicks)for(var h=0;h<this.xAxisMinorValues.length;h++)r=parseFloat(this.xAxisMinorValues[h]),t=this.marginLeft+this.offsetX+this.left+(r-this.xAxisMin)*this.xAxisUnit,this.drawLine(a,t,e,t,s,this.xAxisTickColor,this.outlineWidth/3,"butt");for(var h=0;h<this.xAxisValues.length;h++)r=parseFloat(this.xAxisValues[h]),t=this.marginLeft+this.offsetX+this.left+(r-this.xAxisMin)*this.xAxisUnit,this.drawLine(a,t,e,t,s,this.xAxisTickColor,!1,"butt")},this.set2DLayout=function(){var t=this.marginLeft+this.offsetX+this.margin+this.getFontPt(this.axisTitleFont)/2,e=this.marginTop+this.offsetY+this.top+this.y/2;this.yAxisShow&&!this.allVsAll&&this.drawText(this.yAxisTitle,t,e,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2,!1,!1,!0),t=this.marginLeft+this.offsetX+this.left-this.margin;for(var i=0;i<this.yAxisValues.length-1;i++){var s=parseFloat(this.yAxisValues[i]),a=this.yAxisTransform&&!this.yAxisTransformTicks?this.formatAxisValue(this.transformValue(this.yAxisTransform,s,!0),"yAxis"):this.formatAxisValue(s,"yAxis");e=this.marginTop+this.offsetY+this.top+this.y-(s-this.yAxisMin)*this.yAxisUnit,this.yAxisShow&&this.drawText(a,t,e,this.axisTickFont,this.axisTickColor,"right","middle")}t=this.marginLeft+this.offsetX+this.left+this.x/2,e=this.marginTop+this.offsetY+this.top+this.y+this.margin+this.margin+this.getFontPt(this.axisTickFont)+this.margin+this.margin+this.getFontPt(this.axisTitleFont)/2,this.xAxisShow&&!this.allVsAll&&this.drawText(this.xAxisTitle,t,e,this.axisTitleFont,this.axisTitleColor,"center","middle",!1,!1,!1,!0),e=this.marginTop+this.offsetY+this.top+this.y+this.margin+this.margin+this.getFontPt(this.axisTickFont)/2;for(var i=0;i<this.xAxisValues.length-1;i++){var s=parseFloat(this.xAxisValues[i]),a=this.xAxisTransform&&!this.xAxisTransformTicks?this.formatAxisValue(this.transformValue(this.xAxisTransform,s,!0),"xAxis"):this.formatAxisValue(s,"xAxis");t=this.marginLeft+this.offsetX+this.left+(s-this.xAxisMin)*this.xAxisUnit,this.xAxisShow&&this.drawText(a,t,e,this.axisTickFont,this.axisTickColor,"center","middle");

}"ScatterBubble2D"==this.graphType&&this.zAxisShow&&(t=this.marginLeft+this.offsetX+this.left+this.x+this.margin,e=this.marginTop+this.offsetY+this.top+this.y/2,this.drawText(this.zAxisTitle,t,e,this.axisTitleFont,this.axisTitleColor,"center","bottom",Math.PI/2,!1,!1,!0)),this.rectangle(this.marginLeft+this.offsetX+this.left,this.marginTop+this.offsetY+this.top,this.x,this.y,!1,this.foreground,"open")},this.draw2DDataPoints=function(){var t,e,i,s,a,r,h,n,o,l,d,c,p,g=[],u=[],m=!1;if("KM"!=this.type2D)if("XYZ"==this.type2D){var f=this.xAxisIndices[this.xAxisCurrent],v=this.yAxisIndices[this.yAxisCurrent],x=this.zAxisIndices[this.zAxisCurrent],y=f+":"+v;"percentile"==this.xAxisTransform&&(a=this.getAxisRangeBySample(this.xAxisIndices),h=a[0],r=a[1]),"percentile"==this.yAxisTransform&&(n=this.getAxisRangeBySample(this.yAxisIndices),l=n[0],o=n[1]),d=this.getAxisRangeBySample(this.zAxisIndices),p=d[0],c=d[1];for(var b=0;b<this.varIndices.length;b++){var w=this.varIndices[b],C=this.getDataAtPos(w,f,!1,this.xAxisTransform,h,r),T=this.getDataAtPos(w,v,!1,this.yAxisTransform,l,o),D=this.getDataAtPos(w,x,!1,"percentile",p,c),S=this.getDataAtPos(w,f,"stdev"),A=this.getDataAtPos(w,v,"stdev"),k=this.sizeBy?this.dataSizes[b]:this.sizes[Math.floor(D/10)+1],M=this.colorBy?this.dataColors[b]:this.colors[0],I=this.shapeBy?this.dataShapes[b]:this.shapes[0],L=this.scatterType&&this.scatterType.match(/image/i)?this.images[b]:!1,N=L?"image":I;t=this.marginLeft+this.offsetX+this.left+(C-this.xAxisMin)*this.xAxisUnit,e=this.marginTop+this.offsetY+this.top+this.y-(T-this.yAxisMin)*this.yAxisUnit,this.isVisibleSelectedDataPoint(w,y)&&(this.scatterType&&this.scatterType.match(/functio|lineStep/)||(this.drawSelectedBackground(w,y,I,t,e,k,k,!1,!0),S&&!isNaN(S)&&(i=S/2*this.xAxisUnit,this.errorBar(t,e,t+i,e,this.margin,M),this.errorBar(t,e,t-i,e,this.margin,M)),A&&!isNaN(A)&&(s=A/2*this.yAxisUnit,this.errorBar(t,e,t,e+s,-this.margin,M),this.errorBar(t,e,t,e-s,-this.margin,M)),this.addArea(this.drawShape(N,t,e,k,k,M,this.foreground,"closed",!1,!1,!0,!1,!1,!1,L),[w,f,v,x]),this.drawSelectedBackgroundLabel(w,y,t,e)),this.scatterType&&this.scatterType.match(/line|functio/i)&&b<this.varIndices.length-1&&this.isVisibleSelectedDataPoint(this.varIndices[b+1],y)&&(w=this.varIndices[b+1],C=this.getDataAtPos(w,f,!1,this.xAxisTransform,h,r),T=this.getDataAtPos(w,v,!1,this.yAxisTransform,l,o),i=this.marginLeft+this.offsetX+this.left+(C-this.xAxisMin)*this.xAxisUnit,s=this.marginTop+this.offsetY+this.top+this.y-(T-this.yAxisMin)*this.yAxisUnit,"lineStep"==this.scatterType?(this.drawLine("line",t,e,i,e,this.colors[0]),this.drawLine("line",i,e,i,s,this.colors[0])):"spline"==this.lineType?(g.push(t),u.push(e)):this.drawLine("line",t,e,i,s,this.colors[0])))}this.scatterType&&this.scatterType.match(/line|functio/i)&&"spline"==this.lineType&&(g.push(i),u.push(s),this.drawLine("spline",g,u,!1,!1,this.colors[0]),g=[],u=[])}else if("XY"==this.type2D)for(var z=0;z<this.xAxisIndices.length;z++){var x,M=z%this.colors.length,f=this.xAxisIndices[z],v=this.yAxisIndices[z],y=f+":"+v;"percentile"==this.xAxisTransform&&(a=this.getAxisRangeBySample(f),h=a[0],r=a[1]),"percentile"==this.yAxisTransform&&(n=this.getAxisRangeBySample(v),l=n[0],o=n[1]),"ScatterBubble2D"!=this.graphType||this.sizeBy||this.zAxisIndices[this.zAxisCurrent]&&(x=this.zAxisIndices[this.zAxisCurrent],d=this.getAxisRangeBySample(x),p=d[0],c=d[1]);for(var b=0;b<this.varIndices.length;b++){var D,w=this.varIndices[b],C=this.getDataAtPos(w,f,!1,this.xAxisTransform,h,r),T=this.getDataAtPos(w,v,!1,this.yAxisTransform,l,o),S=this.getDataAtPos(w,f,"stdev"),A=this.getDataAtPos(w,v,"stdev"),I=this.shapeBy?this.dataShapes[b]:this.shapes[0],k=this.scatterPointSize,L=this.scatterType&&this.scatterType.match(/image/i)?this.images[b]:!1,N=L?"image":I;this.sizeBy?k=this.dataSizes[b]:"ScatterBubble2D"==this.graphType&&this.zAxisIndices[z]&&(D=this.getDataAtPos(w,x,!1,"percentile",p,c),k=this.sizes[Math.floor(D/10)+1]),t=this.marginLeft+this.offsetX+this.left+(C-this.xAxisMin)*this.xAxisUnit,e=this.marginTop+this.offsetY+this.top+this.y-(T-this.yAxisMin)*this.yAxisUnit,this.isHistogram?(s=this.marginTop+this.offsetY+this.top+this.y-e,this.isVisibleSelectedDataPoint(w,y)&&(this.drawSelectedBackground(w,y,"rectangle",t-this.histogramBarWidth,e-this.histogramBarWidth,2*this.histogramBarWidth,s,!1,!0),this.addArea(this.rectangle(t-this.histogramBarWidth,e,2*this.histogramBarWidth,s,this.colors[M],!1,"closed",!1,!1,!0),[w,f,v]),this.drawSelectedBackgroundLabel(w,y,t,e))):this.isVisibleSelectedDataPoint(w,y)&&(this.scatterType&&this.scatterType.match(/functio|lineStep/)||(this.drawSelectedBackground(w,y,I,t,e,k,k,!1,!0),S&&!isNaN(S)&&(i=S/2*this.xAxisUnit,this.errorBar(t,e,t+i,e,this.margin,this.colorBy?this.dataColors[b]:this.colors[M]),this.errorBar(t,e,t-i,e,this.margin,this.colorBy?this.dataColors[b]:this.colors[M])),A&&!isNaN(A)&&(s=A/2*this.yAxisUnit,this.errorBar(t,e,t,e+s,-this.margin,this.colorBy?this.dataColors[b]:this.colors[M]),this.errorBar(t,e,t,e-s,-this.margin,this.colorBy?this.dataColors[b]:this.colors[M])),"ScatterBubble2D"==this.graphType?this.colorBy?this.addArea(this.drawShape(N,t,e,k,k,this.dataColors[b],this.colors[M],"closed",!1,!1,!0,!1,!1,!1,L),[w,f,v,x]):this.addArea(this.drawShape(N,t,e,k,k,this.colors[M],this.foreground,"closed",!1,!1,!0,!1,!1,!1,L),[w,f,v,x]):this.colorBy?this.addArea(this.drawShape(N,t,e,k,k,this.dataColors[b],this.colors[M],"closed",!1,!1,!0,!1,!1,!1,L),[w,f,v]):this.addArea(this.drawShape(N,t,e,k,k,this.colors[M],this.foreground,"closed",!1,!1,!0,!1,!1,!1,L),[w,f,v]),this.drawSelectedBackgroundLabel(w,y,t,e)),this.scatterType&&this.scatterType.match(/line|functio/i)&&b<this.varIndices.length-1&&this.isVisibleSelectedDataPoint(this.varIndices[b+1],y)&&(w=this.varIndices[b+1],m=!0),m&&(C=this.getDataAtPos(w,f,!1,this.xAxisTransform,h,r),T=this.getDataAtPos(w,v,!1,this.yAxisTransform,l,o),i=this.marginLeft+this.offsetX+this.left+(C-this.xAxisMin)*this.xAxisUnit,s=this.marginTop+this.offsetY+this.top+this.y-(T-this.yAxisMin)*this.yAxisUnit,"lineStep"==this.scatterType?(this.drawLine("line",t,e,i,e,this.colors[0]),this.drawLine("line",i,e,i,s,this.colors[0])):"spline"==this.lineType?(g.push(t),u.push(e)):this.drawLine("line",t,e,i,s,this.colors[M]),m=!1))}this.scatterType&&this.scatterType.match(/line|functio/i)&&"spline"==this.lineType&&(g.push(i),u.push(s),this.drawLine("spline",g,u,!1,!1,this.colors[M]),g=[],u=[])}else if("X"==this.type2D){var F=this.yAxisIndices[this.yAxisCurrent];"percentile"==this.yAxisTransform&&(n=this.getAxisRangeBySample(F),l=n[0],o=n[1]);var P;"ScatterBubble2D"!=this.graphType||this.sizeBy||this.zAxisIndices[this.zAxisCurrent]&&(P=this.zAxisIndices[this.zAxisCurrent],d=this.getAxisRangeBySample(P),p=d[0],c=d[1]);for(var z=0;z<this.xAxisIndices.length;z++){var M=z%this.colors.length,B=this.xAxisIndices[z],y=B+":"+F;"percentile"==this.xAxisTransform&&(a=this.getAxisRangeBySample(B),h=a[0],r=a[1]);for(var b=0;b<this.varIndices.length;b++){var D,w=this.varIndices[b],C=this.getDataAtPos(w,B,!1,this.xAxisTransform,h,r),T=this.getDataAtPos(w,F,!1,this.yAxisTransform,l,o),S=this.getDataAtPos(w,B,"stdev"),A=this.getDataAtPos(w,F,"stdev"),k=this.scatterPointSize,I=this.shapeBy?this.dataShapes[b]:this.shapes[0],L=this.scatterType&&this.scatterType.match(/image/i)?this.images[b]:!1,N=L?"image":I;this.sizeBy?k=this.dataSizes[b]:"ScatterBubble2D"==this.graphType&&this.zAxisIndices[this.zAxisCurrent]&&(D=this.getDataAtPos(w,P,!1,"percentile",p,c),k=this.sizes[Math.floor(D/10)+1]),t=this.marginLeft+this.offsetX+this.left+(C-this.xAxisMin)*this.xAxisUnit,e=this.marginTop+this.offsetY+this.top+this.y-(T-this.yAxisMin)*this.yAxisUnit,this.isHistogram?(s=this.marginTop+this.offsetY+this.top+this.y-e,this.isVisibleSelectedDataPoint(w,y)&&(this.drawSelectedBackground(w,y,"rectangle",t-this.histogramBarWidth,e-this.histogramBarWidth,2*this.histogramBarWidth,s,!1,!0),this.addArea(this.rectangle(t-this.histogramBarWidth,e,2*this.histogramBarWidth,s,this.colors[M],!1,"closed",!1,!1,!0),[w,B,F]),this.drawSelectedBackgroundLabel(w,y,t,e))):this.isVisibleSelectedDataPoint(w,y)&&(this.scatterType&&this.scatterType.match(/functio|lineStep/)||(this.drawSelectedBackground(w,y,I,t,e,k,k,!1,!0),S&&!isNaN(S)&&(i=S/2*this.xAxisUnit,this.errorBar(t,e,t+i,e,this.margin,this.colorBy?this.dataColors[b]:this.colors[M]),this.errorBar(t,e,t-i,e,this.margin,this.colorBy?this.dataColors[b]:this.colors[M])),A&&!isNaN(A)&&(s=A/2*this.yAxisUnit,this.errorBar(t,e,t,e+s,-this.margin,this.colorBy?this.dataColors[b]:this.colors[M]),this.errorBar(t,e,t,e-s,-this.margin,this.colorBy?this.dataColors[b]:this.colors[M])),"ScatterBubble2D"==this.graphType?this.colorBy?this.addArea(this.drawShape(N,t,e,k,k,this.dataColors[b],this.colors[M],"closed",!1,!1,!0,!1,!1,!1,L),[w,B,F,P]):this.addArea(this.drawShape(N,t,e,k,k,this.colors[M],this.foreground,"closed",!1,!1,!0,!1,!1,!1,L),[w,B,F,P]):this.colorBy?this.addArea(this.drawShape(N,t,e,k,k,this.dataColors[b],this.colors[M],"closed",!1,!1,!0,!1,!1,!1,L),[w,B,F]):this.addArea(this.drawShape(N,t,e,k,k,this.colors[M],this.foreground,"closed",!1,!1,!0,!1,!1,!1,L),[w,B,F]),this.drawSelectedBackgroundLabel(w,y,t,e)),this.scatterType&&this.scatterType.match(/line|functio/i)&&b<this.varIndices.length-1&&this.isVisibleSelectedDataPoint(this.varIndices[b+1],y)&&(w=this.varIndices[b+1],m=!0),m&&(C=this.getDataAtPos(w,B,!1,this.xAxisTransform,h,r),T=this.getDataAtPos(w,F,!1,this.yAxisTransform,l,o),i=this.marginLeft+this.offsetX+this.left+(C-this.xAxisMin)*this.xAxisUnit,s=this.marginTop+this.offsetY+this.top+this.y-(T-this.yAxisMin)*this.yAxisUnit,"lineStep"==this.scatterType?(this.drawLine("line",t,e,i,e,this.colors[0]),this.drawLine("line",i,e,i,s,this.colors[0])):"spline"==this.lineType?(g.push(t),u.push(e)):this.drawLine("line",t,e,i,s,this.colors[M])))}this.scatterType&&this.scatterType.match(/line|functio/i)&&"spline"==this.lineType&&(g.push(i),u.push(s),this.drawLine("spline",g,u,!1,!1,this.colors[M]),g=[],u=[])}}else{var F=this.xAxisIndices[this.xAxisCurrent];"percentile"==this.xAxisTransform&&(a=this.getAxisRangeBySample(F),h=a[0],r=a[1]);var P;"ScatterBubble2D"!=this.graphType||this.sizeBy||this.zAxisIndices[this.zAxisCurrent]&&(P=this.zAxisIndices[this.zAxisCurrent],d=this.getAxisRangeBySample(P),p=d[0],c=d[1]);for(var z=0;z<this.yAxisIndices.length;z++){var M=this.colors[z%this.colors.length],B=this.yAxisIndices[z],y=F+":"+B;"percentile"==this.yAxisTransform&&(n=this.getAxisRangeBySample(B),l=n[0],o=n[1]);for(var b=0;b<this.varIndices.length;b++){var D,w=this.varIndices[b],C=this.getDataAtPos(w,F,!1,this.xAxisTransform,h,r),T=this.getDataAtPos(w,B,!1,this.yAxisTransform,l,o),S=this.getDataAtPos(w,F,"stdev"),A=this.getDataAtPos(w,B,"stdev"),I=this.shapeBy?this.dataShapes[b]:this.shapes[0],k=this.scatterPointSize,L=this.scatterType&&this.scatterType.match(/image/i)?this.images[b]:!1,N=L?"image":I;this.colorBy&&(M=this.dataColors[b]),this.sizeBy?k=this.dataSizes[b]:"ScatterBubble2D"==this.graphType&&this.zAxisIndices[this.yAxisCurrent]&&(D=this.getDataAtPos(w,P,!1,"percentile",p,c),k=this.sizes[Math.floor(D/10)+1]),t=this.marginLeft+this.offsetX+this.left+(C-this.xAxisMin)*this.xAxisUnit,e=this.marginTop+this.offsetY+this.top+this.y-(T-this.yAxisMin)*this.yAxisUnit,this.isHistogram?(s=this.marginTop+this.offsetY+this.top+this.y-e,this.isVisibleSelectedDataPoint(w,y)&&(this.drawSelectedBackground(w,y,"rectangle",t-this.histogramBarWidth,e-this.histogramBarWidth,2*this.histogramBarWidth,s,!1,!0),this.addArea(this.rectangle(t-this.histogramBarWidth,e,2*this.histogramBarWidth,s,M,!1,"closed",!1,!1,!0),[w,F,B]),this.drawSelectedBackgroundLabel(w,y,t,e))):this.isVisibleSelectedDataPoint(w,y)&&(this.scatterType&&this.scatterType.match(/functio|lineStep/)||(this.drawSelectedBackground(w,y,I,t,e,k,k,!1,!0),S&&!isNaN(S)&&(i=S/2*this.xAxisUnit,this.errorBar(t,e,t+i,e,this.margin,M),this.errorBar(t,e,t-i,e,this.margin,M)),A&&!isNaN(A)&&(s=A/2*this.yAxisUnit,this.errorBar(t,e,t,e+s,-this.margin,M),this.errorBar(t,e,t,e-s,-this.margin,M)),"ScatterBubble2D"==this.graphType?this.addArea(this.drawShape(N,t,e,k,k,M,this.foreground,"closed",!1,!1,!0,!1,!1,!1,L),[w,F,B,P]):this.addArea(this.drawShape(N,t,e,k,k,M,this.foreground,"closed",!1,!1,!0,!1,!1,!1,L),[w,F,B]),this.drawSelectedBackgroundLabel(w,y,t,e)),this.scatterType&&this.scatterType.match(/line|functio/i)&&b<this.varIndices.length-1&&this.isVisibleSelectedDataPoint(this.varIndices[b+1],y)&&(w=this.varIndices[b+1],m=!0),m&&(C=this.getDataAtPos(w,F,!1,this.xAxisTransform,h,r),T=this.getDataAtPos(w,B,!1,this.yAxisTransform,l,o),i=this.marginLeft+this.offsetX+this.left+(C-this.xAxisMin)*this.xAxisUnit,s=this.marginTop+this.offsetY+this.top+this.y-(T-this.yAxisMin)*this.yAxisUnit,"lineStep"==this.scatterType?(this.drawLine("line",t,e,i,e,this.colors[0]),this.drawLine("line",i,e,i,s,this.colors[0])):"spline"==this.lineType?(g.push(t),u.push(e)):this.drawLine("line",t,e,i,s,this.colors[z%this.colors.length])))}this.scatterType&&this.scatterType.match(/line|functio/i)&&"spline"==this.lineType&&(g.push(i),u.push(s),this.drawLine("spline",g,u,!1,!1,this.colors[z%this.colors.length]),g=[],u=[])}}},this.draw2DLegend=function(){this.showLegend&&this.drawScatterLegend(),this.showDecorations&&this.drawDecorationLegend()},this.set2DprivateParams=function(){this.set2DType(),this.set2DText()},this.isValidKaplanMeier=function(){return this.data.d&&this.data.d.kaplanMeier?!0:!1},this.draw2DPlot=function(){this.xAxis&&this.yAxis&&this.setDataColorShapeSize(),this.set2DprivateParams(),this.set2DXYDimensions(),this.xAxis&&this.yAxis&&(this.drawPlotWindow(),this.set2DWireFrame(),this.draw2DDataPoints(),this.maskPlotArea(),this.set2DLayout(),this.drawTitle(),this.drawDecorationData(),this.draw2DLegend())},this.initializeScatter2D=function(){"x"==this.scatterSeries&&(this.transpose(!1,!0),this.scatterSeries="y"),this.layoutValid&&this.allVsAll?this.drawLayoutCompartments(this.draw2DPlot):(this.allVsAll||this.unsetAllVsAll(),this.draw2DPlot())},t||this.initializeScatter2D()},CanvasXpress.prototype.Scatter3D=function(t){this.set3DText=function(){this.setAxisFont(!1,this.x)},this.equalizeMargins=function(){var t=Math.max(this.marginLeft,Math.max(this.marginRight,Math.max(this.marginTop,this.marginBottom)));this.marginLeft=t,this.marginRight=t,this.marginTop=t,this.marginBottom=t},this.set3DXYDimensions=function(){this.equalizeMargins(),this.tmpHeight&&(this.height=this.tmpHeight),this.tmpWidth&&(this.width=this.tmpWidth);var t=Math.min(this.height,this.width)-40;if(this.tmpHeight=this.height,this.tmpWidth=this.width,this.height=t,this.width=t,this.x=this.width-(this.marginTop+this.top),this.y=this.height-(this.marginTop+this.top),this.left=this.top,this.showLegend||this.showIndicators){this.setLegendDimensions();var t=Math.max(this.legendWidth,this.legendHeight)/2;this.x-=t,this.y-=t,this.width=this.x+this.legendWidth+this.marginLeft+this.marginRight,this.height=this.y+this.legendHeight+this.marginTop+this.marginBottom}this.resizeCanvas(),this.resizeViewport(),this.setScatterPointSize()},this.draw3DLayout=function(t,e,i,s,a,r,h,n){for(var o,l,d,c,p,g=this.marginLeft+this.offsetX+this.left,u=this.marginTop+this.offsetY+this.top,m=0;m<t.length;m++)p=this.get3DTransfrom(t[m],e[m],i[m]),o=p[0]+g,l=p[1]+u,p=this.get3DTransfrom(s[m],a[m],r[m]),d=p[0]+g,c=p[1]+u,"dotted"==n?this.drawLine("dottedLine",o,l,d,c,h[m],!1,"butt"):this.drawLine("line",o,l,d,c,h[m],!1,"butt")},this.draw3DBar=function(t,e,i,s,a,r){for(var h=this.marginLeft+this.offsetX+this.left,n=this.marginTop+this.offsetY+this.top,o=(h+this.x/2,n+this.y/2,s/2),l=[[[t-s,e,i-s],[t+s,e,i-s],[t+s,o,i-s],[t-s,o,i-s]],[[t+s,e,i-s],[t+s,e,i+s],[t+s,o,i+s],[t+s,o,i-s]],[[t-s,e,i+s],[t+s,e,i+s],[t+s,o,i+s],[t-s,o,i+s]],[[t-s,e,i-s],[t-s,e,i+s],[t-s,o,i+s],[t-s,o,i-s]],[[t-s,e,i-s],[t+s,e,i-s],[t+s,e,i+s],[t-s,e,i+s]]],d=[],c=[],p=[],g=0;g<l.length;g++){d[g]=[];for(var u=0;u<l[g].length;u++){var m=this.xAxisMin<0?0:this.xAxisMin,f=this.yAxisMin<0?0:this.yAxisMin,v=this.zAxisMin<0?0:this.zAxisMin,x=(l[g][u][0]-m)*this.xAxisUnit-this.xAxisOffset,y=this.yAxisOffset-(l[g][u][1]-f)*this.yAxisUnit,b=(l[g][u][2]-v)*this.zAxisUnit-this.zAxisOffset;d[g].push(this.get3DTransfrom(x,y,b))}p.push(g),c.push(this.euclidianDistance([(d[g][0][0]+d[g][2][0])/2,(d[g][0][1]+d[g][2][1])/2,(d[g][0][2]+d[g][2][2])/2],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]))}p.sort(function(t,e){return c[e]-c[t]});for(var w=1;w<d.length;w++){for(var g=p[w],C=3>w?this.darkenLightenColor(a,30*-w):a,T=[],D=[],u=0;u<d[g].length;u++)T.push(d[g][u][0]+h),D.push(d[g][u][1]+n);this.addArea(this.drawShape("polygon",T,D,!1,!1,C,this.foreground,"closed"),r)}},this.set3DXLayout=function(){var t,e,i,s,a,r,h,n,o=[],l=[],d=[],c=[],p=[],g=[],u=[],m=this.lenX/15,f=15*-m+m,v=this.xAxisTitle?this.xAxisTitle:this.is3DPlot?"Samples":this.data.y.smps[this.xAxisIndex],x=this.marginLeft+this.offsetX+this.left,y=this.marginTop+this.offsetY+this.top;if(this.show3DGrid){for(i=f,t=0,e=0;i<this.lenX;)(t+1)%3&&(this.is3DPlot||(o[e]=i,l[e]=-this.lenY,d[e]=this.lenZ,c[e]=i,p[e]=this.lenY,g[e]=this.lenZ,u.push(this.xAxisTickColor),e++),o[e]=-this.lenX,l[e]=i*this.lenY/this.lenX,d[e]=this.lenZ,c[e]=this.lenX,p[e]=i*this.lenY/this.lenX,g[e]=this.lenZ,u.push(this.xAxisTickColor),e++),i+=m,t++;for(this.draw3DLayout(o,l,d,c,p,g,u,this.xAxisTickStyle),o=[],l=[],d=[],c=[],p=[],g=[],u=[],i=f,t=0,e=0,a=this.xAxisIncr;i<this.lenX;)(t+1)%3||(this.is3DPlot||(o[e]=i,l[e]=-this.lenY,d[e]=this.lenZ,c[e]=i,p[e]=this.lenY,g[e]=this.lenZ,u.push(this.foreground),e++),o[e]=-this.lenX,l[e]=i*this.lenY/this.lenX,d[e]=this.lenZ,c[e]=this.lenX,p[e]=i*this.lenY/this.lenX,g[e]=this.lenZ,u.push(this.foreground),s=this.get3DTransfrom(i,this.lenY,-this.lenZ),h=s[0]+x,n=s[1]+y,r=this.formatAxisValue(this.xAxisMin+a,"xAxis"),a+=this.xAxisIncr,this.xAxisShow&&!this.is3DPlot&&this.drawText(r,h,n+5,this.axisTickFont,this.axisTickColor,"right",!1,-Math.PI/2),e++),i+=m,t++;this.draw3DLayout(o,l,d,c,p,g,u,this.xAxisTickStyle)}this.xAxisShow&&!this.is3DPlot&&this.draw3DAxisTitle(f-2*m,this.lenX+m,this.lenY+4*m,this.lenY+4*m,-this.lenZ-4*m,-this.lenZ-4*m,v,"x"),o=[-this.lenX,-this.lenX,this.lenX,-this.lenX],l=[-this.lenY,-this.lenY,-this.lenY,this.lenY],d=[this.lenZ,this.lenZ,this.lenZ,this.lenZ],c=[-this.lenX,this.lenX,this.lenX,this.lenX],p=[this.lenY,-this.lenY,this.lenY,this.lenY],g=[this.lenZ,this.lenZ,this.lenZ,this.lenZ],u=[this.foreground,this.foreground,this.foreground,this.foreground],this.draw3DLayout(o,l,d,c,p,g,u,this.xAxisTickStyle)},this.set3DYLayout=function(){var t,e,i,s,a,r,h,n,o=[],l=[],d=[],c=[],p=[],g=[],u=[],m=this.lenY/15,f=(this.yAxisLen/30,15*-m+m),v=this.yAxisTitle?this.yAxisTitle:this.is3DPlot?"Value":this.data.y.smps[this.yAxisIndex],x=this.marginLeft+this.offsetX+this.left,y=this.marginTop+this.offsetY+this.top;if(this.show3DGrid){for(i=f,t=0,e=0;i<this.lenY;)(t+1)%3&&(this.is3DPlot||(o[e]=-this.lenX,l[e]=-this.lenY,d[e]=i*this.lenZ/this.lenY,c[e]=-this.lenX,p[e]=this.lenY,g[e]=i*this.lenZ/this.lenY,u.push(this.yAxisTickColor),e++),o[e]=-this.lenX,l[e]=i,d[e]=-this.lenZ,c[e]=-this.lenX,p[e]=i,g[e]=this.lenZ,u.push(this.yAxisTickColor),e++),i+=m,t++;for(this.draw3DLayout(o,l,d,c,p,g,u,this.yAxisTickStyle),o=[],l=[],d=[],c=[],p=[],g=[],u=[],i=f,t=0,e=0,a=this.is3DPlot?this.yAxisIncr*this.xAxisTicks*9/10:9*this.yAxisIncr;i<this.lenY;)(t+1)%3||(this.is3DPlot||(o[e]=-this.lenX,l[e]=-this.lenY,d[e]=i*this.lenZ/this.lenY,c[e]=-this.lenX,p[e]=this.lenY,g[e]=i*this.lenZ/this.lenY,u.push(this.foreground),e++),o[e]=-this.lenX,l[e]=i,d[e]=-this.lenZ,c[e]=-this.lenX,p[e]=i,g[e]=this.lenZ,u.push(this.foreground),s=this.get3DTransfrom(-this.lenX,i,-this.lenZ),h=s[0]+x,n=s[1]+y,r=this.formatAxisValue(this.yAxisMin+a,"yAxis"),a-=this.is3DPlot?this.yAxisIncr*this.xAxisTicks/10:this.yAxisIncr,this.yAxisShow&&(this.yRotate>=45&&this.xRotate>=45?this.drawText(r,h,n+5,this.axisTickFont,this.axisTickColor,"right",!1,-Math.PI/2):this.drawText(r,h-5,n,this.axisTickFont,this.axisTickColor,"right")),e++),i+=m,t++;this.draw3DLayout(o,l,d,c,p,g,u,this.yAxisTickStyle)}this.yAxisShow&&this.draw3DAxisTitle(-this.lenX-4*m,-this.lenX-4*m,f-2*m,this.lenY+m,-this.lenZ-4*m,-this.lenZ-4*m,v,"y"),o=[-this.lenX,-this.lenX,-this.lenX,-this.lenX],l=[-this.lenY,-this.lenY,-this.lenY,this.lenY],d=[-this.lenZ,this.lenZ,this.lenZ,this.lenZ],c=[-this.lenX,-this.lenX,-this.lenX,-this.lenX],p=[this.lenY,-this.lenY,this.lenY,this.lenY],g=[-this.lenZ,-this.lenZ,this.lenZ,-this.lenZ],u=[this.foreground,this.foreground,this.foreground,this.foreground],this.draw3DLayout(o,l,d,c,p,g,u,this.yAxisTickStyle)},this.set3DZLayout=function(){var t,e,i,s,a,r,h,n,o,l=[],d=[],c=[],p=[],g=[],u=[],m=[],f=this.is3DPlot?this.lenZ/(.5*this.varIndices.length):this.lenZ/15,v=this.is3DPlot?this.lenZ/(.5*this.smpIndices.length):!1,x=this.is3DPlot?.5*this.varIndices.length*-f+f:15*-f+f,y=this.is3DPlot?.5*this.smpIndices.length*-v+v:!1,b=this.zAxisTitle?this.zAxisTitle:this.is3DPlot?"Variables":this.data.y.smps[this.zAxisIndex],w=this.marginLeft+this.offsetX+this.left,C=this.marginTop+this.offsetY+this.top;if(this.show3DGrid&&!this.is3DPlot){for(i=x,t=0,e=0;i<this.lenZ;)(t+1)%3&&(l[e]=-this.lenX,d[e]=this.lenY,c[e]=i,p[e]=this.lenX,g[e]=this.lenY,u[e]=i,m.push(this.zAxisTickColor),e++,l[e]=i*this.lenX/this.lenZ,d[e]=this.lenY,c[e]=-this.lenZ,p[e]=i*this.lenX/this.lenZ,g[e]=this.lenY,u[e]=this.lenZ,m.push(this.zAxisTickColor),e++),i+=f,t++;for(this.draw3DLayout(l,d,c,p,g,u,m,this.zAxisTickStyle),l=[],d=[],c=[],p=[],g=[],u=[],m=[],i=x,t=0,e=0,r=this.zAxisIncr;i<this.lenZ;)(t+1)%3||(l[e]=-this.lenX,d[e]=this.lenY,c[e]=i,p[e]=this.lenX,g[e]=this.lenY,u[e]=i,m.push(this.foreground),e++,l[e]=i*this.lenX/this.lenZ,d[e]=this.lenY,c[e]=-this.lenZ,p[e]=i*this.lenX/this.lenZ,g[e]=this.lenY,u[e]=this.lenZ,m.push(this.foreground),a=this.get3DTransfrom(this.lenX,this.lenY,i),n=a[0]+w,o=a[1]+C,h=this.formatAxisValue(this.zAxisMin+r,"zAxis"),r+=this.zAxisIncr,this.zAxisShow&&(this.xRotate>=45?this.yRotate>=45?this.drawText(h,n+5,o,this.axisTickFont,this.axisTickColor,"left"):this.drawText(h,n,o+5,this.axisTickFont,this.axisTickColor,"right",!1,-Math.PI/2):this.drawText(h,n+5,o,this.axisTickFont,this.axisTickColor,"left")),e++),i+=f,t++;this.draw3DLayout(l,d,c,p,g,u,m,this.zAxisTickStyle)}else if(this.is3DPlot){var T=this,D=function(){var e=t/T.varLabelInterval;parseInt(e)==parseFloat(e)&&(a=T.get3DTransfrom(T.lenX,T.lenY,i-f/2),n=a[0]+w,o=a[1]+C,h=T.data.y.vars[T.varIndices[t]],T.xRotate>=45?T.yRotate>=45?T.drawText(h,n+5,o,T.axisTickFont,T.axisTickColor,"left"):T.drawText(h,n,o+5,T.axisTickFont,T.axisTickColor,"right",!1,-Math.PI/2):T.drawText(h,n+5,o,T.axisTickFont,T.axisTickColor,"left"))},S=function(){var e=t/T.smpLabelInterval;parseInt(e)==parseFloat(e)&&(a=T.get3DTransfrom(s*T.lenX/T.lenZ-v/4,T.lenY,-T.lenZ),n=a[0]+w,o=a[1]+C,h=T.data.y.smps[T.smpIndices[t]],T.drawText(h,n,o+5,T.axisTickFont,T.axisTickColor,"right",!1,-Math.PI/2))};for(i=x,t=0,e=0;i<this.lenZ;)l[e]=-this.lenX,d[e]=this.lenY,c[e]=i,p[e]=this.lenX,g[e]=this.lenY,u[e]=i,m.push(this.zAxisTickColor),D(),e++,t++,i+=f;for(D(),t=0,s=y;s<this.lenZ;)l[e]=s*this.lenX/this.lenZ,d[e]=this.lenY,c[e]=-this.lenZ,p[e]=s*this.lenX/this.lenZ,g[e]=this.lenY,u[e]=this.lenZ,m.push(this.zAxisTickColor),S(),e++,t++,s+=v;this.draw3DLayout(l,d,c,p,g,u,m,this.zAxisTickStyle),S()}this.zAxisShow&&!this.is3DPlot&&this.draw3DAxisTitle(this.lenX+6*f,this.lenX+6*f,this.lenY+6*f,this.lenY+6*f,x-2*f,this.lenZ+f,b,"z"),l=[-this.lenX,-this.lenX,this.lenX,-this.lenX],d=[this.lenY,this.lenY,this.lenY,this.lenY],c=[-this.lenZ,this.lenZ,-this.lenZ,-this.lenZ],p=[-this.lenX,this.lenX,this.lenX,this.lenX],g=[this.lenY,this.lenY,this.lenY,this.lenY],u=[this.lenZ,this.lenZ,this.lenZ,-this.lenZ],m=[this.foreground,this.foreground,this.foreground,this.foreground],this.draw3DLayout(l,d,c,p,g,u,m,this.zAxisTickStyle)},this.draw3DAxisTitle=function(t,e,i,s,a,r,h,n){var o=this.measureText(h),l=o/2,d=h.split(""),c=(t+e)/2,p=(i+s)/2,g=(a+r)/2,u=this.marginLeft+this.offsetX,m=this.marginTop+this.offsetY,f=this.xRotate>=45||this.yRotate>=45?4:0;if((this.xRotate>=45||this.yRotate>=45)&&(o+=4*d.length,l=o/2),"x"==n){c-=l;for(var v=0;v<d.length;v++){var x=this.get3DTransfrom(c,p,g);this.drawText(d[v],u+x[0],m+x[1],this.axisTitleFont,this.axisTitleColor,"left","top"),c+=this.measureText(d[v])+f}}else if("y"==n){p+=l;for(var v=0;v<d.length;v++){var x=this.get3DTransfrom(c,p,g);this.drawText(d[v],u+x[0],m+x[1],this.axisTitleFont,this.axisTitleColor,"left","bottom",-Math.PI/2),p-=this.measureText(d[v])+f}}else if("z"==n){g-=l;for(var v=0;v<d.length;v++){var x=this.get3DTransfrom(c,p,g);this.drawText(d[v],u+x[0],m+x[1],this.axisTitleFont,this.axisTitleColor,"left","bottom"),g+=this.measureText(d[v])+f}}},this.set3DLayout=function(){this.set3DXLayout(),this.set3DYLayout(),this.set3DZLayout()},this.set3DAxes=function(){var t=["x","y","z"];if(this.setMin=null,this.setMax=null,this.is3DPlot){if(this.xAxisTitle){var e=this.yAxisTitle;this.yAxisTitle=this.xAxisTitle,this.xAxisTitle=e}this.yAxisMin=this.xAxisMin,this.yAxisMax=this.xAxisMax,this.yAxisIncr=this.xAxisIncr,this.yAxisDecs=this.xAxisDecs,this.yAxisRange=this.xAxisRange,this.yAxisUnit=2*this.lenY/this.yAxisRange,this.yAxisOffset=Math.min(this.lenY,(this.yAxisMin+this.yAxisRange/2)*this.yAxisUnit),this.xAxisMin=0,this.xAxisMax=9,this.xAxisIncr=this.isGroupedData?10/(this.grpIndices.length+1):10/(this.smpIndices.length+1),this.xAxisDecs=0,this.xAxisRange=this.xAxisMax-this.xAxisMin,this.xAxisUnit=2*this.lenX/this.xAxisRange,this.xAxisOffset=Math.min(this.lenX,(this.xAxisMin+this.xAxisRange/2)*this.xAxisUnit),this.zAxisMin=0,this.zAxisMax=9,this.zAxisIncr=10/(this.varIndices.length+1),this.zAxisDecs=0,this.zAxisRange=this.zAxisMax-this.zAxisMin,this.zAxisUnit=2*this.lenZ/this.zAxisRange,this.zAxisOffset=Math.min(this.lenZ,(this.zAxisMin+this.zAxisRange/2)*this.zAxisUnit)}else for(var i=0;i<t.length;i++){var s=this.smpIndices,a=t[i].toUpperCase();this[t[i]+"AxisIndex"]=this.getSampleIndices([this[t[i]+"Axis"]])[0],this.setSamplesVisible([this[t[i]+"AxisIndex"]]),this.setRangeData(),this[t[i]+"AxisMin"]=null!=this["setMin"+a]?this["setMin"+a]:this.minData,this[t[i]+"AxisMax"]=null!=this["setMax"+a]?this["setMax"+a]:this.maxData,this[t[i]+"AxisIncr"]=this.getAxisIncrements(this[t[i]+"AxisMin"],this[t[i]+"AxisMax"],10,this[t[i]+"AxisExact"]),this[t[i]+"AxisDecs"]=this.getAxisDecimals(this[t[i]+"AxisIncr"]),this[t[i]+"AxisMin"]=this.getAxisMin(this[t[i]+"AxisMin"],this[t[i]+"AxisIncr"]),this[t[i]+"AxisMax"]=this[t[i]+"AxisMin"]+10*this[t[i]+"AxisIncr"],this[t[i]+"AxisRange"]=this[t[i]+"AxisMax"]-this[t[i]+"AxisMin"],this[t[i]+"AxisUnit"]=2*this["len"+a]/this[t[i]+"AxisRange"],this[t[i]+"AxisOffset"]=Math.min(this["len"+a],(this[t[i]+"AxisMin"]+this[t[i]+"AxisRange"]/2)*this[t[i]+"AxisUnit"]),this.setSamplesVisible(s)}this.set3DCenter()},this.set3DCenter=function(){var t=this.xAxisMin<0?0:this.xAxisMin,e=this.yAxisMin<0?0:this.yAxisMin,i=this.zAxisMin<0?0:this.zAxisMin,s=((this.xAxisMin+this.xAxisMax)/2-t)*this.xAxisUnit-this.xAxisOffset,a=this.yAxisOffset-((this.yAxisMin+this.yAxisMax)/2-e)*this.yAxisUnit,r=((this.zAxisMin+this.zAxisMax)/2-i)*this.zAxisUnit-this.zAxisOffset;this.zero3DPoint=this.get3DTransfrom(s,a,r)},this.is3DVisibleDataPoint=function(t,e,i){return t>=this.xAxisMin&&t<=this.xAxisMax&&e>=this.yAxisMin&&e<=this.yAxisMax&&i>=this.zAxisMin&&i<=this.zAxisMax?!0:!1},this.isCulled=function(t,e,s,a){for(i=0;i<a;i++){var r=this.cull3D[i],h=r[2];if(h>=s&&t>=r[0]-h&&t<=r[0]+h&&e>=r[1]-h&&e<=r[1]+h)return!0}return!1},this.draw3DDataPoints=function(){var t=this.marginLeft+this.offsetX+this.left,e=this.marginTop+this.offsetY+this.top,i=this.xAxisIndex+":"+this.yAxisIndex+":"+this.zAxisIndex,s=[],a=[],r=[],h=[],n=[],o=[],l=[],d=[];if(this.is3DPlot)for(var c=0,p=0;p<this.varIndices.length;p++)for(var g=this.varIndices[p],u=0;u<this.smpIndices.length;u++){var m=this.smpIndices[u],f=u*this.xAxisIncr+this.xAxisIncr/2,v=this.getDataAtPos(g,m),x=p*this.zAxisIncr+this.zAxisIncr/2,y=0,b=this.yAxisMin<0?0:this.yAxisMin,w=0,C=(f-y)*this.xAxisUnit-this.xAxisOffset,T=this.scatterType&&this.scatterType.match(/bar/)?0:this.yAxisOffset-(v-b)*this.yAxisUnit,D=(x-w)*this.zAxisUnit-this.zAxisOffset;l.push(!0),s.push([f,v,x]);var S=this.get3DTransfrom(C,T,D);a.push(S),r.push(S[2]),o.push(this.euclidianDistance([a[c][0],a[c][1],a[c][2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x])),d.push([g,m]),n.push(c++)}else for(var p=0;p<this.varIndices.length;p++){var g=this.varIndices[p],f=this.getDataAtPos(g,this.xAxisIndex),v=this.getDataAtPos(g,this.yAxisIndex),x=this.getDataAtPos(g,this.zAxisIndex),y=this.xAxisMin<0?0:this.xAxisMin,b=this.yAxisMin<0?0:this.yAxisMin,w=this.zAxisMin<0?0:this.zAxisMin,C=(f-y)*this.xAxisUnit-this.xAxisOffset,T=this.scatterType&&this.scatterType.match(/bar/)?0:this.yAxisOffset-(v-b)*this.yAxisUnit,D=(x-w)*this.zAxisUnit-this.zAxisOffset;l.push(this.is3DVisibleDataPoint(f,v,x)),s.push([f,v,x]);var S=this.get3DTransfrom(C,T,D);a.push(S),r.push(S[2]),"function"!=this.scatterType&&(n.push(p),o.push(this.euclidianDistance([a[p][0],a[p][1],a[p][2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x])))}var A=this.range(r);if(this.scatterType&&"function"==this.scatterType){for(var k=Math.sqrt(a.length),g=0,M=[],p=1;k>p;p++)for(var u=0;k-1>u;u++){var I=(p-1)*k+u,L=p*k+u,N=(p-1)*k+u+1,z=p*k+u+1,F=[a[I][0],a[L][0],a[z][0],a[N][0]],P=[a[I][1],a[L][1],a[z][1],a[N][1]],B=[a[I][2],a[L][2],a[z][2],a[N][2]],X=this.colorBy?this.legendColorRange:!1,R=this.colorBy?this.getHeatmapColor(X[0],X[1],this.mean([s[I][1],s[L][1],s[z][1],s[N][1]])):!1;n.push(g++),o.push(this.euclidianDistance([this.mean(F),this.mean(P),this.mean(B)],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x])),M.push([F,P,R])}n.sort(function(t,e){return o[e]-o[t]});for(var g=0;g<M.length;g++){var p=n[g];if(l[p]){var V=[p,this.xAxisIndex,this.yAxisIndex,this.zAxisIndex];this.colorBy?this.addArea(this.drawShape("polygon",M[p][0],M[p][1],!1,!1,M[p][2],this.foreground,"close"),V):this.addArea(this.drawShape("polygon",M[p][0],M[p][1],!1,!1,!1,this.foreground,"open"),V)}}}else{n.sort(function(t,e){return o[e]-o[t]});for(var E=this.is3DPlot?this.scatterPointSize/(30*this.bar3DInverseWeight):this.scatterPointSize/(3*this.bar3DInverseWeight),g=0;g<a.length;g++){var p=n[g],O=this.colorBy?this.dataColors[p]:this.colors[0],G=this.scatterType&&this.scatterType.match(/image/i)?this.images[u]:!1,V=this.is3DPlot?[d[p][0],d[p][1]]:[p,this.xAxisIndex,this.yAxisIndex,this.zAxisIndex];if(l[p]&&this.isVisibleSelectedDataPoint(p,i))if(this.scatterType&&this.scatterType.match(/bar/)){var H=this.isInSelectedDataPoints(p,i)?this.selectedBackgroundColor:O;this.draw3DBar(s[p][0],s[p][1],s[p][2],E,H,V)}else{var W=this.shapeBy?this.dataShapes[p]:this.shapes[0],$=G?"image":W,H=this.sizeBy?this.dataSizes[p]:this.scatterPointSize,f=t+a[p][0],v=e+a[p][1],x=Math.floor(this.percentile(A[0],A[1],a[p][2]));H-=H*(x/100)/3,this.drawSelectedBackground(p,i,W,f,v,H,H),this.addArea(this.drawShape($,f,v,H,H,O,this.foreground,"closed",!1,!1,!1,!1,!1,!1,G),V),this.drawSelectedBackgroundLabel(p,i,f,v),this.scatterType&&this.scatterType.match(/line/)&&(h[p]=[a[p][0],a[p][1]])}}if(this.scatterType&&this.scatterType.match(/line/)&&h.length>0)for(var p=0;p<h.length-1;p++)if(l[p]&&this.isVisibleSelectedDataPoint(p,i)&&l[p+1]&&this.isVisibleSelectedDataPoint(p+1,i)){var Y=t+h[p][0],U=e+h[p][1],q=t+h[p+1][0],j=e+h[p+1][1];this.drawLine("line",Y,U,q,j,this.colors[0])}}},this.set3DprivateParams=function(){this.set3DText(),this.set3DParams()},this.draw3DPlot=function(){this.setDataColorShapeSize(),this.set3DXYDimensions(),this.set3DprivateParams(),this.set3DRotation(),this.set3DAxes(),this.set3DLayout(),this.drawTitle(),this.draw3DDataPoints(),this.drawScatterLegend()},this.initializeScatter3D=function(){this.layoutValid?this.drawLayoutCompartments(this.draw3DPlot):this.draw3DPlot()},t||this.initializeScatter3D();

},CanvasXpress.prototype.oneDPlot=function(){this.getShapeSize=function(){return this.x<100||this.y<100?this.rowBlockSize/6:this.x<200||this.y<200?this.rowBlockSize/3:this.rowBlockSize/1.5},this.setRowColBlocks=function(){var t=this.isGroupedData?this.grpIndices.length:this.smpIndices.length;if(this.rowBlocks=0,"Line"==this.graphType||"Area"==this.graphType||"AreaLine"==this.graphType||"Heatmap"==this.graphType||"Stacked"==this.graphType||"StackedLine"==this.graphType||"StackedPercent"==this.graphType||"StackedPercentLine"==this.graphType)this.rowBlocks=t,this.colBlocks="Heatmap"==this.graphType?this.varIndices.length:1;else if("BarLine"==this.graphType&&this.data.a){var e=this.getVariablesVisibleByAxis("xAxis");this.rowBlocks=e.length*t,this.colBlocks=1}else this.rowBlocks=this.varIndices.length*t,this.colBlocks=1},this.set1DVarSmpLabelFont=function(){var t,e;if(this.autoScaleFont){if(this.data.l&&this.data.l.vars&&this.data.l.smps&&"vertical"==this.graphOrientation)t=this.scaleTextToSize(2*this.layoutMaxSamples);else{var i=Math.abs(90==this.smpLabelRotate)?6:2;t=this.scaleTextToSize(this.isGraphTime?this.timeValues.length*i:this.smpIndices.length*i)}e=this.scaleTextToSize(2*this.varIndices.length),"Heatmap"==this.graphType&&this.autoAdjust&&(this.smpLabelDescription&&parseInt(t*this.smpLabelScaleFontFactor)>this.maxTextSize&&(t=this.maxTextSize),this.varLabelDescription&&parseInt(e*this.varLabelScaleFontFactor)>this.maxTextSize&&(e=this.maxTextSize),t=Math.min(t,e),e=t)}else t=this.smpLabelFontSize,e=this.varLabelFontSize;this.smpLabelFont=parseInt(t*this.smpLabelScaleFontFactor)+"Pt "+this.fontName,this.varLabelFont=parseInt(e*this.varLabelScaleFontFactor)+"Pt "+this.fontName},this.set1DText=function(){var t;this.layoutComb||(t=this.data.y.desc?this.data.y.desc.length>1?this.data.y.desc[0].length>this.data.y.desc[1].length?this.data.y.desc[0]:this.data.y.desc[1]:this.data.y.desc[0]:"NA"),this.layoutComb?this.setAxisFont(this.minLayoutAxisTitle,this.minLayoutAxis):"vertical"==this.graphOrientation?this.setAxisFont(t,this.y):this.setAxisFont(t,this.x)},this.getVariableTitleHeight=function(){return this.varTitle?parseInt(this.varTitleFontSize*this.varTitleScaleFontFactor)+this.margin:0},this.getVariableLabelLength=function(){return this.showVariableNames?this.varLabelRotate&&90==Math.abs(this.varLabelRotate)?this.getFontPt(this.varLabelFont)+this.margin:this.measureText(this.maxVarNameStr,this.varLabelFont)+this.margin:0},this.getVariableLabelDescLength=function(){return this.showVariableNames&&this.varLabelDescription?this.maxVarLabelDesc>this.maxVarStringLen?this.measureText(this.maxVarLabelDescStr.substring(0,this.maxVarStringLen),this.varLabelFont)+2*this.margin:this.measureText(this.maxVarLabelDescStr,this.varLabelFont)+2*this.margin:0},this.getSampleTitleHeight=function(){return this.smpTitle?parseInt(this.smpTitleFontSize*this.smpTitleScaleFontFactor)+this.margin:0},this.getSampleLabelLength=function(){return this.showSampleNames?this.smpLabelRotate&&90==Math.abs(this.smpLabelRotate)?this.getFontPt(this.smpLabelFont)+2*this.margin:this.isGraphTime?this.measureText(this.getMaxText(this.timeValues),this.smpLabelFont)+2*this.margin:this.maxSmpName>this.maxSmpStringLen?this.measureText(this.maxSmpNameStr.substring(0,this.maxSmpStringLen),this.smpLabelFont)+2*this.margin:this.measureText(this.maxSmpNameStr,this.smpLabelFont)+2*this.margin:0},this.getSampleLabelDescLength=function(){return this.showSampleNames&&this.smpLabelDescription?this.maxSmpLabelDesc>this.maxSmpStringLen?this.measureText(this.maxSmpLabelDescStr.substring(0,this.maxSmpStringLen),this.smpLabelFont)+2*this.margin:this.measureText(this.maxSmpLabelDescStr,this.smpLabelFont)+2*this.margin:0},this.getSmpOverlaysLength=function(){var t=0;if(this.showOverlays&&!this.isGroupedData){for(var e=0;e<this.smpOverlays.length;e++)(this.data.x.hasOwnProperty(this.smpOverlays[e])||"-"==this.smpOverlays[e])&&t++;t>0&&(t=t*this.overlaysWidth+this.margin)}return t},this.getSmpOverlaysStrLength=function(){var t=0;if(this.showOverlays&&"Heatmap"==this.graphType)for(var e=0;e<this.smpOverlays.length;e++)this.data.x.hasOwnProperty(this.smpOverlays[e])&&(t=Math.max(t,this.measureText(this.smpOverlays[e],this.overlayFont)+this.margin));return t},this.getVarOverlaysHeight=function(){var t=0;if(this.showOverlays&&"Heatmap"==this.graphType){for(var e=0;e<this.varOverlays.length;e++)(this.data.z.hasOwnProperty(this.varOverlays[e])||"-"==this.varOverlays[e])&&t++;t>0&&(t=t*this.overlaysWidth+this.margin)}return t},this.getVarOverlaysLength=function(){var t=0;if(this.showOverlays&&"Heatmap"==this.graphType)for(var e=0;e<this.varOverlays.length;e++)this.data.z.hasOwnProperty(this.varOverlays[e])&&(t=Math.max(t,this.measureText(this.varOverlays[e],this.overlayFont)+this.margin));return t},this.getAxisTitleTickLength=function(t){if("vertical"==this.graphOrientation){var e;return e=this.tickRotate&&90==Math.abs(this.tickRotate)?this.getFontPt(this.axisTickFont):"Candlestick"==this.graphType?this.showVolume?Math.max(this.measureText(this.xAxisMaxStrLength,this.axisTickFont),this.measureText(this.xAxis2MaxStrLength,this.axisTickFont)):"candle"==this.summaryType?this.measureText(this.xAxisMaxStrLength,this.axisTickFont):this.measureText(this.xAxis2MaxStrLength,this.axisTickFont):"BarLine"==this.graphType&&t?this.measureText(this.xAxis2MaxStrLength,this.axisTickFont):this.measureText(this.xAxisMaxStrLength,this.axisTickFont),t?this.xAxis2Show?this.getFontPt(this.axisTitleFont)+e+3*this.margin:0:this.xAxisShow?this.getFontPt(this.axisTitleFont)+e+3*this.margin:0}return t?this.xAxis2Show?this.getFontPt(this.axisTitleFont)+this.getFontPt(this.axisTickFont)+5*this.margin:0:this.xAxisShow?this.getFontPt(this.axisTitleFont)+this.getFontPt(this.axisTickFont)+5*this.margin:0},this.getHeatmapIndicatorHeight=function(t){var e=this.data.y.desc&&this.data.y.desc[0]?2*this.margin+this.getFontPt(this.legendFont):0;return t&&this.isMultidimensionalHeatmap&&"bottom"==this.indicatorsPosition?this.legendHeight:this.indicatorHeight+4*this.margin+this.getFontPt(this.legendFont)+e},this.getLegendHeight=function(t){if("Heatmap"!=this.graphType||this.isMultidimensionalHeatmap){if(this.isMultidimensionalHeatmap||(this.colorBy||this.shapeBy||this.sizeBy)&&this.graphType.match(/^Bar$|Boxplot|Dotplot/))return"right"==this.legendPosition?this.legendWidth:this.legendHeight;var e=Math.min(this.getFontPt(this.legendFont),this.maxTextSize),i=this.layoutComb&&!t?this.layoutMaxVarLegend:this.varIndices.length;return i*e*1.5+e/2+this.margin}return 0},this.getLegendWidth=function(){if("Heatmap"!=this.graphType||this.isMultidimensionalHeatmap){if(this.isMultidimensionalHeatmap||(this.colorBy||this.shapeBy||this.sizeBy)&&this.graphType.match(/^Bar$|Boxplot|Dotplot/))return"right"==this.legendPosition?this.legendWidth:this.legendHeight;var t=Math.min(this.getFontPt(this.legendFont),this.maxTextSize),e=this.layoutComb?this.layoutMaxVarLegendLabel:this.maxVarNameStr,i=e.length>this.maxVarStringLen?e.substring(0,this.maxVarStringLen):e;return 2*t+this.measureText(i,this.legendFont)+6*this.margin}return 0},this.getVarTreeHeight=function(){var t=0;return"Heatmap"==this.graphType&&this.showVarDendrogram&&this.varDendrogram&&(t=(this.varDendrogram.depth+1)*this.dendrogramSpace+this.margin),t},this.getSmpTreeWidthHeight=function(){var t=0;return this.showSmpDendrogram&&this.smpDendrogram&&!this.isGroupedData&&(t=(this.smpDendrogram.depth+1)*this.dendrogramSpace+this.margin),t},this.set1DXYDimensionsLeft=function(){this.left="vertical"==this.graphOrientation?this.margin+this.getAxisTitleTickLength():"right"==this.smpDendrogramPosition?this.margin+this.getSampleTitleHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength():this.margin+this.getSampleTitleHeight()+this.getSmpTreeWidthHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength()},this.set1DXYDimensionsRight=function(){if(this.right="vertical"==this.graphOrientation?this.margin+this.getAxisTitleTickLength(!0):"right"==this.smpDendrogramPosition?this.margin+this.getSmpTreeWidthHeight():this.margin,this.showLegend&&"right"==this.legendPosition&&(this.right+=this.getLegendWidth()),"Heatmap"==this.graphType){var t=this.getSampleLabelDescLength(),e=0;this.showOverlays&&(e=this.getVarOverlaysLength()),this.right+=Math.max(t,e)}},this.set1DXYDimensionsTop=function(){this.top=this.margin,this.title&&(this.top+=this.titleHeight+this.margin,this.subtitle&&(this.top+=this.subtitleHeight+this.margin)),"vertical"==this.graphOrientation?"bottom"!=this.smpDendrogramPosition&&(this.top+=this.getSmpTreeWidthHeight()):"Heatmap"==this.graphType?(this.top+=this.getHeatmapIndicatorHeight(),"bottom"!=this.varDendrogramPosition&&(this.top+=this.getVarTreeHeight()),"bottom"!=this.varTitleLabelOverlayPosition?(this.top+=this.getVariableTitleHeight(),this.top+=this.getVariableLabelLength(),this.top+=this.getVarOverlaysHeight()):this.top+=this.getVariableLabelDescLength()):this.top+=this.getAxisTitleTickLength()},this.set1DXYDimensionsBottom=function(){this.bottom=this.margin,"vertical"==this.graphOrientation?(this.bottom+=this.getSampleTitleHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength(),"bottom"==this.smpDendrogramPosition&&(this.bottom+=this.getSmpTreeWidthHeight()),this.showLegend&&"bottom"==this.legendPosition&&(this.bottom+=this.getLegendHeight())):"Heatmap"==this.graphType?("bottom"==this.varTitleLabelOverlayPosition?(this.bottom+=this.getVarOverlaysHeight(),this.bottom+=this.getVariableLabelLength(),this.bottom+=this.getVariableTitleHeight()):this.bottom+=Math.max(this.getVariableLabelDescLength(),this.getSmpOverlaysStrLength()),"bottom"==this.varDendrogramPosition&&(this.bottom+=this.getVarTreeHeight()),this.showIndicators&&"bottom"==this.indicatorsPosition&&this.isMultidimensionalHeatmap&&(this.bottom+=this.getHeatmapIndicatorHeight(!0))):(this.bottom+=this.getAxisTitleTickLength(!0),this.showLegend&&"bottom"==this.legendPosition&&(this.bottom+=this.getLegendHeight()))},this.adjustLegendFontSize=function(){!this.tmpLegendFontSize&&this.autoAdjust&&(this.tmpLegendFontSize=this.legendFontSize),this.legendFontSize>3&&(this.legendFontSize-=2)},this.adjustSmpVarScaleFontFactor=function(){"Heatmap"==this.graphType&&this.autoAdjust&&(this.tmpSmpLabelScaleFontFactor||(this.tmpSmpLabelScaleFontFactor=this.smpLabelScaleFontFactor),this.tmpVarLabelScaleFontFactor||(this.tmpVarLabelScaleFontFactor=this.varLabelScaleFontFactor),this.smpLabelScaleFontFactor*=.8,this.varLabelScaleFontFactor*=.8,this.set1DVarSmpLabelFont())},this.adjustDendrogramSpace=function(){"Heatmap"==this.graphType&&this.autoAdjust&&(this.tmpDendrogramSpace||(this.tmpDendrogramSpace=this.dendrogramSpace),this.dendrogramSpace>1&&(this.dendrogramSpace-=1))},this.adjust1DYDimension=function(){for(;this.autoAdjustYTries<=this.autoAdjustMax&&this.y<10;)this.adjustLegendFontSize(),this.adjustSmpVarScaleFontFactor(),this.adjustDendrogramSpace(),this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.autoAdjustYTries==this.autoAdjustMax&&this.y<10&&(this.showLegend&&"bottom"==this.legendPosition&&(this.tmpShowLegend=this.showLegend,this.showLegend=!1),this.varLabelDescription&&(this.tmpVarLabelDescription=this.varLabelDescription,this.varLabelDescription=!1),this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y<10&&this.errors.push("The text size doesn't fit in the graph. Either make it smaller or make the graph bigger!\nYou can also reduce the maximum length for the text string!")),this.autoAdjustYTries++},this.adjust1DXDimension=function(){for(;this.autoAdjustXTries<=this.autoAdjustMax&&this.x<10;)this.adjustLegendFontSize(),this.adjustSmpVarScaleFontFactor(),this.adjustDendrogramSpace(),this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.autoAdjustXTries==this.autoAdjustMax&&this.x<10&&(this.showLegend&&"bottom"!=this.legendPosition&&(this.tmpShowLegend=this.showLegend,this.showLegend=!1),this.smpLabelDescription&&(this.tmpSmpLabelDescription=this.smpLabelDescription,this.smpLabelDescription=!1),this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.x<10&&this.errors.push("The text size doesn't fit in the graph. Either make it smaller or make the graph bigger!\nYou can also reduce the maximum length for the text string!")),this.autoAdjustXTries++},this.set1DXYDimensions=function(){this.isGraphTime&&(!this.showVolume||this.layoutComb&&0==this.layoutCurrent)&&this.setTimeAxis(),(this.isMultidimensionalHeatmap||(this.colorBy||this.shapeBy||this.sizeBy)&&this.graphType.match(/^Bar$|Boxplot|Dotplot/))&&this.setLegendDimensions(),this.setRowColBlocks(),this.set1DVarSmpLabelFont(),"vertical"==this.graphOrientation?(this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.autoAdjust&&(this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y<10&&this.adjust1DYDimension()),this.set1DText(),this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.autoAdjust&&(this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.x<10&&this.adjust1DXDimension())):(this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.autoAdjust&&(this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.x<10&&this.adjust1DXDimension()),this.set1DText(),this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.autoAdjust&&(this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y<10&&this.adjust1DYDimension()))},this.set1DPrivateParams=function(){var t=this.isGroupedData?this.grpIndices.length:this.smpIndices.length;this.autoAdjust?"Heatmap"==this.graphType?(this.rowBlockSize=this.y/this.rowBlocks,this.blockSeparation=this.rowBlockSize,this.colBlockSize=this.x/this.varIndices.length):(this.rowBlockSize=this.graphType.match(/Area/)?"vertical"==this.graphOrientation?this.x/(this.rowBlocks+t-2):this.y/(this.rowBlocks+t-2):this.plotByVariable?"vertical"==this.graphOrientation?this.x/(this.rowBlocks+this.varIndices.length+1):this.y/(this.rowBlocks+this.varIndices.length+1):"vertical"==this.graphOrientation?this.x/(this.rowBlocks+t+1):this.y/(this.rowBlocks+t+1),this.blockSeparation=this.rowBlockSize,this.colBlockSize=1):(this.rowBlockSize=this.scaleTextToSize(this.rowBlocks)+this.scaleTextConstantAdd,this.rowBlockSize*=this.blockFactor,"Heatmap"==this.graphType?(this.colBlockSize=this.colBlocks<20?this.scaleTextToSize(this.colBlocks)+this.scaleTextConstantAdd+3*this.scaleTextConstantAdd:parseInt(1/Math.sqrt(this.colBlocks)*this.scaleTextConstantMult)+1,this.colBlockSize*=this.blockFactor,this.blockSeparation=this.rowBlockSize/2,this.y=this.rowBlockSize*this.rowBlocks,this.x=this.colBlockSize*this.colBlocks):(this.blockSeparation=this.rowBlockSize*this.blockSeparationFactor,"vertical"==this.graphOrientation?this.x=this.graphType.match(/Area/)?this.rowBlockSize*(this.rowBlocks-1)+this.blockSeparation*(t-1):this.plotByVariable?this.rowBlockSize*this.rowBlocks+this.blockSeparation*this.varIndices.length+this.blockSeparation:this.rowBlockSize*this.rowBlocks+this.blockSeparation*t+this.blockSeparation:this.y=this.graphType.match(/Area/)?this.rowBlockSize*(this.rowBlocks-1)+this.blockSeparation*(t-1):this.plotByVariable?this.rowBlockSize*this.rowBlocks+this.blockSeparation*this.varIndices.length+this.blockSeparation:this.rowBlockSize*this.rowBlocks+this.blockSeparation*t+this.blockSeparation,this.colBlockSize=1),this.width=this.marginLeft+(this.left+this.x+this.right)*this.layoutCols+this.marginRight,this.height=this.marginTop+(this.top+this.y+this.bottom)*this.layoutRows+this.marginBottom,this.resizeCanvas())},this.set1DAttributes=function(){this.setLegendFont(),this.setTrees(),this.setOverlayColors(),this.setOverlayFont(),this.setValidDataColorShapeSize(),this.setDataColorShapeSize()},this.set1DXAxis=function(){var t="vertical"==this.graphOrientation?"y":"x";this.setAxisUnits("xAxis",t),(this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&this.data.a||"Candlestick"==this.graphType&&this.showVolume)&&this.setAxisUnits("xAxis2",t)},this.draw1DWireFrame=function(){var t,e,i,s,a,r,h,n,o,l,d=this.isGroupedData?this.grpIndices:this.smpIndices,c="dotted"==this.xAxisTickStyle||"dotted"==this.yAxisTickStyle?"dottedLine":"line",p="dotted"==this.smpHairline?"dottedLine":"line",g=this.marginLeft+this.offsetX+this.left,u=this.marginTop+this.offsetY+this.top;if("Heatmap"!=this.graphType){if("BarLine"==this.graphType&&this.data.a&&this.data.y.desc[1]){var m=this.getVariablesVisibleByAxis("xAxis");l=m.length}else l=this.graphType.match(/Stacked|Line|Area/)?1:this.varIndices.length;if(o=l*this.rowBlockSize,"vertical"==this.graphOrientation){if(this.isGraphTime){var f=(this.x-this.blockSeparation)/d.length,v=f/2,x=this.graphType.match(/Area/)?0:g+.5*this.blockSeparation+v;e=u,s=u+this.y;for(var y=0;y<this.timeValueIndices.length;y++)t=this.timeValueIndices[y]*f+x,this.smpHairline&&this.drawLine(p,t,e,t,s,this.smpHairlineColor,this.smpHairlineWidth,"butt")}else if(!this.plotByVariable){t=this.graphType.match(/Area/)?g:g+this.blockSeparation+o/2,i=g,a=this.graphType.match(/Area/)?g+this.blockSeparation+o:g+1.5*this.blockSeparation+o,e=u,s=u+this.y;for(var y=0;y<d.length;y++){if(this.blockContrast&&(n=y%2?this.evenColor:this.oddColor,this.ctx.save(),this.rectangle(i,e,a,s,n,n),this.ctx.restore(),i=a,a=i+this.blockSeparation+o),this.smpHairline){if(this.graphType.match(/Area/)&&(0==y||y==d.length-1)){t+=this.blockSeparation+o;continue}this.drawLine(p,t,e,t,s,this.smpHairlineColor,this.smpHairlineWidth,"butt")}t+=this.blockSeparation+o}}if((this.xAxisMinorTicks||this.xAxis2MinorTicks)&&"volume"!=this.summaryType)for(var y=0;y<this.xAxisMinorValues.length;y++){var b=parseFloat(this.xAxisMinorValues[y]);e=this.marginTop+this.offsetY+this.top+this.y-(b-this.xAxisMin)*this.xAxisUnit,this.drawLine(c,g,e,g+this.x,e,this.xAxisTickColor,this.outlineWidth/3,"butt")}t=this.marginLeft+this.offsetX+this.left-2*this.margin;for(var y=0;y<this.xAxisValues.length;y++){var b=parseFloat(this.xAxisValues[y]);e=this.marginTop+this.offsetY+this.top+this.y-(b-this.xAxisMin)*this.xAxisUnit,this.drawLine(c,g,e,g+this.x,e,this.xAxisTickColor,!1,"butt")}}else{if(this.isGraphTime){var f=(this.y-this.blockSeparation)/d.length,v=f/2,x=this.graphType.match(/Area/)?0:u+.5*this.blockSeparation+v;t=g,i=this.x;for(var y=0;y<this.timeValueIndices.length;y++)e=this.timeValueIndices[y]*f+x,this.smpHairline&&this.drawLine(p,t,e,i,e,this.smpHairlineColor,this.smpHairlineWidth,"butt")}else if(!this.plotByVariable){t=g,i=this.x,e=this.graphType.match(/Area/)?u:u+this.blockSeparation+o/2,s=u,r=this.graphType.match(/Area/)?u+this.blockSeparation+o:u+1.5*this.blockSeparation+o;for(var y=0;y<d.length;y++){if(this.blockContrast&&(h=0==y||y==d.length-1?1.5*this.blockSeparation+o:this.blockSeparation+o,n=y%2?this.evenColor:this.oddColor,this.ctx.save(),this.rectangle(t,s,i,h,n,n),this.ctx.restore(),s=r,r=s+this.blockSeparation+o),this.smpHairline){if(this.graphType.match(/Area/)&&(0==y||y==d.length-1)){e+=this.blockSeparation+o;continue}this.drawLine(p,t,e,g+i,e,this.smpHairlineColor,this.smpHairlineWidth,"butt")}e+=this.blockSeparation+o}}if((this.xAxisMinorTicks||this.xAxis2MinorTicks)&&"volume"!=this.summaryType)for(var y=0;y<this.xAxisMinorValues.length;y++){var b=parseFloat(this.xAxisMinorValues[y]);t=g+(b-this.xAxisMin)*this.xAxisUnit,this.drawLine(c,t,u,t,u+this.y,this.xAxisTickColor,this.outlineWidth/3,"butt")}e=this.marginTop+this.offsetY+this.top-(2*this.margin+this.getFontPt(this.axisTickFont)/2);for(var y=0;y<this.xAxisValues.length;y++){var b=parseFloat(this.xAxisValues[y]);t=g+(b-this.xAxisMin)*this.xAxisUnit,this.drawLine(c,t,u,t,u+this.y,this.xAxisTickColor,!1,"butt")}}}},this.drawTrees=function(){this.isGroupedData||(this.drawDendrogram("smpDendrogram"),"Heatmap"==this.graphType&&this.drawDendrogram("varDendrogram"),this.maskTreeArea())},this.getMaxDepthDendrogramXYs=function(t){if(!(t.length>0))return-1;for(var e=[],i=0;i<t.length;i++)e.push(t[i][1]);e.sort(function(t,e){return e-t});for(var i=0;i<t.length;i++)if(t[i][1]==e[0])return i},this.drawDendrogram=function(t){var e,i,s,a,r,h,n=this.marginLeft+this.offsetX+this.left,o=this.marginTop+this.offsetY+this.top,l="varDendrogram"==t?"showVarDendrogram":"showSmpDendrogram",d=("varDendrogram"==t?this.varIndices:this.smpIndices,this.dendrogramSpace/2);if("Heatmap"!=this.graphType){if("BarLine"==this.graphType&&this.data.a&&this.data.y.desc[1]){var t=this.getVariablesVisibleByAxis("xAxis");h=t.length}else h=this.graphType.match(/Stacked|Line|Area/)?1:this.varIndices.length;r=h*this.rowBlockSize}else r=0;if(this[l]&&this[t]){var c=this[t].data,p=this[t].idxs,h=this[t].depth,g=this.getMaxDepthDendrogramXYs(c),u=this[t].heights,m=(this[t].max,{}),f={},v=[];if("varDendrogram"==t)for(var x=0;x<c.length;x++)v[x]=this.createNode(this.data.y.vars[p[x]],null,null,0,null);else for(var x=0;x<c.length;x++)v[x]=this.createNode(this.data.y.smps[p[x]],null,null,0,null);for(;c.length>1;){x=g;var y=[x],b=c[x][0],w=c[x][1],C=c[x][2],T=c[x][3],D=[b],S=[w],A=[C],k=[T],M={},I="",L=C;M[x]=1;for(var N=x+1;N<c.length;N++){var z=c[N][0],F=c[N][1],P=c[N][2],B=c[N][3];if(F!=w||!(0==P&&T>=B||T>B))break;D.push(z),S.push(F),A.push(P),k.push(B),L+=P,M[N]=1,y.push(N)}if(D.length>1){if("varDendrogram"==t){var X,R=this.colBlockSize/2;X="bottom"==this.varDendrogramPosition?"bottom"!=this.varTitleLabelOverlayPosition?o+this.y+this.bottom-(this.margin+this.dendrogramSpace*(h+1)):o+this.y+this.bottom-(this.margin+this.dendrogramSpace*(h+1)+this.getVariableTitleHeight()):"bottom"!=this.varTitleLabelOverlayPosition?o-(this.getVarOverlaysHeight()+this.getVariableLabelLength()+this.getVarTreeHeight()):o-(this.margin+this.getVarTreeHeight()+this.getVariableLabelDescLength());for(var x=0;x<D.length;x++)v[y[x]].dist=u[y[x]],e=n+R+this.colBlockSize*(D[x]-1),e=this.varIndicesStart>-1?e-this.colBlockSize*this.varIndicesStart:e,"bottom"==this.varDendrogramPosition?(a="bottom"!=this.varTitleLabelOverlayPosition?this.height-(this.marginBottom+this.margin+this.dendrogramSpace*S[x]):this.height-(this.marginBottom+this.margin+this.dendrogramSpace*S[x]+this.getVariableTitleHeight()),this.dendrogramHeight||(i=this.isLeafNode(v[y[x]])&&!this.dendrogramHang?X:a-this.dendrogramSpace)):(i=X+this.dendrogramSpace*S[x],this.dendrogramHeight||(a=this.isLeafNode(v[y[x]])&&!this.dendrogramHang?X+this.dendrogramSpace*(h+1):i+this.dendrogramSpace)),this.drawLine("line",e,i,e,a,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]),m.hasOwnProperty(T)||(m[T]=0),this.isLeafNode(v[y[x]])||(this.addArea(["rect",e-d,a-d,e+d,a+d],[-T],"-"+m[T]+"-varDendrogram"),m[T]++),x<D.length-1&&(s=n+R+this.colBlockSize*(D[x+1]-1),s=this.varIndicesStart>-1?s-this.colBlockSize*this.varIndicesStart:s,"bottom"==this.varDendrogramPosition?this.drawLine("line",e,a,s,a,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]):this.drawLine("line",e,i,s,i,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]))}else if("vertical"==this.graphOrientation){var X;"bottom"==this.smpDendrogramPosition?(X=o+this.y+this.bottom-(this.margin+this.getSampleTitleHeight()+this.dendrogramSpace*(h+1)),this.showLegend&&"bottom"==this.legendPosition&&(X-=this.getLegendHeight())):X=o-this.getSmpTreeWidthHeight();for(var x=0;x<D.length;x++)v[y[x]].dist=u[y[x]],e=n+this.blockSeparation+r/2+(this.blockSeparation+r)*(D[x]-1),e=this.smpIndicesStart>-1?e-(this.blockSeparation+r)*this.smpIndicesStart:e,"bottom"==this.smpDendrogramPosition?(a=this.height-(this.marginBottom+this.margin+this.dendrogramSpace*S[x]),this.showLegend&&"bottom"==this.legendPosition&&(a-=this.getLegendHeight()),this.dendrogramHeight||(i=this.isLeafNode(v[y[x]])&&!this.dendrogramHang?X:a-this.dendrogramSpace)):(i=X+this.dendrogramSpace*S[x],this.dendrogramHeight||(a=this.isLeafNode(v[y[x]])&&!this.dendrogramHang?X+this.dendrogramSpace*(h+1):i+this.dendrogramSpace)),this.drawLine("line",e,i,e,a,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]),m.hasOwnProperty(T)||(m[T]=0),this.isLeafNode(v[y[x]])||(this.addArea(["rect",e-d,a-d,e+d,a+d],[-T],"-"+m[T]+"-smpDendrogram"),m[T]++),x<D.length-1&&(s=n+this.blockSeparation+r/2+(this.blockSeparation+r)*(D[x+1]-1),s=this.smpIndicesStart>-1?s-(this.blockSeparation+r)*this.smpIndicesStart:s,"bottom"==this.smpDendrogramPosition?this.drawLine("line",e,a,s,a,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]):this.drawLine("line",e,i,s,i,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]))}else{X="right"==this.smpDendrogramPosition?n+this.x+this.getSampleLabelDescLength()+this.margin:this.marginLeft+this.offsetX+this.margin+this.getSampleTitleHeight();for(var x=0;x<D.length;x++)v[y[x]].dist=u[y[x]],"right"==this.smpDendrogramPosition?s=n+this.x+this.getSampleLabelDescLength()+this.margin+(this.dendrogramSpace*(h+1)-this.dendrogramSpace*S[x]):e=this.marginLeft+this.offsetX+this.margin+this.getSampleTitleHeight()+this.dendrogramSpace*S[x],"Heatmap"==this.graphType?(i=o+this.blockSeparation+this.rowBlockSize*(D[x]-1),i=this.smpIndicesStart>-1?i-this.rowBlockSize*this.smpIndicesStart:i,this.autoAdjust&&(i-=this.blockSeparation/2)):(i=o+this.blockSeparation+r/2+(this.blockSeparation+r)*(D[x]-1),i=this.smpIndicesStart>-1?i-(this.blockSeparation+r)*this.smpIndicesStart:i),"right"==this.smpDendrogramPosition?this.dendrogramHeight||(e=this.isLeafNode(v[y[x]])&&!this.dendrogramHang?n+this.x+this.getSampleLabelDescLength()+this.margin:s-this.dendrogramSpace):this.dendrogramHeight||(s=this.isLeafNode(v[y[x]])&&!this.dendrogramHang?this.marginLeft+this.offsetX+this.margin+this.getSampleTitleHeight()+this.dendrogramSpace*(h+1):e+this.dendrogramSpace),this.drawLine("line",e,i,s,i,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]),m.hasOwnProperty(T)||(m[T]=0),this.isLeafNode(v[y[x]])||(this.addArea(["rect",s-d,i-d,s+d,i+d],[-T],"-"+m[T]+"-smpDendrogram"),m[T]++),x<D.length-1&&("Heatmap"==this.graphType?(a=o+this.blockSeparation+this.rowBlockSize*(D[x+1]-1),a=this.smpIndicesStart>-1?a-this.rowBlockSize*this.smpIndicesStart:a,this.autoAdjust&&(a-=this.blockSeparation/2)):(a=o+this.blockSeparation+r/2+(this.blockSeparation+r)*(D[x+1]-1),a=this.smpIndicesStart>-1?a-(this.blockSeparation+r)*this.smpIndicesStart:a),"right"==this.smpDendrogramPosition?this.drawLine("line",s,i,s,a,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]):this.drawLine("line",e,i,e,a,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]))}var V,E,O=[],G=[],H=[],W=[],$=this.mean(D),Y=!1;f.hasOwnProperty(T)||(f[T]=0),I=T-1+"-"+f[T];for(var U in M)W.push(v[U]);for(var N=0;N<c.length;N++)M.hasOwnProperty(N)?Y||(O.push([$,w-1,L,k[k.length-1]]),V=W.shift(),E=W.pop(),G.push(W.length>0?this.createNode(I,V,E,0,null,W):this.createNode(I,V,E,0,null)),f[T]++,Y=!0):(O.push(c[N]),G.push(v[N]));for(var N=0;N<u.length;N++)M.hasOwnProperty(N)||H.push(u[N]);c=O,v=G,u=H,g=this.getMaxDepthDendrogramXYs(c)}}this[t].object=v[0]}},this.draw1DYLayout=function(){var t,e,i,s,a,r,h,n,o=this.marginLeft+this.offsetX+this.left,l=this.marginTop+this.offsetY+this.top;if(this.smpInfo=[],this.varInfo=[],this.smpTitle){var d=parseInt(this.smpTitleFontSize*this.smpTitleScaleFontFactor)+"Pt "+this.fontName;"vertical"==this.graphOrientation?(t=o+this.x/2,e=l+this.y+this.bottom-(this.margin+parseInt(this.smpTitleFontSize*this.smpTitleScaleFontFactor)/2),"bottom"==this.legendPosition&&(e-=this.getLegendHeight()),this.drawText(this.smpTitle,t,e,d,this.smpTitleFontColor,"center","middle")):(t=this.marginLeft+this.offsetX+parseInt(this.smpTitleFontSize*this.smpTitleScaleFontFactor)/2,e=l+this.y/2,this.drawText(this.smpTitle,t,e,d,this.smpTitleColor,"center","middle",-Math.PI/2))}var c=this.isGroupedData?this.grpIndices:this.smpIndices,p=this.isGroupedData?this.data.w.smps:this.data.y.smps;if("Heatmap"==this.graphType){if(this.showSampleNames){var g=90==Math.abs(this.smpLabelRotate)?"center":"right";if(this.isGraphTime){var u=this.y/c.length,m=u/2,f=l+m;t=o-2*this.margin,i=o+this.x+this.margin;for(var v=0;v<this.timeValueIndices.length;v++)if(e=this.timeValueIndices[v]*u+f,this.smpInfo[v]=e,this.smpLabelRotate?this.addArea(this.drawText(this.timeValues[v],t-this.margin,e,this.smpLabelFont,T,g,"middle",this.smpLabelRotate*Math.PI/180),["Smp-"+v]):this.addArea(this.drawText(this.timeValues[v],t,e,this.smpLabelFont,T,"right","middle"),["Smp-"+v]),this.smpLabelDescription){var x=this.shortenText(this.data.x[this.smpLabelDescription][c[v]],this.maxSmpStringLen);this.drawText(x,i,e,this.smpLabelFont,T,"right","middle")}}else{t=o,i=o+this.x+this.margin,e=l+this.blockSeparation,e-=this.blockSeparation/2,n=1;for(var y=this.getSmpOverlaysLength(),v=0;v<c.length;v++){var b=v/this.smpLabelInterval;if(parseInt(b)==parseFloat(b)){var w=c[v],x=this.shortenText(p[w],this.maxSmpStringLen),C=2*this.margin+y,T=this.getSmpColor(p[w]);if(this.smpInfo[v]=e,this.smpLabelRotate?this.addArea(this.drawText(x,t-(C+this.margin),e,this.smpLabelFont,T,g,"middle",this.smpLabelRotate*Math.PI/180,!1,!1,!0),["Smp-"+w]):this.addArea(this.drawText(x,t-C,e,this.smpLabelFont,T,"right","middle",!1,!1,!1,!0),["Smp-"+w]),this.smpLabelDescription){var x=this.shortenText(this.data.x[this.smpLabelDescription][w],this.maxSmpStringLen);this.drawText(x,i,e,this.smpLabelFont,T,"left","middle")}}e+=this.rowBlockSize}}}if(this.showVariableNames){var m=this.colBlockSize/2;if(t=o+m,"bottom"!=this.varTitleLabelOverlayPosition){var g=90==Math.abs(this.varLabelRotate)?"center":"left";e=l,e-=this.margin+this.getVarOverlaysHeight()+this.margin,s=l+this.y+this.margin;for(var v=0;v<this.varIndices.length;v++){var b=v/this.varLabelInterval;if(parseInt(b)==parseFloat(b)){var w=this.varIndices[v],D=this.shortenText(this.data.y.vars[w],this.maxVarStringLen),T=this.getVarColor(this.data.y.vars[w]);if(this.varInfo[v]=t,this.varLabelRotate?this.addArea(this.drawText(D,t,e,this.varLabelFont,T,g,"middle",-Math.PI/2+this.varLabelRotate*Math.PI/180,!1,!1,!0),["Var-"+w]):this.addArea(this.drawText(D,t,e,this.varLabelFont,T,"left","middle",-Math.PI/2,!1,!1,!0),["Var-"+w]),this.varLabelDescription){var D=this.shortenText(this.data.z[this.varLabelDescription][w],this.maxVarStringLen);this.drawText(D,t,s,this.varLabelFont,T,"right","middle",-Math.PI/2)}}t+=this.colBlockSize}}else{var g=90==Math.abs(this.varLabelRotate)?"center":"right";e=l+this.y+this.margin,this.varOverlays.length>0&&(e+=this.varOverlays.length*this.overlaysWidth+2*this.margin),s=l-this.margin;for(var v=0;v<this.varIndices.length;v++){var b=v/this.varLabelInterval;if(parseInt(b)==parseFloat(b)){var w=this.varIndices[v],D=this.shortenText(this.data.y.vars[w],this.maxVarStringLen),T=this.getVarColor(this.data.y.vars[w]);if(this.varInfo[v]=t,this.varLabelRotate?this.addArea(this.drawText(D,t,e+this.margin,this.varLabelFont,T,g,"middle",-Math.PI/2+this.varLabelRotate*Math.PI/180,!1,!1,!0),["Var-"+w]):this.addArea(this.drawText(D,t,e,this.varLabelFont,T,"right","middle",-Math.PI/2,!1,!1,!0),["Var-"+w]),this.varLabelDescription){var D=this.shortenText(this.data.z[this.varLabelDescription][w],this.maxVarStringLen);this.drawText(D,t,s,this.varLabelFont,T,"left","middle",-Math.PI/2);

}}t+=this.colBlockSize}}if(this.varTitle){var d=parseInt(this.varTitleFontSize*this.varTitleScaleFontFactor)+"Pt "+this.fontName;t=o+this.x/2,"bottom"!=this.varTitleLabelOverlayPosition?(e=this.offsetY+2*this.margin+this.top,e-=this.getVariableLabelLength(),e-=this.getVarOverlaysHeight(),"top"==this.varDendrogramPosition&&(e-=this.getVarTreeHeight())):e=l+this.y+this.bottom-this.margin,this.drawText(this.varTitle,t,e,d,this.varTitleColor,"center","bottom")}}}else if(this.showSampleNames){if("BarLine"==this.graphType&&this.data.a&&this.data.y.desc[1]){var S=this.getVariablesVisibleByAxis("xAxis");n=S.length}else n=this.graphType.match(/Stacked|Line|Area/)?1:this.plotByVariable?c.length:this.varIndices.length;if(h=n*this.rowBlockSize,"vertical"==this.graphOrientation){var g=90==Math.abs(this.smpLabelRotate)?"center":"right";if(this.isGraphTime){var u=this.plotByVariable?(this.x-this.blockSeparation)/this.varIndices.length:(this.x-this.blockSeparation)/c.length,m=this.plotByVariable?this.rowBlockSize/2:u/2,f=this.graphType.match(/Area/)?0:this.plotByVariable?o+this.blockSeparation:o+.5*this.blockSeparation+m;if(e=l+this.y+this.getSmpOverlaysLength()+this.margin+this.margin,this.plotByVariable){t=f+m;for(var v=0;v<this.varIndices.length;v++){for(var A=0;A<this.timeValueIndices.length;A++)this.smpInfo[A]=t,this.smpHairline&&(this.smpLabelRotate?this.addArea(this.drawText(this.timeValues[A],t,e+this.margin,this.smpLabelFont,T,g,"middle",-Math.PI/2+this.smpLabelRotate*Math.PI/180),["Smp-"+A]):this.addArea(this.drawText(this.timeValues[A],t,e,this.smpLabelFont,T,"right","middle",-Math.PI/2),["Smp-"+A])),t+=this.rowBlockSize;t+=this.blockSeparation}}else for(var v=0;v<this.timeValueIndices.length;v++)t=this.timeValueIndices[v]*u+f,this.smpInfo[v]=t,this.smpHairline&&(this.smpLabelRotate?this.addArea(this.drawText(this.timeValues[v],t,e+this.margin,this.smpLabelFont,T,g,"middle",-Math.PI/2+this.smpLabelRotate*Math.PI/180),["Smp-"+v]):this.addArea(this.drawText(this.timeValues[v],t,e,this.smpLabelFont,T,"right","middle",-Math.PI/2),["Smp-"+v]))}else if(t=this.plotByVariable?o+this.blockSeparation+this.rowBlockSize/2:this.graphType.match(/Area/)?o:o+this.blockSeparation+h/2,e=l,s=l+this.y,r=s+this.getSmpOverlaysLength()+this.margin+this.margin,this.plotByVariable)for(var v=0;v<this.varIndices.length;v++){for(var A=0;A<c.length;A++){var b=A/this.smpLabelInterval;if(parseInt(b)==parseFloat(b)){var k=c[A],x=this.shortenText(p[k],this.maxSmpStringLen),T=this.getSmpColor(p[k]);this.smpInfo[A]=t,this.smpLabelRotate?this.addArea(this.drawText(x,t,r+this.margin,this.smpLabelFont,T,g,"middle",-Math.PI/2+this.smpLabelRotate*Math.PI/180,!1,!1,!0),["Smp-"+k]):this.addArea(this.drawText(x,t,r,this.smpLabelFont,T,"right","middle",-Math.PI/2,!1,!1,!0),["Smp-"+k])}t+=this.rowBlockSize}t+=this.blockSeparation}else for(var v=0;v<c.length;v++){var b=v/this.smpLabelInterval;if(parseInt(b)==parseFloat(b)){var w=c[v],x=this.shortenText(p[w],this.maxSmpStringLen),T=this.getSmpColor(p[w]);this.smpInfo[v]=t,this.smpLabelRotate?this.addArea(this.drawText(x,t,r+this.margin,this.smpLabelFont,T,g,"middle",-Math.PI/2+this.smpLabelRotate*Math.PI/180,!1,!1,!0),["Smp-"+w]):this.addArea(this.drawText(x,t,r,this.smpLabelFont,T,"right","middle",-Math.PI/2,!1,!1,!0),["Smp-"+w])}t+=this.blockSeparation+h}}else if(this.isGraphTime){var u=this.plotByVariable?(this.y-this.blockSeparation)/this.varIndices.length:(this.y-this.blockSeparation)/c.length,m=this.plotByVariable?this.rowBlockSize/2:u/2,f=this.graphType.match(/Area/)?0:this.plotByVariable?l+this.blockSeparation:l+.5*this.blockSeparation+m;if(t=o-2*this.margin,this.plotByVariable){e=f+m;for(var v=0;v<this.varIndices.length;v++){for(var A=0;A<this.timeValueIndices.length;A++)this.smpInfo[A]=t,this.smpLabelRotate?this.addArea(this.drawText(this.timeValues[A],t-this.margin,e,this.smpLabelFont,T,g,"middle",this.smpLabelRotate*Math.PI/180),["Smp-"+A]):this.addArea(this.drawText(this.timeValues[A],t,e,this.smpLabelFont,T,"right","middle"),["Smp-"+A]),e+=this.rowBlockSize;e+=this.blockSeparation}}else for(var v=0;v<this.timeValueIndices.length;v++)e=this.timeValueIndices[v]*u+f,this.smpInfo[v]=e,this.smpLabelRotate?this.addArea(this.drawText(this.timeValues[v],t-this.margin,e,this.smpLabelFont,T,g,"middle",this.smpLabelRotate*Math.PI/180),["Smp-"+v]):this.addArea(this.drawText(this.timeValues[v],t,e,this.smpLabelFont,T,"right","middle"),["Smp-"+v])}else if(t=o,i=o+this.x,a=t-(this.getSmpOverlaysLength()+2*this.margin),e=this.plotByVariable?l+this.blockSeparation+this.rowBlockSize/2:this.graphType.match(/Area/)?l:l+this.blockSeparation+h/2,this.plotByVariable)for(var v=0;v<this.varIndices.length;v++){for(var A=0;A<c.length;A++){var b=A/this.smpLabelInterval;if(parseInt(b)==parseFloat(b)){var k=c[A],x=this.shortenText(p[k],this.maxSmpStringLen),T=this.getSmpColor(p[k]);this.smpInfo[A]=e,this.smpLabelRotate?this.addArea(this.drawText(x,a-this.margin,e,this.smpLabelFont,T,g,"middle",this.smpLabelRotate*Math.PI/180,!1,!1,!0),["Smp-"+w]):this.addArea(this.drawText(x,a,e,this.smpLabelFont,T,"right","middle",!1,!1,!1,!0),["Smp-"+w])}e+=this.rowBlockSize}e+=this.blockSeparation}else for(var v=0;v<c.length;v++){var b=v/this.smpLabelInterval;if(parseInt(b)==parseFloat(b)){var w=c[v],x=this.shortenText(p[w],this.maxSmpStringLen),T=this.getSmpColor(p[w]);this.smpInfo[v]=e,this.smpLabelRotate?this.addArea(this.drawText(x,a-this.margin,e,this.smpLabelFont,T,g,"middle",this.smpLabelRotate*Math.PI/180,!1,!1,!0),["Smp-"+w]):this.addArea(this.drawText(x,a,e,this.smpLabelFont,T,"right","middle",!1,!1,!1,!0),["Smp-"+w])}e+=this.blockSeparation+h}}if(this.showOverlays){if(this.validateOverlays(),this.smpOverlays.length>0&&!this.isGroupedData)if(h=n*this.rowBlockSize,"vertical"==this.graphOrientation){t=o,i=h,s=this.overlaysWidth,"Heatmap"!=this.graphType&&(t+=this.blockSeparation/2,i+=this.blockSeparation);for(var v=0;v<this.smpIndices.length;v++){e=l+this.y+this.margin;for(var A=0;A<this.smpOverlays.length;A++){var y=this.smpOverlays[A];if("-"!=y){var M=this.data.x[y][this.smpIndices[v]],T=null!=M?this.smpOverlayColors[y][M.toString()]:this.missingDataColor;this.rectangle(t,e,i,s,T),h>this.overlaysWidth?this.drawText(this.shortenText(M,this.overlayFontSize,h),t+i/2,e+s/2,this.overlayFont,this.overlayFontColor,"center","middle",!1,h-2):this.drawText(this.shortenText(M,this.overlayFontSize,this.overlaysWidth),t+i/2,e+s/2,this.overlayFont,this.overlayFontColor,"center","middle",-Math.PI/2,this.overlaysWidth-2)}e+=s}t+=i}t=o+this.x,e=l+this.y+this.margin+s/2;for(var v=0;v<this.smpOverlays.length;v++)"-"!=this.smpOverlays[v]&&this.drawText(this.smpOverlays[v],t,e,this.overlayFont,this.overlayFontColor,"left","middle",!1,2*h),e+=s}else{i=this.overlaysWidth,e=l,s=h,"Heatmap"!=this.graphType&&(e+=this.blockSeparation/2,s+=this.blockSeparation);for(var v=0;v<this.smpIndices.length;v++){t=o-(this.margin+this.smpOverlays.length*this.overlaysWidth+this.margin);for(var A=0;A<this.smpOverlays.length;A++){var y=this.smpOverlays[A];if("-"!=y){var M=this.data.x[y][this.smpIndices[v]],T=null!=M?this.smpOverlayColors[y][M.toString()]:this.missingDataColor;this.rectangle(t,e,i,s,T),h>this.overlaysWidth?this.drawText(this.shortenText(M,this.overlayFontSize,h),t+i/2,e+s/2,this.overlayFont,this.overlayFontColor,"center","middle",-Math.PI/2,h-2):this.drawText(this.shortenText(M,this.overlayFontSize,this.overlaysWidth),t+i/2,e+s/2,this.overlayFont,this.overlayFontColor,"center","middle",!1,this.overlaysWidth-2)}t+=i}e+=s}t=o+i/2-(this.margin+this.smpOverlays.length*this.overlaysWidth+this.margin),e=l+this.y,"Heatmap"==this.graphType&&(e+=this.margin);for(var v=0;v<this.smpOverlays.length;v++)"-"!=this.smpOverlays[v]&&this.drawText(this.smpOverlays[v],t,e,this.overlayFont,this.overlayFontColor,"right","middle",-Math.PI/2,2*h),t+=i}if(this.varOverlays.length>0&&"Heatmap"==this.graphType){t=o+this.colBlockSize/2,s=this.overlaysWidth;for(var v=0;v<this.varIndices.length;v++){e="bottom"!=this.varTitleLabelOverlayPosition?l-(this.margin+this.overlaysWidth*this.varOverlays.length):l+this.y+this.margin;for(var A=0;A<this.varOverlays.length;A++){var y=this.varOverlays[A];if("-"!=y){var M=this.data.z[y][this.varIndices[v]],T=null!=M?this.varOverlayColors[y][M.toString()]:this.missingDataColor;this.rectangle(t-this.colBlockSize/2,e,this.colBlockSize,s,T),this.colBlockSize>this.overlaysWidth?this.drawText(this.shortenText(M,this.overlayFontSize,this.colBlockSize),t,e+s/2,this.overlayFont,this.overlayFontColor,"center","middle",!1,this.colBlockSize-2):this.drawText(this.shortenText(M,this.overlayFontSize,this.overlaysWidth),t,e+s/2,this.overlayFont,this.overlayFontColor,"center","middle",-Math.PI/2,this.overlaysWidth-2)}e+=this.overlaysWidth}t+=this.colBlockSize}t=o+this.x+this.margin,e="bottom"!=this.varTitleLabelOverlayPosition?l+s/2-(this.margin+this.overlaysWidth*this.varOverlays.length):l+this.y+this.margin+s/2;for(var v=0;v<this.varOverlays.length;v++)"-"!=this.smpOverlays[v]&&this.drawText(this.varOverlays[v],t,e,this.overlayFont,this.overlayFontColor,"left","middle",!1,2*this.colBlockSize),e+=s}}},this.validateOverlays=function(){var t=[];if(this.smpOverlays.length>0&&!this.isGroupedData){for(var e=0;e<this.smpOverlays.length;e++)(this.data.x.hasOwnProperty(this.smpOverlays[e])||"-"==this.smpOverlays[e])&&t.push(this.smpOverlays[e]);this.smpOverlays=t}var i=[];if(this.varOverlays.length>0&&!this.isGroupedData){for(var e=0;e<this.varOverlays.length;e++)(this.data.z.hasOwnProperty(this.varOverlays[e])||"-"==this.varOverlays[e])&&i.push(this.varOverlays[e]);this.varOverlays=i}},this.draw1DXLayout=function(){var t=this.marginLeft+this.offsetX+this.left,e=this.marginTop+this.offsetY+this.top;if(this.layoutValid||(this.layoutAxis=3),"Heatmap"==this.graphType){var i=t+this.x/2-this.heatmapColors.length*this.indicatorWidth/2,s=e-this.getHeatmapIndicatorHeight();"top"==this.varDendrogramPosition&&(s-=this.getVarTreeHeight()),"bottom"!=this.varTitleLabelOverlayPosition?(s-=this.getVariableTitleHeight(),s-=this.getVariableLabelLength(),s-=this.getVarOverlaysHeight()):s-=this.getVariableLabelDescLength(),this.drawColorIndicator(i,s,this.minData,this.maxData,this.xAxisDecs,!0),this.data.y.desc&&this.data.y.desc[0]&&(i=t+this.x/2,s+=4*this.margin+1.5*this.getFontPt(this.legendFont),this.drawText(this.data.y.desc[0],i,s,this.legendFont,this.legendFontColor,"center","middle"))}else{var a,r;if("vertical"==this.graphOrientation){if(this.xAxisShow&&(1==this.layoutAxis||3==this.layoutAxis)){var i=this.marginLeft+this.offsetX+this.margin+this.getFontPt(this.axisTitleFont)/2,s=e+this.y/2;a="Candlestick"==this.graphType&&"volume"==this.summaryType?this.xAxis2Title:this.xAxisTitle?this.xAxisTitle:this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:this.yAxisTitle?this.yAxisTitle:"","BarLine"==this.graphType&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]?this.drawText(a+" (Bars)",i,s,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2):"AreaLine"==this.graphType&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]?this.drawText(a+" (Area)",i,s,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2):this.drawText(a,i,s,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2);var h=90==Math.abs(this.tickRotate)?"center":"right";r="Candlestick"==this.graphType&&"volume"==this.summaryType?this.xAxis2Values:this.xAxisValues,i=t-2*this.margin;for(var n=0;n<r.length-1;n++){var o=parseFloat(r[n]),l=this.formatAxisValue(o,"xAxis");s="Candlestick"==this.graphType&&"volume"==this.summaryType?e+this.y-(o-this.xAxis2Min)*this.xAxis2Unit:e+this.y-(o-this.xAxisMin)*this.xAxisUnit,this.tickRotate?this.drawText(l,i,s,this.axisTickFont,this.axisTickColor,h,"middle",this.tickRotate*Math.PI/180):this.drawText(l,i,s,this.axisTickFont,this.axisTickColor,"right","middle")}}if(this.xAxis2Show&&(2==this.layoutAxis||3==this.layoutAxis)){var h=90==Math.abs(this.tickRotate)?"center":"left";if(i=t+this.x+2*this.margin,this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]){for(var n=0;n<this.xAxis2Values.length-1;n++){var o=parseFloat(this.xAxis2Values[n]),l=this.formatAxisValue(o,"xAxis2");s=e+this.y-(o-this.xAxis2Min)*this.xAxis2Unit,this.tickRotate?this.drawText(l,i,s,this.axisTickFont,this.axisTickColor,h,"middle",this.tickRotate*Math.PI/180):this.drawText(l,i,s,this.axisTickFont,this.axisTickColor,"left","middle")}a=this.graphType.match(/Stacked/)?this.data.y.desc&&this.data.y.desc[1]?this.data.y.desc[1]:"":this.data.y.desc&&this.data.y.desc[1]?this.data.y.desc[1]+" (Lines)":""}else{r="Candlestick"==this.graphType&&"volume"==this.summaryType?this.xAxis2Values:this.xAxisValues;for(var n=0;n<r.length-1;n++){var o=parseFloat(r[n]),l=this.formatAxisValue(o,"xAxis");s="Candlestick"==this.graphType&&"volume"==this.summaryType?e+this.y-(o-this.xAxis2Min)*this.xAxis2Unit:e+this.y-(o-this.xAxisMin)*this.xAxisUnit,this.tickRotate?this.drawText(l,i,s,this.axisTickFont,this.axisTickColor,h,"middle",this.tickRotate*Math.PI/180):this.drawText(l,i,s,this.axisTickFont,this.axisTickColor,"left","middle")}a="Candlestick"==this.graphType&&"volume"==this.summaryType?this.xAxis2Title:this.xAxisTitle?this.xAxisTitle:this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:this.yAxisTitle?this.yAxisTitle:""}i=t+this.x+this.right-(this.margin+this.getFontPt(this.axisTitleFont)/2),this.showLegend&&"right"==this.legendPosition&&(i-=this.getLegendWidth()),s=e+this.y/2,this.drawText(a,i,s,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2)}}else{if(this.xAxisShow&&(1==this.layoutAxis||3==this.layoutAxis)){var i=t+this.x/2,s=e-(4*this.margin+this.getFontPt(this.axisTickFont)+this.getFontPt(this.axisTitleFont)/2);a="Candlestick"==this.graphType&&"volume"==this.summaryType?this.xAxis2Title:this.xAxisTitle?this.xAxisTitle:this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:this.yAxisTitle?this.yAxisTitle:"","BarLine"==this.graphType&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]?this.drawText(a+" (Bars)",i,s,this.axisTitleFont,this.axisTitleColor,"center","middle"):"AreaLine"==this.graphType&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]?this.drawText(a+" (Area)",i,s,this.axisTitleFont,this.axisTitleColor,"center","middle"):this.drawText(a,i,s,this.axisTitleFont,this.axisTitleColor,"center","middle"),r="Candlestick"==this.graphType&&"volume"==this.summaryType?this.xAxis2Values:this.xAxisValues,s=e-(2*this.margin+this.getFontPt(this.axisTickFont)/2);for(var n=0;n<r.length-1;n++){var o=parseFloat(r[n]),l=this.formatAxisValue(o,"xAxis");i="Candlestick"==this.graphType&&"volume"==this.summaryType?t+(o-this.xAxis2Min)*this.xAxis2Unit:t+(o-this.xAxisMin)*this.xAxisUnit,this.tickRotate?this.drawText(l,i,s,this.axisTickFont,this.axisTickColor,"center","middle",this.tickRotate*Math.PI/180):this.drawText(l,i,s,this.axisTickFont,this.axisTickColor,"center","middle")}}if(this.xAxis2Show&&(2==this.layoutAxis||3==this.layoutAxis)){if(s=e+this.y+2*this.margin+this.getFontPt(this.axisTickFont)/2,this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]){for(var n=0;n<this.xAxis2Values.length-1;n++){var o=parseFloat(this.xAxis2Values[n]),l=this.formatAxisValue(o,"xAxis2");i=t+(o-this.xAxis2Min)*this.xAxis2Unit,this.drawText(l,i,s,this.axisTickFont,this.axisTickColor,"center","middle")}a=this.graphType.match(/Stacked/)?this.data.y.desc&&this.data.y.desc[1]?this.data.y.desc[1]:"":this.data.y.desc&&this.data.y.desc[1]?this.data.y.desc[1]+" (Lines)":""}else{r="Candlestick"==this.graphType&&"volume"==this.summaryType?this.xAxis2Values:this.xAxisValues;for(var n=0;n<r.length-1;n++){var o=parseFloat(r[n]),l=this.formatAxisValue(o,"xAxis");i="Candlestick"==this.graphType&&"volume"==this.summaryType?t+(o-this.xAxis2Min)*this.xAxis2Unit:t+(o-this.xAxisMin)*this.xAxisUnit,this.tickRotate?this.drawText(l,i,s,this.axisTickFont,this.axisTickColor,"center","middle",this.tickRotate*Math.PI/180):this.drawText(l,i,s,this.axisTickFont,this.axisTickColor,"center","middle")}a="Candlestick"==this.graphType&&"volume"==this.summaryType?this.xAxis2Title:this.xAxisTitle?this.xAxisTitle:this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:this.yAxisTitle?this.yAxisTitle:""}i=t+this.x/2,s=e+this.y+4*this.margin+this.getFontPt(this.axisTickFont)+this.getFontPt(this.axisTitleFont)/2,this.drawText(a,i,s,this.axisTitleFont,this.axisTitleColor,"center","middle")}}var d=this.backgroundType.match(/window/i)?this.foregroundWindow:this.xAxisTickColor;this.rectangle(t,e,this.x,this.y,!1,d,"open",!1,this.outlineWidth)}},this.draw1DDataPoints=function(){switch(this.graphType){case"Bar":return this.draw1DBarDataPoints(this.varIndices,"xAxis"),!0;case"Line":return this.draw1DLineDataPoints(this.varIndices,"xAxis"),!0;case"BarLine":return this.draw1DBarDataPoints(this.xAxisVarIndices,"xAxis"),this.draw1DLineDataPoints(this.xAxis2VarIndices,"xAxis2"),!0;case"Stacked":case"StackedPercent":return this.draw1DStackedDataPoints(),!0;case"StackedLine":case"StackedPercentLine":return this.draw1DStackedDataPoints(),this.draw1DLineDataPoints(this.xAxis2VarIndices,"xAxis2"),!0;case"Area":return this.draw1DAreaDataPoints(this.varIndices,"xAxis"),!0;case"AreaLine":return this.draw1DAreaDataPoints(this.xAxisVarIndices,"xAxis"),this.draw1DAreaDataPoints(this.xAxis2VarIndices,"xAxis2",!0),!0;case"Boxplot":return this.showBoxplotOriginalData?(this.draw1DDotplotDataPoints(!0),this.draw1DBoxplotDataPoints(!0)):this.draw1DBoxplotDataPoints(),!0;case"Candlestick":return this.draw1DCandlestickDataPoints(),!0;case"Dotplot":return this.draw1DDotplotDataPoints(),!0;case"Heatmap":return this.draw1DHeatmapDataPoints(),!0}throw'Illegal graph type "'+this.graphType+'"'},this.draw1DBarDataPoints=function(t,e){var i=this.isGroupedData?this.grpIndices:this.smpIndices,s=i.length,a=this.xAxisMin<0?Math.abs(this.xAxisMin)*this.xAxisUnit:0,r=this.marginLeft+this.offsetX+this.left,h=this.marginTop+this.offsetY+this.top,n=this.plotByVariable?this.rowBlockSize:this.blockSeparation+this.rowBlockSize*t.length;"vertical"==this.graphOrientation?(r+=this.blockSeparation,h=h+this.y-a):(r+=a,h+=this.blockSeparation);for(var o=0;o<t.length;o++){for(var l=[],d=[],c=[],p=[],g=0;s>g;g++)c.push(this.colorBy&&this.legendColorsN?this.dataColors["x"==this.colorByType?g:o]:this.colors[o%this.colors.length]),l.push(this.getDataAtPos(t[o],i[g])),(this.isGroupedData||this.data.y.hasOwnProperty("stdev"))&&d.push(this.getDataAtPos(t[o],i[g],"stdev")),p.push([t[o],i[g]]);this.drawBarPlot(l,d,r,h,this.rowBlockSize,n,this[e+"Unit"],a,this[e+"Min"],this.graphOrientation,c,p),"vertical"==this.graphOrientation?r=this.plotByVariable?r+(this.blockSeparation+this.rowBlockSize*s):r+this.rowBlockSize:h=this.plotByVariable?h+(this.blockSeparation+this.rowBlockSize*s):h+this.rowBlockSize}},this.draw1DLineDataPoints=function(t,e){var i=this.isGroupedData?this.grpIndices:this.smpIndices,s=i.length,a=this.marginLeft+this.offsetX+this.left,r=this.marginTop+this.offsetY+this.top,h="BarLine"==this.graphType?!0:!1,n=h?this.blockSeparation+this.xAxisVarIndices.length*this.rowBlockSize:this.blockSeparation+this.rowBlockSize,o=this.blockSeparation+this.rowBlockSize/2;"vertical"==this.graphOrientation?(a+=o,r+=this.y):r+=o;for(var l=0;l<t.length;l++){for(var d=[],c=[],p="xAxis"==e||this.coordinateLineColor?this.colors[l%this.colors.length]:this.colors[(l+this.xAxisVarIndices.length)%this.colors.length],g="symbol"==this.lineDecoration?this.shapes[l%this.shapes.length]:"sphere",u=[],m=0;s>m;m++)d.push(this.getDataAtPos(t[l],i[m])),(this.isGroupedData||this.data.y.hasOwnProperty("stdev"))&&c.push(this.getDataAtPos(t[l],i[m],"stdev")),u.push([t[l],i[m]]);this.drawLinePlot(d,c,a,r,this.rowBlockSize,n,this[e+"Unit"],this[e+"Min"],this.graphOrientation,p,g,u),h&&this.xAxisVarIndices.length==this.xAxis2VarIndices.length&&("vertical"==this.graphOrientation?a+=this.rowBlockSize:r+=this.rowBlockSize)}},this.draw1DStackedDataPoints=function(){var t=this.isGroupedData?this.grpIndices:this.smpIndices,e=t.length,i=this.marginLeft+this.offsetX+this.left,s=this.marginTop+this.offsetY+this.top,a=this.blockSeparation+this.rowBlockSize,r=this.graphType.match(/Line/)?this.xAxisVarIndices:this.varIndices,h="StackedPercentLine"==this.graphType?this.xAxisVarIndices:!1,n=this.graphType.match(/Percent/)?!0:!1;"vertical"==this.graphOrientation?(i+=this.blockSeparation,s+=this.y):s+=this.blockSeparation;for(var o=0;e>o;o++){for(var l=this.sum(this.getDataForSmpGrpAtIndex(t[o],h)),d=[],c=[],p=[],g=0;g<r.length;g++)d.push(this.getDataAtPos(r[g],t[o])),c.push(this.colors[g%this.colors.length]),p.push([r[g],t[o]]);this.drawStackedPlot(d,i,s,this.rowBlockSize,n,l,this.xAxisUnit,this.graphOrientation,c,p),"vertical"==this.graphOrientation?i+=a:s+=a}},this.draw1DAreaDataPoints=function(t,e,i){var s=this.isGroupedData?this.grpIndices:this.smpIndices,a=s.length,r=this.marginLeft+this.offsetX+this.left,h=this.marginTop+this.offsetY+this.top,n=this.rowBlockSize+this.blockSeparation,o=[],l=[],d=[];"vertical"==this.graphOrientation&&(h+=this.y);for(var c=0;c<t.length;c++){for(var p=[],g="xAxis"==e||this.coordinateLineColor?this.colors[c%this.colors.length]:this.colors[(c+this.xAxisVarIndices.length)%this.colors.length],u=0;a>u;u++)p.push(this.getDataAtPos(t[c],s[u]));o.push(p),l.push(g),d.push([t[c]])}this.drawAreaPlot(o,r,h,this.x,this.y,n,this[e+"Unit"],this[e+"Min"],this.graphOrientation,i,l,d)},this.draw1DBoxplotDataPoints=function(t){var e=this.isGroupedData?this.grpIndices:this.smpIndices,i=e.length,s=this.varIndices,a=this.marginLeft+this.offsetX+this.left,r=this.marginTop+this.offsetY+this.top,h=this.plotByVariable?this.rowBlockSize:this.blockSeparation+this.rowBlockSize*s.length,n=t?"open":"closed";"vertical"==this.graphOrientation?(a+=this.blockSeparation,r+=this.y):r+=this.blockSeparation;for(var o=0;o<s.length;o++){for(var l=[],d=[],c=[],p=0;i>p;p++){for(var g=["iqr1","iqr3","qtl1","qtl3","median","out"],u=[],m=this.colorBy&&this.legendColorsN?this.dataColors["x"==this.colorByType?p:o]:this.colors[o%this.colors.length],f=0;f<g.length;f++)u.push(this.getDataAtPos(s[o],e[p],g[f]));l.push(u),d.push(t?this.foreground:m),c.push([s[o],e[p]])}this.drawBoxPlot(l,a,r,this.rowBlockSize,h,this.xAxisUnit,this.xAxisMin,this.graphOrientation,d,n,c),"vertical"==this.graphOrientation?a=this.plotByVariable?a+(this.blockSeparation+this.rowBlockSize*i):a+this.rowBlockSize:r=this.plotByVariable?r+(this.blockSeparation+this.rowBlockSize*i):r+this.rowBlockSize}},this.draw1DCandlestickDataPoints=function(){var t=this.isGroupedData?this.grpIndices:this.smpIndices,e=t.length,i=this.varIndices,s=this.marginLeft+this.offsetX+this.left,a=this.marginTop+this.offsetY+this.top,r=this.blockSeparation+this.rowBlockSize*i.length,h="candle"==this.summaryType?!0:!1,n=h?this.xAxisUnit:this.xAxis2Unit,o=h?this.xAxisMin:this.xAxis2Min,l=this.rowBlockSize/2;"vertical"==this.graphOrientation?(s+=this.blockSeparation,a+=this.y):a+=this.blockSeparation;for(var d=0;d<i.length;d++){for(var c=[],p=this.colors[d%this.colors.length],g=[],u=0;e>u;u++){for(var m=h?["open","close","high","low"]:["volume"],f=[],v=0;v<m.length;v++)f.push(this.getDataAtPos(i[d],t[u],m[v]));c.push(f),g.push([i[d],t[u]])}if(this.drawCandlestickPlot(c,s,a,this.rowBlockSize,r,n,o,h,this.graphOrientation,p,g),this.stockIndicators.length>0)for(var u=0;u<this.stockIndicators.length;u++){for(var x=this.getTechnicalIndicatorColor(this.stockIndicators[u]),c=[],v=0;e>v;v++)c.push(this.getDataAtPos(i[d],t[v],this.stockIndicators[u]));"vertical"==this.graphOrientation?this.drawLinePlot(c,[],s+l,a,this.rowBlockSize,r,n,o,this.graphOrientation,x,!1,[]):this.drawLinePlot(c,[],s,a+l,this.rowBlockSize,r,n,o,this.graphOrientation,x,!1,[])}"vertical"==this.graphOrientation?s+=this.rowBlockSize:a+=this.rowBlockSize}},this.draw1DDotplotDataPoints=function(t){var e=this.isGroupedData?this.grpIndices:this.smpIndices,i=e.length,s=this.varIndices,a=this.marginLeft+this.offsetX+this.left,r=this.marginTop+this.offsetY+this.top,h=this.blockSeparation+this.rowBlockSize/2,n=this.plotByVariable?this.rowBlockSize:this.blockSeparation+this.rowBlockSize*s.length,o=t?this.getShapeSize()/this.dotPlotDataPointRatio:this.getShapeSize();"vertical"==this.graphOrientation?(a+=h,r+=this.y):r+=h;for(var l=0;l<s.length;l++){for(var d,c=[],p=[],g=[],u=[],m=[],f=[],v=0,x=0;i>x;x++)if(this.isGroupedData){for(var y=[],b=[],w=[],C=[],T=[],D=0;D<this.data.w.grps[e[x]].length;D++)d=this.colorBy&&this.legendColorsN?this.dataColors["x"==this.colorByType?v:l]:this.colors[l%this.colors.length],y.push(this.data.y.data[s[l]][this.data.w.grps[e[x]][D]]),C.push(this.shapeBy&&this.legendShapesN?this.dataShapes["x"==this.shapeByType?v:l]:this.shapes[parseInt(l/this.colors.length)]),b.push(this.sizeBy&&this.legendSizesN?this.dataSizes["x"==this.sizeByType?v:l]:o),w.push(t?this.addColorTransparency(d,this.dotPlotDataPointTransparency):d),T.push([s[l],e[x],this.data.w.grps[e[x]][D]]),v++;c.push(y),u.push(C),m.push(b),g.push(w),f.push(T)}else d=this.colorBy&&this.legendColorsN?this.dataColors["x"==this.colorByType?x:l]:this.colors[l%this.colors.length],c.push([this.getDataAtPos(s[l],e[x])]),this.data.y.hasOwnProperty("stdev")&&p.push(this.getDataAtPos(s[l],e[x],"stdev")),u.push(this.shapeBy&&this.legendShapesN?[this.dataShapes["x"==this.shapeByType?x:l]]:[this.shapes[parseInt(l/this.colors.length)]]),m.push(this.sizeBy&&this.legendSizesN?[this.dataSizes["x"==this.sizeByType?x:l]]:[o]),g.push([t?this.addColorTransparency(d,this.dotPlotDataPointTransparency):d]),f.push([[s[l],e[x]]]);this.plotByVariable?this.drawDotPlot(c,p,a,r,this.rowBlockSize,this.rowBlockSize,n,this.xAxisUnit,this.xAxisMin,m,this.graphOrientation,g,u,o,f):this.drawDotPlot(c,p,a,r,this.rowBlockSize,this.blockSeparation,n,this.xAxisUnit,this.xAxisMin,m,this.graphOrientation,g,u,o,f),"vertical"==this.graphOrientation?a=this.plotByVariable?a+(this.blockSeparation+this.rowBlockSize*i):a+this.rowBlockSize:r=this.plotByVariable?r+(this.blockSeparation+this.rowBlockSize*i):r+this.rowBlockSize}},this.draw1DHeatmapDataPoints=function(){var t=this.isGroupedData?this.grpIndices:this.smpIndices,e=t.length,i=this.marginLeft+this.offsetX+this.left,s=this.marginTop+this.offsetY+this.top,a=5*this.varIndices.length>this.x?!0:!1,r=Math.max(Math.min(this.colBlockSize,this.rowBlockSize)-10,3),h=this.dataSizes&&this.dataSizes.length>0?r/this.max(this.dataSizes):1,n=this.outlineWidth;if(this.dataColors&&this.dataColors.length>0&&(this.outlineWidth=4),this.isMultidimensionalHeatmap){for(var o=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,l=0;l<this.varIndices.length;l++)for(var d=0;e>d;d++){var c=i+l*this.colBlockSize+this.colBlockSize/2,p=s+d*this.rowBlockSize+this.rowBlockSize/2,g=this.getDataAtPos(this.varIndices[l],t[d]),u=isNaN(g)?this.missingDataColor:this.getHeatmapColor(this.minData,this.maxData,g);o=this.dataColors&&this.dataColors.length>0?this.dataColors.shift():a?u:o;var m=this.dataShapes&&this.dataShapes.length>0?this.dataShapes.shift():this.shapeByShape?this.shapeByShape:"rectangleHM",f=this.dataSizes&&this.dataSizes.length>0?this.dataSizes.shift()*h:r;this.addArea(this.drawShape(m,c,p,f,f,u,o,"closed",!1,!1,!0),[this.varIndices[l],t[d]]),this.showDataValues&&this.drawText(g,c+this.colBlockSize/2-2,p+this.rowBlockSize/2-2,this.overlayFont,this.foreground,"right","bottom")}this.outlineWidth=n,this.ctx.save()}else for(var l=0;e>l;l++){for(var v=[],x=[],d=0;d<this.varIndices.length;d++)v.push(this.getDataAtPos(this.varIndices[d],t[l])),x.push([this.varIndices[d],t[l]]);this.drawHeatmap(v,i,s,this.colBlockSize,this.rowBlockSize,this.minData,this.maxData,a,x),s+=this.rowBlockSize}},this.drawStockIndicatorsLegend=function(){var t=this.marginLeft+this.offsetX+this.left,e=this.marginTop+this.offsetY+this.top;if("candle"==this.summaryType&&this.stockIndicators.length>0)for(var i=this.getFontPt(this.legendFont),s=i/2,a=this.measureText(this.getMaxText(this.stockIndicators),this.legendFont)+i+2*this.margin,r="vertical"==this.graphOrientation?t+2*this.margin:t+this.x-a,h=e+this.margin+i,n=0;n<this.stockIndicators.length;n++){var o=this.getTechnicalIndicatorColor(this.stockIndicators[n]);this.drawLine("line",r+s,h+s,r+s+i,h+s,o,!1,"butt",!1,!1,!0),this.drawText(this.stockIndicators[n],r+i+this.margin,h+s,this.legendFont,o,"left","middle"),h+=this.margin+i}},this.draw1DLegend=function(){var t=this.marginLeft+this.offsetX+this.left,e=this.marginTop+this.offsetY+this.top,i=this.getFontPt(this.legendFont),s=i/2,a=2*i;if(this.layoutValid&&("bottom"==this.legendPosition?e+=this.margin:t+=this.margin),this.drawStockIndicatorsLegend(),this.showLegend&&("Heatmap"!=this.graphType||"Heatmap"==this.graphType&&this.isMultidimensionalHeatmap))if(this.isMultidimensionalHeatmap||(this.colorBy||this.shapeBy||this.sizeBy)&&this.graphType.match(/^Bar$|Boxplot|Dotplot/))"vertical"==this.graphOrientation?"right"==this.legendPosition?(t=this.getAxisTitleTickLength()+this.margin,e=0):(t=0,e=this.getSampleTitleHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength()+this.margin,this.showSmpDendrogram&&"bottom"==this.smpDendrogramPosition&&(e+=this.getSmpTreeWidthHeight())):"right"==this.legendPosition?(t=this.margin,this.showSmpDendrogram&&"right"==this.smpDendrogramPosition&&(t+=this.getSmpTreeWidthHeight()),t+=this.getVarOverlaysLength(),e=this.isMultidimensionalHeatmap&&"bottom"==this.indicatorsPosition?this.getVariableLabelLength()+this.margin:0):(t=0,e=this.getAxisTitleTickLength()+this.margin),this.drawScatterLegend(t,e);else if("BarLine"==this.graphType||"AreaLine"==this.graphType||"StackedLine"==this.graphType||"StackedPercentLine"==this.graphType){var r=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,h="right"==this.legendPosition?t+this.x+4*this.margin:t+this.x/2-(this.measureText(r,this.legendFont)+i)/2,n="right"==this.legendPosition?e+this.y/2-this.getLegendHeight(!0)/2:e+this.y;"right"==this.smpDendrogramPosition&&(h+=this.getSmpTreeWidthHeight()),"bottom"==this.legendPosition?(n+="vertical"==this.graphOrientation?this.getSampleTitleHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength()+this.margin:this.getAxisTitleTickLength(!0)+this.margin,this.showSmpDendrogram&&"bottom"==this.smpDendrogramPosition&&(n+=this.getSmpTreeWidthHeight())):"vertical"==this.graphOrientation&&(h+=this.getAxisTitleTickLength(!0));var o=n-this.margin;if(this.legendBox&&this.legendBackgroundColor){var r=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,l=(this.xAxisVarIndices.length+this.xAxis2VarIndices.length)*i*1.5+this.margin,d=3*this.margin+a+this.measureText(r,this.legendFont);this.rectangle(h-2*this.margin,o,d,l,this.legendBackgroundColor,this.legendBoxColor)}for(var c=0;c<this.xAxisVarIndices.length;c++){var p=this.xAxisVarIndices[c],g=this.colors[c%this.colors.length],r=this.shortenText(this.data.y.vars[p],this.maxVarStringLen);this.addArea(this.rectangle(h,n,i,i,g,g),["Var-"+p]),this.addArea(this.drawText(r,h+a,n+s,this.legendFont,this.getVarColor(this.data.y.vars[p]),"left","middle"),["Var-"+p]),n+=1.5*i}for(var c=0;c<this.xAxis2VarIndices.length;c++){var p=this.xAxis2VarIndices[c],g=this.coordinateLineColor?this.colors[c%this.colors.length]:this.colors[(c+this.xAxisVarIndices.length)%this.colors.length],r=this.shortenText(this.data.y.vars[p],this.maxVarStringLen),u=this.getFontPt(this.legendFont)/2;this.lineDecoration?"symbol"==this.lineDecoration?(this.drawLine("line",h,n+s,h+i,n+s,g),this.addArea(this.drawShape(this.shapes[c%this.shapes.length],h+s,n+s,u,u,g,g),["Var-"+p])):"dot"==this.lineDecoration&&(this.drawLine("line",h,n+s,h+i,n+s,g),this.addArea(this.drawShape("circle",h+s,n+s,u,u,g,g),["Var-"+p])):this.addArea(this.drawLine("line",h,n+s,h+i,n+s,g),["Var-"+p]),this.addArea(this.drawText(r,h+a,n+s,this.legendFont,this.getVarColor(this.data.y.vars[p]),"left","middle"),["Var-"+p]),
n+=1.5*i}if(this.legendBox){var r=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,l=n-o-s+this.margin,d=3*this.margin+a+this.measureText(r,this.legendFont);this.rectangle(h-2*this.margin,o,d,l,!1,this.legendBoxColor,"open")}}else{var r=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,h="right"==this.legendPosition?t+this.x+4*this.margin:t+this.x/2-(this.measureText(r,this.legendFont)+i)/2,n="right"==this.legendPosition?e+this.y/2-this.getLegendHeight(!0)/2:e+this.y;"bottom"==this.legendPosition?(n+="vertical"==this.graphOrientation?this.getSampleTitleHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength()+this.margin+this.margin:this.getAxisTitleTickLength(!0)+this.margin,this.showSmpDendrogram&&"bottom"==this.smpDendrogramPosition&&(n+=this.getSmpTreeWidthHeight())):"vertical"==this.graphOrientation&&(h+=this.getAxisTitleTickLength(!0)),"right"==this.smpDendrogramPosition&&this.showLegend&&"right"==this.legendPosition&&(h+=this.getSmpTreeWidthHeight());var o=n-this.margin;if(this.legendBox&&this.legendBackgroundColor){var r=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,l=this.varIndices.length*i*1.5+this.margin,d=3*this.margin+a+this.measureText(r,this.legendFont);this.disableGradientTransparency(),this.rectangle(h-2*this.margin,o,d,l,this.legendBackgroundColor,this.legendBoxColor),this.enableGradientTransparency()}for(var c=0;c<this.varIndices.length;c++){var p=this.varIndices[c],g=this.colors[c%this.colors.length],m=this.shapes[c%this.shapes.length],r=this.shortenText(this.data.y.vars[p],this.maxVarStringLen),u=this.getFontPt(this.legendFont)/2;"Line"==this.graphType?this.lineDecoration?"symbol"==this.lineDecoration?(this.drawLine("line",h,n+s,h+i,n+s,g),this.addArea(this.drawShape(m,h+s,n+s,u,u,g,g),["Var-"+p])):"dot"==this.lineDecoration&&(this.drawLine("line",h,n+s,h+i,n+s,g),this.addArea(this.drawShape("circle",h+s,n+s,u,u,g,g),["Var-"+p])):this.addArea(this.drawLine("line",h,n+s,h+i,n+s,g),["Var-"+p]):"Dotplot"==this.graphType?(m=this.shapes[parseInt(c/this.colors.length)],this.addArea(this.drawShape(m,h+s,n+s,i,i,g,g),["Var-"+p])):this.addArea(this.rectangle(h,n,i,i,g,g),["Var-"+p]),this.addArea(this.drawText(r,h+a,n+s,this.legendFont,this.getVarColor(this.data.y.vars[p]),"left","middle"),["Var-"+p]),n+=1.5*i}if(this.legendBox){var r=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,l=n-o-s+this.margin,d=3*this.margin+a+this.measureText(r,this.legendFont);this.rectangle(h-2*this.margin,o,d,l,!1,this.legendBoxColor,"open")}}},this.setOverlaysDendrogramVariable=function(){this.plotByVariable&&(this.graphType.match(/^Bar$|Boxplot|Dotplot/)?(this.showOverlays=!1,this.showVarDendrogram=!1,this.showSmpDendrogram=!1):this.plotByVariable=!1)},this.setIndicatorsLegendPositions=function(){(this.colorBy||this.shapeBy||this.sizeBy)&&this.graphType.match(/^Bar$|Boxplot|Dotplot/)&&(this.indicatorsPosition=this.legendPosition)},this.draw1DLayout=function(){this.drawTrees(),this.draw1DXLayout(),this.draw1DYLayout()},this.draw1DData=function(){this.drawPlotWindow(),this.draw1DWireFrame(),this.draw1DDataPoints(),this.maskPlotArea(),this.draw1DLayout(),this.draw1DLegend(),this.drawTitle(),this.drawDecorationData()},this.draw1DPlot=function(){this.setOverlaysDendrogramVariable(),this.setIndicatorsLegendPositions(),this.set1DAttributes(),this.set1DXYDimensions(),this.set1DPrivateParams(),this.set1DXAxis(),this.draw1DData()},this.checkHeatmap=function(){for(var t=["outline","shape","size"],e=0;e<t.length;e++){var i=t[e]+"ByData";this[i]&&this.data.y[this[i]]&&this.isArray(this.data.y[this[i]])&&(this.isMultidimensionalHeatmap=!0)}},this.checkSegregation=function(){"Candlestick"!=this.graphType&&(this.data.l?(this.segregateSamplesBy?this.data.l.smps||this.segregateSamples(this.segregateSamplesBy,!0):this.desegregateSamples(!0),this.segregateVariablesBy?this.data.l.vars||this.segregateVariables(this.segregateVariablesBy,!0):this.desegregateVariables(!0)):(this.segregateSamplesBy&&this.segregateSamples(this.segregateSamplesBy,!0),this.segregateVariablesBy&&this.segregateVariables(this.segregateVariablesBy,!0)))},this.checkOrientation=function(){"Heatmap"==this.graphType&&(this.graphOrientation="horizontal")},this.restoreTempSettings=function(){this.tmpShowLegend&&(this.showLegend=this.tmpShowLegend,this.tmpShowLegend=!1),this.tmpLegendFontSize&&(this.legendFontSize=this.tmpLegendFontSize,this.tmpLegendFontSize=!1),this.tmpVarLabelDescription&&(this.varLabelDescription=this.tmpVarLabelDescription,this.tmpVarLabelDescription=!1),this.tmpVarLabelScaleFontFactor&&(this.varLabelScaleFontFactor=this.tmpVarLabelScaleFontFactor,this.tmpVarLabelScaleFontFactor=!1),this.tmpSmpLabelDescription&&(this.smpLabelDescription=this.tmpSmpLabelDescription,this.tmpSmpLabelDescription=!1),this.tmpSmpLabelScaleFontFactor&&(this.smpLabelScaleFontFactor=this.tmpSmpLabelScaleFontFactor,this.tmpSmpLabelScaleFontFactor=!1),this.tmpDendrogramSpace&&(this.dendrogramSpace=this.tmpDendrogramSpace,this.tmpDendrogramSpace=!1),this.autoAdjustXTries=0,this.autoAdjustYTries=0},this.initialize1DPlot=function(){this.checkOrientation(),this.checkSegregation(),this.checkHeatmap(),this.layoutValid?this.drawLayoutCompartments(this.draw1DPlot):this.draw1DPlot(),this.restoreTempSettings()},this.initialize1DPlot()},CanvasXpress.prototype.Network=function(t){this.findXYCoordinates=function(t){var e=this.adjustedCoordinates(t),i={};return i.x=(e.x/this.scaleFactor||1)-this.offsetX,i.y=(e.y/this.scaleFactor||1)-this.offsetY,i},this.addNode=function(t,e){if(t){if(!t.id){for(var i=0,s="id"+i;this.nodes.hasOwnProperty(s);)i++,s="id"+i;t.id=s}if(t.color||(t.color=this.colors[0]),t.shape||(t.shape=this.shapes[0]),t.size||(t.size=1),e){var a=this.findXYCoordinates(e);t.x=a.x,t.y=a.y}return this.data.nodeIndices[t.id]=this.data.nodes.length,this.data.nodes.push(t),this.nodes[t.id]=t,t}},this.getNodeConfigurableProperties=function(t){var e=this.getObjectArray(this.nodeConfigurableProperties);if(t)for(var i in this.data.nodes[t])e[i]=!0;return this.getKeys(e)},this.getEdgeConfigurableProperties=function(t){var e=this.getObjectArray(this.edgeConfigurableProperties);if(t)for(var i in this.data.edges[t])e[i]=!0;return this.getKeys(e)},this.removeNode=function(t,e){if(t&&t.id){var i=e?this.getObjectArray(this.findChildrenNodeIndices(t.id)):!1,s=[],a=0;if(this.nodeParentHood[t.id]&&this.nodeParentHood[t.id].children)for(var r=0;r<this.nodeParentHood[t.id].children.length;r++){var h=this.nodeParentHood[t.id].children[r];delete this.data.nodes[this.data.nodeIndices[h]].parentNode}this.data.nodeIndices={};for(var r=0;r<this.data.nodes.length;r++)if(this.data.nodes[r].id!=t.id)if(i&&i.hasOwnProperty(r))for(var n=this.edgesForNode(this.data.edges,this.data.nodes[r].id),o=0;o<n.length;o++)this.removeEdge(n[o]);else s.push(this.data.nodes[r]),this.data.nodeIndices[this.data.nodes[r].id]=a,a++;else for(var n=this.edgesForNode(this.data.edges,t.id),o=0;o<n.length;o++)this.removeEdge(n[o]);this.data.nodes=s}},this.addEdge=function(t){t&&t.id1&&t.id2&&(t.color||(t.color=this.colors[0]),t.width||(t.width=1),t.type||(t.type="line"),this.data.edges.push(t))},this.removeEdge=function(t){if(t&&t.id1&&t.id2){for(var e=[],i=0;i<this.data.edges.length;i++)(this.data.edges[i].id1!=t.id1||this.data.edges[i].id2!=t.id2)&&e.push(this.data.edges[i]);this.data.edges=e}},this.getAllObjectAttributes=function(t){var e=[];if(this.data[t])for(var i=0;i<this.data[t].length;i++)for(var s in this.data[t][i])e.hasOwnProperty(s)?e[s]++:e[s]=1;return e},this.setAllObjectAttributes=function(t,e,i,s){if(this.data[t]){var a=this.getAllObjectAttributeValues(t,i);if(a)if(this.isNumeric(a)){var r=this.range(a);if("color"==e){this.setHeatmapColors(r[1]-r[0]);for(var h=0;h<this.data[t].length;h++)if(this.data[t][h].hasOwnProperty(i)){var n=this.data[t][h][i],o=this.getHeatmapColor(r[0],r[1],n);this.data[t][h][e]=o}else this.data[t][h][e]=this.missingDataColor}else if("size"==e)for(var h=0;h<this.data[t].length;h++)if(this.data[t][h].hasOwnProperty(i)){var n=this.data[t][h][i],l=this.percentile(r[0],r[1],n),d=parseInt(25*l/10);s?this.data[t][h].decorationSize=1+d/25:this.data[t][h][e]=1+d/100}else s?this.data[t][h].decorationSize=.1:this.data[t][h][e]=.1;else if("shape"==e)if("nodes"==t)for(var c="square",h=0;h<this.data[t].length;h++)if(this.data[t][h].hasOwnProperty(i)){var n=this.data[t][h][i],l=this.percentile(r[0],r[1],n),p=parseInt(l/10);p>0&&p--,this.data[t][h][e]="pie"+p}else this.data[t][h][e]=c;else if("edges"==t)for(var h=0;h<this.data[t].length;h++)if(this.data[t][h].hasOwnProperty(i)){var n=this.data[t][h][i],l=this.percentile(r[0],r[1],n),p=parseInt(l/10);p>0&&p--,this.data[t][h].type=this.lines[p]}else this.data[t][h].type=this.lines[10]}else{for(var g=0,u=0,m=.1,f={color:{},shape:{},size:{}},h=0;h<a.length;h++)f.color.hasOwnProperty(a[h])||(f.color[a[h]]=this.colors[g%this.colors.length],g++),"nodes"==t?f.shape.hasOwnProperty(a[h])||(f.shape[a[h]]=this.shapes[u%this.shapes.length],u++):f.shape.hasOwnProperty(a[h])||(f.lines[a[h]]=this.lines[u%this.lines.length],u++),f.size.hasOwnProperty(a[h])||(f.size[a[h]]=m,m+=.1);for(var h=0;h<this.data[t].length;h++)if(this.data[t][h].hasOwnProperty(i)){var n=this.data[t][h][i];this.data[t][h][e]=f[e][n]}}}},this.getAllObjectAttributeValues=function(t,e){var i=[];if(this.data[t])for(var s=0;s<this.data[t].length;s++)this.data[t][s].hasOwnProperty(e)&&i.push(this.data[t][s][e]);return i},this.modifyNodeSize=function(t,e,i){var s=this.data.nodes[this.data.nodeIndices[t]];delete s.size,s.width=e,s.height=i},this.modifyXYNode=function(t,e,i){var s=this.data.nodes[this.data.nodeIndices[t]];if(s.x-=e,s.y-=i,null!=s.labelX&&null!=s.labelY&&this.modifyXYNodeLab(t,e,i),"radial"!=this.networkLayoutType&&this.nodeParentHood[s.id]&&this.nodeParentHood[s.id].children)for(var a=0;a<this.nodeParentHood[s.id].children.length;a++){var r=this.nodeParentHood[s.id].children[a];this.modifyXYNode(r,e,i)}},this.modifyXYNodeLab=function(t,e,i){var s=this.data.nodes[this.data.nodeIndices[t]],a=null!=s.label?s.label:s.name?s.name:s.id,r=this.measureText(a,this.nodeFont),h=this.nodeFontSize,n=s.width?s.width:s.size?this.nodeSize*s.size:this.nodeSize,o=s.height?s.height:s.size?this.nodeSize*s.size:this.nodeSize;null!=s.labelX&&null!=s.labelY?(s.labelX-=e,s.labelY-=i):this.rangeX>this.rangeY?(s.labelX=s.x-r/2-e,s.labelY=s.y+o/1.3-i):(s.labelX=s.x+n/1.3-e,s.labelY=s.y-h/2-i)},this.modifyXYNodeDec=function(t,e,i){var s=this.data.nodes[this.data.nodeIndices[t]];s.decorationsX-=e,s.decorationsY-=i},this.getHiddenNodes=function(){var t=[];if(this.data.nodes)for(var e=0;e<this.data.nodes.length;e++)this.data.nodes[e].hide&&t.push(this.data.nodes[e]);return t},this.orderNodes=function(t){for(var e in this.selectNode)this[t](this.data.nodes[this.data.nodeIndices[e]])},this.sendNodeToBack=function(t){for(var e=[t],i=0;i<this.data.nodes.length;i++)this.data.nodes[i].id!=t.id&&e.push(this.data.nodes[i]);this.data.nodes=e,this.setNodeIndices()},this.sendNodeBackward=function(t){var e=[],i=this.data.nodeIndices[t.id];if(i>0){for(var s=0;i-1>s;s++)e.push(this.data.nodes[s]);e.push(this.data.nodes[i]),e.push(this.data.nodes[i-1]);for(var s=i+1;s<this.data.nodes.length;s++)e.push(this.data.nodes[s]);this.data.nodes=e,this.setNodeIndices()}},this.bringNodeToFront=function(t){for(var e=[],i=0;i<this.data.nodes.length;i++)this.data.nodes[i].id!=t.id&&e.push(this.data.nodes[i]);e.push(t),this.data.nodes=e,this.setNodeIndices()},this.bringNodeForward=function(t){var e=[],i=this.data.nodeIndices[t.id];if(this.data.nodes.length-1>i){for(var s=0;i>s;s++)e.push(this.data.nodes[s]);e.push(this.data.nodes[i+1]),e.push(this.data.nodes[i]);for(var s=i+2;s<this.data.nodes.length;s++)e.push(this.data.nodes[s]);this.data.nodes=e,this.setNodeIndices()}},this.flashNode=function(t,e,i){t=this.toArray(t);for(var s=0;s<t.length;s++){var a=t[s],r=this.data.nodes[this.data.nodeIndices[a]],h=r.width?r.width:r.size?r.size:this.nodeSize,n=r.height?r.height:r.size?r.size:this.nodeSize,o=this.adjustNetworkObjects(["circle",r.x,r.y,1]);this.flash(o[1],o[2],h*this.scaleFactor,n*this.scaleFactor,e||this.nodeHighlightColor,i)}},this.highlightNodes=function(t){this.isArray(t)?this.highlightNode=this.highlightNode.concat(t):this.highlightNode.push(t),this.draw()},this.unHighlightNodes=function(t){var e=[];t=this.toArray(t);for(var i=0;i<this.highlightNode.length;i++){for(var s=!1,a=0;a<t.length;a++)if(this.highlightNode[i]==t[a]){s=!0;break}s||e.push(this.highlightNode[i])}this.highlightNode=e,this.draw()},this.addToNetworkStack=function(){this.networkStack.length>=this.networkStackStates&&this.networkStack.shift(),this.networkStackIndex=this.networkStack.length,this.networkStack.push(this.cloneObject(this.data)),this.userEvents.stackchange&&this.userEvents.stackchange.call(this,this.networkStackIndex,this.networkStack.length)},this.undoNetworkOp=function(){this.canNetworkUndoOp()?(this.networkStackIndex--,this.nodes={},this.updateData(this.networkStack[this.networkStackIndex]),this.userEvents.stackchange&&this.userEvents.stackchange.call(this,this.networkStackIndex,this.networkStack.length)):this.debug&&alert("No data in Undo Stack")},this.canNetworkUndoOp=function(){return this.networkStackIndex>0?!0:!1},this.redoNetworkOp=function(){this.canNetworkRedoOp()?(this.networkStackIndex++,this.nodes={},this.updateData(this.networkStack[this.networkStackIndex]),this.userEvents.stackchange&&this.userEvents.stackchange.call(this,this.networkStackIndex,this.networkStack.length)):this.debug&&alert("No data in Redo Stack")},this.canNetworkRedoOp=function(){return this.networkStackIndex<this.networkStack.length-1?!0:!1},this.clearNetworkStack=function(){this.stackNumber=!1,this.networkStackIndex=0,this.networkStack=[],this.userEvents.stackchange&&this.userEvents.stackchange.call(this,this.networkStackIndex,this.networkStack.length)},this.addLegend=function(t,e,i){if(this.inititalizeNetworkLegend(),t&&e){if(i&&"text"==t){var s=this.findXYCoordinates(i);e.x=s.x,e.y=s.y}return this.data.legend[t].push(e),e}},this.deleteLegend=function(t,e){if(t&&e&&e.id){for(var i=[],s=0;s<this.data.legend[t].length;s++)this.data.legend[t][s].id!=e.id&&i.push(this.data.legend[t][s]);this.data.legend[t]=i,delete this.data.legend.ids[t][e.id]}},this.alignDistributeSelectedNodes=function(t,e,i){var s,a,r,h,n,o=this.getSelectedNodeCoordinates();if(o||89==e||90==e){if(t&&(this.cancelEvent(t),this.stopEvent(t)),84==e){s=this.min(o.y);for(var n in this.selectNode){var l=this.data.nodes[this.data.nodeIndices[n]];this.modifyXYNode(l.id,0,l.y-s)}}else if(82==e){s=this.max(o.x);for(var n in this.selectNode){var l=this.data.nodes[this.data.nodeIndices[n]];this.modifyXYNode(l.id,l.x-s,0)}}else if(66==e){s=this.max(o.y);for(var n in this.selectNode){var l=this.data.nodes[this.data.nodeIndices[n]];this.modifyXYNode(l.id,0,l.y-s)}}else if(76==e){s=this.min(o.x);for(var n in this.selectNode){var l=this.data.nodes[this.data.nodeIndices[n]];this.modifyXYNode(l.id,l.x-s,0)}}else if(86==e){a=this.range(o.y),r=this.rank(o.y),h=(a[1]-a[0])/(this.isSelectNodes-1),s=a[0];for(var d=0;d<r.length;d++){n=o.i[r[d]];var l=this.data.nodes[this.data.nodeIndices[n]];this.modifyXYNode(l.id,0,l.y-(s+d*h))}}else if(72==e){a=this.range(o.x),r=this.rank(o.x),h=(a[1]-a[0])/(this.isSelectNodes-1),s=a[0];for(var d=0;d<r.length;d++){n=o.i[r[d]];var l=this.data.nodes[this.data.nodeIndices[n]];this.modifyXYNode(l.id,l.x-(s+d*h),0)}}else if(90==e)return t.shiftKey||i?this.canNetworkRedoOp()&&(this.resetSelectedNodes(),this.redoNetworkOp()):this.canNetworkUndoOp()&&(this.resetSelectedNodes(),this.undoNetworkOp()),!1;this.draw(!1,!1,!1,!0),this.addToNetworkStack()}return!1},this.getSelectedNodeCoordinates=function(){var t={x:[],y:[],i:[]},e=!1;for(var i in this.selectNode){var s=this.data.nodes[this.data.nodeIndices[i]];t.x.push(s.x),t.y.push(s.y),t.i.push(i),e=!0}return e?t:!1},this.findNodesBy=function(t){var e=[],i=0;for(var s in t)t[s]=this.toArray(t[s]),i++;for(var a=0;a<this.data.nodes.length;a++){var r=this.data.nodes[a],h=0;for(var s in t)for(var n=t[s],o=0;o<n.length;o++)r[s]&&r[s]==n[o]&&h++;h==i&&e.push(r)}return e},this.setNetworkDimensions=function(){this.left=0,this.top=0,this.x=this.width,this.y=this.height},this.setNetworkPrivateParams=function(){if(this.data.nodes.length>0){if(this.layoutDone=!1,this.x=this.width,this.y=this.height,"radial"==this.networkLayoutType){var t=this.width,e=this.height;this.width>this.height?this.width=this.height:this.height=this.width,this.x=this.width,this.y=this.height,this.networkXCenter=this.x/2,this.networkYCenter=this.y/2,this.width=t,this.height=e}else this.x=this.width,this.y=this.height,this.set3DParams(),this.area=this.x*this.y,null!=this.networkForceConstant&&null!=this.networkForceConstantOriginal&&(this.networkForceConstantOriginal=this.networkForceConstant),null!=this.temperature&&null!=this.temperatureOriginal&&(this.temperatureOriginal=this.temperature),null!=this.initialTemperature&&null!=this.initialTemperatureOriginal&&(this.initialTemperatureOriginal=this.initialTemperature),this.networkForceConstant=this.networkForceConstant?this.networkForceConstant:Math.sqrt(this.area/this.data.nodes.length),this.temperature=this.temperature?this.temperature:this.data.nodes.length+Math.floor(Math.sqrt(this.data.edges.length)),this.minimumTemperature=1,this.initialTemperature=this.initialTemperature?this.initialTemperature:this.temperature,this.iteration=0,this.networkForceConstant<.001&&(this.networkForceConstant=.001);this.x<=400||this.y<=400?(this.nodeSize-=4,this.nodeFont=this.nodeSize-6+"Pt "+this.fontName,this.showAnimationFont=this.nodeFont+"Pt "+this.fontName):this.edgeWidth=2}else this.layoutDone=!0},this.networkContains=function(t,e){return null!=this.findNode(t,e)},this.findNode=function(t,e){for(var i in t){var s=t[i];if(e.call(s))return s}return null},this.filterEdges=function(t,e){var i=[];for(var s in t){var a=t[s];e.call(a)&&i.push(a)}return i},this.reduceNetwork=function(t,e,i){var s=null;for(var a in t)s=null==s?i?i.apply(i,[t[a]]):t[a]:e.apply(t[a],[s,t[a]]);return s},this.vectorDifference=function(t,e){var i=t.x-e.x,s=t.y-e.y,a=t.z-e.z;return 0==i&&(i=.01+Math.random()),0==s&&(s=.01+Math.random()),this.is3DNetwork&&0==a&&(a=.01+Math.random()),{x:i,y:s,z:a}},this.vectorMagnitude=function(t){var e;return e=Math.sqrt(this.is3DNetwork?t.x*t.x+t.y*t.y+t.z*t.z:t.x*t.x+t.y*t.y),isNaN(e)?0:e},this.normalizeGraph=function(t){var e=[],i={},s=this;for(var a in t.nodes)if(!i.hasOwnProperty(t.nodes[a].id)){var r=t.nodes[a],h=[];if(i[r.id]=1,!this.networkContains(h,function(){return s.networkContains(this.nodes,function(){return this.id=r.id})})){var n={};n.nodes=[],n.edges=[],this.addNodeToGraph(r,n,t),n.nodes.length>0&&e.push(n);for(var o=0;o<n.nodes.length;o++)i[n.nodes[o].id]=1}}return e},this.addNodeToGraph=function(t,e,i){if(null==this.findNodeForId(t.id,e)){e.nodes.push(t);var s=this.edgesForNode(i.edges,t.id);for(edgeIndex in s){var a=s[edgeIndex];e.edges.push(a),a.id1==t.id?this.addNodeToGraph(this.findNodeForId(a.id2,i),e,i):this.addNodeToGraph(this.findNodeForId(a.id1,i),e,i)}}},this.findNodeForId=function(t,e){return this.findNode(e.nodes,function(){return t==this.id})},this.edgesForNode=function(t,e){return this.filterEdges(t,function(){return this.id1==e||this.id2==e})},this.attractiveForce=function(t,e){switch(this.attractiveForceFunction){case"FruchtermanReingold":return t*t/e;case"Eades":return e*Math.log(t)}},this.repulsiveForce=function(t,e){return e*e/t},this.storePositions=function(){for(var t={},e=0;e<this.data.nodes.length;e++){var i=this.data.nodes[e];if(!i.hide&&!i.hiddenParent){var s={x:i.x,y:i.y,z:i.z};t[i.id]=s}}return t},this.calculateRepulsiveDisplacement=function(t){var e=this,i=function(t,i,s){for(var a=s*s,r=0;r<i.length;r++)for(var h=e.data.nodes[e.data.nodeIndices[i[r]]],n=t[h.id],o=0;o<i.length;o++)if(r!=o){var l=e.data.nodes[e.data.nodeIndices[i[o]]],d=t[l.id];if(!(h.hide||h.hiddenParent||l.hide||l.hiddenParent)){var c=e.vectorDifference(h,l),p="organic"==e.networkLayoutType?Math.max(e.vectorMagnitude(c)-2*e.nodeSize,e.networkNodeMinDistance):e.vectorMagnitude(c),g=a/p;h.fixed||(n.x+=c.x/p*g,n.y+=c.y/p*g,n.z+=c.z/p*g),l.fixed||"organic"!=e.networkLayoutType||(d.x-=c.x/p*g,d.y-=c.y/p*g,d.z-=c.z/p*g)}}};if(this.subNetworks)for(var s=0;s<this.subNetworks.length;s++)i(t[s],this.subNetworks[s].nodes,this.subNetworks[s].networkForceConstant);else i(t,this.getKeys(this.data.nodeIndices),this.networkForceConstant)},this.calculateAttractiveDisplacement=function(t){var e=this,i=function(t,i,s){for(var a=0;a<i.length;a++){var r=i[a];if(!e.nodes||!e.nodes[r.id1]||!e.nodes[r.id2])return void alert('Nodes "'+r.id1+'" and/or "'+r.id2+'" are missing!');if(e.nodes&&!e.nodes[r.id1].hide&&!e.nodes[r.id2].hide&&!e.nodes[r.id1].hiddenParent&&!e.nodes[r.id2].hiddenParent){var h=e.vectorDifference(e.nodes[r.id1],e.nodes[r.id2]),n="organic"==e.networkLayoutType?Math.max(e.vectorMagnitude(h)-2*e.nodeSize,e.networkNodeMinDistance):Math.max(e.vectorMagnitude(h),e.networkNodeMinDistance),o=e.attractiveForce(n,s);e.nodes[r.id1].fixed||(t[r.id1].x-=h.x/n*o,t[r.id1].y-=h.y/n*o,t[r.id1].z-=h.z/n*o),e.nodes[r.id2].fixed||(t[r.id2].x+=h.x/n*o,t[r.id2].y+=h.y/n*o,t[r.id2].z+=h.z/n*o)}}};if(this.subNetworks)for(var s=0;s<this.subNetworks.length;s++)i(t[s],this.subNetworks[s].edges,this.subNetworks[s].networkForceConstant);else i(t,this.data.edges,this.networkForceConstant)},this.applyDisplacement=function(t){var e=this,i=function(t,i){for(var s in t){var a=e.nodes[s];if(!a.fixed){var r=t[s],h=Math.max(e.vectorMagnitude(r),.001);a.x+=r.x/h*Math.min(i,Math.abs(r.x)),a.y+=r.y/h*Math.min(i,Math.abs(r.y)),a.z+=r.z/h*Math.min(i,Math.abs(r.z))}}};if(this.nodes)if(this.subNetworks)for(var s=0;s<this.subNetworks.length;s++)i(t[s],this.subNetworks[s].temperature);else i(t,this.temperature)},this.isLayoutDone=function(){var t=this,e=this.storePositions(),i=0,s=0,a=function(a,r){for(var h=0,n=0,o={x:Number.MAX_VALUE,y:Number.MAX_VALUE},l={x:-1*Number.MAX_VALUE,y:-1*Number.MAX_VALUE},d=0;d<a.length;d++){var c=t.data.nodes[t.data.nodeIndices[a[d]]];if(!c.hide&&!c.hiddenParent&&!c.fixed){var p=e[c.id];o.x=Math.min(o.x,p.x),o.y=Math.min(o.y,p.y),o.z=Math.min(o.z,p.z),l.x=Math.max(l.x,p.x),l.y=Math.max(l.y,p.y),l.z=Math.max(l.z,p.z)}h+=Math.abs(t.vectorMagnitude(t.vectorDifference(t.previousNodePositions[c.id],p))),n++}var g=h/n,u=Math.abs(t.vectorMagnitude(t.vectorDifference(o,l))),m=Math.abs(t.vectorMagnitude({x:r.x,y:r.y,z:parseInt((r.x+r.y)/2)}));r.minimumTemperature=u/m,r.layoutDone=g<r.minimumTemperature,r.layoutDone&&s++,null==r.initialProgress&&r.temperature<=r.minimumTemperature&&(r.initialProgress=g-r.minimumTemperature/2),null!=r.initialProgress&&(r.layoutProgress=Math.max(r.layoutProgress,1-(g-r.minimumTemperature/2)/r.initialProgress)),i+=r.layoutProgress};if(this.subNetworks){for(var r=0;r<this.subNetworks.length;r++)a(this.subNetworks[r].nodes,this.subNetworks[r]);this.layoutProgress=i/this.subNetworks.length,this.layoutDone=s==this.subNetworks.length?!0:!1}else a(this.getKeys(this.data.nodeIndices),this);this.previousNodePositions=e},this.setInitialForceDirectedLayout=function(){var t=this,e=function(e,i,s){for(var a=0;a<e.length;a++){var r=t.data.nodes[t.data.nodeIndices[e[a]]];r.hide||r.hiddenParent||(r.x=Math.floor(Math.random()*i),r.y=Math.floor(Math.random()*s),r.z=this.is3DNetwork?Math.floor(Math.random()*parseInt((i+s)/2)):0)}};if(this.layoutProgress=0,this.subNetworks)for(var i=0;i<this.subNetworks.length;i++)e(this.subNetworks[i].nodes,this.subNetworks[i].x,this.subNetworks[i].y);else e(this.getKeys(this.data.nodeIndices),this.x,this.y);this.previousNodePositions=this.storePositions()},this.setInitialNodeDisplacement=function(){var t=this.subNetworks?[]:{};if(this.subNetworks)for(var e=0;e<this.subNetworks.length;e++){t[e]={};for(var i=0;i<this.subNetworks[e].nodes.length;i++)t[e][this.subNetworks[e].nodes[i]]={x:0,y:0,z:0}}else for(var e=0;e<this.data.nodes.length;e++)t[this.data.nodes[e].id]={x:0,y:0,z:0};return t},this.updateForceDirectedLayout=function(t){var e=(new Date).getTime(),i=e;if(this.data.edges.length>1){if(!this.layoutDone)for(;t>i-e;){var s=this.setInitialNodeDisplacement();if(this.calculateRepulsiveDisplacement(s),this.calculateAttractiveDisplacement(s),this.applyDisplacement(s),this.subNetworks)for(var a=0;a<this.subNetworks.length;a++)this.subNetworks[a].temperature=Math.max(this.subNetworks[a].temperature-this.subNetworks[a].initialTemperature/100,this.subNetworks[a].minimumTemperature);else this.temperature=Math.max(this.temperature-this.initialTemperature/100,this.minimumTemperature);this.isLayoutDone(),this.iteration++,i=(new Date).getTime()}}else this.layoutDone=!0;return this.layoutDone},this.renderNetwork=function(){return this.ctx.shadowOffsetX=this.shadowOffsetX,this.ctx.shadowOffsetY=this.shadowOffsetY,this.ctx.shadowBlur=this.shadowBlur,this.ctx.shadowColor=this.shadowColor,this.setNetworkRotation(),this.resizeCanvas(),this.layoutDone||this.showAnimation?void(this.data.nodes.length>0&&(this.layoutDone&&this.setXYNodePrecision(),this.setNetworkMinMaxRangeXY(),this.setNetworkScaleFactor(),this.scaleFactor&&(this.showAnimation?(this.preScaleNetwork?(this.centerNetwork(),this.ctx.save(),this.ctx.scale(1/this.scaleFactor,1/this.scaleFactor),this.ctx.translate(this.offsetX,this.offsetY),this.ctx.restore(),this.drawNetworkNodes(!0),this.networkNodesOnTop?(this.drawNetworkEdges(),this.drawNetworkNodes()):(this.drawNetworkNodes(),this.drawNetworkEdges()),this.layoutDone&&this.drawNetworkLegend(),this.ctx.save(),this.ctx.translate(-this.offsetX,-this.offsetY),this.ctx.scale(this.scaleFactor,this.scaleFactor),this.ctx.restore()):(this.ctx.scale(this.scaleFactor,this.scaleFactor),this.ctx.translate(this.offsetX,this.offsetY),this.drawNetworkNodes(!0),this.networkNodesOnTop?(this.drawNetworkEdges(),this.drawNetworkNodes()):(this.drawNetworkNodes(),this.drawNetworkEdges()),this.layoutDone&&(this.drawNetworkDecorations(),this.drawNetworkLegend()),this.ctx.translate(-this.offsetX,-this.offsetY),this.ctx.scale(1/this.scaleFactor,1/this.scaleFactor)),this.drawCitation(),this.drawTitle(),this.drawCanvasBox(!0)):(this.drawCitation(),this.drawTitle(),this.drawCanvasBox(!0),this.preScaleNetwork?(this.centerNetwork(),this.ctx.save(),this.ctx.scale(this.scaleFactor,this.scaleFactor),this.ctx.translate(this.offsetX,this.offsetY),this.ctx.restore()):(this.ctx.scale(this.scaleFactor,this.scaleFactor),this.ctx.translate(this.offsetX,this.offsetY)),this.drawNetworkNodes(!0),this.networkNodesOnTop?(this.drawNetworkEdges(),this.drawNetworkNodes()):(this.drawNetworkNodes(),this.drawNetworkEdges()),this.layoutDone&&(this.drawNetworkDecorations(),this.drawNetworkLegend())),this.drawNetworkProgressBar()))):void this.drawNetworkProgressBar(!0)},this.reRootRadialNetwork=function(t){var e=this.data.nodes[t].id;this.networkCurrentAngle=this.getAngle(this.finalRadialNodePositions[e].x,this.finalRadialNodePositions[e].y,this.finalRadialNodePositions[this.networkRoot].x,this.finalRadialNodePositions[this.networkRoot].y,0)+180,this.orderRadialNetwork={};for(var i=this.data.nodeIndices[e],s=0,a=i;a<this.data.nodes.length;a++)this.orderRadialNetwork[this.data.nodes[a].id]=s,s++;for(var a=0;i>a;a++)this.orderRadialNetwork[this.data.nodes[a].id]=s,s++;this.networkXCenter=this.finalRadialNodePositions[e].x,this.networkYCenter=this.finalRadialNodePositions[e].y,this.networkRoot=e,this.layoutDone=!1,this.draw()},this.renderRadialLayout=function(){this.ctx.scale(this.scaleFactor,this.scaleFactor),this.ctx.translate(this.offsetX,this.offsetY);for(var t=this.data.nodes[this.data.nodeIndices[this.networkRoot]],e=1;e<this.networkDepth;e++)this.drawShape("circle",t.x,t.y,e*this.networkLevelSize*2,e*this.networkLevelSize*2,this.background,this.infoAreaColor,"open")},this.centerNetwork=function(){for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t];e.hide||e.hiddenParent||(e.x=(this.offsetX+e.x)*this.scaleFactor,e.y=(this.offsetY+e.y)*this.scaleFactor)}this.scaleFactor=.9,this.offsetX=.05*this.x,this.offsetY=.05*this.y},this.adjustNetworkObjects=function(t){if(!t)return!1;if("circle"==t[0])t[1]=(this.offsetX+t[1])*this.scaleFactor,t[2]=(this.offsetY+t[2])*this.scaleFactor,t[3]=t[3]*this.scaleFactor;else for(var e=1;e<t.length;e++)t[e]=e%2?(this.offsetX+t[e])*this.scaleFactor:(this.offsetY+t[e])*this.scaleFactor;return t},this.setXYNodePrecision=function(){if(this.approximateNodePositions)for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t];e.x&&(e.x=parseInt(e.x),this.nodes[e.id].x=e.x),e.y&&(e.y=parseInt(e.y),this.nodes[e.id].y=e.y),e.z&&(e.z=parseInt(e.z),this.nodes[e.id].z=e.z)}},this.getLengthToNodeBoundary=function(t,e,i,s,a,r){if(a){var h=a.size?a.size:1,n=r&&a.height?a.height:a.width?a.width:this.nodeSize*h,o=r&&a.width?a.width:a.height?a.height:this.nodeSize*h,l=this.clip("line",[t,e,i,s],[t-n/2,e-o/2,n,o]);return this.lineLength(l[0],l[1],l[2],l[3])+2*this.margin}return 2*this.margin},this.drawNetworkEdges=function(){if(this.nodes)for(var t={},e=1,i=this.foreground,s=0;s<this.data.edges.length;s++){var a=this.data.edges[s],r=this.nodes[a.id1],h=this.nodes[a.id2],n=!1;r.hide||r.hiddenParent||h.hide||h.hiddenParent||a.anchor?this.showHiddenChildEdges&&((r.hide||r.hiddenParent||r.parentNode&&this.nodes[r.parentNode].hideChildren)&&(r=this.findVisibleParentNode(a.id1),r&&(n=!0)),(h.hide||h.hiddenParent||h.parentNode&&this.nodes[h.parentNode].hideChildren)&&(h=this.findVisibleParentNode(a.id2),h&&(n=!0))):n=!0;var o=r.id+":"+h.id;if(n&&!a.hide&&!t.hasOwnProperty(o)){var l,d,c,p,g=this.selectNode.hasOwnProperty(r.id)&&this.selectNode.hasOwnProperty(h.id)?this.nodeHighlightColor:a.color?a.color:i,u=a.width?a.width:1,m=a.cap?a.cap:!1,f=a.exact?a.exact:!1;this.is3DNetwork?(l=r.x3d,d=r.y3d,c=h.x3d,p=h.y3d):(l=r.x,d=r.y,c=h.x,p=h.y);var v=a.type?a.type:"line",x=v.match(/curved/)?!0:!1,y=f?0:this.getLengthToNodeBoundary(l,d,c,p,r,x),b=f?0:this.getLengthToNodeBoundary(c,p,l,d,h,x),w=this.drawLine(v,l,d,c,p,g,u,m,Math.max(0,y),Math.max(0,b));this.layoutDone&&!this.isAnimation&&(this.preScaleNetwork?this.addArea(w,[s+this.data.nodes.length]):this.addArea(this.adjustNetworkObjects(w),[s+this.data.nodes.length]),e++),this.ctx.lineWidth=1,t[o]=1}}},this.drawNetworkNodes=function(t){for(var e=this.data.nodes.length/this.zoom<this.showNodeNameThreshold?!0:!1,i=this.foreground,s=this.shapes[0],a=6001,r=this.rangeX>this.rangeY?"bottom":"right",h=(this.autoHideOnDecorationsCenter&&"center"==this.decorationsPosition&&this.decorations.length>0?!0:!1,0);h<this.data.nodes.length;h++){var n=this.data.nodes[h];if(t){if(!n.eventless)continue}else if(n.eventless)continue;if(!n.hide&&!n.hiddenParent&&!n.anchor){var o=this.is3DNetwork?n.x3d:n.x,l=this.is3DNetwork?n.y3d:n.y,d=n.shape?n.shape:s,c=this.selectNode.hasOwnProperty(n.id)?this.nodeHighlightColor:n.color?n.color:i,p=n.outline?n.outline:this.foreground,g=n.size?n.size:1,u=n.width?n.width:this.nodeSize*g,m=n.height?n.height:this.nodeSize*g,f=n.pattern?n.pattern:"closed",v=n.rotate?n.rotate*Math.PI/180:!1,x=n.outlineWidth?n.outlineWidth:!1,y=n.imagePath?n.imagePath:!1,b=n.zIndex?n.zIndex:y?a:!1,w=n.eventless?!1:!0,C=this.drawShape(d,o,l,u,m,c,p,f,v,x,!1,!1,!1,!1,y,b);if(this.layoutDone&&!this.isAnimation&&((w||this.overrideEventlessNodes)&&(this.preScaleNetwork?this.addArea(C,[h]):this.addArea(this.adjustNetworkObjects(C),[h])),e&&!n.hideLabel)){var T,D,S=n.label?n.label:n.name?n.name:n.id,A=this.getNodeColor(n.id,n.labelColor),k=n.labelSize?this.nodeFontSize*n.labelSize*this.nodeScaleFontFactor:this.nodeFontSize*this.nodeScaleFontFactor,M=parseInt(k)+"Pt "+this.fontName,I=this.measureText(S,M),L=k;if(null!=n.labelX&&null!=n.labelY)T=n.labelX-I/2,D=n.labelY-L/2,
this.drawText(S,n.labelX,n.labelY,M,A,"center","middle");else{var N=this.isMultipleLines(S),z=parseInt(k)+4;if(N&&(l+=N%2?parseInt(N/2)*z+z/2:parseInt(N/2)*z),n.labelPosition)switch(n.labelPosition){case"top":T=o-I/2,D=l-(m/1.3+L),this.drawText(S,o,D,M,A,"center","top");break;case"bottom":T=o-I/2,D=l+m/1.3,this.drawText(S,o,D,M,A,"center","top");break;case"right":T=o+u/1.3,D=l-L/2,this.drawText(S,T,l,M,A,"left","middle");break;case"left":T=o-(u/1.3+I),D=l-L/2,this.drawText(S,T,l,M,A,"left","middle");break;case"center":this.drawText(S,o,l,M,A,"center","middle")}else"right"==r?(T=o+u/1.3,D=l-L/2,this.drawText(S,T,l,M,A,"left","middle")):(T=o-I/2,D=l+m/1.3,this.drawText(S,o,D,M,A,"center","top"))}var F=["rect",T,D,T+I,D+L];(w||this.overrideEventlessNodes)&&(this.preScaleNetwork&&!this.isAnimation?this.addArea(F,[h],"-lab"):this.addArea(this.adjustNetworkObjects(F),[h],"-lab"))}a++}}},this.drawNetworkDecorations=function(){if(this.showDecorations&&this.decorations.length>0){var t=this.decorations.length*this.decorationsWidth,e=t/2,i=this.decorationsHeight/2,s=2*this.decorationsHeight/3,a=this.decorationsHeight/3;this.setHeatmapColors(this.decorationsRange[1]-this.decorationsRange[0]);for(var r=0;r<this.data.nodes.length;r++){var h=this.data.nodes[r],n=[],o=[],l=[],d=!1,c=this.sizeDecorationBy&&h.decorationSize?h.decorationSize:i;if(!h.hide&&!h.hiddenParent&&!h.anchor){var p,g,u,m,f=this.is3DNetwork?h.x3d:h.x,v=this.is3DNetwork?h.y3d:h.y,x=h.size?this.nodeSize*h.size:this.nodeSize,y=x/2;switch(this.decorationsPosition){case"top":p="pie"==this.decorationsType?f:f-e,g=v-(y+this.decorationsHeight+this.decorationsWidth),g="pie"==this.decorationsType?g-i:g;break;case"bottom":p="pie"==this.decorationsType?f:f-e,g=v+(y+this.decorationsHeight+this.decorationsWidth),g="pie"==this.decorationsType?g+i:g;break;case"right":p=f+y+this.decorationsWidth,g="pie"==this.decorationsType?v:v-i,p="pie"==this.decorationsType?p+i:p;break;case"left":p=f-(y+this.decorationsWidth*(this.decorations.length+1)),g="pie"==this.decorationsType?v:v-i,p="pie"==this.decorationsType?p-i:p;break;case"center":p="pie"==this.decorationsType?f:f-e,g="pie"==this.decorationsType?v:v-i}if(null!=h.decorationsX&&null!=h.decorationsY&&(p=h.decorationsX,g=h.decorationsY),this.preScaleNetwork&&!this.isAnimation?this.addArea(["rect",p,g,p+t,g-this.decorationsHeight],[r],"-dec"):this.addArea(this.adjustNetworkObjects(["rect",p,g,p+t,g-this.decorationsHeight]),[r],"-dec"),"bar"==this.decorationsType){m=this.decorationsRange[1]<0?g:this.decorationsRange[0]>=0?g+this.decorationsHeight:g+this.decorationsHeight-Math.abs(this.decorationsRange[0]*this.decorationsUnits);for(var b=0;b<this.decorations.length;b++)u=this.decorations[b],h[u]&&!isNaN(h[u])?this.rectangle(p,m,this.decorationsWidth,-h[u]*this.decorationsUnits,this.decorationsColors[b]):h.decorations&&h.decorations[u]&&!isNaN(h.decorations[u])&&this.rectangle(p,m,this.decorationsWidth,-h.decorations[u]*this.decorationsUnits,this.decorationsColors[b]),p+=this.decorationsWidth}else{if("heatmap"==this.decorationsType)for(var b=0;b<this.decorations.length;b++){var w=h[this.decorations[b]]?h[this.decorations[b]]:h.decorations?h.decorations[this.decorations[b]]:!1;if(this.isObject(w)){d={};for(var C=0;C<this.decorations.length;C++){var T=h[this.decorations[C]]?h[this.decorations[C]]:h.decorations?h.decorations[this.decorations[C]]:{};for(var D in T)d[D]=!0}for(d=this.getKeys(d),n=[],S=0;S<d.length;S++)n[S]=[];break}}for(var b=0;b<this.decorations.length;b++)if(d||null!=h[this.decorations[b]]||h.decorations&&null!=h.decorations[this.decorations[b]]){var w=h[this.decorations[b]]?h[this.decorations[b]]:h.decorations?h.decorations[this.decorations[b]]:{};if(this.isObject(w)||d){if(this.decorationsType.match(/stacked/)){var S=[];for(var C in w)isNaN(w[C])||S.push(w[C]);n.push(S)}else if("heatmap"==this.decorationsType)for(S=0;S<d.length;S++)C=d[S],n[S].push(w&&w[C]?w[C]:"NA")}else n.push(h[this.decorations[b]]?h[this.decorations[b]]:h.decorations?h.decorations[this.decorations[b]]:"NA");if(o.push([r]),"pie"==this.decorationsType){var A=this.decorations[b];l.push(this.decorationsProperties[A]&&this.decorationsProperties[A].color?this.decorationsProperties[A].color:this.colors[b%this.colors.length])}}else n.push(!1),o.push([r]);if(n.length>0)if(this.decorationsType.match(/stacked/)){for(var k=this.decorationsType.match(/percent/)?!0:!1,b=0;b<this.decorations.length;b++)if(n[b]){var S=[],M=0,A=this.decorations[b],w=h[this.decorations[b]]?h[this.decorations[b]]:h.decorations?h.decorations[this.decorations[b]]:{};for(var C in w){var I=this.decorationsProperties[C]&&this.decorationsProperties[C].color?this.decorationsProperties[C].color:this.decorationsColors[this.decorations.length+M];S.push(I),M++}this.drawStackedPlot(n[b],p,g,this.decorationsWidth,k,this.sum(n[b]),this.decorationsUnits,"vertical",S,o[b]);var I=this.decorationsProperties[A]&&this.decorationsProperties[A].color?this.decorationsProperties[A].color:this.decorationsColors[b],L=this.decorationsProperties[A]&&this.decorationsProperties[A].shape?this.decorationsProperties[A].shape:"circle";this.drawShape(L,p+this.decorationsWidth/2,g+a,a/1.3,a/1.3,I,this.foreground,"closed"),p+=this.decorationsWidth}}else if("heatmap"==this.decorationsType){if(d){s=this.decorationsHeight/n.length;for(var b=0;b<n.length;b++){if(n[b]){var A=d[b];this.drawHeatmap(n[b],p,g,this.decorationsWidth,s,this.decorationsRange[0],this.decorationsRange[1],!1,o,"-dec");var I=this.decorationsProperties[A]&&this.decorationsProperties[A].color?this.decorationsProperties[A].color:this.decorationsColors[this.decorations.length+b],L=this.decorationsProperties[A]&&this.decorationsProperties[A].shape?this.decorationsProperties[A].shape:"square";this.drawShape(L,p-a,g+s/2,a/2,a/2,I,this.foreground,"closed")}g+=s}for(var b=0;b<this.decorations.length;b++){var A=this.decorations[b],I=this.decorationsProperties[A]&&this.decorationsProperties[A].color?this.decorationsProperties[A].color:this.decorationsColors[b],L=this.decorationsProperties[A]&&this.decorationsProperties[A].shape?this.decorationsProperties[A].shape:"circle";this.drawShape(L,p+this.decorationsWidth/2,g+a,a/1.3,a/1.3,I,this.foreground,"closed"),p+=this.decorationsWidth}}else if(n[0]){this.drawHeatmap(n,p,g,this.decorationsWidth,s,this.decorationsRange[0],this.decorationsRange[1],!1,o,"-dec");for(var b=0;b<this.decorations.length;b++){var A=this.decorations[b],I=this.decorationsProperties[A]&&this.decorationsProperties[A].color?this.decorationsProperties[A].color:this.decorationsColors[b],L=this.decorationsProperties[A]&&this.decorationsProperties[A].shape?this.decorationsProperties[A].shape:"circle";this.drawShape(L,p+this.decorationsWidth/2,g+this.decorationsHeight+a/3,a/1.3,a/1.3,I,this.foreground,"closed"),p+=this.decorationsWidth}}}else{var N=this.colors;this.colors=l,this.drawPie(this.setPieData(n),p,g,c),this.colors=N}}}}}},this.getLegendId=function(t,e){if(t){if(!e){var i=0;for(e=t+"LegendId"+i;this.data.legend.ids[t].hasOwnProperty(e);)i++,e=t+"LegendId"+i}return this.data.legend.ids[t][e]=!0,e}},this.findNetworkXYRange=function(t){var e=Number.MAX_VALUE,i=-1*Number.MAX_VALUE,s=Number.MAX_VALUE,a=-1*Number.MAX_VALUE;if(t||(t=this.getKeys(this.data.nodeIndices)),t&&t.length>0)if(this.is3DNetwork&&this.layoutDone&&this.scaleFactor)for(var r=0;r<t.length;r++){var h=this.data.nodes[this.data.nodeIndices[t[r]]];h.hide||h.hiddenParent||h.anchor||(e=Math.min(e,h.x3d),i=Math.max(i,h.x3d),s=Math.min(s,h.y3d),a=Math.max(a,h.y3d))}else for(var r=0;r<t.length;r++){var h=this.data.nodes[this.data.nodeIndices[t[r]]];h.hide||h.hiddenParent||h.anchor||(e=Math.min(e,h.x),i=Math.max(i,h.x),s=Math.min(s,h.y),a=Math.max(a,h.y))}return{minX:e,maxX:i,minY:s,maxY:a}},this.inititalizeNetworkLegend=function(){this.data.legend||(this.data.legend={}),this.data.legend.pos||(this.data.legend.pos={}),this.data.legend.pos.nodes||(this.data.legend.pos.nodes={x:!1,y:!1}),this.data.legend.pos.edges||(this.data.legend.pos.edges={x:!1,y:!1}),this.data.legend.pos.decorations||(this.data.legend.pos.decorations={x:!1,y:!1}),this.data.legend.ids||(this.data.legend.ids={nodes:{},edges:{},text:{},decorations:{}})},this.drawNetworkLegend=function(){if(this.showLegend){this.inititalizeNetworkLegend();var t=this.findNetworkXYRange();this.curLegendX=t.minX,this.curLegendY=t.minY,this.showNetworkNodesLegend&&this.drawNetworkLegendNodes(),this.showNetworkEdgesLegend&&this.drawNetworkLegendEdges(),this.showNetworkTextLegend&&this.drawNetworkLegendText(),this.showNetworkDecorationsLegend&&this.drawNetworkLegendDecorations()}},this.drawNetworkLegendNodes=function(){if(this.data.legend.nodes&&this.data.legend.nodes.length>0){var t=null!=this.data.legend.pos.nodes.x?this.data.legend.pos.nodes.x:this.curLegendX,e=null!=this.data.legend.pos.nodes.y?this.data.legend.pos.nodes.y:this.curLegendY;this.data.legend.pos.nodes.x=parseInt(t),this.data.legend.pos.nodes.y=parseInt(e);for(var i=0,s=0,a=0;a<this.data.legend.nodes.length;a++){this.data.legend.nodes[a].id=this.getLegendId("nodes",this.data.legend.nodes[a].id);var r=this.data.legend.nodes[a].color||this.nodeFontColor,h=this.data.legend.nodes[a].outline?this.data.legend.nodes[a].outline:this.foreground,n=this.data.legend.nodes[a].shape||this.shapes[0],o=this.data.legend.nodes[a].size?this.data.legend.nodes[a].size*this.nodeFontSize:this.nodeFontSize,l=this.data.legend.nodes[a].width?this.data.legend.nodes[a].width:o,d=this.data.legend.nodes[a].height?this.data.legend.nodes[a].height:o,c=this.data.legend.nodes[a].pattern?this.data.legend.nodes[a].pattern:"closed",p=this.data.legend.nodes[a].rotate?this.data.legend.nodes[a].rotate*Math.PI/180:!1,g=this.data.legend.nodes[a].outlineWidth?this.data.legend.nodes[a].outlineWidth:!1,u=this.data.legend.nodes[a].imagePath?this.data.legend.nodes[a].imagePath:!1,m=this.data.legend.nodes[a].zIndex?this.data.legend.nodes[a].zIndex:!1,f=this.data.legend.nodes[a].font?this.data.legend.nodes[a].font*this.nodeFontSize*this.nodeScaleFontFactor:this.nodeFontSize*this.nodeScaleFontFactor,v=parseInt(f)+"Pt "+this.fontName,x=this.data.legend.nodes[a].text?this.data.legend.nodes[a].text:"",y=this.measureText(x,v);o=parseFloat(sprintf("%.1f",o)),i=Math.max(i,3*this.margin+o+y),s=o/2,e+=s,this.drawShape(n,this.margin+t+s,this.margin+e+s,l,d,r,h,c,p,g,!1,!1,!1,!1,u,m),this.drawText(x,2*this.margin+t+o,this.margin+e+s,v,this.nodeFontColor,"left","middle"),e+=o}e+=this.margin+s;var b=this.data.legend.pos.nodes.x,w=this.data.legend.pos.nodes.y,C=i,T=e-this.data.legend.pos.nodes.y;this.legendBox&&this.rectangle(b,w,C,T,!1,this.legendBoxColor,"open");var D=["rect",b,w,b+C,w+T];this.preScaleNetwork?this.addArea(D,[-1],"-legend-Nodes"):this.addArea(this.adjustNetworkObjects(D),[-1],"-legend-Nodes"),this.curLegendX=t,this.curLegendY=e}},this.drawNetworkLegendEdges=function(){if(this.data.legend.edges&&this.data.legend.edges.length>0){var t=null!=this.data.legend.pos.edges.x?this.data.legend.pos.edges.x:this.curLegendX,e=null!=this.data.legend.pos.edges.y?this.data.legend.pos.edges.y:this.curLegendY;this.data.legend.pos.edges.x=parseInt(t),this.data.legend.pos.edges.y=parseInt(e);for(var i=0,s=0,a=0;a<this.data.legend.edges.length;a++){this.data.legend.edges[a].id=this.getLegendId("edges",this.data.legend.edges[a].id);var r=this.data.legend.edges[a].color||this.nodeFontColor,h=this.data.legend.edges[a].type||"line",n=this.data.legend.edges[a].width||1,o=this.data.legend.edges[a].size?this.data.legend.edges[a].size*this.nodeFontSize:this.nodeFontSize,l=this.data.legend.edges[a].font?this.data.legend.edges[a].font*this.nodeFontSize*this.nodeScaleFontFactor:this.nodeFontSize*this.nodeScaleFontFactor,d=parseInt(l)+"Pt "+this.fontName,c=this.data.legend.edges[a].text||"",p=this.measureText(c,d);o=parseFloat(sprintf("%.1f",o)),i=Math.max(i,3*this.margin+o+p),s=l/2,e+=s,this.ctx.lineWidth=n*this.edgeWidth,this.drawLine(h,this.margin+t,this.margin+e+s,t+o,this.margin+e+s,r,!1,!1,0,0),this.drawText(c,2*this.margin+t+o,this.margin+e+s,d,this.nodeFontColor,"left","middle"),e+=l}e+=this.margin+s;var g=this.data.legend.pos.edges.x,u=this.data.legend.pos.edges.y,m=i,f=e-this.data.legend.pos.edges.y;this.legendBox&&this.rectangle(g,u,m,f,!1,this.legendBoxColor,"open");var v=["rect",g,u,g+m,u+f];this.preScaleNetwork?this.addArea(v,[-1],"-legend-Edges"):this.addArea(this.adjustNetworkObjects(v),[-1],"-legend-Edges"),this.curLegendX=t,this.curLegendY=e}},this.drawNetworkLegendText=function(){if(this.data.legend.text&&this.data.legend.text.length>0)for(var t=0,e=0;e<this.data.legend.text.length;e++){this.data.legend.text[e].id=this.getLegendId("text",this.data.legend.text[e].id);var i=null!=this.data.legend.text[e].x?this.data.legend.text[e].x:this.curLegendX,s=null!=this.data.legend.text[e].y?this.data.legend.text[e].y:this.curLegendY;this.data.legend.text[e].x=parseInt(i),this.data.legend.text[e].y=parseInt(s);var a=this.data.legend.text[e].boxed||this.legendBox,r=this.data.legend.text[e].margin||this.margin,h=this.setNetworkLegendMargins(r),n=this.data.legend.text[e].color||this.nodeFontColor,o=this.data.legend.text[e].text||"",l=this.data.legend.text[e].font?this.data.legend.text[e].font*this.nodeFontSize*this.nodeScaleFontFactor:this.nodeFontSize*this.nodeScaleFontFactor;l=parseInt(l);var d=l+"Pt "+this.fontName,c=this.measureText(o,d);t=l/2,this.drawText(o,h[3]+i,h[0]+s+t,d,n,"left","middle");var p=this.data.legend.text[e].x,g=this.data.legend.text[e].y,u=h[1]+h[3]+c,m=h[0]+h[2]+l;a&&this.rectangle(p,g,u,m,!1,this.legendBoxColor,"open"),s+=h[0]+h[2]+l;var f=["rect",p,g,p+u,g+m];this.preScaleNetwork?this.addArea(f,[-1],"-legend-Text"+e):this.addArea(this.adjustNetworkObjects(f),[-1],"-legend-Text"+e),this.curLegendX=i,this.curLegendY=s}},this.drawNetworkLegendDecorations=function(){if(this.data.legend.decorations&&this.data.legend.decorations.length>0){var t=null!=this.data.legend.pos.decorations.x?this.data.legend.pos.decorations.x:this.curLegendX,e=null!=this.data.legend.pos.decorations.y?this.data.legend.pos.decorations.y:this.curLegendY;this.data.legend.pos.decorations.x=parseInt(t),this.data.legend.pos.decorations.y=parseInt(e);for(var i=0,s=0,a=0;a<this.data.legend.decorations.length;a++){this.data.legend.decorations[a].id=this.getLegendId("decorations",this.data.legend.decorations[a].id);var r=this.data.legend.decorations[a].color||this.nodeFontColor,h=this.data.legend.decorations[a].outline?this.data.legend.decorations[a].outline:this.foreground,n=this.data.legend.decorations[a].shape||this.shapes[0],o=this.data.legend.decorations[a].size?this.data.legend.decorations[a].size*this.nodeFontSize:this.nodeFontSize,l=this.data.legend.decorations[a].width?this.data.legend.decorations[a].width:o,d=this.data.legend.decorations[a].height?this.data.legend.decorations[a].height:o,c=this.data.legend.decorations[a].pattern?this.data.legend.decorations[a].pattern:"closed",p=this.data.legend.decorations[a].rotate?this.data.legend.decorations[a].rotate*Math.PI/180:!1,g=this.data.legend.decorations[a].outlineWidth?this.data.legend.decorations[a].otlineWidth:!1,u=this.data.legend.decorations[a].font?this.data.legend.decorations[a].font*this.nodeFontSize*this.nodeScaleFontFactor:this.nodeFontSize*this.nodeScaleFontFactor,m=parseInt(u)+"Pt "+this.fontName,f=this.data.legend.decorations[a].text?this.data.legend.decorations[a].text:"",v=this.measureText(f,m);o=parseFloat(sprintf("%.1f",o)),i=Math.max(i,3*this.margin+o+v),s=o/2,e+=s,this.drawShape(n,this.margin+t+s,this.margin+e+s,l,d,r,h,c,p,g),this.drawText(f,2*this.margin+t+o,this.margin+e+s,m,this.nodeFontColor,"left","middle"),e+=o}e+=this.margin+s;var x=this.data.legend.pos.decorations.x,y=this.data.legend.pos.decorations.y,b=i,w=e-this.data.legend.pos.decorations.y;this.legendBox&&this.rectangle(x,y,b,w,!1,this.legendBoxColor,"open");var C=["rect",x,y,x+b,y+w];this.preScaleNetwork?this.addArea(C,[-1],"-legend-Decorations"):this.addArea(this.adjustNetworkObjects(C),[-1],"-legend-Decorations"),this.curLegendX=t,this.curLegendY=e}},this.setNetworkLegendMargins=function(t){if(isNaN(t)){var e=t.split(/[,\s]+/);return e.length>3?[parseInt(e[0]),parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]:3==e.length?[parseInt(e[0]),parseInt(e[1]),parseInt(e[2]),parseInt(e[1])]:2==e.length?[parseInt(e[0]),parseInt(e[1]),parseInt(e[0]),parseInt(e[1])]:[parseInt(e[0]),parseInt(e[0]),parseInt(e[0]),parseInt(e[0])]}return[parseInt(t),parseInt(t),parseInt(t),parseInt(t)]},this.drawNetworkProgressBar=function(t){if(!this.layoutDone){this.ctx.save(),this.ctx.fillStyle="#fff",this.ctx.strokeStyle="#fff";var e=((new Date).getTime()-this.preUpdateTime)/(1e3*this.layoutTime);e=Math.max(e,this.layoutProgress),t?(this.ctx.strokeRect(this.width/2-50,this.height/2-5,100,10),this.ctx.fillRect(this.width/2-50,this.height/2-5,100*e,10),this.drawText("Calculating ...",this.width/2-50,this.height/2+10,this.showAnimationFont,this.showAnimationFontColor,"left","top")):(this.ctx.strokeRect(this.width-110,this.height-20,100,10),this.ctx.fillRect(this.width-110,this.height-20,100*e,10)),this.ctx.restore()}},this.packSubNetworks=function(){var t=this,e=function(e,i,s){for(var a=0;a<e.length;a++)t.modifyXYNode(e[a],i,s)},i=function(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s};i.prototype.fits=function(t){return t.w>=this.w&&t.h>=this.h},i.prototype.sameSize=function(t){return t.w==this.w&&t.h==this.h};var s=function(){this.l=null,this.r=null,this.a=null,this.f=!1};s.prototype.insert=function(t){if(null!=this.l)return this.l.insert(t)||this.r.insert(t);if(this.f)return null;if(!t.fits(this.a))return null;if(t.sameSize(this.a))return this.f=!0,this;this.l=new s,this.r=new s;var e=this.a.w-t.w,a=this.a.h-t.h,r=this.a;return e>a?(this.l.a=new i(r.x,r.y,t.w,r.h),this.r.a=new i(r.x+t.w,r.y,r.w-t.w,r.h)):(this.l.a=new i(r.x,r.y,r.w,t.h),this.r.a=new i(r.x,r.y+t.h,r.w,r.h-t.h)),this.l.insert(t)};for(var a=0;a<this.subNetworks.length;a++)this.subNetworks[a].mnm=this.findNetworkXYRange(this.subNetworks[a].nodes),this.subNetworks[a].w=this.subNetworks[a].mnm.maxX-this.subNetworks[a].mnm.minX,this.subNetworks[a].h=this.subNetworks[a].mnm.maxY-this.subNetworks[a].mnm.minY,e(this.subNetworks[a].nodes,this.subNetworks[a].mnm.minX,this.subNetworks[a].mnm.minY);for(var r=this.subNetworks[1],a=0;a<this.subNetworks.length;a++)this.subNetworks[a].w+=.5*r.w,this.subNetworks[a].h+=.5*r.h;var h=this.subNetworks[0],n=h.nodes.length/this.data.nodes.length,o=(2+n)*(this.x/this.y)*h.w,l=(2+n)*(this.y/this.x)*h.h,d=new s;d.a=new i(0,0,o,l);for(var a=0;a<this.subNetworks.length;a++){var c=this.subNetworks[a],p=new i(0,0,c.w,c.h),g=d.insert(p);g&&e(this.subNetworks[a].nodes,-g.a.x,-g.a.y)}this.scaleFactor*=.1},this.setNetworkMinMaxRangeXY=function(){if(!this.networkFreeze||null==this.rangeX||null==this.rangeY){if(this.subNetworks&&!this.isAnimation&&(this.packSubNetworks(),this.isAnimation||(this.subNetworks=!1)),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=0,this.maxY=0,this.is3DNetwork&&this.layoutDone)for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t],i=e.width?e.width:e.size?this.nodeSize*e.size:this.nodeSize,s=e.height?e.height:e.size?this.nodeSize*e.size:this.nodeSize;e.hide||(this.minX=Math.min(this.minX,e.x3d-i/2),this.minY=Math.min(this.minY,e.y3d-s/2),this.maxX=Math.max(this.maxX,e.x3d+i/2),this.maxY=Math.max(this.maxY,e.y3d+s/2))}else for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t],i=e.width?e.width:e.size?this.nodeSize*e.size:this.nodeSize,s=e.height?e.height:e.size?this.nodeSize*e.size:this.nodeSize;e.hide||(this.minX=Math.min(this.minX,e.x-i/2),this.minY=Math.min(this.minY,e.y-s/2),this.maxX=Math.max(this.maxX,e.x+i/2),this.maxY=Math.max(this.maxY,e.y+s/2))}this.minX-=3*this.nodeSize,this.minY-=3*this.nodeSize,this.maxX+=3*this.nodeSize,this.maxY+=3*this.nodeSize,this.rangeX=this.maxX-this.minX,this.rangeY=this.maxY-this.minY}},this.setNetworkRotation=function(){if(this.is3DNetwork&&this.layoutDone){var t=[],e=[],i=[];this.set3DRotation();for(var s=0;s<this.data.nodes.length;s++){e.push(s);var a=this.data.nodes[s],r=this.get3DTransfrom(a.x,a.y,a.z);a.x3d=r[0],a.y3d=r[1],a.z3d=r[2],t.push(Math.sqrt(a.x3d*a.x3d+a.y3d*a.y3d+a.z3d*a.z3d))}e.sort(function(e,i){return t[i]-t[e]});for(var h=0;h<this.data.nodes.length;h++){var s=e[h],a=this.data.nodes[s];i.push(a)}this.data.nodes=i,this.setNodeIndices()}else if(0!=this.network2DRotate){this.network2DRotate>=Math.abs(360)&&(this.network2DRotate=0);for(var n=Math.PI*this.network2DRotate/360,s=0;s<this.data.nodes.length;s++){var a=this.data.nodes[s];if(null!=a.x&&null!=a.y){var o=a.x,l=a.y;a.x=o*Math.cos(n)-l*Math.sin(n),a.y=l*Math.cos(n)+o*Math.sin(n)}}if(this.data.legend.pos.nodes.x&&this.data.legend.pos.nodes.y){var o=this.data.legend.pos.nodes.x,l=this.data.legend.pos.nodes.y;this.data.legend.pos.nodes.x=o*Math.cos(n)-l*Math.sin(n),this.data.legend.pos.nodes.y=l*Math.cos(n)+o*Math.sin(n)}if(this.data.legend.pos.edges.x&&this.data.legend.pos.edges.y){var o=this.data.legend.pos.edges.x,l=this.data.legend.pos.edges.y;this.data.legend.pos.edges.x=o*Math.cos(n)-l*Math.sin(n),this.data.legend.pos.edges.y=l*Math.cos(n)+o*Math.sin(n)}if(this.data.legend.text)for(var s=0;s<this.data.legend.text.length;s++){var o=this.data.legend.text[s].x,l=this.data.legend.text[s].y;this.data.legend.text[s].x=o*Math.cos(n)-l*Math.sin(n),this.data.legend.text[s].y=l*Math.cos(n)+o*Math.sin(n)}this.network2DRotate=0}},this.setNetworkScaleFactor=function(){(!this.networkFreeze||null==this.scaleFactor||isNaN(this.scaleFactor))&&(this.scaleFactor="radial"==this.networkLayoutType?.3:Math.min(this.x/(this.maxX-this.minX),this.y/(this.maxY-this.minY))),this.scaleFactor*=this.zoom,this.networkFreeze&&(this.zoomGlobal*=this.zoom,this.zoom=1),this.widthBounds=this.x/this.scaleFactor,this.heightBounds=this.y/this.scaleFactor,this.offsetX=this.widthBounds/2-(this.minX+this.maxX)/2+this.panningX+this.panningGlobalX,this.offsetY=this.heightBounds/2-(this.minY+this.maxY)/2+this.panningY+this.panningGlobalY},this.optimizeNetworkLayout=function(){if(this.data.nodes.length>0){this.isAnimation=!0,this.setInitialForceDirectedLayout(),this.preUpdateTime=(new Date).getTime();var t=1e3*this.layoutTime,e=this.maxIterations*this.nodes.length,i=this,s=function(){this.update=function(){var a=(new Date).getTime();(i.updateForceDirectedLayout(30)||a-i.preUpdateTime>t||i.iteration>e)&&(i.layoutDone=!0,clearInterval(s),i.isAnimation=!1,i.iteration=0),i.renderNetwork()};var s=setInterval(this.update,30)};s.call()}},this.getAngle=function(t,e,i,s,a){var r=180*Math.atan2(s-e,i-t)/Math.PI%360;for(a||(a=0);a>r;)r+=360;for(;r>=a+360;)r-=360;return r},this.getPolar=function(t,e){return{x:this.networkXCenter+t*Math.cos(e*Math.PI/180),y:this.networkYCenter+t*Math.sin(e*Math.PI/180)}},this.setNodePositions=function(t){for(var e in t){var i=this.data.nodes[this.data.nodeIndices[e]];i.x=t[e].x,i.y=t[e].y}},this.animateRadialNodePositions=function(){this.isAnimation=!0;var t=this,e=50,i=0;for(var s in t.finalRadialNodePositions){0==this.initialRadialNodePositions[s].r&&(this.initialRadialNodePositions[s].a=this.finalRadialNodePositions[s].a),0==this.finalRadialNodePositions[s].r&&(this.finalRadialNodePositions[s].a=this.initialRadialNodePositions[s].a);var a=this.finalRadialNodePositions[s].a-this.initialRadialNodePositions[s].a;0>a&&(a+=360),a>360&&(a-=360),a>180&&(a-=360),this.finalRadialNodePositions[s].a=this.initialRadialNodePositions[s].a+a}var r=function(){this.update=function(){var a={},r=.5*Math.atan(i/e*10-5)/Math.atan(5)+.5,h=1-r;for(var n in t.finalRadialNodePositions){var o=h*t.initialRadialNodePositions[n].a+r*t.finalRadialNodePositions[n].a,l=h*t.initialRadialNodePositions[n].r+r*t.finalRadialNodePositions[n].r,d=t.getPolar(l,o);a[n]={x:d.x,y:d.y}}i>=e&&(clearInterval(s),t.isAnimation=!1,a=t.finalRadialNodePositions),i++,t.setNodePositions(a),t.renderNetwork(),!t.isAnimation&&"radial"==t.networkLayoutType&&t.showNetworkRadialLayout&&t.renderRadialLayout()};var s=setInterval(this.update,50)};r.call()},this.setFinalRadialNodePositions=function(t,e){if(this.finalRadialNodePositions||(this.finalRadialNodePositions={}),!this.nodeParentHood.drawn.hasOwnProperty(t)){var i,s,a,r,h,n=this.data.nodes[this.data.nodeIndices[t]];if(!n.hide&&!n.hiddenParent){if(this.nodeParentHood[t].children.length>1&&!e){var o=[],l=this;this.orderRadialNetwork&&this.nodeParentHood[t].children.sort(function(t,e){return l.orderRadialNetwork[t]-l.orderRadialNetwork[e]});for(var d=0;d<this.nodeParentHood[t].children.length;d++)this.nodeParentHood[this.nodeParentHood[t].children[d]].level>this.nodeParentHood[t].level&&(this.setFinalRadialNodePositions(this.nodeParentHood[t].children[d]),o.push(this.nodeParentHood[this.nodeParentHood[t].children[d]].angle));o.length>0?r=1==o.length?o[0]:o[0]>o[o.length-1]?(o[0]+o[o.length-1])%360/2:(o[0]+o[o.length-1])/2:this.setFinalRadialNodePositions(t,!0)}else r=this.networkCurrentAngle,this.networkCurrentAngle=this.networkCurrentAngle+this.networkAngleStep;a=this.networkDepth-1-this.nodeParentHood[t].level,i=this.getPolar(this.networkRadialRadius,r),s=this.shortenLine(this.networkXCenter,this.networkYCenter,i.x,i.y,0,this.networkLevelSize*a,"line"),h=this.lineLength(this.networkXCenter,this.networkYCenter,s[2],s[3]),0==this.nodeParentHood[t].level&&(r=0,h=0),this.finalRadialNodePositions[n.id]={x:s[2],y:s[3],r:h,a:r%360},this.nodeParentHood.drawn[t]=!0,this.nodeParentHood[t].angle=r}}},this.setInitialRadialNodePositions=function(){if(this.initialRadialNodePositions)this.initialRadialNodePositions=this.finalRadialNodePositions,this.finalRadialNodePositions=!1;else{this.initialRadialNodePositions={};for(var t=0;t<this.data.nodes.length;t++)if(!this.data.nodes[t].hide&&!this.data.nodes[t].hiddenParent){var e=this.data.nodes[t];this.initialRadialNodePositions[e.id]={x:this.networkXCenter,y:this.networkYCenter,r:0,a:0}}}},this.setRadialNetwrorkLayout=function(){this.data.nodes.length>0&&(this.networkLevelSize=4*this.x/(2*this.networkDepth),this.networkAngleStep=360/this.networkDivisions,this.networkCurrentAngle=this.networkCurrentAngle?this.networkCurrentAngle:0,this.networkRadialRadius=this.networkLevelSize*(this.networkDepth-1),this.setInitialRadialNodePositions(),this.setFinalRadialNodePositions(this.networkRoot),this.layoutDone=!0,this.showAnimation?this.animateRadialNodePositions():(this.setNodePositions(this.finalRadialNodePositions),this.renderNetwork()))},this.createRandomNetwork=function(t){var e={},i={};if(t)e=this.createMesh();else{e.nodes=[];for(var s=Math.floor(Math.random()*this.randomNetworkNodes)+1,a=0;s>a;a++){var r={},h=Math.floor(Math.random()*this.shapes.length),n=Math.floor(Math.random()*this.colors.length);r.id="id"+a,r.shape=this.shapes[h],r.color=this.colors[n],r.size=1,e.nodes.push(r)}e.edges=[];for(var a=0;a<e.nodes.length;a++){for(var o=e.nodes[a],l=[],d=0;d<Math.floor(Math.random()*this.randomNetworkNodeEdgesMax)-1;d++)l.push(Math.floor(Math.random()*s));for(var d=0;d<l.length;d++){var c=e.nodes[l[d]],p=a+":"+l[d],g=l[d]+":"+a;if(o.id!=c.id&&!i.hasOwnProperty(p)&&!i.hasOwnProperty(p)){var u={},m=Math.floor(Math.random()*this.lines.length),n=Math.floor(Math.random()*this.colors.length);u.id1=o.id,u.id2=c.id,u.width=1,u.type=this.lines[m],u.color=this.colors[n],e.edges.push(u),i[p]=1,i[g]=1}}}}if(this.reduceRandomNetwork){var f=this.normalizeGraph(e);e=this.reduceNetwork(f,function(t,e){return t.nodes&&e.nodes?t.nodes.length>=e.nodes.length?t:e:t.nodes?t:e.nodes?e:null})}if(e.nodes.length<5)return this.createRandomNetwork(!0);for(var l=[],a=0;a<e.edges.length;a++)e.edges[a].id1&&e.edges[a].id2&&l.push(e.edges[a]);return e.edges=l,e},this.createMesh=function(){var t={};t.nodes=[],t.edges=[];for(var e=7,i=this,s=0;e*e>s;s++){var a={},r=Math.floor(Math.random()*this.shapes.length),h=Math.floor(Math.random()*this.colors.length);a.id="id"+s,a.shape=this.shapes[r],a.color=this.colors[h],a.size=1,t.nodes.push(a)}for(var n=function(e,s){var a={},r=Math.floor(Math.random()*i.lines.length),h=Math.floor(Math.random()*i.colors.length);return a.id1=t.nodes[e].id,a.id2=t.nodes[s].id,a.width=1,a.type=i.lines[r],a.color=i.colors[h],a},s=0;s<t.nodes.length;s++)0!=Math.floor(Math.random()*e)&&(s+1<t.nodes.length&&(s+1)%e!=0&&t.edges.push(n(s,s+1)),s+e<t.nodes.length&&t.edges.push(n(s,s+e)));return t},this.setNodeChildren=function(t,e,i){this.networkDepth=e>this.networkDepth?e:this.networkDepth;var s=this.data.nodes[this.data.nodeIndices[t]];if(!s.hide&&!s.hiddenParent){var a=this.edgesForNode(this.data.edges,t);if(this.nodeParentHood.hasOwnProperty(t)){this.nodeParentHood[t].level=e<this.nodeParentHood[t].level?e:this.nodeParentHood[t].level;for(var r=0;r<this.nodeParentHood[t].children.length;r++){var h=this.nodeParentHood[t].children[r];this.nodeParentHood[h]&&e+1<this.nodeParentHood[h].level&&(this.nodeParentHood[h].level=e+1,this.nodeParentHood[h].parent=t)}}else if(1==a.length&&this.networkDivisions++,a.length>0)for(var r=0;r<a.length;r++)this.nodeParentHood[t]||(this.nodeParentHood[t]={},this.nodeParentHood[t].children=[],this.nodeParentHood[t].level=e,this.nodeParentHood[t].angle=0,this.nodeParentHood[t].parent=i),this.nodeParentHood[t].level=e<this.nodeParentHood[t].level?e:this.nodeParentHood[t].level,a[r].id1==t?(this.nodeParentHood[t].children.push(a[r].id2),this.setNodeChildren(a[r].id2,e+1,t)):a[r].id2==t&&(this.nodeParentHood[t].children.push(a[r].id1),this.setNodeChildren(a[r].id1,e+1,t))}},this.setNodeParentHood=function(){if(this.nodeParentHood={},"radial"==this.networkLayoutType)this.networkRoot||(this.networkRoot=this.data.nodes[0].id),this.nodeParentHood.drawn={},this.networkDepth=0,this.networkDivisions=0,this.setNodeChildren(this.networkRoot,0,!1);else{for(var t=0;t<this.data.nodes.length;t++)this.data.nodes[t].hide||(this.data.nodes[t].parentNode||this.data.nodes[t].hideChildren)&&(this.data.nodes[t].parentNode&&!this.nodeParentHood.hasOwnProperty(this.data.nodes[t].parentNode)&&(this.nodeParentHood[this.data.nodes[t].parentNode]={}),this.data.nodes[t].parentNode&&(this.nodeParentHood[this.data.nodes[t].parentNode].children||(this.nodeParentHood[this.data.nodes[t].parentNode].children=[]),this.nodeParentHood[this.data.nodes[t].parentNode].children.push(this.data.nodes[t].id),this.data.nodes[this.data.nodeIndices[this.data.nodes[t].parentNode]].hideChildren&&(this.data.nodes[t].hiddenParent=!0)),this.data.nodes[t].hideChildren&&(this.nodeParentHood.hasOwnProperty(this.data.nodes[t].id)||(this.nodeParentHood[this.data.nodes[t].id]={}),this.nodeParentHood[this.data.nodes[t].id].hideChildren=!0));for(var e in this.nodeParentHood)this.data.nodes[this.data.nodeIndices[e]].hideChildren||this.isParentHidden(e)?this.hideUnhideChildrenNodes(e,!0):this.nodeParentHood[e].children&&this.hideUnhideChildrenNodes(e,!1)}},this.isParentHidden=function(t){var e=this.findParentNodes(t);if(e)for(var i=0;i<e.length;i++)if(this.data.nodes[this.data.nodeIndices[e[i]]].hideChildren)return!0;return!1},this.findParentNodes=function(t,e){if(this.data.nodes[this.data.nodeIndices[t]].parentNode){var i=this.data.nodes[this.data.nodeIndices[t]].parentNode;return e||(e=[]),e.push(i),e=this.findParentNodes(i,e)}return e?e.reverse():!1},this.findChildrenNodeIndices=function(t,e){if(e||(e=[]),"radial"!=this.networkLayoutType&&this.nodeParentHood[t]&&this.nodeParentHood[t].children)for(var i=0;i<this.nodeParentHood[t].children.length;i++)e.push(this.data.nodeIndices[this.nodeParentHood[t].children[i]]),e=this.findChildrenNodeIndices(this.nodeParentHood[t].children[i],e);return e.length>0?e:!1},this.hasChildren=function(t){return this.nodeParentHood[t]&&this.nodeParentHood[t].children},this.findVisibleParentNode=function(t){var e=this.findParentNodes(t);if(e){e.reverse();for(var i=0;i<e.length;i++)if(!this.nodes[e[i]].hide&&!this.nodes[e[i]].hiddenParent)return this.nodes[e[i]]}return!1},this.collateNetworks=function(){if(this.data.nodes.length>0){var t=this.normalizeGraph({nodes:this.data.nodes,edges:this.data.edges
});if(t.length>1){for(var e=[],i=0;i<t.length;i++)e.push(i);e.sort(function(e,i){return t[i].nodes.length-t[e].nodes.length}),this.subNetworks=[];for(var s=0;s<t.length;s++){for(var i=e[s],a=[],r=[],h=t[i].nodes.length,n=t[i].edges.length,o=h/this.data.nodes.length,l=o*this.x*Math.log(t.length),d=o*this.y*Math.log(t.length),c=l*d,p=0;p<t[i].nodes.length;p++)a.push(t[i].nodes[p].id);for(var p=0;p<t[i].edges.length;p++)"function"!=typeof t[i].edges[p]&&r.push(t[i].edges[p]);this.subNetworks.push({nodes:a,edges:r,x:l,y:d,area:c,networkForceConstant:Math.sqrt(c/h),temperature:h+Math.floor(Math.sqrt(n)),minimumTemperature:1,initialTemperature:h+Math.floor(Math.sqrt(n)),initialProgress:null,layoutProgress:0,layoutDone:!1})}}}},this.setObjectAttributes=function(){this.colorNodeBy&&this.setAllObjectAttributes("nodes","color",this.colorNodeBy),this.shapeNodeBy&&this.setAllObjectAttributes("nodes","shape",this.shapeNodeBy),this.sizeNodeBy&&this.setAllObjectAttributes("nodes","size",this.sizeNodeBy),this.sizeDecorationBy&&this.setAllObjectAttributes("nodes","size",this.sizeDecorationBy,!0),this.colorEdgeBy&&this.setAllObjectAttributes("edges","color",this.colorEdgeBy),this.shapeEdgeBy&&this.setAllObjectAttributes("edges","shape",this.shapeEdgeBy),this.sizeEdgeBy&&this.setAllObjectAttributes("edges","size",this.sizeEdgeBy)},this.setDecorationsRangeUnits=function(){this.decorationsRange=[];var t={},e={};if(this.showDecorations&&this.decorations.length>0){for(var i=[],s=0;s<this.data.nodes.length;s++)for(var a=this.data.nodes[s],r=0;r<this.decorations.length;r++)if(a[this.decorations[r]]||a.decorations&&a.decorations[this.decorations[r]]){var h=a[this.decorations[r]]?a[this.decorations[r]]:a.decorations[this.decorations[r]];if(this.isObject(h))if("stacked"==this.decorationsType){var n=0;for(var o in h)isNaN(h[o])||(e[o]=!0,n+=h[o]);i.push(n)}else if("stackedpercent"==this.decorationsType){for(var o in h)isNaN(h[o])||(e[o]=!0);i=[0,100]}else{if("heatmap"!=this.decorationsType)return void alert("Ooops! canvasXpress does not support "+this.decorationsType+" for this multidimensional plotting");for(var o in h)isNaN(h[o])||(e[o]=!0,i.push(h[o]))}else(!isNaN(a[this.decorations[r]])||a.decorations&&!isNaN(a.decorations[this.decorations[r]]))&&i.push(a[this.decorations[r]]?a[this.decorations[r]]:a.decorations[this.decorations[r]])}this.decorationsRange=this.range(i),"stacked"==this.decorationsType&&(this.decorationsRange[0]=0);var l=this.decorationsRange[1]-this.decorationsRange[0];0==l&&(this.decorationsRange[1]=this.max(i)+1);var d=this.decorationsType.match(/stacked/)?this.decorationsRange[0]:this.decorationsRange[0]-.05*l;d>0&&(this.decorationsRange[0]=d,l=this.decorationsRange[1]-this.decorationsRange[0]),this.decorationsUnits=this.decorationsHeight/l,this.data.legend||(this.data.legend={}),this.data.legend.decorations=[];for(var s=0;s<this.decorations.length;s++)if(this.decorationsColors[s])t[this.decorationsColors[s]]=!0,this.data.legend.decorations.push({shape:this.decorationsProperties[this.decorations[s]]&&this.decorationsProperties[this.decorations[s]].shape?this.decorationsProperties[this.decorations[s]].shape:"circle",color:this.decorationsProperties[this.decorations[s]]&&this.decorationsProperties[this.decorations[s]].color?this.decorationsProperties[this.decorations[s]].color:this.decorationsColors[s],text:this.decorations[s],size:.5,font:.5});else for(var r=0;r<this.colors.length;r++)if(!t.hasOwnProperty(this.colors[r])){var c=this.decorationsProperties[this.decorations[s]]&&this.decorationsProperties[this.decorations[s]].color?this.decorationsProperties[this.decorations[s]].color:this.colors[r],p=this.decorationsProperties[this.decorations[s]]&&this.decorationsProperties[this.decorations[s]].shape?this.decorationsProperties[this.decorations[s]].shape:"circle";this.decorationsColors[s]=c,t[c]=!0,this.data.legend.decorations.push({shape:p,color:c,text:this.decorations[s],size:.5,font:.5});break}var s=this.decorations.length;for(var o in e){if(this.decorationsColors[s])t[this.decorationsColors[s]]=!0,this.data.legend.decorations.push({shape:this.decorationsProperties[o]&&this.decorationsProperties[o].shape?this.decorationsProperties[o].shape:"square",color:this.decorationsProperties[o]&&this.decorationsProperties[o].color?this.decorationsProperties[o].color:this.decorationsColors[s],text:o,size:.5,font:.5});else for(var r=0;r<this.colors.length;r++)if(!t.hasOwnProperty(this.colors[r])){var c=this.decorationsProperties[o]&&this.decorationsProperties[o].color?this.decorationsProperties[o].color:this.colors[r],p=this.decorationsProperties[o]&&this.decorationsProperties[o].shape?this.decorationsProperties[o].shape:"square";this.decorationsColors[s]=c,t[c]=!0,this.data.legend.decorations.push({shape:p,color:c,text:o,size:.5,font:.5});break}s++}}},this.recalculateLayout=function(){this.calculateLayout=!0,this.initializeNetwork()},this.drawNetworkPlot=function(){this.showAnimationFont=this.showAnimationFontSize+"Pt "+this.fontName,this.setNodeParentHood(),this.setObjectAttributes(),this.setDecorationsRangeUnits(),this.calculateLayout?(this.collateNetworks(),this.setNetworkPrivateParams(),"radial"==this.networkLayoutType?this.setRadialNetwrorkLayout():this.optimizeNetworkLayout(),this.calculateLayout=!1):(this.layoutDone=!0,"radial"==this.networkLayoutType&&this.showAnimation?this.setRadialNetwrorkLayout():this.renderNetwork()),this.networkFreezeOnLoad&&this.layoutDone&&(this.networkFreezeOnLoad=!1,this.networkFreeze=!0)},this.initializeNetwork=function(){if(this.setNetworkDimensions(),!this.nodes&&this.data.nodes&&this.setNodes(),this.randomNetwork){var t=this.createRandomNetwork();this.data.nodes=t.nodes,this.data.edges=t.edges,this.setAllNodesVisible(),this.setNodes(),this.layoutDone=!1}this.drawNetworkPlot()},t||this.initializeNetwork()},CanvasXpress.prototype.Genome=function(){this.setGenomeSubtracks=function(){this.subtracks=[],this.subtracksInfo=[],this.y=this.margin;for(var t=this.marginTop+this.top,e=0,i=this.xAxisMin*this.xAxisUnit,s=this.xAxisMax*this.xAxisUnit,a=0;a<this.data.tracks.length;a++){var r,h,n,o,l=[],d=[],c=0,p=this.data.tracks[a],g=p.data,u=p.type?p.type:this.featureTypeDefault,m=p.height?p.height:this.featureHeightDefault,f=p.subtracksMax||this.subtracksMaxDefault,v=p.bumpSpace?p.bumpSpace:0;if(!p.hide){if(p.name&&!p.hideName&&(this.y+=this.trackNameFontSize+2*this.margin),p.startY=this.marginTop+this.top+this.y,this.subtracks[a]=[],this.featureStaggered){for(var x=0;x<g.length;x++){var y=g[x],b=this.shortenText(y.label||y.name||y.id,this.maxFeatureStringLen),w=y.hideName||p.hideFeatureNames?0:this.measureText(b,this.featureNameFont)+3*this.margin,C=y.data;if(!y.hide){if(y.index=x,y.counter=e++,"box"==u)r=this.getGenomeBoxRange(C),h=r[0]*this.xAxisUnit,n=(r[1]+v)*this.xAxisUnit,y.showDir&&this.xAxisUnit>.001&&("right"==y.dir?n+=11:h-=11),n=Math.max(h+w,n);else if("sequence"==u){var T=this.setGenomeGaps(y.gaps,y.sequence.length,y.dir);y.offsetLeft&&!y.offset&&(y.offset=y.offsetLeft-(y.sequence.length+T.total)+1),h=y.offset*this.xAxisUnit,n=h+(y.sequence.length+T.total+v)*this.xAxisUnit,n=Math.max(h+w,n)}else h=(y.offset+v)*this.xAxisUnit,n=p.autowidth&&this.isArray(C)?h+C.length*this.xAxisUnit:h+p.width?p.width:this.featureWidthDefault,n=Math.max(h+w,n);o=h>=i&&s>h?!0:n>i&&s>=n?!0:i>=h&&n>=s?!0:!1,l.push([h,n,o,x])}}if(l.length>0){l.sort(function(t,e){return t[0]-e[0]});for(var x=0;x<l.length;x++)if(l[x][2]){o=!1;for(var D=0;D<d.length;D++)if(n=d[D][d[D].length-1][1],l[x][0]>n){d[D].push(l[x]),o=!0;break}o||d.push([l[x]])}for(var x=0;x<d.length;x++)if(f>x){this.subtracks[a][x]=[],c+=d[x].length;for(var S=0,A=0,k=0,D=0;D<d[x].length;D++)y=g[d[x][D][3]],this.subtracks[a][x].push(d[x][D][3]),this.subtracksInfo[y.counter]={track:a,subtrack:x,index:y.index,name:y.label||y.name||y.id,start:t+this.y},"box"==u?(S=Math.max(S,this.getBoxFeatureHeight(y)),A=Math.max(A,y.translatesTop||0),k=Math.max(k,y.translatesBottom||0)):"sequence"==u&&(S=Math.max(S,this.getSequenceFeatureHeight(y)));this.isNameInSubtrack(p,this.subtracks[a][x])||(this.y+=this.featureNameFontSize+this.margin),this.y+=m+this.margin,("box"==u||"sequence"==u)&&(this.y+=S);for(var D=0;D<d[x].length;D++)y=g[d[x][D][3]],this.subtracksInfo[y.counter].end=t+this.y,this.subtracksInfo[y.counter].maxHeight=S,this.subtracksInfo[y.counter].translateTop=A,this.subtracksInfo[y.counter].translateBottom=k}}}else for(var x=0;x<g.length;x++){var y=g[x];y.hide||(y.index=x,y.counter=e++,f>x&&(c++,this.subtracks[a][x]=[x],this.subtracksInfo[y.counter]={track:a,subtrack:x,index:y.index,name:y.label||y.name||y.id,start:t+this.y},this.y+=m+this.margin,"box"==u?(this.subtracksInfo[y.counter].maxHeight=this.getBoxFeatureHeight(y),this.subtracksInfo[y.counter].translateTop=y.translatesTop||0,this.subtracksInfo[y.counter].translateBottom=y.translatesBottom||0,this.y+=this.subtracksInfo[y.counter].maxHeight):"sequence"==u&&(this.subtracksInfo[y.counter].maxHeight=this.getSequenceFeatureHeight(y),this.y+=this.subtracksInfo[y.counter].maxHeight),this.subtracksInfo[y.counter].end=t+this.y))}p.endY=this.y,p.displayedFeatures=c,p.totalFeatures=g.length,this.y+=2*this.margin}}},this.isNameInSubtrack=function(t,e){for(var i=0;i<e.length;i++){var s=e[i],a=t.data[s];if(!a.hideName&&!t.hideFeatureNames)return!1}return!0},this.getGenomeRange=function(t){for(var e=[],i=0;i<t.length;i++)for(var s=t[i].data,a=0;a<s.length;a++)e=e.concat(s[a]);return this.range(e)},this.getGenomeBoxRange=function(t){if(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i][0]),e.push(t[i][1]);return e.sort(function(t,e){return t-e}),[e[0],e[e.length-1]]}return[0,1]},this.setGenomeGaps=function(t,e,i){var s=0,a={total:s};if(t&&this.isArray(t)&&t.length>0){for(var r=0;r<t.length;r++){var h="left"==i?e-t[r][0]:t[r][0];a[h]=t[r][1],s+=t[r][1]}a.total=s}return a},this.getBoxFeatureHeight=function(t){if("low"!=this.genomeResolution&&(t.translate||t.sequence)){if("left"!=t.dir||t.sequenceRC||(t.sequenceRC=this.getReverseComplement(t.sequence)),t.cds&&!t.translate){var e=t.cds[0]%3||3;t.translate="left"==t.dir?[-1*e]:[e]}if(t.translate&&!t.translateRC&&this.featureTranslateShow&&(t.translateRC=this.translate(t.translate,"left"==t.dir?t.sequenceRC:t.sequence)),t.translate&&"high"==this.genomeResolution)return this.featureTranslateHeight*t.translate.length}return 0},this.getSequenceFeatureHeight=function(t){var e=0;if("high"==this.genomeResolution){if(t.trace&&this.featureTracesShow&&(e+=this.featureTraceHeight),t.translate&&this.featureTranslateShow)for(var i=0;i<t.translate.length;i++)e+=this.featureTranslateHeight;t.quality&&this.featureQualityShow&&(e+=this.featureQualityHeight),t.signalToNoise&&this.featureSignalToNoiseShow&&(e+=this.featureSignalToNoiseHeight),t.coordinate&&this.featureCoordinateShow&&(e+=this.featureCoordinateHeight)}else"medium"==this.genomeResolution&&t.trace&&this.featureTracesShow&&(e+=this.featureTraceHeight);return e},this.getReverseComplement=function(t){for(var e=t.split(""),i=[],s=0;s<e.length;s++)i.unshift(this.reverseComplement[e[s]]);return i.join("")},this.translate=function(t,e){for(var i={top:[],bottom:[]},s=e.split(""),a=this.getReverseComplement(e).split("").reverse(),r=0;r<t.length;r++){var h=t[r],n={seq:[],off:0,rf:t[r]};if("-1"==h){n.off=a.length%3;for(var o=a.length-1;o>=0;o-=3){var l=a[o]+a[o-1]+a[o-2],d=this.codon[l.toUpperCase()];n.seq.unshift(d?d[0]:"")}i.bottom.push(n)}else if("-2"==h){n.off=(a.length-1)%3;for(var o=a.length-2;o>=0;o-=3){var l=a[o]+a[o-1]+a[o-2],d=this.codon[l.toUpperCase()];n.seq.unshift(d?d[0]:"")}i.bottom.push(n)}else if("-3"==h){n.off=(a.length-2)%3;for(var o=a.length-3;o>=0;o-=3){var l=a[o]+a[o-1]+a[o-2],d=this.codon[l.toUpperCase()];n.seq.unshift(d?d[0]:"")}i.bottom.push(n)}else if("1"==h){n.off=0;for(var o=0;o<s.length;o+=3){var l=s[o]+s[o+1]+s[o+2],d=this.codon[l.toUpperCase()];n.seq.push(d?d[0]:"")}i.top.push(n)}else if("2"==h){n.off=1;for(var o=1;o<s.length;o+=3){var l=s[o]+s[o+1]+s[o+2],d=this.codon[l.toUpperCase()];n.seq.push(d?d[0]:"")}i.top.push(n)}else if("3"==h){n.off=2;for(var o=2;o<s.length;o+=3){var l=s[o]+s[o+1]+s[o+2],d=this.codon[l.toUpperCase()];n.seq.push(d?d[0]:"")}i.top.push(n)}}return i},this.setReverseTrace=function(t){if(!t.reversed){for(var e=t.A.length,i=t.T.reverse(),s=t.G.reverse(),a=t.C.reverse(),r=t.A.reverse(),h=[],n=0;n<t.peak.length;n++)h.unshift(e-t.peak[n]);t.A=i,t.C=s,t.G=a,t.T=r,t.peak=h,t.reversed=!0}},this.getCoordinateStep=function(){var t=1;if(.2*this.xAxisUnit>this.sequenceFontSize?t=1:.5*this.xAxisUnit>this.sequenceFontSize?t=5:1*this.xAxisUnit>this.sequenceFontSize?t=10:200*this.xAxisUnit>this.sequenceFontSize?t=20:500*this.xAxisUnit>this.sequenceFontSize?t=50:1e3*this.xAxisUnit>this.sequenceFontSize?t=100:2500*this.xAxisUnit>this.sequenceFontSize?t=250:5e3*this.xAxisUnit>this.sequenceFontSize?t=500:2e3*this.xAxisUnit>this.sequenceFontSize?t=1e3:1e4*this.xAxisUnit>this.sequenceFontSize?t=5e3:2e4*this.xAxisUnit>this.sequenceFontSize?t=1e4:1e5*this.xAxisUnit>this.sequenceFontSize?t=5e4:2e5*this.xAxisUnit>this.sequenceFontSize?t=1e5:2e6*this.xAxisUnit>this.sequenceFontSize?t=1e6:2e7*this.xAxisUnit>this.sequenceFontSize?t=1e7:2e8*this.xAxisUnit>this.sequenceFontSize?t=1e8:2e9*this.xAxisUnit>this.sequenceFontSize?t=1e9:2e10*this.xAxisUnit>this.sequenceFontSize?t=1e10:2e11*this.xAxisUnit>this.sequenceFontSize&&(t=1e11),this.xAxisRange/t>10){for(t*=.1*t;10*t>this.xAxisRange;)t*=.1;return t}return 3*t>this.xAxisRange?.1*t:t},this.drawBoxSequenceName=function(t,e,i,s,a,r,h,n,o,l){var d=this.featureNameFontSize/2,c=this.measureText(e,this.featureNameFont)+this.margin;o>=this.xAxisMin&&l<=this.xAxisMax?(r=n+r,this.addArea(this.drawText(e,r,h+d,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+t+":"+a])):o<=this.xAxisMin&&l>=this.xAxisMin?(r=n,this.addArea(this.drawText(e,r,h+d,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+t+":"+a])):o<=this.xAxisMax&&l>=this.xAxisMax?(r=n+r,this.addArea(this.drawText(e,r,h+d,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+t+":"+a])):r=n+r,"right"==i?this.drawShape("polygon",[r+c,r+c+2*this.margin,r+c],[h-1,h+d-1,h+2*d-1],!1,!1,s,s,"closed"):"left"==i&&this.drawShape("polygon",[r+c,r+c+2*this.margin,r+c+2*this.margin],[h+d-1,h-1,h+2*d-1],!1,!1,s,s,"closed")},this.drawGenomeLabels=function(){if(!this.featureStaggered)for(var t=this.marginLeft,e=this.marginTop+this.top+this.margin,i=this.featureNameFontSize/2,s=0,a=0;a<this.data.tracks.length;a++){var r=this.data.tracks[a],h=r.type||this.featureTypeDefault,n=r.height||this.featureHeightDefault;if(!r.hide){r.name&&!r.hideName&&(e+=this.trackNameFontSize+2*this.margin);for(var o=0;o<this.subtracks[a].length;o++){var l=this.subtracks[a][o];if(l)for(var d=0;d<l.length;d++){var c=l[d],p=r.data[c],g=p.counter,u=p.fill||r.fill||this.foreground,m=this.shortenText(p.label||p.name||p.id,this.maxFeatureStringLen),f=p.measureText||this.measureText(m,this.featureNameFont)+this.margin;if(p.measureText=f,p.hideName||r.hideFeatureNames||this.addArea(this.drawText(m,this.marginLeft,e+n/2,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+a+":"+g]),"box"==h||"sequence"==h){if("right"==p.dir?this.drawShape("polygon",[t+f,t+f+2*this.margin,t+f],[e,e+i,e+2*i],!1,!1,u,u,"closed"):"left"==p.dir&&this.drawShape("polygon",[t+f,t+f+2*this.margin,t+f+2*this.margin],[e+i,e,e+2*i],!1,!1,u,u,"closed"),p.translate&&"high"==this.genomeResolution){var v=this.featureNameFontSize-2+"Pt "+this.fontName;if(s=-4,p.trace&&this.featureTracesShow&&(s+=this.featureTraceHeight),p.translate&&this.featureTranslateShow){for(var x=0;x<p.translate.length;x++){var y="+"+p.translate[x];"+1"==y?(this.drawText(y,this.marginLeft+f,e+s+n/2,v,this.featureNameFontColor,"left","middle"),s+=this.featureTranslateHeight):"+2"==y?(this.drawText(y,this.marginLeft+f,e+s+n/2,v,this.featureNameFontColor,"left","middle"),s+=this.featureTranslateHeight):"+3"==y&&(this.drawText(y,this.marginLeft+f,e+s+n/2,v,this.featureNameFontColor,"left","middle"),s+=this.featureTranslateHeight)}s+=this.sequenceFontSize+2;for(var x=0;x<p.translate.length;x++){var y=p.translate[x];"-1"==y?(this.drawText(y,this.marginLeft+f,e+s+n/2,v,this.featureNameFontColor,"left","middle"),s+=this.featureTranslateHeight):"-2"==y?(this.drawText(y,this.marginLeft+f,e+s+n/2,v,this.featureNameFontColor,"left","middle"),s+=this.featureTranslateHeight):"-3"==y&&(this.drawText(y,this.marginLeft+f,e+s+n/2,v,this.featureNameFontColor,"left","middle"),s+=this.featureTranslateHeight)}}}e+="box"==h?this.getBoxFeatureHeight(p):this.getSequenceFeatureHeight(p)}e+=n+this.margin}}e+=2*this.margin}}},this.plotGenomeData=function(){for(var t,e,i,s,a,r,h=this.marginLeft+this.left,n=this.marginTop+this.top,o=this.xAxisUnit/2,l=0;l<this.data.tracks.length;l++){var d=this.data.tracks[l],c=d.type||this.featureTypeDefault,p=d.height||this.featureHeightDefault,g=(d.subtracksMax||this.subtracksMaxDefault,null!=this.setMaxY?this.setMaxY:null!=d.setMaxY?d.setMaxY:null),u=null!=this.setMinY?this.setMinY:null!=d.setMinY?d.setMinY:null,m=c.match(/bar|heatmap|line/)&&null!=g&&null!=u?[g,u]:c.match(/bar|heatmap|line/)?this.getGenomeRange(d.data):!1,f=c.match(/bar|line|box/)&&d.fill?d.fill:!1,v=c.match(/bar|line|box/)&&d.outline?d.outline:this.foreground,x=!1;if(t=h,!d.hide){if(m&&(null!=g&&(m[0]=g),null!=u&&(m[1]=u),s=m[1]-m[0],a=m[0]-.05*s,a>0&&(s=m[1]-a),r=p/Math.max(m[0]+1,s)),d.name&&!d.hideName){var y=d.name;d.displayedFeatures!=d.totalFeatures&&(y+=" (Showing "+d.displayedFeatures+" out of "+d.totalFeatures+")"),this.addArea(this.drawText(y,t,n+this.trackNameFontSize/2+this.margin,this.trackNameFont,this.trackNameFontColor,"left","middle"),["track-"+l]),n+=this.trackNameFontSize+2*this.margin}if(d.highlight&&"low"!=this.genomeResolution)for(var b=d.highlight,w=0;w<b.length;w++)if(b[w].offset){var C=b[w].color?b[w].color:this.colors[l%this.colors.length];t=this.marginLeft+this.left+(b[w].offset-.5-this.xAxisMin)*this.xAxisUnit,e=b[w].width?b[w].width*this.xAxisUnit:this.xAxisUnit,this.rectangle(t,d.startY,e,d.endY-d.startY+p,C,C)}for(var w=0;w<this.subtracks[l].length;w++){var T=this.subtracks[l][w];if(T){this.featureStaggered&&(x=this.isNameInSubtrack(d,T));for(var D=0;D<T.length;D++){var S=T[D],A=d.data[S],k=A.data,y=this.shortenText(A.label||A.name||A.id,this.maxFeatureStringLen);if("box"==c)k.length>0&&(this.setGenomeBoxExons(A),!this.featureStaggered||d.hideFeatureNames||A.hideName&&x||(A.hideName||(t=(A.start-this.xAxisMin)*this.xAxisUnit-o,this.drawBoxSequenceName(l,y,A.dir,A.fill||f,A.counter,t,n,h,A.start,A.end)),n+=this.featureNameFontSize+this.margin),this.drawGenomeBox(n,p,A,d),"high"==this.genomeResolution&&A.translate&&this.featureTranslateShow&&(n+=this.featureTranslateHeight*A.translate.length));else if("sequence"==c){var M=this.setGenomeGaps(A.gaps,A.sequence.length,A.dir);if(A.offsetLeft&&!A.offset&&(A.offset=A.offsetLeft-(A.sequence.length+M.total)+1),!this.featureStaggered||d.hideFeatureNames||A.hideName&&x||(A.hideName||(t=(A.offset-this.xAxisMin)*this.xAxisUnit-o,this.drawBoxSequenceName(l,y,A.dir,A.fill,A.counter,t,n,h,A.offset,A.offset+A.sequence.length+M.total)),n+=this.featureNameFontSize+this.margin),"high"==this.genomeResolution){if(A.trace&&this.featureTracesShow&&(this.drawGenomeTrace(n,A.counter,this.featureTraceHeight-1,A.offset,A.trace,M,A.dir),n+=this.featureTraceHeight),this.drawGenomeSequence(n,p,M,A,d),n+=p,A.translate&&this.featureTranslateShow)for(var I=0;I<A.translate.length;I++)n+=this.featureTranslateHeight;A.quality&&this.featureQualityShow&&(this.drawGenomeQuality(n,A.counter,this.featureQualityHeight-1,A.offset,A.quality,M,A.dir,d),n+=this.featureQualityHeight),A.signalToNoise&&this.featureSignalToNoiseShow&&(this.drawGenomeSignalToNoise(n,A.counter,this.featureSignalToNoiseHeight-1,A.offset,A.signalToNoise,M,A.dir,d),n+=this.featureSignalToNoiseHeight),A.coordinate&&this.featureCoordinateShow&&(this.drawGenomeCoordinate(n+1,A.counter,this.featureCoordinateHeight-1,A.offset,A.coordinate,A.sequence.length,M,A.dir,d),n+=this.featureCoordinateHeight),n-=p}else"medium"==this.genomeResolution?(A.trace&&this.featureTracesShow&&(this.drawGenomeTrace(n,A.counter,this.featureTraceHeight-1,A.offset,A.trace,M,A.dir),n+=this.featureTraceHeight),this.drawGenomeSequence(n,p,M,A,d),A.coordinate&&this.featureCoordinateShow&&this.drawGenomeCoordinate(n+1,A.counter,this.featureCoordinateHeight-1,A.offset,A.coordinate,A.sequence.length,M,A.dir,d)):(this.drawGenomeSequence(n,p,M,A,d),A.coordinate&&this.featureCoordinateShow&&this.drawGenomeCoordinate(n+1,A.counter,this.featureCoordinateHeight-1,A.offset,A.coordinate,A.sequence.length,M,A.dir,d))}else if("bar"==c){var L;L="high"==this.genomeResolution?this.xAxisUnit/k.length:d.autowidth?this.xAxisUnit:A.width?A.width:d.width?d.width:this.featureWidthDefault;var N=L*k.length;t=this.marginLeft+this.left+(A.offset-this.xAxisMin)*this.xAxisUnit-(N/2+1),!this.featureStaggered||d.hideFeatureNames||A.hideName&&x||(A.hideName||this.addArea(this.drawText(y,t,n+this.featureNameFontSize/2,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+l+":"+A.counter]),n+=this.featureNameFontSize+this.margin),this.addArea(["rect",t,n,t+k.length*L,n+p],[A.counter]),e=t;for(var z=m[1]<0?n:m[0]>=0?n+p:n+p-Math.abs(m[0]*r),F=0;F<k.length;F++){var P=A.fill||f,B=A.outline||v,X=this.isArray(P)&&P.length==k.length?P[F]:this.isArray(P)?P[0]:this.foreground,R=this.isArray(B)&&B.length==k.length?B[F]:this.isArray(B)?B[0]:this.foreground,b=k[F]*r;this.rectangle(e,z,L,-b,X,R),e+=d.autowidth?L:L+2}}else if("heatmap"==c){var L;L="high"==this.genomeResolution?this.xAxisUnit:d.autowidth?this.xAxisUnit:A.width?A.width:d.width?d.width:this.featureWidthDefault,t=this.marginLeft+this.left+(A.offset-this.xAxisMin)*this.xAxisUnit-(L/2+1),!this.featureStaggered||d.hideFeatureNames||A.hideName&&x||(A.hideName||this.addArea(this.drawText(y,t,n+this.featureNameFontSize/2,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+l+":"+A.counter]),n+=this.featureNameFontSize+this.margin),this.addArea(["rect",t,n,t+L,n+p],[A.counter]);var b=d.autowidth?p:p/k.length;i=n;for(var F=0;F<k.length;F++){var V=k[F],E=this.getHeatmapColor(m[0],m[1],V);isNaN(V)?this.rectangle(t,i,L,b,this.missingDataColor,this.missingDataColor):this.rectangle(t,i,L,b,E,E),d.autowidth?t+=L:i+=b}}else if("line"==c){var L=d.autowidth?this.xAxisUnit:A.width?A.width:d.width?d.width:this.featureWidthDefault;t=this.marginLeft+this.left+(A.offset-this.xAxisMin)*this.xAxisUnit,!this.featureStaggered||d.hideFeatureNames||A.hideName&&x||(A.hideName||this.addArea(this.drawText(y,t,n+this.featureNameFontSize/2,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+l+":"+A.counter]),n+=this.featureNameFontSize+this.margin),this.addArea(["rect",t,n,t+k.length*L,n+p],[A.counter]),i=n+p;for(var R=this.isArray(v)?v[0]:this.foreground,F=1;F<k.length;F++){var O=k[F-1]*r,G=k[F]*r;this.drawLine("line",t,2*p+i-O,t+L,2*p+i-G,R,!1,"butt"),t+=d.autowidth?L:L+2}}else"triangle"==c&&(t=this.marginLeft+this.left+(A.offset-this.xAxisMin)*this.xAxisUnit,f=A.fill?A.fill:this.foreground,v=A.outline?A.outline:this.foreground,!this.featureStaggered||d.hideFeatureNames||A.hideName&&x||(A.hideName||this.addArea(this.drawText(y,t,n+this.featureNameFontSize/2,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+l+":"+A.counter]),n+=this.featureNameFontSize+this.margin),this.addArea(this.drawShape("triangle",t,n+p/2,p,p,f,v,"closed"),[A.counter]));this.featureStaggered&&D<T.length-1&&(x||(n-=this.featureNameFontSize+this.margin),"box"==c?n-=this.getBoxFeatureHeight(A):"sequence"==c&&(n-=this.getSequenceFeatureHeight(A)))}n+=p+this.margin}}n+=2*this.margin}}},this.setGenomeBoxExons=function(t){var e=t.data;if((!t.start||!t.end)&&(t.start=e[0][0],t.end=e[e.length-1][1],t.sequence))for(var i="left"==t.dir?t.sequence.length:1,s=0;s<e.length;s++){if(2==e[s].length){var a=e[s][1]-e[s][0];"left"==t.dir?t.data[s].push(i-a,i):t.data[s].push(i,i+a)}i="left"==t.dir?i-(a+1):i+a+1}},this.setGenomeBoxArea=function(t,e,i){if(!i.insertion){var s=this.marginLeft+this.left,a=this.xAxisUnit/2,r=(this.xAxisUnit/4,(i.start-this.xAxisMin)*this.xAxisUnit-a),h=(i.end-this.xAxisMin)*this.xAxisUnit+a,n=this.subtracksInfo[i.counter].maxHeight;i.showDir&&this.xAxisUnit>.001?"right"==i.dir?this.addArea(["rect",s+r,t,s+h+10,t+e+n],[i.counter]):this.addArea(["rect",s+r-10,t,s+h,t+e+n],[i.counter]):this.addArea(["rect",s+r,t,s+h,t+e+n],[i.counter])}},this.drawGenomeBoxLines=function(t,e,i,s){for(var a,r,h,n,o=t+e/2,l="right"==i.dir?t:t+e,d=this.marginLeft+this.left,c=d+this.x,p=i.data,g=this.validateColor(i.fill||i.connect||s.connect||this.foreground),u=this.xAxisUnit/2,m=[],f=0;f<p.length;f++)a=(p[f][0]-this.xAxisMin)*this.xAxisUnit-u,r=(p[f][1]-this.xAxisMin)*this.xAxisUnit+u-a,i.insertion||!s.connect&&!i.connect||f<p.length-1&&(h=(p[f+1][0]-this.xAxisMin)*this.xAxisUnit,n=(a+r+h)/2,c>d+a+r&&d+h>d&&(Math.abs(l-o)<3?this.drawLine("line",d+a+r,o,d+h,o,g,!1,"butt"):(this.drawLine("line",d+a+r,o,d+n,l,g,!1,"butt"),this.drawLine("line",d+n,l,d+h-u,o,g,!1,"butt")))),i.insertion?(a=((p[f][0]+p[f][1])/2-this.xAxisMin)*this.xAxisUnit,m.push([d+a,t+e/2,u/2,e])):m.push([d+a,t,r,e]);return i.showDir&&this.xAxisUnit>.001&&!i.insertion&&(g=this.validateColor(i.showDir)||g,a=d+(i.start-this.xAxisMin)*this.xAxisUnit-u,r=d+(i.end-this.xAxisMin)*this.xAxisUnit+u,h=10,n=5,"right"==i.dir?c>r&&r+h>d&&(this.drawLine("line",r,o,r+h,o,g,!1,"butt"),this.drawLine("line",r+n,o-e/3,r+h,o,g,!1,"butt"),this.drawLine("line",r+n,o+e/3,r+h,o,g,!1,"butt")):c>a-h&&a>d&&(this.drawLine("line",a,o,a-h,o,g,!1,"butt"),this.drawLine("line",a-n,o-e/3,a-h,o,g,!1,"butt"),this.drawLine("line",a-n,o+e/3,a-h,o,g,!1,"butt"))),m},this.drawGenomeBoxAlleles=function(t,e,i,s,a){for(var r=s/a.length,h=0;h<a.length;h++)for(var n=a[h].split(""),o=(i-t)/n.length,l=e+r*h,d=0;d<n.length;d++){var c=t+o*d;"-"==n[d]&&(n[d]="Gap");var p="sequence"+n[d].toUpperCase()+"Color";this.rectangle(c,l,o,r,this[p],this[p])}},this.drawGenomeBox=function(t,e,i,s){var a=this,r=function(){return"low"!=a.genomeResolution&&i.sequence?"left"==i.dir?i.sequenceRC.split(""):i.sequence.split(""):!1},h=this.validateColor(i.fill||i.connect||s.fill||s.connect||this.foreground),n=i.outline||s.outline||h,o=h?"closed":"open",l=this.xAxisUnit/2,d=this.sequenceFontSize>e?e-3+"Pt "+this.fontName:this.sequenceFont,c=r(),p=i.translateRC,g=i.data,u=this.marginLeft+this.left,m=u+this.x;this.setGenomeBoxArea(t,e,i),"high"==this.genomeResolution&&p&&(t+=p.top.length*this.featureTranslateHeight);for(var f=this.drawGenomeBoxLines(t,e,i,s),v=0;v<f.length;v++){var x=f[v][0],y=x+f[v][2];if(m>x&&y>u){if("low"!=this.genomeResolution&&i.alleles&&i.alleles[v]&&!i.insertion&&this.drawGenomeBoxAlleles(x,t,y,e,i.alleles[v]),!p||"high"!=this.genomeResolution)if(i.insertion){var b="left"==i.dir?"triangle":"triangle2";this.drawShape(b,f[v][0],f[v][1],f[v][2],f[v][3],h,n,o),this.addArea(["rect",f[v][0]-f[v][2]/2,f[v][1]-f[v][3]/2,f[v][0]+f[v][2]/2,f[v][1]+f[v][3]/2],[i.counter])}else"low"!=this.genomeResolution&&i.sequence&&(i.sequenceFill||s.sequenceFill||this.sequenceFill)?this.rectangle(f[v][0],f[v][1],f[v][2],f[v][3],i.sequenceFill||s.sequenceFill||this.sequenceFill,n,o):this.rectangle(f[v][0],f[v][1],f[v][2],f[v][3],h,n,o);if("low"!=this.genomeResolution&&i.sequence&&!i.insertion){var w={},C=g[v][0],T=g[v][1],D="left"==i.dir?c.length-g[v][3]+1:g[v][2],S="left"==i.dir?c.length-g[v][2]+1:g[v][3],A=D-3;if(T-C!=S-D&&this.errors.push("Exon length for segment "+v+" in feature "+i.id+"is different to the box dimmension"),c.length>0){x+=l;for(var k=D;S>=k;k++){var M=c[k-1];if(M||this.errors.push("Nucleotide "+k+" in exon "+(v+1)+" in feature "+i.id+"not specified"),M){var I="sequence"+M.toUpperCase()+"Color";"high"==this.genomeResolution?p&&(!i.cds||i.cds&&k>=i.cds[0]&&k<=i.cds[1])?(this.drawTranslationTop(p,x,t,l,A,n,d,0,w),this.drawText(M,x,t+e/2,d,this[I],"center","middle"),this.drawTranslationBottom(p,x,t,l,A,n,d,0,w)):this.drawText(M,x,t+e/2,d,this[I],"center","middle"):this.rectangle(x-.5,t+1,1,e-2,this[I],this[I])}else"high"==this.genomeResolution?this.drawText("-",x,t+e/2,d,this.missingDataColor,"center","middle"):this.rectangle(x-.5,t+1,1,e-2,this.missingDataColor,this.missingDataColor);A++,x+=this.xAxisUnit}}}}}},this.drawGenomeTrace=function(t,e,i,s,a,r,h){if("low"!=this.genomeResolution){"left"!=h||a.reversed||this.setReverseTrace(a);var n=[],o=["A","C","G","T"],l=this.marginLeft+this.left+(s-1-this.xAxisMin)*this.xAxisUnit,d=this.marginLeft+this.left,c=this.marginLeft+this.left+this.x,p=t+i;if(null==a.max){for(var g=0;g<o.length;g++)n=n.concat(a[o[g]]);"Firefox"==this.browser?n=this.radixSort(n):n.sort(function(t,e){return t-e});var u=Math.floor(n.length*this.featureTraceTrim/100);a.max=n[n.length-(u+1)]}for(var m=i/a.max,f=o.length,g=0;f>g;g++){for(var v=0,x=[],y=[],b=l,w="sequence"+o[g].toUpperCase()+"Color",C=a.peak.length,T=0;C>T;T++)if(b>d-this.xAxisUnit&&c>b){var D=this.xAxisUnit/(a.peak[T]-v);if(r[T]){for(var S=Math.floor((a.peak[T]-v)/2),A=v;A<a.peak[T]-S;A++)x.push(b),y.push(p-Math.min(a.max,a[o[g]][A])*m),b+=D;v+=S,x.length>1&&y.length>1&&this.drawShape("path",x,y,!1,!1,this[w],this[w],"open"),x=[],y=[];for(var A=0;A<r[T];A++)b+=this.xAxisUnit}for(var A=v;A<=a.peak[T];A++)x.push(b),y.push(p-Math.min(a.max,a[o[g]][A])*m),b+=D;b-=D,v=a.peak[T]}else{if(r[T])for(var A=0;A<r[T];A++)b+=this.xAxisUnit;v=a.peak[T],b+=this.xAxisUnit}if(b>d-this.xAxisUnit&&c>b)for(var A=v;A<a[o[g]].length;A++)x.push(b),y.push(p-Math.min(a.max,a[o[g]][A])*m),b+=D;x.length>1&&y.length>1&&this.drawShape("path",x,y,!1,!1,this[w],this[w],"open")}}},this.drawTranslationTop=function(t,e,i,s,a,r,h,n,o){if(t.top&&t.top.length>0)for(var l=0;l<t.top.length;l++){y1=i-(t.top.length-l)*this.featureTranslateHeight;var d=t.top[l];if(a-d.off>=0&&(a-d.off)%3==0){var c=d.seq[Math.floor((a-d.off)/3)],p=a%2?this.oddColor:this.evenColor;"M"==c?p=this.sequenceStartColor:"*"==c&&(p=this.sequenceEndColor),o[d.rf]||(o[d.rf]=e-this.xAxisUnit*(n+2.5)),x0=e-o[d.rf]+s,this.rectangle(o[d.rf],y1,x0,this.featureTranslateHeight,p,r),this.drawText(c,o[d.rf]+x0/2,y1+this.featureTranslateHeight/2+1,h,this.foreground,"center","middle"),o[d.rf]=e+s}}},this.drawTranslationBottom=function(t,e,i,s,a,r,h,n,o){if(t.bottom&&t.bottom.length>0)for(var l=0;l<t.bottom.length;l++){y1=i+(l+1)*this.featureTranslateHeight;var d=t.bottom[l];if(a-d.off>=0&&(a-d.off)%3==0){var c=d.seq[Math.floor((a+d.off+1)/3)],p=a%2?this.oddColor:this.evenColor;"M"==c?p=this.sequenceStartColor:"*"==c&&(p=this.sequenceEndColor),o[d.rf]||(o[d.rf]=e-this.xAxisUnit*(n+2.5)),x0=e-o[d.rf]+s,this.rectangle(o[d.rf],y1,x0,this.featureTranslateHeight,p,r),this.drawText(c,o[d.rf]+x0/2,y1+this.featureTranslateHeight/2+1,h,this.foreground,"center","middle"),o[d.rf]=e+s}}},this.drawGenomeSequence=function(t,e,i,s,a){var r=s.counter,h=s.fill?s.fill:a.fill?a.fill:!1,n=s.outline,o=h?"closed":"open",l=this.sequenceFontSize>e?e-3+"Pt "+this.fontName:this.sequenceFont,d=s.offset,c=s.sequence,p=s.sequenceRC,g=s.translate,u=s.translateRF,m=s.dir;"left"!=m||p||(p=c,c=this.getReverseComplement(c)),g&&!u&&(u=g,g=this.translate(g,c));var f=c.split(""),v=this.marginLeft+this.left+(d-this.xAxisMin)*this.xAxisUnit,x=this.marginLeft+this.left,y=this.marginLeft+this.left+this.x,b=(f.length+i.total)*this.xAxisUnit,w=0,C=a.subtype.match(/DNA|RNA/)?1:3,T=4*this.xAxisUnit,D=this.xAxisUnit/2,S=-2,A={},k=0,M=0;if("high"==this.genomeResolution){var I=v+w*this.xAxisUnit;for(g&&(t+=g.top.length*this.featureTranslateHeight);f.length>0;)if(I>x-T&&y+T>I){var L=f.shift();if("["==L){L=f.shift();for(var N=[];"]"!=L;)N.push(L),L=f.shift();this.drawText(N.join("/"),v+w*this.xAxisUnit,t+e/2,l,this.sequenceMColor,"center","middle")}else{var z="sequence"+L.toUpperCase()+"Color";g?(this.drawTranslationTop(g,I,t,D,S,n,l,M,A),this.drawText(L,I,t+e/2,l,this[z],"center","middle"),
this.drawTranslationBottom(g,I,t,D,S,n,l,M,A)):this.drawText(L,I,t+e/2,l,this[z],"center","middle")}if(w+=C,I=v+(w+k)*this.xAxisUnit,S++,M=0,i[parseInt(w/C)])for(var F=0;F<i[parseInt(w/C)];F++)this.drawText("-",I,t+e/2,l,this.missingDataColor,"center","middle"),k++,M++,I=v+(w+k)*this.xAxisUnit}else if(f.shift(),w+=C,I=v+(w+k)*this.xAxisUnit,S++,M=0,i[parseInt(w/C)])for(var F=0;F<i[parseInt(w/C)];F++)k++,M++,I=v+(w+k)*this.xAxisUnit}else{v=this.marginLeft+this.left+(d-.5-this.xAxisMin)*this.xAxisUnit,this.rectangle(v,t,b,e,h,n);for(var F in i)v=this.marginLeft+this.left+(d-.5+parseInt(F)+M-this.xAxisMin)*this.xAxisUnit,b=i[F]*this.xAxisUnit,M+=i[F],this.rectangle(v,t,b,e,this.missingDataColor,n,o)}this.addArea(["rect",v,t,b,t+e],[r])},this.drawGenomeQuality=function(t,e,i,s,a,r,h,n){if("low"!=this.genomeResolution){for(var o="left"==h?this.cloneObject(a).reverse():a,l=this.range(o),d=this.marginLeft+this.left+(s-.5-this.xAxisMin)*this.xAxisUnit,c=this.marginLeft+this.left,p=this.marginLeft+this.left+this.x,g=d,u=n.subtype.match(/DNA|RNA/)?1:3,m=u*this.xAxisUnit,f=this.featureQualityHeight-3+"Pt "+this.fontName,v=0;v<o.length;v++)if(p>d){if(r[v])for(var x=0;x<r[v];x++)g+=m;var y=this.getHeatmapColor(l[0],l[1],o[v]);this.rectangle(g,t,m,i,y,y),g>c&&"high"==this.genomeResolution&&this.featureQualityValues&&this.drawText(o[v],g+m/2,t+i/2,f,this.foreground,"center","middle"),g+=m}this.addArea(["rect",d,t,d+g,t+i],[e])}},this.drawGenomeSignalToNoise=function(t,e,i,s,a,r,h,n){if("low"!=this.genomeResolution){for(var o="left"==h?this.cloneObject(a).reverse():a,l=this.range(o),d=this.marginLeft+this.left+(s-.5-this.xAxisMin)*this.xAxisUnit,c=this.marginLeft+this.left,p=this.marginLeft+this.left+this.x,g=d,u=n.subtype.match(/DNA|RNA/)?1:3,m=u*this.xAxisUnit,f=this.featureSignalToNoiseHeight-3+"Pt "+this.fontName,v=0;v<o.length;v++)if(p>d){if(r[v])for(var x=0;x<r[v];x++)g+=m;var y=this.getHeatmapColor(l[0],l[1],o[v]);this.rectangle(g,t,m,i,y,y),g>c&&"high"==this.genomeResolution&&this.featureSignalToNoiseValues&&this.drawText(o[v],g+m/2,t+i/2,f,this.foreground,"center","middle"),g+=m}this.addArea(["rect",d,t,d+g,t+i],[e])}},this.drawGenomeCoordinate=function(t,e,i,s,a,r,h,n,o){if("low"!=this.genomeResolution){var l=this.marginLeft+this.left+(s-this.xAxisMin)*this.xAxisUnit,d=this.marginLeft+this.left,c=this.marginLeft+this.left+this.x,p=a,g=o.subtype.match(/DNA|RNA/)?1:3,u=g*this.xAxisUnit,m=this.getCoordinateStep(),f=r+h.total,v=a+f,x=i-3+"Pt "+this.fontName;if("left"==n)for(var y=l+(f-1)*u;a<v-h.total;)h[f-(a-p)-2]&&(y-=u*h[f-(a-p)-2]),y>d&&c>y&&a%m==0&&this.drawText(a,y,t+i/2,x,this.foreground,"center","middle"),y-=u,a++;else for(var y=l;a<v-h.total;)h[a-p]&&(y+=u*h[a-p]),y>d&&c>y&&a%m==0&&this.drawText(a,y,t+i/2,x,this.foreground,"center","middle"),y+=u,a++}},this.setGenomeWireFrame=function(){{var t=this.marginLeft+this.left,e=this.marginLeft+this.left+this.x,i=this.getCoordinateStep(),s=Math.floor(this.xAxisMin);this.getFontPt(this.featureNameFont)/2}for("low"==this.genomeResolution&&(i*=5);e>=t;)t=this.marginLeft+this.left+(s-this.xAxisMin)*this.xAxisUnit,s%i==0&&("dotted"==this.xAxisTickStyle?this.drawLine("dottedLine",t,this.marginTop+this.top,t,this.marginTop+this.top+this.y,this.wireColor,!1,"butt"):this.drawLine("line",t,this.marginTop+this.top,t,this.marginTop+this.top+this.y,this.wireColor,!1,"butt")),s++},this.setGenomeTicks=function(){var t=this.marginLeft+this.left,e=this.marginLeft+this.left+this.x,i=this.marginLeft+this.left,s=this.getCoordinateStep(),a=Math.floor(this.xAxisMin),r=this.getFontPt(this.featureNameFont)/2;for("low"==this.genomeResolution&&(s*=5);e>=t;){if(t=this.marginLeft+this.left+(a-this.xAxisMin)*this.xAxisUnit,a%s==0){var h=this.measureText(a,this.featureNameFont);t>=i&&(this.drawText(a.toString(),t,this.marginTop+this.top+this.y+this.margin+r,this.featureNameFont,this.xAxisTickColor,"center","middle",!1,!1,!1,!0),i=t+1.5*h)}a++}},this.setGenomeLeftDimentions=function(){for(var t=[],e=0;e<this.data.tracks.length;e++)for(var i=this.data.tracks[e],s=0;s<i.data.length;s++){var a=i.data[s];t.push(a.label||a.name||a.id)}return this.measureText(this.shortenText(this.getMaxText(t),this.maxFeatureStringLen),this.featureNameFont)+4*this.margin},this.setGenomeYDimentions=function(){this.bottom+=this.margin+this.getFontPt(this.featureNameFont),(this.autoAdjust||this.height<this.marginTop+this.top+this.y+this.bottom+this.marginBottom)&&(this.height=this.marginTop+this.top+this.y+this.bottom+this.marginBottom),this.resizeCanvas(),this.resizeViewport()},this.setGenomeAxisUnits=function(){this.setAxisUnits("xAxis"),this.genomeResolution=this.xAxisUnit>this.sequenceFontSize?"high":5*this.xAxisUnit>this.sequenceFontSize?"medium":"low"},this.setGenomeXDimentions=function(){this.featureStaggered?this.width?this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight):this.width=this.marginLeft+this.left+this.x+this.right+this.marginRight:(this.left=this.setGenomeLeftDimentions(),this.width?this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight):this.width=this.marginLeft+this.left+this.x+this.right+this.marginRight)},this.setGenomeFontsColors=function(){this.trackNameFont=this.trackNameFontSize+"Pt "+this.fontName,this.featureNameFont=this.featureNameFontSize+"Pt "+this.fontName,this.sequenceFont=this.sequenceFontSize+"Pt "+this.fontName,this.wireColor.match(/,0.1\)$/)||(this.wireColor=this.wireColor.replace(/\)$/,",0.1)"))},this.drawGenome=function(){this.setGenomeFontsColors(),this.setGenomeXDimentions(),this.setGenomeAxisUnits(),this.setGenomeSubtracks(),this.setGenomeYDimentions(),this.setGenomeWireFrame(),this.plotGenomeData(),this.maskPlotArea(),this.drawGenomeLabels(),this.setGenomeTicks()},this.initializeGenome=function(){this.drawGenome()},this.initializeGenome()},CanvasXpress.prototype.Circular=function(){this.setCircularXYDimensions=function(){this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.y=this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.r=Math.min(this.x,this.y)/2,this.d=2*this.r,this.cx=this.marginLeft+this.left+this.r,this.cy=this.marginTop+this.top+this.r},this.setCircularSampleOverlays=function(){this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]&&0==this.smpOverlays.length&&(this.smpOverlays=[this.segregateSamplesBy])},this.setCircularPrivateParams=function(){if(this.rAxisIndex=this.rAxis?this.getVariableIndices(this.rAxis):-1,this.ringSegments=this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]?this.getUniqueKeys(this.data.x[this.segregateSamplesBy]).length:1,this.ringVariables=[],this.ringSegmentRange=[],this.rAxisIndex>=0&&this.ringVariables.push([this.rAxisIndex]),this.segregateVariablesBy&&this.data.z[this.segregateVariablesBy])for(var t=this.getUniqueKeys(this.data.z[this.segregateVariablesBy]),e=0;e<t.length;e++)this.rAxisIndex>=0&&-1==t[e]||this.ringVariables.push(this.getVariablesByAnnotationLevel(this.segregateVariablesBy,t[e]));else{for(var t=[],e=0;e<this.data.y.vars.length;e++)this.rAxisIndex>=0&&e==this.rAxisIndex||t.push(c++);this.ringVariables.push(t)}this.ringNumber=this.ringVariables.length;var i=this.ringSegementSeparationMain;if(this.rAxisIndex>=0)if(this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]){for(var s={},a=0,e=0;e<this.data.y.smps.length;e++){var r=this.data.x[this.segregateSamplesBy][e];s[r]||(s[r]=[]),s[r].push(this.data.y.data[this.rAxisIndex][e])}for(var r in s){var t=this.range(s[r]);this.rAxisZero?(a+=t[1],this.ringSegmentRange.push(t[1])):(a+=t[1]-t[0],this.ringSegmentRange.push(t[1]-t[0]))}this.ringSegmentArc=(360-(this.ringSegmentSeparation*this.ringSegments+i))/a}else{var t=this.range(this.data.y.data[this.rAxisIndex]);this.ringSegmentArc=this.rAxisZero?(360-(this.ringSegmentSeparation*this.ringSegments+i))/t[1]:(360-(this.ringSegmentSeparation*this.ringSegments+i))/(t[1]-t[0])}else this.ringSegmentArc=(360-(this.ringSegmentSeparation*this.ringSegments+i))/this.data.y.smps.length;if(this.ringWeight)for(;this.ringWeight.length!=this.ringNumber;)this.ringWeight.length>this.ringNumber?this.ringWeight.pop():this.ringWeight.push(this.ringWeight[this.ringWeight.length-1]);else{this.ringWeight=[];for(var e=0;e<this.ringNumber;e++)this.rAxisShow&&this.rAxisIndex>=0&&e==this.rAxisIndex||this.ringWeight.push(1)}for(var h=0,e=0;e<this.ringWeight.length;e++)this.rAxisShow&&this.rAxisIndex>=0&&e==this.rAxisIndex||(h+=this.ringWeight[e]);for(var e=0;e<this.ringWeight.length;e++)this.ringWeight[e]/=h},this.setCircularFonts=function(){var t,e;this.autoScaleFont?(t=this.scaleTextToSize(.5*this.smpIndices.length),e=this.scaleTextToSize(.5*this.varIndices.length)):(t=this.smpLabelFontSize,e=this.varLabelFontSize),this.smpLabelFont=parseInt(t*this.smpLabelScaleFontFactor)+"Pt "+this.fontName,this.varLabelFont=parseInt(e*this.varLabelScaleFontFactor)+"Pt "+this.fontName,this.setAxisFont(this.data.y.desc?this.data.y.desc[0]:"NA",this.y/(2*Math.PI))},this.getCircularSampleLabelLength=function(){return this.showSampleNames?this.smpLabelCircular?this.getFontPt(this.smpLabelFont)+this.margin:this.maxSmpName>this.maxSmpStringLen?this.measureText(this.maxSmpNameStr.substring(0,this.maxSmpStringLen),this.smpLabelFont)+this.margin:this.measureText(this.maxSmpNameStr,this.smpLabelFont)+this.margin:0},this.getCircularOverlaysWidth=function(){var t=0;if(this.showOverlays&&this.smpOverlays.length>0){this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]&&t++;for(var e=0;e<this.smpOverlays.length;e++)if(this.data.x.hasOwnProperty(this.smpOverlays[e])){if(this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]&&this.smpOverlays[e]==this.segregateSamplesBy)continue;t++}t>0&&(t*=this.overlaysWidth/2+this.margin)}return t},this.getCircularXAxisTickLength=function(){return this.measureText(this.xAxisMaxStrLength,this.axisTickFont)+2*this.margin},this.getCircularRAxisTickLength=function(){return this.measureText(this.rAxisMaxStrLength,this.axisTickFont)+2*this.margin},this.getCircularSmpTreeHeight=function(){var t=0;return this.showSmpDendrogram&&this.smpDendrogram&&(t=(this.smpDendrogram.depth+1)*this.dendrogramSpace+this.margin),t},this.setCurrentSettings=function(){this.ringSegementSeparationMain=this.xAxisShow?this.arcLengthToDegrees(this.r*this.donutProportion*2,this.getCircularXAxisTickLength()):0;var t=this.xAxisShow?(this.ringSegmentSeparation+this.ringSegementSeparationMain)*Math.PI/360:0;this.circularStart=1.5*Math.PI+t,this.currentRadius=this.r,this.circularSkips={};var e=0;if(this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy])for(var i in this.smpOverlayColors[this.segregateSamplesBy]){var s=this.getSamplesByAnnotationLevel(this.segregateSamplesBy,i);e+=s.length,this.circularSkips[e]=!0}else this.circularSkips[this.smpIndices.length]=!0},this.drawCircularRadialAxis=function(){if(this.rAxisShow&&this.rAxisIndex>=0){for(var t=0;t<this.ringSegmentRange.length;t++){this.ringSegmentRange[t]}this.currentRadius-=this.getCircularRAxisTickLength()}},this.drawCircularSampleLabels=function(){if(this.showSampleNames){var t=this.ringSegmentArc*Math.PI/180;if(this.smpLabelCircular)for(var e=this.circularStart,i=0;i<this.smpIndices.length;i++){var s=this.data.y.smps[this.smpIndices[i]],a=this.getSmpColor(s);this.circularSkips[i]&&(e+=this.ringSegmentSeparation*Math.PI/180),this.drawArcText(s,this.cx,this.cy,this.currentRadius-this.smpLabelFontSize/2,e,t,this.smpLabelFont,a),e+=t}else{var e=this.circularStart+t/2-Math.PI/2;this.ctx.save(),this.ctx.translate(this.cx,this.cy),this.ctx.rotate(e);for(var i=0;i<this.smpIndices.length;i++){var s=this.data.y.smps[this.smpIndices[i]];this.circularSkips[i]&&(e+=this.ringSegmentSeparation*Math.PI/180,this.ctx.rotate(this.ringSegmentSeparation*Math.PI/180));var a=(this.currentRadius*Math.cos(e),this.currentRadius*Math.sin(e),this.getSmpColor(s));e<2*Math.PI?this.drawText(s,0,this.currentRadius,this.smpLabelFont,a,"right","middle",Math.PI/2):this.drawText(s,0,this.currentRadius,this.smpLabelFont,a,"left","middle",-Math.PI/2),e+=t,this.ctx.rotate(t)}for(var i=0;i<this.smpIndices.length+2;i++)this.ctx.restore()}this.currentRadius-=this.getCircularSampleLabelLength()}},this.drawCircularOverlays=function(){if(this.ringSegementDims=[],this.showOverlays&&this.smpOverlays.length>0){var t=this.circularStart;if(this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]){for(var e in this.smpOverlayColors[this.segregateSamplesBy]){var i=this.smpOverlayColors[this.segregateSamplesBy][e],s=this.getSamplesByAnnotationLevel(this.segregateSamplesBy,e),a=this.ringSegmentArc*s.length*Math.PI/180;this.drawShape("arc2",this.cx,this.cy,this.overlaysWidth/2,this.currentRadius,i,i,!1,!1,!1,!1,!1,t,t+a),this.drawArcText(e,this.cx,this.cy,this.currentRadius-this.overlaysWidth/4,t,a,this.overlayFont,this.overlayFontColor),this.ringSegementDims.push([t,t+a]),t+=a+this.ringSegmentSeparation*Math.PI/180}t-=this.ringSegmentSeparation*Math.PI/180,t%=2*Math.PI,this.drawArcText(this.segregateSamplesBy,this.cx,this.cy,this.currentRadius-this.overlaysWidth/4,t,this.circularStart-t,this.overlayFont,this.overlayFontColor),this.currentRadius-=this.overlaysWidth/2+this.margin,t=this.circularStart}else{var a=this.ringSegmentArc*Math.PI/180*this.smpIndices.length;this.ringSegementDims.push([this.circularStart,this.circularStart+a])}for(var r=0;r<this.smpOverlays.length;r++){var e=this.smpOverlays[r];if(!this.segregateSamplesBy||!this.data.x[this.segregateSamplesBy]||e!=this.segregateSamplesBy){var a=this.ringSegmentArc*Math.PI/180;if("-"!=e)for(var h=0;h<this.smpIndices.length;h++){var n=this.data.x[e][this.smpIndices[h]],i=this.smpOverlayColors[e][n];this.circularSkips[h]&&(t+=this.ringSegmentSeparation*Math.PI/180),this.drawShape("arc2",this.cx,this.cy,this.overlaysWidth/2,this.currentRadius,i,i,!1,!1,!1,!1,!1,t,t+a),this.showLevelOverlays&&this.drawArcText(e,this.cx,this.cy,this.currentRadius-this.overlaysWidth/4,t,a,this.overlayFont,this.overlayFontColor),t+=a}this.currentRadius-=this.overlaysWidth/2+this.margin,t=this.circularStart}}}else{var a=this.ringSegmentArc*Math.PI/180*this.smpIndices.length;this.ringSegementDims.push([this.circularStart,this.circularStart+a])}},this.drawCircularData=function(){for(var t=this.donutProportion*this.r,e=this.currentRadius-t,i=this.varIndices,s=0,a=0;a<this.ringNumber;a++)if(!(this.rAxisIndex>=0&&a==this.rAxisIndex)){var r=this.circularStart,h=e*this.ringWeight[a]-this.margin;this.setVariablesVisible(this.ringVariables[a]),this.setAxes(),this.xAxisUnit=h/this.xAxisRange,this.drawCircularDataAxis(r,h),this.drawCircularDataPoints(r,h,a,s),s+=this.varIndices.length,this.currentRadius-=h+this.margin}this.varIndices=i},this.drawCircularDataAxis=function(t,e){for(var i,s,a,r,h,n,o,l,d,c=e/this.xAxisValues.length,p=0,g=0;g<=this.xAxisValues.length;g++)for(var u=2*(this.currentRadius-(g*c+this.margin)),m=0;m<this.ringSegments;m++)g<this.xAxisValues.length&&0==m&&(i=this.ringSegementDims[m][0],s=this.ringSegementDims[this.ringSegments-1][1]%(2*Math.PI),a=this.xAxisValues[this.xAxisValues.length-(g+1)].toString(),this.drawArcText(a,this.cx,this.cy,.5*u-this.axisTickFontSize/4,s,i-s,this.axisTickFont,this.axisTickColor)),this.drawShape("arc3",this.cx,this.cy,u,u,this.xAxisTickColor,this.xAxisTickColor,!1,!1,!1,!1,!1,this.ringSegementDims[m][0]-p,this.ringSegementDims[m][1]+p);for(var g=0;g<this.ringSegments;g++)r=this.currentRadius-this.margin,h=this.currentRadius-(this.xAxisValues.length*c+this.margin),n=r*Math.cos(this.ringSegementDims[g][0]),o=r*Math.sin(this.ringSegementDims[g][0]),l=h*Math.cos(this.ringSegementDims[g][0]),d=h*Math.sin(this.ringSegementDims[g][0]),this.drawLine("line",n+this.cx,o+this.cy,l+this.cx,d+this.cy,this.xAxisTickColor),n=r*Math.cos(this.ringSegementDims[g][1]),o=r*Math.sin(this.ringSegementDims[g][1]),l=h*Math.cos(this.ringSegementDims[g][1]),d=h*Math.sin(this.ringSegementDims[g][1]),this.drawLine("line",n+this.cx,o+this.cy,l+this.cx,d+this.cy,this.xAxisTickColor)},this.drawCircularDataPoints=function(t,e,i,s){var a=this.xAxisMin<0?Math.abs(this.xAxisMin)*this.xAxisUnit:0,r=this.ringSegmentArc*Math.PI/180*.3,h=r/2,n=this.ringSegmentArc*Math.PI/180*.7/this.ringVariables[i].length;t+=h;for(var o=0;o<this.smpIndices.length;o++){this.circularSkips[o]&&(t+=this.ringSegmentSeparation*Math.PI/180);for(var l=0;l<this.varIndices.length;l++){var d=this.colors[(l+s)%this.colors.length],c=this.getDataAtPos(this.varIndices[l],this.smpIndices[o]),p=(c-this.xAxisMin)*this.xAxisUnit;c>=a&&this.drawShape("arc2",this.cx,this.cy,p,this.currentRadius-(e-p+this.margin),d,d,!1,!1,!1,!1,!1,t,t+n),t+=n}t+=r}},this.setCircularSmpIndices=function(){if(this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]){for(var t=[],e=[],i=this.getSmpAnnotations(this.segregateSamplesBy,this.smpIndices),s=0;s<i.length;s++)t=t.concat(this.getSamplesByAnnotationLevel(this.segregateSamplesBy,i[s]));for(var s=0;s<t.length;s++)e.push(this.hiddenSmps[t[s]]?!0:!1);this.smpIndices=t,this.hiddenSmps=e}},this.drawCircularPlot=function(){this.drawCircularRadialAxis(),this.drawCircularOverlays(),this.drawCircularSampleLabels(),this.drawCircularData()},this.setCircularAttributes=function(){this.setCircularSmpIndices(),this.setCircularFonts(),this.setLegendFont(),this.setTrees(),this.setOverlayColors(),this.setOverlayFont(),this.setValidDataColorShapeSize(),this.setDataColorShapeSize(),this.setCurrentSettings()},this.initializeCircular=function(){this.setCircularXYDimensions(),this.setCircularSampleOverlays(),this.setCircularAttributes(),this.setCircularPrivateParams(),this.drawCircularPlot()},this.initializeCircular()},CanvasXpress.prototype.Video=function(){this.videoPlay=function(t){return function(){t.copyVideo(this,t.ctx,t.width,t.height)}}(this),this.videoUpdate=function(){var t=this.video.currentTime;if(this.videoCurrentTime&&this.drawText(t,this.width/2,20,!1,this.videoColor),this.videoGrid)for(var e=(this.width-1)/this.videoGridStep,i=(this.height-1)/this.videoGridStep,s=0;s<=this.videoGridStep;s++)this.drawLine("line",e*s,0,e*s,this.height,this.videoColor),this.drawLine("line",0,i*s,this.width,i*s,this.videoColor);for(var s=0;s<this.data.video.length;s++){var a=this.data.video[s][0],r=a+this.data.video[s][1];if(t>=a&&r>=t){var h=this.data.video[s][2],n=this.data.video[s][3],o=this.data.video[s][4];switch(h){case"text":this.drawText(n,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]);break;case"line":this.drawLine(n,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10]);break;case"shape":this.drawShape(n,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14])}}}},this.copyVideo=function(t,e,i,s){var a=this;return t.paused||t.ended?!1:(e.drawImage(t,0,0,i,s),this.videoUpdate(),void setTimeout(function(){a.copyVideo(t,e,i,s)},50))},this.initializeVideo=function(){this.data||(this.data={video:{}}),this.data.video||(this.data.video={})},this.initializeVideo()},CanvasXpress.doc={F:{fill:{M:"Genome",T:"color",C:"Color for the feature"},id:{M:"Genome",T:"string",C:"Feature id"}},M:{Overlays:{D:"Colored boxes to help in the visualization of samples and variables",P:["overlayFont","overlayFontColor","overlayFontSize","overlayScaleFontFactor","overlaysWidth","showLevelOverlays","showOverlays","smpOverlayRecycleColors","smpOverlays","varOverlayRecycleColors","varOverlays"],B:["showLevelOverlays","showOverlays","smpOverlayRecycleColors","smpOverlays","varOverlayRecycleColors","varOverlays"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},Axes:{D:"Axes parameters",P:["axisExact","axisExtension","rAxisAbsMax","rAxisAbsMin","rAxisCurrent","rAxisExact","rAxisMaxStrLength","rAxisMinorTicks","rAxisMinorValues","rAxisShow","rAxisTickColor","rAxisTickFormat","rAxisTickStyle","rAxisTicks","rAxisTitle","rAxisTransform","rAxisTransformTicks","rAxisValues","setMax","setMax2","setMaxR","setMaxX","setMaxY","setMaxZ","setMin","setMin2","setMinR","setMinX","setMinY","setMinZ","ticks","timeTicksFirst","timeValueIndices","timeValues","xAxis","xAxis2","xAxis2AbsMax","xAxis2AbsMin","xAxis2Exact","xAxis2MaxStrLength","xAxis2MinorTicks","xAxis2MinorValues","xAxis2Show","xAxis2TickFormat","xAxis2Ticks","xAxis2Values","xAxisAbsMax","xAxisAbsMin","xAxisCurrent","xAxisExact","xAxisMaxStrLength","xAxisMinorTicks","xAxisMinorValues","xAxisShow","xAxisTickColor","xAxisTickFormat","xAxisTickStyle","xAxisTicks","xAxisTitle","xAxisTransform","xAxisTransformTicks","xAxisValues","yAxis","yAxisAbsMax","yAxisAbsMin","yAxisCurrent","yAxisExact","yAxisMaxStrLength","yAxisMinorTicks","yAxisMinorValues","yAxisShow","yAxisTickColor","yAxisTickFormat","yAxisTickStyle","yAxisTicks","yAxisTitle","yAxisTransform","yAxisTransformTicks","yAxisValues","zAxis","zAxisAbsMax","zAxisAbsMin","zAxisCurrent","zAxisExact","zAxisMaxStrLength","zAxisMinorTicks","zAxisMinorValues","zAxisShow","zAxisTickColor","zAxisTickFormat","zAxisTickStyle","zAxisTicks","zAxisTitle","zAxisTransform","zAxisTransformTicks","zAxisValues"],B:["rAxisShow","rAxisTickColor","rAxisTitle","rAxisTransform","rAxisTransformTicks","xAxis2Show","xAxisShow","xAxisTickColor","xAxisTitle","xAxisTransform","xAxisTransformTicks","yAxisShow","yAxisTickColor","yAxisTitle","yAxisTransform","yAxisTransformTicks","zAxisShow","zAxisTickColor","zAxisTitle","zAxisTransform","zAxisTransformTicks"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},Clustering:{D:"Paremeters used in clustering",P:["centerData","clusterAxis","distance","imputeMethod","kmeansClusters","linkage","maxIterations","useSmpVarIndexOnClustering"],B:["centerData","clusterAxis","distance","imputeMethod","kmeansClusters","linkage","maxIterations","useSmpVarIndexOnClustering"],U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Candlestick:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},Indicators:{D:"Legends for color, shape and size in visualizations",P:["indicatorsPosition","showIndicators"],B:["indicatorsPosition","showIndicators"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},"2D Scatter Plot":{D:"General parameters in 2d scatter plots",P:["allVsAll","allVsAllType","functionIntervals","histogramBarWidth","histogramBins","isCreateHistogram","isHistogram"],B:["allVsAll","allVsAllType"],U:{ScatterBubble2D:"true",Scatter2D:"true"}},Text:{D:"Properties associated with text attributes :",P:["align","autoScaleFont","baseline","font","fontName","fontSize","fontStyle","fonts","maxTextSize","minTextSize","scaleTextConstantAdd","scaleTextConstantMult"]},"Axis Resizer":{D:"Parameters used when resizing graphs",P:["resizerBackgroundColor","resizerBackgroundColorCurrent","resizerBackgroundColorOutlineCurrent","resizerBackgroundImage","resizerDraw","resizerPosition","resizerTransparency","resizerType","resizerWidth"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},Variables:{D:"Properties associated with variables",P:["filterVarBy","highlightVar","maxVarStringLen","showVariableNames","varHighlightColor","varLabelColor","varLabelDescription","varLabelFont","varLabelFontSize","varLabelInterval","varLabelRotate","varLabelScaleFontFactor","varTitle","varTitleColor","varTitleFont","varTitleFontSize","varTitleLabelOverlayPosition","varTitleScaleFontFactor"],B:["filterVarBy","highlightVar","maxVarStringLen","showVariableNames","varHighlightColor","varLabelColor","varLabelDescription","varLabelRotate","varLabelScaleFontFactor","varTitle","varTitleColor","varTitleLabelOverlayPosition","varTitleScaleFontFactor"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},"Scatter and One-D Plots":{D:"General parameters in scatter and one dimesional plots",P:["colorBy","outlineBy","shapeBy","shapeByShape","sizeBy","this"],B:["colorBy","outlineBy","shapeBy","sizeBy"],U:{Boxplot:"true",Scatter3D:"true",ScatterBubble2D:"true",Bar:"true",Dotplot:"true",Scatter2D:"true",Heatmap:"true"}},"Venn Diagrams":{D:"General paremeters in Venn diagrams",P:["vennColors","vennCompartments","vennGroups","vennLegendColors"],B:["vennGroups","vennLegendColors"],U:{Venn:"true"}},"Ticks and Axis Titles":{D:"Attributes for ticks and titles in axes in one and two dimensional plots",P:["axisTickColor","axisTickFont","axisTickFontSize","axisTitleColor","axisTitleFont","axisTitleFontSize","axisTitleScaleFontFactor","tickRotate","tickScaleFontFactor"],B:["axisTickColor","axisTitleColor","axisTitleScaleFontFactor","tickRotate","tickScaleFontFactor"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},Dendrograms:{D:"General parameters in dendrograms",P:["dendrogramColor","dendrogramHang","dendrogramHeight","dendrogramSpace","showSmpDendrogram","showVarDendrogram","smpDendrogramPosition","varDendrogramPosition"],B:["dendrogramColor","dendrogramHang","dendrogramHeight","dendrogramSpace","showSmpDendrogram","showVarDendrogram","smpDendrogramPosition","varDendrogramPosition"],U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Candlestick:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},"Candlestick Plots":{D:"General parameters in candlestick plots",P:["showVolume","sma10Color","sma20Color","sma25Color","sma50Color","sma5Color","stockIndicators"],B:["showVolume","sma10Color","sma20Color","sma25Color","sma50Color","sma5Color","stockIndicators"],U:{Candlestick:"true"}},"Area Graphs":{D:"General parameters in area graphs",P:["areaIsCumulative"],B:["areaIsCumulative"],U:{Area:"true",AreaLine:"true"}},"Pie Charts":{D:"General parameters in pie charts",P:["maxPieSectors","pieSegmentLabels","pieSegmentPrecision","pieSegmentSeparation","pieType","showPieGrid","showPieSampleLabel","showPieValues","startPieSectors"],B:["maxPieSectors","pieSegmentLabels","pieSegmentPrecision","pieSegmentSeparation","pieType","showPieGrid","showPieSampleLabel","showPieValues","startPieSectors"],U:{Pie:"true"}},General:{D:"General properties used in most visualizations :",P:["acknowledgementIcon","acknowledgementIconPosition","acknowledgment","autoAdjust","autoAdjustMax","autoAdjustXTries","autoAdjustYTries","background","backgroundGradient1Color","backgroundGradient2Color","backgroundImage","backgroundType","backgroundVideo","backgroundWindow","backgroundWindowGradient1Color","backgroundWindowGradient2Color","backgroundWindowGradientOrientation","canvasBox","canvasBoxColor","foreground","foregroundWindow","functions","gradient","gradientOrientation","gradientRatio","gradientType","graphOrientation","graphType","margin","marginBottom","marginLeft","marginRight","marginTop","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","showGraph","showShadow","transparency","useFlashIE","videoAutoplay","videoClassName","videoColor","videoControls","videoCurrentTime","videoGrid","videoGridStep","videoLoop","videoPlaybackRate","videoPoster","videoPreload"],B:["acknowledgementIcon","acknowledgementIconPosition","acknowledgment","autoAdjustXTries","autoAdjustYTries","background","backgroundGradient1Color","backgroundGradient2Color","backgroundImage","backgroundType","backgroundVideo","canvasBox","canvasBoxColor","foreground","functions","graphOrientation","graphType","margin","marginBottom","marginLeft","marginRight","marginTop","showGraph","showShadow","useFlashIE","videoAutoplay","videoClassName","videoColor","videoControls","videoCurrentTime","videoGrid","videoGridStep","videoLoop","videoPlaybackRate","videoPoster","videoPreload"]},"Bar Graphs":{D:"General parameters in bar graphs",P:["showDataValues"],B:["showDataValues"],U:{Bar:"true",BarLine:"true"}},"Heatmaps and Networks":{D:"General parameters in heatmaps, correlations and networks",P:["heatmapType","indicatorCenter","indicatorHeight","indicatorWidth"],B:["heatmapType","indicatorCenter","indicatorHeight","indicatorWidth"],U:{Network:"true",Scatter3D:"true",Correlation:"true",Scatter2D:"true",Heatmap:"true"}},"Line Graphs":{D:"General parameters in line graphs",P:["coordinateLineColor","lineDecoration","lineTickness","lineType","tension"],B:["coordinateLineColor","lineDecoration","lineType"],U:{StackedLine:"true",Line:"true",StackedPercentLine:"true",BarLine:"true",AreaLine:"true"}},"Box Plots":{D:"General parameters in box plots",P:["boxPlotOutliersRatio","showBoxplotOriginalData"],U:{Boxplot:"true",Dotplot:"true"}},Attributes:{D:"Lines, Colors, Shapes, Sizes and Time :",P:["arrowPointSize","capType","colorHSV","colorRGB","colorScheme","colors","dashLength","dotLength","evenColor","images","lines","oddColor","outlineWidth","shapes","sizes","timeFormat"],B:["colorScheme","colors","evenColor","oddColor"]},"Remote Procedures":{D:"Parameters used when getting data remotely :",P:["remoteAutoPlay","remoteAutoPlayDelay","remoteDataIndex","remoteDirection","remoteIds","remoteParams","remoteParentId","remoteService","remoteUpdate","remoteUpdateDelay","remoteUpdating","remoteWindow"]},Animation:{D:"Animation parameters :",P:["animationCycles","animationTime","animationType","showAnimation","showAnimationFont","showAnimationFontColor","showAnimationFontSize","snapshotCopyChangeOnly"]},Events:{D:"Event parameters :",P:["broadcast","broadcastType","configuratorWidth","dataEvent","dataFilterWidth","destroyCanvasXpressZombies","disableConfigurator","disableDataFilters","disableDataTable","disableEvents","disableToolbar","eventArrowKeys","eventKeys","eventPlusMinusKeys","helpKeyEvents","infoTimeIn","infoTimeOut","isLayoutConfigurator","maintainZoomOnDrag","monitorCanvasXpressZombiesTime","resizable","showAdvancedConfiguration","this","toolbarPermanent"],B:["showAdvancedConfiguration"]},Images:{D:"General parameters with images :",P:["dropdownButton","imageDir","nextButton","playButton","previousButton","stopButton"]},"Combination Plots":{D:"Parameters used in complex plots :",P:["layout","layoutAdjust","layoutAxis","layoutComb","layoutCurrent","layoutHeight","layoutMaxVarLegend","layoutMulticolor","layoutWidth","offsetX","offsetY","scaleX","scaleY","translateX","translateY","weight"]},"Network Graphs":{D:"General parameters used in networks",P:["approximateNodePositions","attractiveForceFunction","autoHideOnDecorationsCenter","calculateLayout","colorEdgeBy","colorNodeBy","edgeConfigurableProperties","edgeWidth","filterEdgeBy","filterNodeBy","highlightNode","initialTemperature","is3DNetwork","isSelectNodes","layoutTime","moveParentsWithChildren","network2DRotate","networkDepth","networkDivisions","networkForceConstant","networkFreeze","networkFreezeOnLoad","networkLayoutType","networkNodeMinDistance","networkNodesOnTop","networkRoot","networkStack","networkStackIndex","networkStackStates","nodeConfigurableProperties","nodeFont","nodeFontColor","nodeFontSize","nodeHighlightColor","nodeScaleFontFactor","nodeSize","overrideEventlessNodes","preScaleNetwork","randomNetwork","randomNetworkNodeEdgesMax","randomNetworkNodes","reduceRandomNetwork","repulsiveForceFunction","selectNode","shapeEdgeBy","shapeNodeBy","showHiddenChildEdges","showNetworkDecorationsLegend","showNetworkEdgesLegend","showNetworkNodesLegend","showNetworkRadialLayout","showNetworkTextLegend","showNodeNameThreshold","sizeDecorationBy","sizeEdgeBy","sizeNodeBy","skipClick","subNetworks","temperature"],
B:["autoHideOnDecorationsCenter","calculateLayout","colorEdgeBy","colorNodeBy","edgeWidth","filterEdgeBy","filterNodeBy","highlightNode","is3DNetwork","networkLayoutType","networkNodesOnTop","networkRoot","nodeFontColor","nodeHighlightColor","nodeScaleFontFactor","nodeSize","shapeEdgeBy","shapeNodeBy","showHiddenChildEdges","showNetworkRadialLayout","showNodeNameThreshold","sizeDecorationBy","sizeEdgeBy","sizeNodeBy"],U:{Network:"true"}},"Circular Graphs":{D:"General parameters in circular graphs",P:["circularLetterSeparationFactor","donutProportion","rAxis","rAxisZero","ringSegmentSeparation","ringType","ringWeight"],B:["circularLetterSeparationFactor","donutProportion","rAxis","rAxisZero","ringSegmentSeparation","ringType","ringWeight"],U:{Circular:"true"}},"Data table":{D:"Paremters associated with the data table :",P:["colWidth","dataTableColumnWidth","dataTableTransposed","freezeColLeft","freezeColRight","freezeRowBottom","freezeRowTop","maxCols","maxRows","networkShowDataTable","refresehDataTableOnDraw","rowHeight","showDataTable","showDataTableOnSelect","startCol","startRow"],B:["dataTableColumnWidth"]},"Genome Browser":{D:"General parameters used in genome browser",P:["featrureCoordinateHeight","featrureQualityHeight","featrureSignalToNoiseHeight","featrureTranslateHeight","featureConfigurableProperties","featureCoodinateShow","featureHeightDefault","featureNameFont","featureNameFontColor","featureNameFontSize","featureQualityShow","featureQualityValues","featureSignalToNoiseShow","featureSignalToNoiseValues","featureStaggered","featureTraceHeight","featureTraceTrim","featureTracesShow","featureTranslateShow","featureTypeDefault","featureWidthDefault","filterFeatureBy","genomeResolution","maxFeatureStringLen","periodTicksLabels","sequenceAColor","sequenceBColor","sequenceCColor","sequenceDColor","sequenceEColor","sequenceEndColor","sequenceFColor","sequenceFill","sequenceFont","sequenceFontSize","sequenceGAPColor","sequenceGColor","sequenceHColor","sequenceIColor","sequenceKColor","sequenceLColor","sequenceMColor","sequenceNColor","sequencePColor","sequenceQColor","sequenceRColor","sequenceSColor","sequenceStartColor","sequenceTColor","sequenceUColor","sequenceVColor","sequenceWColor","sequenceXColor","sequenceYColor","sequenceZColor","showFeatureNameThereshold","subtracksMaxDefault","trackConfigurableProperties","trackNameFont","trackNameFontColor","trackNameFontSize","wireColor"],B:["featureCoodinateShow","featureNameFontColor","featureQualityShow","featureQualityValues","featureSignalToNoiseShow","featureSignalToNoiseValues","featureStaggered","featureTracesShow","featureTranslateShow","featureTypeDefault","filterFeatureBy","maxFeatureStringLen","sequenceAColor","sequenceBColor","sequenceCColor","sequenceDColor","sequenceEColor","sequenceEndColor","sequenceFColor","sequenceFill","sequenceGAPColor","sequenceGColor","sequenceHColor","sequenceIColor","sequenceKColor","sequenceLColor","sequenceMColor","sequenceNColor","sequencePColor","sequenceQColor","sequenceRColor","sequenceSColor","sequenceStartColor","sequenceTColor","sequenceUColor","sequenceVColor","sequenceWColor","sequenceXColor","sequenceYColor","sequenceZColor","showFeatureNameThereshold","subtracksMaxDefault","trackNameFontColor"],U:{Genome:"true"}},"Data Table/Filter":{D:"Parameters associated with data table and data filter",P:["edgesProperties","featuresProperties","nodesProperties","skipConfigurableProperties"],B:["edgesProperties","featuresProperties","nodesProperties","skipConfigurableProperties"],U:{Network:"true",Genome:"true"}},Skins:{D:"Parameters to change the skin of the application widgets :",P:["skin","skinHighlight","skinProperties","skinPropertiesBlue","skinPropertiesGrey"]},Samples:{D:"Properties associated with samples",P:["filterSmpBy","highlightSmp","maxSmpStringLen","showSampleNames","smpHighlightColor","smpLabelCircular","smpLabelColor","smpLabelDescription","smpLabelFont","smpLabelFontSize","smpLabelInterval","smpLabelRotate","smpLabelScaleFontFactor","smpTitle","smpTitleColor","smpTitleFont","smpTitleFontSize","smpTitleScaleFontFactor"],B:["filterSmpBy","highlightSmp","maxSmpStringLen","showSampleNames","smpHighlightColor","smpLabelCircular","smpLabelColor","smpLabelDescription","smpLabelRotate","smpLabelScaleFontFactor","smpTitle","smpTitleColor","smpTitleScaleFontFactor"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},"Zooming and Panning":{D:"Parameters associated with zooming and panning :",P:["panningGlobalX","panningGlobalY","panningStep","panningX","panningY","zoom","zoomGlobal","zoomSamplesDisable","zoomStep","zoomVariablesDisable"],B:["zoomSamplesDisable","zoomVariablesDisable"]},Snapshots:{D:"Paremeters used in snapshots",P:["isAnimation","snapshots"],U:{Network:"true"}},Debug:{D:"Debugging parameters :",P:["codeType","debug","errors","showCode","showVersion"]},Titles:{D:"Properties used to manipulate general title, subtitle and citation :",P:["citation","citationColor","citationFont","citationScaleFontFactor","smpTitleFontSize","subtitle","subtitleHeight","title","titleColor","titleHeight"],B:["citation","citationColor","citationScaleFontFactor","smpTitleFontSize","subtitle","subtitleHeight","title","titleColor","titleHeight"]},Legends:{D:"Legends for variables and samples",P:["legendBackgroundColor","legendBox","legendBoxColor","legendColor","legendFont","legendFontSize","legendPosition","legendScaleFontFactor","showLegend"],B:["legendBackgroundColor","legendBox","legendBoxColor","legendColor","legendPosition","legendScaleFontFactor","showLegend"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},"Dot Plots":{D:"General parameters in dot plots",P:["dotPlotDataPointRatio","dotPlotDataPointTransparency","dotPlotJitter"],U:{Boxplot:"true",Dotplot:"true"}},Decorations:{D:"Additional elements added to graphs to increase data understanding",P:["decorationFont","decorationFontSize","decorationScaleFontFactor","decorations","decorationsColor","decorationsColors","decorationsHeight","decorationsPosition","decorationsProperties","decorationsType","decorationsWidth","showDecorations"],U:{Network:"true",Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},"Scatter Plots":{D:"General parameters in scatter plots",P:["isSelectDataPoints","scatterSeries","scatterType","selectDataMode","selectDataModeDescription","selectDataPoint"],B:["scatterSeries","scatterType","selectDataMode","selectDataModeDescription"],U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},"Data Filters":{D:"Parameters associated with filtering :",P:["filterSkipNullKeys","filterType"],B:["filterSkipNullKeys","filterType"]},"3D Scatter Plot and Networks":{D:"General parameters in 3d scatter plots and neworks",P:["bar3DInverseWeight","cullingThreshold","maxRotate","minRotate","rotationDelay","rotationSensitivity","rotationStep","show3DGrid","x3DRatio","xRotate","y3DRatio","yRotate","z3DRatio","zRotate"],U:{Network:"true",Scatter3D:"true"}},"Correlation Graphs":{D:"General parameters for correlation",P:["correlationAnchorLegend","correlationAnchorLegendAlignWidth","correlationAxis","correlationLabelInterval"],B:["correlationAxis"],U:{Correlation:"true"}},Functions:{D:"Functions exposed in the configurator :",P:["addNormalDistributionLine","addRegressionLine","clusterSamples","clusterVariables","createHistogram","createRandomData","desegregateSamples","desegregateVariables","draw","groupSamples","hideCodeDiv","hideInfoDiv","hideUnhideSmps","hideUnhideVars","kmeansSamples","kmeansVariables","print","recalculateLayout","removeHistogram","reset","segregateSamples","segregateVariables","setSkin","showCodeDiv","showInfoDiv","sortSamplesByCategory","sortSamplesByVariable","sortVariablesByCategory","sortVariablesBySample","transform","transpose","ungroupSamples","updateCodeDiv"],B:["addNormalDistributionLine","addRegressionLine","clusterSamples","clusterVariables","createRandomData","desegregateSamples","desegregateVariables","draw","groupSamples","hideUnhideSmps","hideUnhideVars","kmeansSamples","kmeansVariables","print","recalculateLayout","removeHistogram","reset","segregateSamples","segregateVariables","setSkin","sortSamplesByCategory","sortSamplesByVariable","sortVariablesByCategory","sortVariablesBySample","transform","transpose","ungroupSamples"]},Heatmaps:{D:"General paremters for heatmaps",P:["isMultidimensionalHeatmap","smpIndicesStart","varIndicesStart"],U:{Heatmap:"true"}},"One dimentional plots":{D:"General parameters for one dimensional plots",P:["blockContrast","blockFactor","blockSeparationFactor","is3DPlot","plotByVariable","seriesSeparationFactor","smpHairline","smpHairlineColor","smpHairlineWidth"],B:["blockContrast","is3DPlot","plotByVariable","seriesSeparationFactor","smpHairline","smpHairlineColor","smpHairlineWidth"],U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Candlestick:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},Data:{D:"Data related parameters",P:["groupingFactors","isBoxPlotCalc","isGraphTime","isGroupedData","isLogData","isMarketDataFormated","isMarketSwitched","isTransformedData","missingDataColor","randomData","randomDataMean","randomDataSampleAnnotationRatio","randomDataSampleAnnotations","randomDataSamples","randomDataSigma","randomDataVariableAnnotationRatio","randomDataVariableAnnotations","randomDataVariables","randomMissingDataPercentage","ratioReference","segregateSamplesBy","segregateVariablesBy","showErrorBars","smpSort","sortDir","tmpAsciiArray","transformBase","transformType","varSort","zscoreAxis"],B:["groupingFactors","isLogData","missingDataColor","ratioReference","segregateSamplesBy","segregateVariablesBy","showErrorBars","sortDir","transformBase","transformType","zscoreAxis"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}}},N:{hideLabel:{M:"Network",T:"boolean",C:"Flag to hide the label node"},zIndex:{M:"Network",T:"integer",C:"Css property for the imagePath"},x:{M:"Network",T:"float",C:"X coordinate"},outline:{M:"Network",T:"color",C:"Color for the outline of the node"},imagePath:{M:"Network",T:"url",C:"Url for the node image"},parentNode:{M:"Network",T:"string",C:"Id of parent node"},y:{M:"Network",T:"float",C:"Y coordinate"},anchor:{M:"Network",T:"boolean",C:"Flag make the node transparent"},color:{M:"Network",T:"color",C:"Color for the node"},outlineWidth:{M:"Network",T:"integer",C:"Pixels used to raw the outline of the node"},eventless:{M:"Network",T:"boolean",C:"Flag to disable all events in the node"},pattern:{O:"open, closed",M:"Network",T:"option",C:"Whether to draw a solid shape or just an outline"},rotate:{M:"Network",T:"integer",C:"Number of degrees to rotate the shape"},hide:{M:"Network",T:"boolean",C:"Flag to hide the node"},shape:{M:"Network",T:"string",C:"Shape for the node. One of the ones defined in shapes"},z:{M:"Network",T:"float",C:"Z coordinate"}},P:{yAxisTransform:{O:["false","log2","log10","exp2","exp10","percentile"],M:"Axes",T:"option",C:"Tranformation for the values in the Y axis.",D:"false"},vennCompartments:{A:"true",Z:"true",M:"Venn Diagrams",T:"array",C:"Name for the compartments in the the Venn diagrams"},setMaxX:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data in the X axis",D:"null"},sequenceLColor:{M:"Genome Browser",T:"color",C:"Color for the leucines in the genome browser",D:"rgb(0,103,0)"},pieSegmentLabels:{O:["inside","outside"],M:"Pie Charts",T:"option",C:"Location for the values in the pie charts",D:"inside"},shapeBy:{O:["false","variable"],M:"Scatter and One-D Plots",T:"option",C:"Name of a variable annotation or a sample name or the string 'variable' to shape the variables.",D:"false",X:"getXZData"},featrureQualityHeight:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the quality height",D:"12"},xAxis2Exact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data in the 2nd X axis",D:"false"},sequenceFont:{A:"true",Z:"true",M:"Genome Browser",T:"font",C:"Font for the text of the sequence in the genome browser"},networkStack:{A:"true",Z:"true",M:"Network Graphs",T:"array",C:"Array to keep state of the network after a drag or move"},desegregateSamples:{S:["segregateSamples"],M:"Functions",T:"void",C:"Desegreagate samples previously segregated based on a sample category (data.x object)",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},is3DNetwork:{M:"Network Graphs",T:"boolean",C:"Flag to create or not a 3D network",D:"false"},backgroundWindow:{A:"true",S:["backgroundType"],M:"General",T:"color",C:"Background color of the canvas window when the background type is a type of window.",D:"rgb(204,204,204)"},varDendrogramPosition:{M:"Dendrograms",T:"option",C:"Position for the variable dendrogram in the plot. It could be top, bottom, right or left depending on the orientation of the graph.",D:"top"},calculateLayout:{M:"Network Graphs",T:"boolean",C:"Flag to force or not to calculate the network layout.",D:"true"},varLabelInterval:{A:"true",M:"Variables",T:"integer",C:"Interval for the variable labels in heatmaps",D:"1"},shapes:{A:"true",O:["sphere","square","triangle","star","rhombus","octagon","oval","plus","minus","pacman","mdavid","rect2","rect3","arc","rectangle","image"],M:"Attributes",T:"array",C:"Shapes used in network graphs"},yAxisMinorValues:{A:"true",M:"Axes",T:"array",C:"Values for the minor ticks in the Y axis",D:"[]"},sequenceTColor:{M:"Genome Browser",T:"color",C:"Color for the thymidines and threonines in the genome browser",D:"rgb(255,0,0)"},nodeFontColor:{M:"Network Graphs",T:"color",C:"Color for the network text",D:"background color"},networkNodeMinDistance:{A:"true",M:"Network Graphs",T:"integer",C:"Minimum distance between nodes in forceDirected and organic layouts",D:"2"},title:{S:["titleHeight","titleColor"],M:"Titles",T:"string",C:"Title of the graph.",D:"false"},featrureTranslateHeight:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the translation height",D:"12"},featureCoodinateShow:{M:"Genome Browser",T:"boolean",C:"Flag use to show coordinates",D:"true"},zAxisMaxStrLength:{A:"true",Z:"true",M:"Axes",T:"string",C:"Longest string for ticks in the Z axis"},yAxisExact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data in the Y axis",D:"false"},rAxisTickFormat:{A:"true",M:"Axes",T:"string",C:"Format for the tick values in the R axis",D:"false"},showShadow:{S:["shadowOffsetX","shadowOffsetY","this.shadowBlur","shadowColor"],M:"General",T:"boolean",C:"Flag used to add  shadows to all element in the canvas. It will be forced to false if the browser is IE.",D:"false"},colorScheme:{S:["colors"],O:["user","basic","dark","strong","light","pastel","balanced","reset"],M:"Attributes",T:"option",C:"Color schemes can be user defined which will take the colors in the color property or one provided in canvasXpress. The order of the colors will be used to sequentially select when a different color is needed in a particular visualization.",D:"basic"},remoteWindow:{A:"true",M:"Remote Procedures",T:"integer",C:"Number of plots to show  when requesting remote data",D:"1"},showNetworkDecorationsLegend:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to show node legends in the networks",D:"true"},zAxisTickFormat:{A:"true",M:"Axes",T:"string",C:"Format for the tick values in the Z axis",D:"false"},xAxisMinorValues:{A:"true",M:"Axes",T:"array",C:"Values for the minor ticks in the X axis",D:"[]"},rAxisMinorValues:{A:"true",M:"Axes",T:"array",C:"Values for the minor ticks in the R axis",D:"[]"},isMarketDataFormated:{A:"true",Z:"true",M:"Data",T:"boolean",C:"Flag to indicate if the data has been formated to display Candlestick."},segregateSamples:{S:["desegregateSamples"],M:"Functions",T:"option",C:"Segregate samples based on a sample category (data.x object)",X:"getXData",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},skin:{A:"true",O:["blue","grey"],M:"Skins",T:"option",C:"Skin for the application",D:"grey"},isTransformedData:{A:"true",Z:"true",M:"Data",T:"boolean",C:"Flag to indicate if the data is transformed."},background:{S:["backgroundType"],M:"General",T:"color",C:"Background color for the canvas.",D:"rgb(255,255,255)"},resizerTransparency:{A:"true",M:"Axis Resizer",T:"boolean",C:"Flag to make the axis resizers transparent",D:"true"},hideUnhideVars:{M:"Functions",T:"array",C:"Hide or unhide variables. It works like a switch",X:"getVariablesAsArray",U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},periodTicksLabels:{A:"true",M:"Genome Browser",T:"integer",C:"Number of ticks to skip between values in the genome browser",D:"5"},colWidth:{A:"true",M:"Data table",T:"integer",C:"Mumber of pixels for the width of cells in the data table",D:"100"},scaleY:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Scale factor for the Y axis"},seriesSeparationFactor:{M:"One dimentional plots",T:"float",C:"Factor to adjust the spacing between the series in the bar graphs",D:"2"},varLabelFont:{A:"true",Z:"true",M:"Variables",T:"font",C:"Font for the variable labels in one dimensional plots"},startCol:{A:"true",Z:"true",M:"Data table",T:"boolean",C:"Starting column in the data table"},xAxisTransform:{O:["false","log2","log10","exp2","exp10","percentile"],M:"Axes",T:"option",C:"Tranformation for the values in the X axis.",D:"false"},nodesProperties:{M:"Data Table/Filter",T:"array",C:"Two dimensional array with object properties not at the root level for the nodes in the Network graph to include in the Data table and the data filter",D:"[]"},ratioReference:{M:"Data",T:"integer",C:"Default index of sample used in ratio transformation.",D:"0"},citationColor:{S:["citation"],M:"Titles",T:"color",C:"Color for a reference citation of the graph",D:"rgb(0,0,0)"},rAxisZero:{M:"Circular Graphs",T:"boolean",C:"Flag to force the rAxis to start from zero otherwise it starts from the minimum value",D:"true"},decorationsPosition:{A:"true",O:["bottom","right"],M:"Decorations",T:"option",C:"Position for the decorations in scatter plots and network graphs",D:"bottom"},eventPlusMinusKeys:{A:"true",M:"Events",T:"boolean",C:"Flag to enable plus / minus key binding events.",D:"true"},resizerBackgroundColorCurrent:{A:"true",M:"Axis Resizer",T:"color",C:"Color for the div that shows up the current area selected in the axes in the canvas",D:"rgb(153,187,232)"},correlationAnchorLegend:{A:"true",M:"Correlation Graphs",T:"boolean",C:"Flag to show a region above the correlation plot that anchror a sample/variable to a position",D:"false"},minRotate:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Minimum number of degrees to rotate graph arround axes",D:"false"},axisTitleColor:{M:"Ticks and Axis Titles",T:"color",C:"Color for the axis title in one and two dimensional plots",D:"foregroung color"},xAxis2AbsMax:{A:"true",Z:"true",M:"Axes",T:"float",C:"Maximum unfiltered value for the 2nd X axis"},panningGlobalX:{A:"true",Z:"true",M:"Zooming and Panning",T:"float",C:"Cumulative number of unit to pan the network in the X dimension"},xAxis:{A:"true",M:"Axes",T:"array",C:"Name of the samples groups or variables to be displayed in the X axis",D:"[]",X:"getSamplesAsArray"},featureNameFont:{A:"true",Z:"true",M:"Genome Browser",T:"font",C:"Font for the text of the features in the genome browser"},scatterSeries:{O:["x","y"],M:"Scatter Plots",T:"option",C:"Axis that contain the series in the scatter plots",D:"y"},offsetY:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Additional amount to move for the Y axis."},selectNode:{A:"true",Z:"true",M:"Network Graphs",T:"object",C:"Name of nodes (in the data object) to select.",D:"{}"},isGraphTime:{A:"true",M:"Data",T:"boolean",C:"Flag to indicate if the data is a time series so ther is no need to plot every time interval",D:"false"},featureTraceHeight:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the trace height",D:"40"},featureQualityShow:{M:"Genome Browser",T:"boolean",C:"Flag use to show quality",D:"true"},lineDecoration:{O:["false","dot","symbol"],M:"Line Graphs",T:"option",C:"Lines decorations in the line graphs",D:"sybol"},kmeansVariables:{S:["kmeansClusters","maxIterations"],M:"Functions",T:"void",C:"Cluster variables using kmeans",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",StackedPercentLine:"true",Area:"true",Line:"true",StackedLine:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},xAxisValues:{A:"true",M:"Axes",T:"array",C:"Values for the ticks in the X axis",D:"[]"},clusterAxis:{S:["distance","linkage","imputeMethod","centerData","clusterSamples","clusterVariables"],O:["samples","variables"],M:"Clustering",T:"option",C:"Default axis to use when clustering data.",D:"samples"},rotationDelay:{A:"true",M:"3D Scatter Plot and Networks",T:"integer",C:"Time in milliseconds to wait between rendering the plot when dragging the mouse.",D:"100"},varLabelScaleFontFactor:{M:"Variables",T:"float",C:"Scaling factor used to increse or decrease variable font size in the canvas.",D:"1"},maxVarStringLen:{M:"Variables",T:"integer",C:"Maximum length in characters a variable label or description can have so anything above is truncated.",D:"30"},varLabelRotate:{M:"Variables",T:"integer",C:"Rotation for variable labels in degrees It could be positive or negative.",D:"0"},networkNodesOnTop:{M:"Network Graphs",T:"boolean",C:"Order to use when drawing nodes and edges in the networks",D:"true"},colorRGB:{A:"true",Z:"true",M:"Attributes",T:"array",C:"Color RGB. Red, Green, Blue used in the configurator"},setMaxZ:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data in the Z axis",D:"null"},dendrogramHeight:{M:"Dendrograms",T:"boolean",C:"Flag to size the branches of the dendrogram.",D:"false"},showFeatureNameThereshold:{M:"Genome Browser",T:"integer",C:"Threshehold used to set te limit when there are too many features in the genome browser",D:"20"},zAxisAbsMin:{A:"true",Z:"true",M:"Axes",T:"float",C:"Minimum unfiltered value for the Z axis"},setMinZ:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data in the Z axis",D:"null"},varTitleFontSize:{A:"true",M:"Variables",T:"integer",C:"Size for the variable title in one dimensional plots",D:"10"},reduceRandomNetwork:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to create or not a single random network for debug and demonstraion purposes",D:"false"},edgeWidth:{M:"Network Graphs",T:"integer",C:"Default width for the edges in the networks",D:"1"},sequenceSColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate G/C and serines in the genome browser",D:"rgb(255,165,0)"},isMultidimensionalHeatmap:{A:"true",Z:"true",M:"Heatmaps",T:"boolean",C:"Flag to indicate if the heatmap is multidimensional"},maxIterations:{S:["kmeansClusters","kmeansSamples","kmeansVariables"],M:"Clustering",T:"integer",C:"Number of maximum iterations when clustering data with kmeans for one dimensional graphs or maximum number of iterations when calculating force direct layout networks.",D:"10"},sortDir:{O:["ascending","descending"],M:"Data",T:"option",C:"Default direction for data sorting.",D:"ascending"},filterSmpBy:{M:"Samples",T:"filter",C:"Filter samples by their annotation included in the 'data.x' object used in one dimensional plots",D:"[]",X:"getXData"},featrureSignalToNoiseHeight:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the quality height",D:"12"},showOverlays:{M:"Overlays",T:"boolean",C:"Flag to indicate to show or not the overlays in one dimensional plots",D:"true"},autoAdjustMax:{A:"true",M:"General",T:"integer",C:"Number of times to try to automaticaly adjust the size of the canvas when autoAdjust is true",D:"3"},smpTitleColor:{M:"Samples",T:"color",C:"Font color for the sample title in one dimensional plots",D:"foreground color"},graphOrientation:{O:["horizontal","vertical"],M:"General",T:"option",C:"Orientation of the graph when plotting one dimensional graphs",D:"horizontal"},outlineWidth:{A:"true",M:"Attributes",T:"integer",C:"Default width in pixels for the lines",D:"1"},randomDataVariableAnnotationRatio:{A:"true",M:"Data",T:"integer",C:"Approximate number of classes in each variable annotation when creating random data",D:"2"},marginRight:{M:"General",T:"integer",C:"Length in pixels for the right margin in the canvas",D:"0"},align:{A:"true",O:["right","center","left"],M:"Text",T:"option",C:"Default horizontal alignment for drawing text.",D:"center"},dataTableTransposed:{A:"true",M:"Data table",T:"boolean",C:"Flag to transpose the data in the data table",D:"true"},showDataTableOnSelect:{A:"true",M:"Data table",T:"boolean",C:"Flag to indicate to show data after selecting data in the plot",D:"false"},wireColor:{A:"true",M:"Genome Browser",T:"color",C:"Color for the ticks in the genome browser",D:"rgba(204,204,204,0.1)"},sequenceVColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/C/G and valines in the genome browser",D:"rgb(0,103,0)"},marginTop:{M:"General",T:"integer",C:"Length in pixels for the top margin in the canvas",D:"0"},setMin:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data",D:"null"},animationCycles:{A:"true",M:"Animation",T:"integer",C:"Number of cycles to plot the graph for the animations.",D:"20"},sequenceDColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/G/T and aspartic acids in the genome browser",D:"rgb(0,0,0)"},videoLoop:{M:"General",T:"boolean",C:"Flag to loop videos default false"},shapeNodeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to shape the nods.",D:"false"},errors:{A:"true",Z:"true",M:"Debug",T:"array",C:"Array containing benign errors produced when rendering canvasXpress",D:"[]"},xAxisShow:{M:"Axes",T:"boolean",C:"Flag to show on not the values of the ticks in the X axis",D:"true"},skinPropertiesGrey:{A:"true",Z:"true",M:"Skins",T:"array",C:"Values for the grey skin",D:"[]"},canvasBoxColor:{S:["canvasBox"],M:"General",T:"color",C:"Color for the box around the canvas",D:"rgb(0,0,0)"},subtitleHeight:{S:["subtitle","subtitleColor"],M:"Titles",T:"integer",C:"Height for the subtitle of the graph. The font height will be adjusted automatically to fit in the canvas.",D:"16"},indicatorsPosition:{O:["bottom","right"],M:"Indicators",T:"option",C:"Position for the color, shape and size indicators in several visualizations",D:"bottom"},featureConfigurableProperties:{A:"true",F:"id:[string];Feature id;[],fill:[color];Color for the feature;[]",M:"Genome Browser",T:"array",C:"Feature configurable properties",D:["'id'","'name'","'label'","'hideName'","'fill'","'outline'","'dir'","'showDir'","'connect'","'offset'","'data'","'subtype'","'quality'","'signalToNoise'","'coordinate'","'sequence'","'trace'","'gaps'","'translate'","'hide'","'counter'"]},titleHeight:{S:["title","titleColor"],M:"Titles",T:"integer",C:"Height for the title of the graph. The font height will be adjusted automatically to fit in the canvas.",D:"30"},subtracksMaxDefault:{M:"Genome Browser",T:"integer",C:"Maximum number of subtracks to show in a track",D:"8"},acknowledgment:{M:"General",T:"boolean",C:"Acknowledge canvasXpress",D:"false"},videoColor:{M:"General",T:"color",C:"Color for the video grid and current time",D:"rgb(255,0,0)"},sizes:{A:"true",O:["4","6","8","10","12","14","16","18","20","22","24","26","28","30","32","34"],M:"Attributes",T:"array",C:"Sizes used invisualizations"},infoTimeIn:{A:"true",M:"Events",T:"integer",C:"Time in milliseconds to start showing info after a mouse over",D:"3000"},layoutHeight:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Height of the current segment of the canvas when there are multiple graphs."},sizeEdgeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to size the edges.",D:"false"},foregroundWindow:{A:"true",S:["backgroundType"],M:"General",T:"color",C:"Foreground color of the canvas window when the background type is a type of window.",D:"rgb(0,0,0)"},colorBy:{O:["false","variable"],M:"Scatter and One-D Plots",T:"option",C:"Name of a variable annotation or a sample name or the string 'variable' to color the variables.",D:"false",X:"getXZData"},randomNetworkNodeEdgesMax:{A:"true",M:"Network Graphs",T:"integer",C:"Default number of maximum edges when creating random networks",D:"5"},scaleTextConstantAdd:{A:"true",Z:"true",M:"Text",T:"float",C:"Constants to autoscale text (extra)",D:"2.5"},rAxisExact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data in the R axis",D:"false"},transformBase:{O:["2","10"],M:"Data",T:"integer",C:"Default log or exponential transformation.",D:"2"},centerData:{S:["distance","linkage","clusterAxis","imputeMethod","clusterSamples","clusterVariables"],M:"Clustering",T:"boolean",C:"Flag to indicate whether to center data when clustering",D:"false"},missingDataColor:{M:"Data",T:"color",C:"Color for the missing data",D:"rgb(255,255,0)"},rAxisMinorTicks:{A:"true",M:"Axes",T:"boolean",C:"A flag to show minor tick lines in the R axis",D:"false"},offsetX:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Additional amount to move for the X axis"},videoAutoplay:{M:"General",T:"boolean",C:"Flag to autoplay videos default true"},rAxisAbsMin:{A:"true",Z:"true",M:"Axes",T:"float",C:"Minimum unfiltered value for the R axis"},zAxisTickStyle:{A:"true",O:["solid","dotted"],M:"Axes",T:"option",C:"Style for the tick lines in the Z axis",D:"solid"},showNodeNameThreshold:{M:"Network Graphs",T:"integer",C:"Thereshold used to set the limit to hide or display the name of nodes in a network. If the number of nodes exceed this thereshold then the name will not be shown.",D:"50"},isSelectDataPoints:{A:"true",Z:"true",M:"Scatter Plots",T:"integer",C:"Number of selected data points (in the data object).",D:"0"},randomDataSampleAnnotations:{A:"true",M:"Data",T:"integer",C:"Default number of sample annotations when creating random data",D:"3"},smpLabelRotate:{M:"Samples",T:"integer",C:"Rotation for sample labels in degrees. It could be positive or negative.",D:"0"},resizerWidth:{A:"true",M:"Axis Resizer",T:"integer",C:"Length in pixels for the width of the visible axis resizer",D:"18"},showNetworkRadialLayout:{M:"Network Graphs",T:"boolean",C:"Flag to show or not a radial layout wire.",D:"false"},infoTimeOut:{A:"true",M:"Events",T:"integer",C:"Time in milliseconds to wait between updates for the mouse over info to show up",D:"3000"},overlayFont:{A:"true",Z:"true",M:"Overlays",T:"font",C:"Font for the overlays in one dimensional plots"},rAxisTickStyle:{A:"true",O:["solid","dotted"],M:"Axes",T:"option",C:"Style for the tick lines in the R axis",D:"solid"},setMinY:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data in the Y axis",
D:"null"},showNetworkEdgesLegend:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to show edge legends in the networks",D:"true"},filterNodeBy:{M:"Network Graphs",T:"filter",C:"Filter nodes by their properties used in network graphs",D:"[]",X:"getNodeData"},panningGlobalY:{A:"true",Z:"true",M:"Zooming and Panning",T:"float",C:"Cumulative umber of unit to pan the network in the Y dimension"},featureHeightDefault:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the feature height",D:"14"},zAxisTicks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the Z axis",D:"5"},remoteIds:{A:"true",Z:"true",M:"Remote Procedures",T:"array",C:"Array of the remoteIds passed after a service call"},freezeColLeft:{A:"true",M:"Data table",T:"integer",C:"Number of columns to freeze in the left side of the data table",D:"0"},dotPlotDataPointTransparency:{A:"true",S:["showBoxplotOriginalData","dotPlotDataPointRatio"],M:"Dot Plots",T:"float",C:"Fraction to adjust color transparency for the data points when displaying original data in boxplots.",D:"0.5"},yAxisTickFormat:{A:"true",M:"Axes",T:"string",C:"Format for the tick values in the Y axis",D:"false"},setMin2:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data in the 2nd axis",D:"null"},isGroupedData:{A:"true",Z:"true",M:"Data",T:"boolean",C:"Flag to indicate if the data is grouped."},vennLegendColors:{M:"Venn Diagrams",T:"boolean",C:"Flag to use the venn colors to use for the legends instead of the letters",D:"false"},zoomGlobal:{A:"true",Z:"true",M:"Zooming and Panning",T:"float",C:"Cumulative zoom factor for the networks."},decorationsType:{A:"true",O:["pie","bar","heatmap","stacked","stackedpercent"],M:"Decorations",T:"option",C:"Type for the decorations in the networks. The types stacked and stackedpercent must be two dimensional. Heatmap could be one or two dimensional",D:"bar"},showVersion:{A:"true",M:"Debug",T:"boolean",C:"Flag to show version when mouse over top-left corner of the canvas.",D:"true"},networkDepth:{A:"true",Z:"true",M:"Network Graphs",T:"integer",C:"Depth of the radial network."},showHiddenChildEdges:{M:"Network Graphs",T:"boolean",C:"Flag to show or not children nodes when the parent node is hidden.",D:"true"},randomDataSigma:{A:"true",M:"Data",T:"integer",C:"Sigma value when creating random data",D:"100"},nodeConfigurableProperties:{A:"true",M:"Network Graphs",T:"array",C:"Node configurable properties",N:"x:[float];X coordinate;[],y:[float];Y coordinate;[],z:[float];Z coordinate;[],parentNode:[string];Id of parent node;[],shape:[string];Shape for the node. One of the ones defined in shapes;[shapes],color:[color];Color for the node;[],outline:[color];Color for the outline of the node;[],pattern:[open|closed];Whether to draw a solid shape or just an outline;[],rotate:[integer];Number of degrees to rotate the shape;[],outlineWidth:[integer];Pixels used to raw the outline of the node;[],imagePath:[url];Url for the node image;[],zIndex:[integer];Css property for the imagePath;[],eventless:[boolean];Flag to disable all events in the node;[overrideEventlessNodes],hide:[boolean];Flag to hide the node;[],hideLabel:[boolean];Flag to hide the label node;[],anchor:[boolean];Flag make the node transparent;[]",D:["'x'","'y'","'z'","'shape'","'color'","'outline'","'size'","'width'","'height'","'pattern'","'rotate'","'outlineWidth'","'imagePath'","'zIndex'","'eventless'"]},zoomStep:{A:"true",M:"Zooming and Panning",T:"float",C:"Percentage step for zooming networks and genome panel.",D:"0.2"},axisTitleScaleFontFactor:{M:"Ticks and Axis Titles",T:"float",C:"Scaling factor used to increse or decrease title font size in the canvas in one and two dimensional plots",D:"1"},zAxisExact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data in the Z axis",D:"false"},featureSignalToNoiseValues:{M:"Genome Browser",T:"boolean",C:"Flag use to show values for the quality",D:"false"},tickScaleFontFactor:{M:"Ticks and Axis Titles",T:"float",C:"Scaling factor used to increse or decrease tick font size in the canvas in one and two dimensional plots",D:"1"},showNetworkTextLegend:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to show node legends in the networks",D:"true"},showIndicators:{M:"Indicators",T:"boolean",C:"Flag to show color, shape and size indicators in several visualizations",D:"true"},createHistogram:{A:"true",O:["x","y"],M:"Functions",T:"option",C:"Create a histogram in 2D-Scatter plots in the 'x' axis or the 'y' axis",U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},sma20Color:{M:"Candlestick Plots",T:"color",C:"The color for the 25 day single moving average",D:"rgb(0,0,255)"},smpHairlineColor:{M:"One dimentional plots",T:"color",C:"The color for the thin line that appears in the middle of the bar graphs",D:"rgb(204,204,204)"},axisTitleFont:{A:"true",Z:"true",M:"Ticks and Axis Titles",T:"font",C:"Font for the axis titles in one and two dimensional plots"},functions:{Z:"true",M:"General",T:"array",C:"Functions exposed to the api"},decorationsProperties:{A:"true",M:"Decorations",T:"object",C:"Object to assign properties like color for the network decorations",D:"{}"},ticks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the genome browser",D:"50"},rAxisMaxStrLength:{A:"true",Z:"true",M:"Axes",T:"string",C:"Longest string for ticks in the R axis"},showAnimationFont:{A:"true",Z:"true",M:"Animation",T:"font",C:"Font for the text in animations"},videoPoster:{M:"General",T:"url",C:"Video poster for videos",D:"false"},nodeFontSize:{A:"true",M:"Network Graphs",T:"integer",C:"Size in pixels for the font size of text in the networks",D:"node width"},sortSamplesByVariable:{S:["sortDir","sortSamplesByCategory"],M:"Functions",T:"array",C:"Sort the samples by the value of a variable",X:"getVariablesAsArray",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},resizerBackgroundImage:{Z:"true",A:"true",M:"Axis Resizer",T:"url",C:"Object to store data when the canvas is zoomed with the axis resizer resizerEventData @type {object}",D:"-1"},sizeDecorationBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to size the network decoration.",D:"false"},setSkin:{O:["blue","grey"],M:"Functions",T:"option",C:"Change the skin of the application"},trackConfigurableProperties:{A:"true",M:"Genome Browser",T:"array",C:"Track configurable properties",D:["'name'","'hideName'","'hideFeatureNames'","'type'","'height'","'fill'","'outline'","'data'","'hide'","'connect'","'subtracksMax'","'highlight'"],G:"name:[string];Track name;[]"},xAxisTickColor:{M:"Axes",T:"color",C:"Color for the tick lines in the X axis",D:"rgb(204,204,204)"},yAxisTickColor:{M:"Axes",T:"color",C:"Color for the tick lines in the Y axis",D:"rgb(204,204,204)"},isAnimation:{A:"true",Z:"true",M:"Snapshots",T:"boolean",C:"Flag to indicate if there is an active animation"},pieSegmentPrecision:{M:"Pie Charts",T:"integer",C:"Number of decimals for values in the Pie charts",D:"0"},layoutMulticolor:{A:"true",M:"Combination Plots",T:"boolean",C:"Flag to cycle colors when displaying multiple graps in the canvas. If set to false the color will be reseted for every graph.",D:"true"},disableToolbar:{A:"true",M:"Events",T:"boolean",C:"Flag to disable showing the toolbar",D:"false"},decorationScaleFontFactor:{A:"true",M:"Decorations",T:"float",C:"Scaling factor used to increse or decrease decoration font size in the canvas.",D:"1"},previousButton:{A:"true",M:"Images",T:"image",C:"Relative path to an image file to the previous button (not including the image directory)",D:"rewind.png"},boxPlotOutliersRatio:{A:"true",M:"Box Plots",T:"integer",C:"Ratio for the size of the outliers with respect to boxplot",D:"8"},panningY:{A:"true",M:"Zooming and Panning",T:"float",C:"Number of unit to pan the network in the Y dimension",D:"0"},varTitleColor:{M:"Variables",T:"color",C:"Font color for the variable titles in one dimensional plots",D:"foreground color"},useFlashIE:{M:"General",T:"boolean",C:"Flag to use flash in IE rather than VML (through excanvas.js)",D:"true"},setMinR:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data in the R axis",D:"null"},randomDataMean:{A:"true",M:"Data",T:"integer",C:"Mean value when creating random data",D:"100"},transpose:{M:"Functions",T:"void",C:"Transpose the data. It takes no parameters",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",StackedPercentLine:"true",Area:"true",Line:"true",StackedLine:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},smpLabelScaleFontFactor:{M:"Samples",T:"float",C:"Scaling factor used to increse or decrease sample label font size in the canvas.",D:"1"},circularLetterSeparationFactor:{M:"Circular Graphs",T:"float",C:"Factor to adjust the spacing between letters in the circular graphs. The greater the number the closer the letters in the labels",D:"2"},debug:{A:"true",M:"Debug",T:"boolean",C:"Flag to turn on alerts.",D:"true"},citation:{S:["citationColor"],M:"Titles",T:"string",C:"A reference citation of the graph which is placed at the bottom right corner",D:"false"},smpSort:{A:"true",Z:"true",M:"Data",T:"integer",C:"Sample index used in sorting the data."},resizerBackgroundColorOutlineCurrent:{A:"true",M:"Axis Resizer",T:"color",C:"Color for the div that shows up the current area selected in the axes in the canvas",D:"rgb(153,187,232)"},showAnimation:{A:"true",M:"Animation",T:"boolean",C:"Flag to show or not animation for the graphs",D:"false"},networkFreezeOnLoad:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to prevent autoscaling for the network layout after loading.",D:"false"},layoutTime:{A:"true",M:"Network Graphs",T:"integer",C:"Time in milliseconds used to calculate the layout for the network",D:"15"},xAxisAbsMax:{A:"true",Z:"true",M:"Axes",T:"float",C:"Maximum unfiltered value for the X axis"},isLogData:{M:"Data",T:"boolean",C:"Flag to indicate if the data is Log transformed.",D:"false"},tension:{A:"true",M:"Line Graphs",T:"float",C:"Curvature for the splines",D:"0.3"},networkStackIndex:{A:"true",Z:"true",M:"Network Graphs",T:"integer",C:"Index in the network stack for undo and redo operations"},axisTickColor:{M:"Ticks and Axis Titles",T:"color",C:"Color for the axis ticks in one and two dimensional plots",D:"foregroung color"},resizerBackgroundColor:{A:"true",M:"Axis Resizer",T:"color",C:"Color for the div that shows up when resizing the axes in the canvas or the whole canvas",D:"rgb(204,204,204)"},groupSamples:{S:["ungroupSamples"],M:"Functions",T:"array",C:"Group samples based on a sample category (data.x object)",X:"getXData",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},zRotate:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Number of degrees to rotate graph arround the Z axis",D:"0"},remoteDirection:{A:"true",O:["next","prev"],M:"Remote Procedures",T:"option",C:"Direction parameter used to obtain data remotely.",D:"next"},featureWidthDefault:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the feature width",D:"3"},skinPropertiesBlue:{A:"true",Z:"true",M:"Skins",T:"array",C:"Values for the blue skin",D:"[]"},rAxisShow:{M:"Axes",T:"boolean",C:"Flag to show on not the values of the ticks in the R axis",D:"true"},showVariableNames:{M:"Variables",T:"boolean",C:"Flag to show the variable names in one dimensional plots",D:"true"},lineTickness:{A:"true",M:"Line Graphs",T:"float",C:"Thickness in pixels for line plots",D:"1"},decorationFontSize:{A:"true",M:"Decorations",T:"font",C:"Font size for the decorations in scatter plots and network graphs",D:"10"},fontSize:{A:"true",M:"Text",T:"integer",C:"Font size for text in complex plot only. See other categories to modify specific font sizes.",D:"12"},filterType:{O:["and","or"],M:"Data Filters",T:"option",C:"Type for the filter. Can be 'and' or 'or'",D:"and"},imageDir:{A:"true",M:"Images",T:"url",C:"Relative path to a directory contaioning images",D:"http://canvasxpress.org/images/"},animationTime:{A:"true",M:"Animation",T:"integer",C:"Time in milliseconds to wait between rendering the plot when showing the animation.",D:"30"},layoutMaxVarLegend:{A:"true",Z:"true",M:"Combination Plots",T:"integer",C:"Maximum length of legend when multiple graphs are displayed in the canvas."},resizable:{A:"true",M:"Events",T:"boolean",C:"Flag to disable resizing the canvas by dragging the mouse over the edges",D:"true"},attractiveForceFunction:{A:"true",O:["Eades","FruchtermanReingold"],M:"Network Graphs",T:"option",C:"Type of function to apply when calculating attractive force in forceDirected network layouts",D:"FruchtermanReingold"},rotationStep:{A:"true",M:"3D Scatter Plot and Networks",T:"integer",C:"Number of degrees used when the plot is automatically rotated",D:"2"},xAxis2Ticks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the 2nd X axis",D:"5"},layoutCurrent:{A:"true",Z:"true",M:"Combination Plots",T:"integer",C:"Integer to identify the current graph being displayed in the canvas."},graphType:{O:["Bar","Line","Area","AreaLine","BarLine","Boxplot","Dotplot","Heatmap","Candlestick","Stacked","StackedLine","StackedPercent","StackedPercentLine","Scatter2D","ScatterBubble2D","Scatter3D","Correlation","Pie","Venn","Network","Genome","Circular"],M:"General",T:"option",C:"Type of graph",D:"Bar"},distance:{S:["linkage","clusterAxis","centerData","clusterSamples","clusterVariables"],O:["euclidian","manhattan","max"],M:"Clustering",T:"option",C:"Distance metric to use when clustering data.",D:"euclidian"},featureSignalToNoiseShow:{M:"Genome Browser",T:"boolean",C:"Flag use to show quality",D:"true"},remoteUpdateDelay:{A:"true",M:"Remote Procedures",T:"integer",C:"Time in milliseconds to wait between tryig to get an upated version of the file containing the data",D:"10000"},layout:{A:"true",M:"Combination Plots",T:"string",C:"Topology of the canvas. Number of rows and columns.",D:"1X1"},marginBottom:{M:"General",T:"integer",C:"Length in pixels for the bottom margin in the canvas",D:"0"},filterEdgeBy:{M:"Network Graphs",T:"filter",C:"Filter edges by their properties used in network graphs",D:"[]",X:"getEdgeData"},showPieValues:{M:"Pie Charts",T:"float",C:"A flag to show the values for the pie",D:"true"},smpTitleFontSize:{A:"true",M:"Samples",T:"integer",C:"Size for the sample title in one dimensional plots",D:"10"},edgeConfigurableProperties:{A:"true",M:"Network Graphs",T:"array",C:"Edge configurable properties",D:["'width'","'cap'","'exact'","'type'"],E:"color:[color];Color for the edge;[],width:[integer];Pixel width for the edges between nodes;[],cap:[butt|round|square];Type of cap for the end of the lines;[capType],exact:[boolean];Flag to indicate to create the edge between nodes without subtracting the size of the nodes;[],type:[string];Type of line use to join the nodes;[lines],hide:[boolean];Flag to hide the edge;[],anchor:[boolean];Flag make the edge transparent;[]"},ringType:{M:"Circular Graphs",T:"array",C:"Array containing the types for each ring in the circular plots",D:"[]"},zoomSamplesDisable:{S:["zoomVariablesDisable"],M:"Zooming and Panning",T:"boolean",C:"Flag to disable zooming of samples with mouse wheel in Heatmaps",D:"false"},decorationsColor:{A:"true",M:"Decorations",T:"color",C:"Color for the decorations in scatter plots and network graphs",D:"foreground color"},sequenceUColor:{M:"Genome Browser",T:"color",C:"Color for the uracils in the genome browser",D:"rgb(255,0,0)"},freezeRowTop:{A:"true",M:"Data table",T:"integer",C:"Number of rows to freeze at the top of the data table",D:"0"},nodeHighlightColor:{M:"Network Graphs",T:"color",C:"The color for the highlighted nodes.",D:"rgb(255,0,0)"},oddColor:{M:"Attributes",T:"color",C:"The color for the odd numbers in samples or sequences",D:"background color"},capType:{A:"true",O:["butt","round","square"],M:"Attributes",T:"option",C:"Default type of cap for lines.",D:"butt"},showAnimationFontColor:{A:"true",M:"Animation",T:"color",C:"Color for the animation text",D:"background color"},canvasBox:{S:["canvasBoxColor"],M:"General",T:"boolean",C:"Flag to create a box around the canvas",D:"true"},updateCodeDiv:{A:"true",M:"Functions",T:"void",C:"Update the code to generate the plot"},videoGridStep:{M:"General",T:"int",C:"Number of steps to divide the grid in the video",D:"10"},rAxisTicks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the R axis",D:"5"},sortVariablesBySample:{S:["sortDir","sortVariablesByCategory"],M:"Functions",T:"array",C:"Sort the variables by the value of a sample",X:"getSamplesAsArray",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},randomNetwork:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to create or not random network for debug and demonstraion purposes",D:"false"},layoutWidth:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Width of the current segment of the canvas when there are multiple graphs."},histogramBarWidth:{A:"true",M:"2D Scatter Plot",T:"float",C:"Length in pixels for half of the bar width in the 2D sccaterplot histogram",D:"0.5"},correlationAxis:{O:["samples","variables"],M:"Correlation Graphs",T:"option",C:"Axis used for the correlation.",D:"samples"},zAxisTransformTicks:{M:"Axes",T:"boolean",C:"Flag to transform the values of the ticks in the Z axis",D:"true"},shadowOffsetX:{A:"true",S:["showShadow"],M:"General",T:"integer",C:"Length in pixels for the shadow offset in the X axis.",D:"3"},xAxisTicks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the X axis",D:"5"},rAxisTransformTicks:{M:"Axes",T:"boolean",C:"Flag to transform the values of the ticks in the R axis",D:"true"},sequenceZColor:{M:"Genome Browser",T:"color",C:"Color for the glutamines in the genome browser",D:"rgb(0,0,0)"},skinProperties:{A:"true",Z:"true",M:"Skins",T:"array",C:"Properties for the skin",D:["'skinBackgroundColor'","'skinBorderColor'","'skinColor'","'skinShadowColor'"]},setMaxY:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data in the Y axis",D:"null"},ungroupSamples:{S:["groupSamples"],M:"Functions",T:"void",C:"Ungroup samples previously grouped according to a sample category (data.x object)",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},legendFontSize:{A:"true",S:["autoScaleFont","legendScaleFontFactor"],M:"Legends",T:"integer",C:"Font size for the legends. Be aware that auto scaling font must be turned off for this property to take effect. A more convenient way to modify the size is to use the legend scaling factor",D:"10"},randomDataSamples:{A:"true",M:"Data",T:"integer",C:"Default number of samples when creating random data",D:"50"},setMaxR:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data in the R axis",D:"null"},shapeByShape:{A:"true",O:["false","sphere","square","triangle","star","rhombus","octagon","oval","plus","minus","mdavid"],M:"Scatter and One-D Plots",T:"array",C:"String that identify the shape to use in multidimensional heatmaps. shapeByData will take precedence over this property.",D:"false"},indicatorHeight:{M:"Heatmaps and Networks",T:"integer",C:"Length in pixels for the heatmap indicator",D:"8"},marginLeft:{M:"General",T:"integer",C:"Length in pixels for the left margin in the canvas",D:"0"},xAxis2:{A:"true",M:"Axes",T:"array",C:"Name of the samples groups or variables to be displayed in the 2nd X axis",X:"getSamplesAsArray",D:"[]"},layoutComb:{A:"true",M:"Combination Plots",T:"boolean",C:"Flag that identify that multiple graphs will be displayed in the canvas.",D:"false"},broadcast:{A:"true",M:"Events",T:"boolean",C:"Flag to enable broadcasting to other canvasXpress objects in the page",D:"true"},yAxisTitle:{M:"Axes",T:"string",C:"Title for the Y axis",D:"false"},eventKeys:{A:"true",M:"Events",T:"boolean",C:"Flag to enable key binding events. This prevent some default browser shortcuts and it is system specific. Please see the Event section bellow.",D:"true"},yRotate:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Number of degrees to rotate graph arround the Y axis",D:"0"},featureTraceTrim:{A:"true",M:"Genome Browser",T:"integer",C:"Default triming for nucleotide values in the traces (expressed in percent)",D:"1"},smpTitleFont:{A:"true",Z:"true",M:"Samples",T:"font",C:"Font for the sample title in one dimensional plots"},nextButton:{A:"true",M:"Images",T:"image",C:"Relative path to an image file to the next button (not including the image directory)",D:"fast_forward.png"},sequenceCColor:{M:"Genome Browser",T:"color",C:"Color for the cytosines and cysteins in the genome browser",D:"rgb(0,0,255)"},segregateVariablesBy:{O:["false","string"],M:"Data",T:"option",C:"String to indicate the annotation used to segregate the variables. It must be a category in the 'data.z' object",D:"false"},yAxisMaxStrLength:{A:"true",Z:"true",M:"Axes",T:"string",C:"Longest string for ticks in the Y axis"},showSmpDendrogram:{M:"Dendrograms",T:"boolean",C:"Flag to show or not the sample dendrogram",D:"false"},showAdvancedConfiguration:{M:"Events",T:"boolean",C:"Flag to show advanced configuration properties.",D:"false"},disableEvents:{A:"true",M:"Events",T:"boolean",C:"Flag to disable all events.",D:"false"},edgesProperties:{M:"Data Table/Filter",T:"array",C:"Two dimensional array with object properties not at the root level for the edges in the Network graph to include in the Data table and the data filter",D:"[]"},showVarDendrogram:{M:"Dendrograms",T:"boolean",C:"Flag to show or not the variable dendrogram",D:"false"},freezeColRight:{A:"true",M:"Data table",T:"integer",C:"Number of columns to freeze in the right side of the data table",D:"0"},featrureCoordinateHeight:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the coordinates height",D:"12"},pieType:{O:["separated","solid"],M:"Pie Charts",T:"option",C:"Position for the pices of the pie",D:"separated"},rAxis:{M:"Circular Graphs",T:"string",C:"Radial axis for circular plots. It must be the name of a variable",D:"false"},fonts:{A:"true",Z:"true",M:"Text",T:"array",C:"Font name. It will be set depending on the browser. It could be Optimer, Helvetiker, Gentilis or Verdana, sans-serif"},reset:{M:"Functions",T:"void",C:"Reset the canvas"},remoteDataIndex:{A:"true",Z:"true",M:"Remote Procedures",T:"integer",C:"Index of the canvasXpress object requested"},smpLabelColor:{M:"Samples",T:"color",C:"Font color for the sample labels in one dimensional plots",D:"foreground color"},showDecorations:{A:"true",M:"Decorations",T:"boolean",C:"Flag to show or not extra decorations like (regression lines, splines, etc) in scatter plots and (heatmaps, pie charts or stacked bar graphs in) network graphs",D:"false"},backgroundVideo:{S:["backgroundType"],M:"General",T:"url",C:"Url for the background video",D:"false"},approximateNodePositions:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to force approximate X, Y node positions.",D:"false"},heatmapType:{O:["blue","blue-green","blue-red","blue-yellow","blue-cyan","blue-purple","green","green-blue","green-red","green-yellow","green-cyan","green-purple","red","red-blue","red-green","red-yellow","red-cyan","red-purple","yellow","yellow-green","yellow-red","yellow-yellow","yellow-cyan","yellow-purple","cyan","cyan-green","cyan-red","cyan-cyan","cyan-cyan","cyan-purple","purple","purple-green","purple-red","purple-purple","purple-cyan","purple-purple"],M:"Heatmaps and Networks",T:"option",C:"Color shades for the heatmap. It could be red, blue, green, yellow, cyan, purple or any combination of two colors separated by a dash",D:"blue-red"},citationScaleFontFactor:{M:"Titles",T:"float",C:"Scaling factor used to increase or decrease citation font size in the canvas",D:"1"},zoomVariablesDisable:{S:["zoomSamplesDisable"],M:"Zooming and Panning",T:"boolean",C:"Flag to disable zooming of variables with mouse wheel in Heatmaps",D:"false"},hideInfoDiv:{A:"true",M:"Functions",T:"void",C:"Hide additional information"},xAxisTickStyle:{A:"true",O:["solid","dotted"],M:"Axes",T:"option",C:"Style for the tick lines in the X axis",D:"solid"},smpTitleScaleFontFactor:{M:"Samples",T:"float",C:"Scaling factor used to increse or decrease sample title font size in the canvas",D:"1"},axisExact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data",D:"false"},monitorCanvasXpressZombiesTime:{A:"true",M:"Events",T:"integer",C:"Time in milliseconds to wait between checking for canvasXpress zombies",D:"30000"},selectDataPoint:{A:"true",Z:"true",M:"Scatter Plots",T:"array",C:"Ids of data points (in the data object) to select.",D:"[]"},subtitle:{S:["subtitleHeight","subtitleColor"],M:"Titles",T:"string",C:"Title of the graph.",D:"rgb(0,0,0)"},animationType:{A:"true",O:["grow","spring","random"],M:"Animation",T:"option",C:"Type of animation",D:"grow"},showErrorBars:{M:"Data",T:"boolean",C:"Flag to indicate whether to show or not error bars in the graphs.",D:"true"},autoAdjustXTries:{Z:"true",M:"General",T:"integer",C:"Counter to try to automaticaly adjust the horizontal size of the canvas when autoAdjust is true"},colorEdgeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to color the edges.",D:"false"},margin:{M:"General",T:"integer",C:"Length in pixels for the distance between many areas in the graphs",D:"5"},xAxisMaxStrLength:{A:"true",Z:"true",M:"Axes",T:"string",C:"Longest string for ticks in the X axis"},acknowledgementIconPosition:{O:["outside","inside"],M:"General",T:"option",C:"Acknowledge canvasXpress icon position",D:"outside"},broadcastType:{A:"true",O:["var","comb"],M:"Events",T:"option",C:"Model for broadcasting to identify either variables or a combination of variable and samples",D:"var"},autoAdjustYTries:{Z:"true",M:"General",T:"integer",C:"Counter to try to automaticaly adjust the vertical size of the canvas when autoAdjust is true"},segregateSamplesBy:{O:["false","string"],M:"Data",T:"option",C:"String to indicate the annotation used to segregate the samples. It must be a category in the 'data.x' object",D:"false"},print:{M:"Functions",T:"void",C:"Save the current parameters for a remote data set. @param {void} saveRemoteParameters"},backgroundType:{S:["backgroundImage","gradientOrientation","backgroundGradient1Color","backgroundGradient2Color"],O:["solid","gradient","window","windowGradient","windowGradient2","windowSolidGradient","image","windowImage","video"],M:"General",T:"option",C:"Type of background for the canvas. The canvas may have a window for plotting the data which may be a gradient, a solid pattern or an image.",D:"solid"},maxSmpStringLen:{M:"Samples",T:"integer",C:"Maximum length in characters a sample label or description can have so anything above is truncated.",D:"50"},showAnimationFontSize:{A:"true",M:"Animation",T:"integer",C:"Size in pixels for the font size of text involved in the animation",D:"10"},axisExtension:{A:"true",M:"Axes",T:"float",C:"Percentage to extend the values in the data",D:"0.1"},autoAdjust:{A:"true",M:"General",T:"boolean",C:"Flag to automaticaly adjust the size of the canvas in most visualizations. If set to 'false' you can easily adjust the rows and columns in the heatmap visualizations",D:"true"},sequenceMColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/G and methionines in the genome browser",D:"rgb(0,103,0)"},randomDataVariableAnnotations:{A:"true",M:"Data",T:"integer",C:"Default number of variable annotations when creating random data",D:"2"},xAxis2AbsMin:{A:"true",Z:"true",M:"Axes",T:"float",C:"Minimum unfiltered value for the 2nd X axis"},subNetworks:{A:"true",Z:"true",M:"Network Graphs",T:"array",C:"Array to keep independent networks"},showInfoDiv:{A:"true",M:"Functions",T:"void",C:"Show additional information"},yAxisAbsMin:{A:"true",Z:"true",M:"Axes",T:"float",C:"Minimum unfiltered value for the Y axis"},blockContrast:{M:"One dimentional plots",T:"boolean",C:"A flag to creates a shade between the samples so there are two backgrounds, one for the odd samples and one for the even samples.",D:"false"},xAxisExact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data in the X axis",D:"false"},legendBox:{S:["legendBoxColor","legendBackgroundColor"],M:"Legends",T:"boolean",C:"Flag to create a box around the legend",D:"true"},showDataTable:{A:"true",M:"Data table",T:"boolean",C:"Flag to indicate to show the data table",D:"false"},remoteService:{A:"true",M:"Remote Procedures",T:"url",C:"Url used to obtain data remotely. It expects and array of canvasXpress objects",D:"false"},randomDataVariables:{A:"true",M:"Data",T:"integer",C:"Default number of variables when creating random data",D:"50"},gradientRatio:{A:"true",S:["gradientType"],M:"General",T:"float",C:"Ratio used to generate the linear gradients applied to all elements in the visualizations",D:"1.3"},decorationFont:{A:"true",Z:"true",M:"Decorations",T:"font",C:"Font for the decoration in scatter plots and network graphs"},playButton:{A:"true",M:"Images",T:"image",C:"Relative path to an image file to the play button (not including the image directory)",D:"play.png"},sequenceRColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/G and arginines in the genome browser",D:"rgb(255,0,0)"},varOverlayRecycleColors:{M:"Overlays",T:"boolean",C:"Flag to indicate to recycle variable overlay colors with each overlay",D:"false"},zAxisShow:{M:"Axes",T:"boolean",C:"Flag to show on not the values of the ticks in the Z axis",D:"true"},dotPlotDataPointRatio:{A:"true",S:["showBoxplotOriginalData","dotPlotDataPointTransparency"],M:"Dot Plots",T:"float",C:"Ratio to adjust the size of the data points when displaying original data in boxplots. The higher the number the smaller the data points",D:"2"},sequenceNColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/C/G/T and asparagines in the genome browser",D:"rgb(0,0,0)"},smpOverlays:{M:"Overlays",T:"array",C:"Sample annotations included in the 'data.x' object used in one dimensional plots",D:"[]",X:"getXData"},translateY:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Amount to translate for the Y axis."},axisTitleFontSize:{A:"true",S:["autoScaleFont","axisTitleScaleFontFactor"],M:"Ticks and Axis Titles",T:"integer",C:"Font size for the axis titles in one and two dimensional plots. Be aware that auto scaling font must be turned off for this property to take effect. A more convenient way to modify the size is to use the axis title scaling factor",D:"10"},draw:{M:"Functions",T:"void",C:"Redraw the canvas",U:{Network:"true"}},featureNameFontSize:{A:"true",M:"Genome Browser",T:"integer",C:"Size in pixels for the font size of text of the features in the genome browser",D:"8"},xAxisTickFormat:{A:"true",M:"Axes",T:"string",C:"Format for the tick values in the X axis",D:"false"},sequenceFColor:{M:"Genome Browser",T:"color",C:"Color for the phenylalanines in the genome browser",D:"rgb(0,0,255)"},addRegressionLine:{M:"Functions",T:"void",C:"Add regression line(s) to a 2D-Scatter plot",U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},varLabelColor:{M:"Variables",T:"color",C:"Font color for the variable labels in one dimensional plots",D:"foreground color"},nodeSize:{M:"Network Graphs",T:"integer",C:"Length in pixels for the size of the nodes in the network",D:"10 | 20"},maxRows:{A:"true",M:"Data table",T:"integer",C:"Maximum number of rows to display in the data table",D:"10"},yAxisShow:{M:"Axes",T:"boolean",C:"Flag to show on not the values of the ticks in the Y axis",
D:"true"},zAxisMinorTicks:{A:"true",M:"Axes",T:"boolean",C:"A flag to show minor tick lines in the Z axis",D:"false"},destroyCanvasXpressZombies:{A:"true",M:"Events",T:"boolean",C:"Flag to destroy canvasXpress objects stored in the references array when they are no longer part of the DOM. This may happen when canvasXpress is used in other JS frameworks and the objects are not destroyed by the developer",D:"true"},axisTickFont:{A:"true",Z:"true",M:"Ticks and Axis Titles",T:"font",C:"Font for the axis ticks in one and two dimensional plots"},baseline:{A:"true",O:["top","middle","bottom"],M:"Text",T:"option",C:"Default vertical alignment for drawing text.",D:"right"},smpDendrogramPosition:{M:"Dendrograms",T:"option",C:"Position for the sample dendrogram in the plot. It could be top, bottom, right or left depending on the orientation of the graph.",D:"left"},is3DPlot:{M:"One dimentional plots",T:"boolean",C:"Flag to create or not a 3D plot",D:"false"},isLayoutConfigurator:{A:"true",M:"Events",T:"boolean",C:"Flag to disable showing the configurator when there is a click in the full layout icon in the toolbar",D:"true"},removeHistogram:{M:"Functions",T:"void",C:"Remove histogram from a 2D-Scatter plot",U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},disableDataFilters:{A:"true",M:"Events",T:"boolean",C:"Flag to disable showing data filters",D:"false"},createRandomData:{M:"Functions",T:"void",C:"Create a random data set"},yAxisMinorTicks:{A:"true",M:"Axes",T:"boolean",C:"A flag to show minor tick lines in the Y axis",D:"true"},helpKeyEvents:{A:"true",M:"Events",T:"boolean",C:"Flag to enable help on key events.",D:"true"},remoteUpdate:{A:"true",M:"Remote Procedures",T:"boolean",C:"Flag to indicate that the file to get the data needs to be updated",D:"false"},shadowOffsetY:{A:"true",S:["showShadow"],M:"General",T:"integer",C:"Length in pixels for the shadow offset in the Y axis.",D:"3"},varSort:{A:"true",Z:"true",M:"Data",T:"integer",C:"Variable index used in sorting the data."},yAxisTicks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the Y axis",D:"5"},decorations:{A:"true",M:"Decorations",T:"array",C:"Name of the node properties to include in the network decorations in the 'data.nodes' object",D:"[]"},showCode:{A:"true",M:"Debug",T:"boolean",C:"Flag to show code for the canvas.",D:"false"},autoHideOnDecorationsCenter:{M:"Network Graphs",T:"boolean",C:"Flag to hide node when decorations are positioned on the center",D:"false"},colors:{S:["colorScheme"],M:"Attributes",T:"array",C:"Colors.",D:"colors"},showSampleNames:{M:"Samples",T:"boolean",C:"Flag to show the sample names in one dimensional plots.",D:"true"},panningX:{A:"true",M:"Zooming and Panning",T:"float",C:"Number of unit to pan the network in the X dimension",D:"0"},yAxisCurrent:{A:"true",M:"Axes",T:"integer",C:"Index of the sample that is currently displayed displayed in the Y axis",D:"0"},shadowColor:{A:"true",S:["showShadow"],M:"General",T:"color",C:"Color for the shadow.",D:"rgba(0,0,0,0.5)"},xAxis2Show:{M:"Axes",T:"boolean",C:"Flag to show on not the values of the ticks in the second X axis",D:"true"},showCodeDiv:{A:"true",M:"Functions",T:"void",C:"Show the code for the plot"},dendrogramSpace:{M:"Dendrograms",T:"integer",C:"Length in pixels to space the branches in the dendrograms.",D:"6"},addNormalDistributionLine:{M:"Functions",T:"void",C:"Add a normaldistribution line(s) to a 2D-Scatter plot",U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},kmeansSamples:{S:["kmeansClusters","maxIterations"],M:"Functions",T:"void",C:"Cluster samples using kmeans",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",StackedPercentLine:"true",Area:"true",Line:"true",StackedLine:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},eventArrowKeys:{A:"true",M:"Events",T:"boolean",C:"Flag to enable arrow key binding events.",D:"true"},maxTextSize:{A:"true",M:"Text",T:"integer",C:"Maximum size for any text in the canvas.",D:"14"},skinHighlight:{A:"true",Z:"true",M:"Skins",T:"color",C:"Color for the highlight skin automatically calculated"},xAxisTitle:{M:"Axes",T:"string",C:"Title for the X axis",D:"false"},functionIntervals:{A:"true",M:"2D Scatter Plot",T:"integer",C:"Number of intervals to use when drawing functions in the decorations",D:"20"},gradient:{A:"true",S:["gradientType"],M:"General",T:"boolean",C:"Flag used to apply gradients to all elements ploted in the visualizations according to their corresponding color",D:"false"},genomeResolution:{A:"true",Z:"true",O:["low","medium","high"],M:"Genome Browser",T:"option",C:"Number to adjust the splines curvature"},maxCols:{A:"true",M:"Data table",T:"integer",C:"Maximum number of columns to display in the data table",D:"8"},rAxisAbsMax:{A:"true",Z:"true",M:"Axes",T:"float",C:"Maximum unfiltered value for the R axis"},sma5Color:{M:"Candlestick Plots",T:"color",C:"The color for the 5 day single moving average",D:"rgb(255,0,0)"},nodeFont:{A:"true",Z:"true",M:"Network Graphs",T:"font",C:"Font for the text in networks"},x3DRatio:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Value between 0 - 1 for adjusting the 3D of the X Axis",D:"1"},sequenceGAPColor:{M:"Genome Browser",T:"color",C:"Color for the deletions, insertions and gaps  in the genome browser",D:"rgb(255,0,255)"},maintainZoomOnDrag:{A:"true",M:"Events",T:"boolean",C:"Flag to enable maintaining zooming after initial drag in one dimensional plots",D:"false"},disableConfigurator:{A:"true",M:"Events",T:"boolean",C:"Flag to disable configurator.",D:"false"},colorHSV:{A:"true",Z:"true",M:"Attributes",T:"array",C:"Color HSV. Hue, Saturation and Value used in the configurator"},sequenceIColor:{M:"Genome Browser",T:"color",C:"Color for the isoleucines in the genome browser",D:"rgb(0,103,0)"},smpTitle:{M:"Samples",T:"string",C:"Title for the sample axis in one dimensional plots",D:"false"},correlationAnchorLegendAlignWidth:{A:"true",M:"Correlation Graphs",T:"integer",C:"Length in pixels of the height of the correlation anchor legend",D:"40"},shapeEdgeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to shape the nods.",D:"false"},xAxis2MaxStrLength:{A:"true",Z:"true",M:"Axes",T:"string",C:"Longest string for ticks in the 2nd X axis"},show3DGrid:{A:"true",M:"3D Scatter Plot and Networks",T:"boolean",C:"Flag to show the X,Y,Z grid in scatter 3D plots",D:"true"},randomNetworkNodes:{A:"true",M:"Network Graphs",T:"integer",C:"Default number of nodes when creating random networks",D:"50"},codeType:{A:"true",O:["pretty","compact","tab"],M:"Debug",T:"option",C:"Output type for the JSON code",D:"pretty"},xAxis2MinorValues:{A:"true",M:"Axes",T:"array",C:"Values for the minor ticks in the 2nd X axis",D:"[]"},fontName:{A:"true",O:["Gentilis","Helvetiker","Optimer","Verdana, sans-serif"],M:"Text",T:"font",C:"Font name. It will be set depending on the browser. It could be Optimer, Helvetiker, Gentilis or Verdana, sans-serif",D:"Verdana, sans-serif"},smpLabelInterval:{A:"true",M:"Samples",T:"integer",C:"Interval for the sample labels in one dimensional plots",D:"1"},rAxisTitle:{M:"Axes",T:"string",C:"Title for the R axis",D:"false"},dataTableColumnWidth:{Z:"true",M:"Data table",T:"array",C:"Initialize configurations"},highlightSmp:{M:"Samples",T:"array",C:"Name of samples in the 'data.y' object to highlight.",D:"[]",X:"getSamplesAsArray"},decorationsHeight:{A:"true",M:"Decorations",T:"integer",C:"Length in pixels of the height for the decorations in the networks",D:"20"},donutProportion:{M:"Circular Graphs",T:"float",C:"Proportion of the center of the circular graph to use as void",D:"0.3"},sequenceBColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate C/G/T and asparagines in the genome browser",D:"rgb(0,0,0)"},segregateVariables:{S:["segregateVariables"],M:"Functions",T:"option",C:"Segregate variables based on a variable category (data.z object)",X:"getZData",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},coordinateLineColor:{M:"Line Graphs",T:"boolean",C:"Flag to used same color in BarLine plots. If set to true the color of the bars and the lines will be the same",D:"true"},dendrogramColor:{M:"Dendrograms",T:"color",C:"The color for the dendrograms",D:"rgb(204,204,204)"},sequenceQColor:{M:"Genome Browser",T:"color",C:"Color for the glutamines in the genome browser",D:"rgb(0,0,0)"},layoutAxis:{A:"true",Z:"true",O:["1","2","3"],M:"Combination Plots",T:"option",C:"Flag to indicated whether to print axes values when multiple graphs are displayed in the canvas. The possible values are: 1: horizontal, 2: vertical, 3: both"},smpIndicesStart:{A:"true",Z:"true",M:"Heatmaps",T:"integer",C:"Number that indicates starting point for samples in heatmaps when the canvas is zoom in."},xAxisCurrent:{A:"true",M:"Axes",T:"integer",C:"Index of the sample that is currently displayed displayed in the X axis",D:"0"},zAxisCurrent:{A:"true",M:"Axes",T:"integer",C:"Index of the sample that is currently displayed displayed in the Z axis",D:"0"},nodeScaleFontFactor:{M:"Network Graphs",T:"float",C:"Scaling factor used to increse or decrease network text font size in the canvas.",D:"1"},evenColor:{M:"Attributes",T:"color",C:"The color for the even numbers in samples or sequences",D:"rgb(240,240,240)"},backgroundWindowGradient2Color:{A:"true",S:["backgroundType"],M:"General",T:"color",C:"The second color of the gradient if the background is a type of window gradient.",D:"rgb(0,0,36)"},showLevelOverlays:{M:"Overlays",T:"boolean",C:"Flag to indicate to show or not the level overlays in one dimensional plots",D:"true"},startPieSectors:{M:"Pie Charts",T:"float",C:"Starting degrees for pie sectors. 0 is equivalent to 3:00 oclock",D:"0"},legendBoxColor:{S:["legendBox"],M:"Legends",T:"color",C:"Color for the box around the legend",D:"rgb(0,0,0)"},rotationSensitivity:{A:"true",M:"3D Scatter Plot and Networks",T:"integer",C:"Factor to adjust the sensitivity of the mouse when rotating the  graph",D:"45"},selectDataMode:{O:["area","name"],M:"Scatter Plots",T:"option",C:"Type of mode to highliht selected data points",D:"area"},font:{A:"true",Z:"true",M:"Text",T:"font",C:"The combination of font name style and size.",D:"Verdana, sans-serif 12pt"},skipClick:{A:"true",Z:"true",M:"Network Graphs",T:"boolean",C:"Flag to skip click events after a mouse down event in the networks when the eventModel is global"},trackNameFontColor:{M:"Genome Browser",T:"color",C:"Color for the text of the tracks in the genome browser",D:"background color"},rAxisTransform:{O:["false","log2","log10","exp2","exp10","percentile"],M:"Axes",T:"option",C:"Tranformation for the values in the R axis.",D:"false"},scaleTextConstantMult:{A:"true",Z:"true",M:"Text",T:"integer",C:"Constants to autoscale text",D:"40"},varLabelDescription:{M:"Variables",T:"string",C:"Variable label description is a valid sample classification included in the 'data.z' object used in heatmaps",D:"false"},images:{A:"true",S:["scatterType"],M:"Attributes",T:"array",C:"Array of urls of images used in scatter plots.",D:"[]"},linkage:{S:["distance","clusterAxis","imputeMethod","centerData","clusterSamples","clusterVariables"],O:["single","complete","average"],M:"Clustering",T:"option",C:"Linkage type to use when clustering data.",D:"single"},sequenceStartColor:{M:"Genome Browser",T:"color",C:"Color for the start codon in the genome browser",D:"rgb(0,255,0)"},smpLabelDescription:{M:"Samples",T:"string",C:"Sample label description is a valid sample classification included in the 'data.x' object used in heatmaps",D:"false"},backgroundGradient1Color:{S:["backgroundType","backgroundGradient2Color"],M:"General",T:"color",C:"The first color of the gradient if the background is a type of gradient.",D:"rgb(0,0,200)"},smpLabelFont:{A:"true",Z:"true",M:"Samples",T:"font",C:"Font for the sample labels in one dimensional plots"},timeValueIndices:{A:"true",M:"Axes",T:"array",C:"Array containig the indices of the values when the the graph is a time series",D:"[]"},legendColor:{M:"Legends",T:"color",C:"Color for the legends",D:"foregroung color"},layoutAdjust:{A:"true",M:"Combination Plots",T:"boolean",C:"Flag to force recalculating the ranges in the axes when multiple graphs are displayed in the canvas.",D:"false"},featureNameFontColor:{M:"Genome Browser",T:"color",C:"Color for the text of the features in the genome browser",D:"background color"},isSelectNodes:{A:"true",Z:"true",M:"Network Graphs",T:"integer",C:"Number of selected nodes (in the data object).",D:"0"},varHighlightColor:{M:"Variables",T:"color",C:"The color for the highlighted variables.",D:"rgb(255,0,0)"},startRow:{A:"true",Z:"true",M:"Data table",T:"boolean",C:"Starting row in the data table"},remoteAutoPlayDelay:{A:"true",M:"Remote Procedures",T:"integer",C:"Time in milliseconds to wait between iterations over remote data sets",D:"3000"},kmeansClusters:{S:["maxIterations","kmeansSamples","kmeansVariables"],M:"Clustering",T:"integer",C:"Number of clusters when clustering data with kmeans.",D:"3"},lines:{A:"true",Z:"true",O:["","dashed","dotted","bezierY","bezierX","curved + arrow","arrowHead","arrowTail","arrowHeadSquareTail","arrowTailSquareHead","square","squareHead","squareTail","squareHeadArrowTail","squareTailArrowHead"],M:"Attributes",T:"array",C:"Line types available network graphs The patterns can be: '', 'dashed', 'dotted', 'bezierY', 'bezierX' and 'curved'. The end could be: 'arrow', 'arrowHead', 'arrowTail', 'arrowHeadSquareTail', 'arrowTailSquareHead', 'square', 'squareHead', 'squareTail', 'squareHeadArrowTail' or 'squareTailArrowHead'."},varTitleScaleFontFactor:{M:"Variables",T:"float",C:"Scaling factor used to increse or decrease variable font size in the canvas.",D:"1"},xAxis2MinorTicks:{A:"true",M:"Axes",T:"boolean",C:"A flag to show minor tick lines in the 2nd X axis",D:"true"},showPieGrid:{M:"Pie Charts",T:"float",C:"A flag to show the labels for the grid when plotting multiple pies",D:"true"},sequenceHColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/C/T and histidines in the genome browser",D:"rgb(255,0,0)"},acknowledgementIcon:{O:["cx.png","cxn.png"],M:"General",T:"option",C:"Acknowledge canvasXpress icon",D:"cx.png"},timeFormat:{A:"true",O:["default","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime"],M:"Attributes",T:"option",C:"Time Format according to date.format.js Steven Levithan <stevenlevithan.com>",D:"isoDate"},networkStackStates:{A:"true",M:"Network Graphs",T:"integer",C:"Number of states to keep in the network stack after a drag or move",D:"5"},sequenceEColor:{M:"Genome Browser",T:"color",C:"Color for the glutamic acids in the genome browser",D:"rgb(0,0,0)"},hideCodeDiv:{A:"true",M:"Functions",T:"void",C:"Hide the code for the plot"},trackNameFontSize:{A:"true",M:"Genome Browser",T:"integer",C:"Size in pixels for the font size of text of the tracks in the genome browser",D:"10"},sequenceEndColor:{M:"Genome Browser",T:"color",C:"Color for the end codon in the genome browser",D:"rgb(255,0,0)"},dropdownButton:{A:"true",M:"Images",T:"image",C:"Relative path to an image file to the drop down button (not including the image directory)",D:"menu_dropdown.png"},legendFont:{A:"true",Z:"true",M:"Legends",T:"font",C:"Font for the legends"},randomDataSampleAnnotationRatio:{A:"true",M:"Data",T:"integer",C:"Approximate number of classes in each sample annotation when creating random data",D:"2"},xAxis2Values:{A:"true",M:"Axes",T:"array",C:"Values for the ticks in the 2nd X axis",D:"[]"},freezeRowBottom:{A:"true",M:"Data table",T:"integer",C:"Number of rows to freeze at the bottom of the data table",D:"0"},xAxisTransformTicks:{M:"Axes",T:"boolean",C:"Flag to transform the values of the ticks in the X axis",D:"true"},overrideEventlessNodes:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to override nodes that do not take events to be able to edit them",D:"false"},legendScaleFontFactor:{M:"Legends",T:"float",C:"Scaling factor used to increse or decrease legend font size in the canvas.",D:"1"},tmpAsciiArray:{A:"true",Z:"true",M:"Data",T:"array",C:"A temporary array to enable sorting data asciibetically."},sma50Color:{M:"Candlestick Plots",T:"color",C:"The color for the 50 day single moving average",D:"rgb(0,0,0)"},areaIsCumulative:{M:"Area Graphs",T:"boolean",C:"Flag to treat area graphs as cumulative values",D:"false"},stopButton:{A:"true",M:"Images",T:"image",C:"Relative path to an image file to the stop button (not including the image directory)",D:"stop.png"},trackNameFont:{A:"true",Z:"true",M:"Genome Browser",T:"font",C:"Font for the text of the tracks in the genome browser"},randomData:{A:"true",M:"Data",T:"boolean",C:"Flag to create or not random data for debug and demonstraion purposes",D:"false"},networkDivisions:{A:"true",Z:"true",M:"Network Graphs",T:"integer",C:"Number of angular divisions in the radial network."},resizerDraw:{A:"true",M:"Axis Resizer",T:"boolean",C:"Flag to make the axis resizers draw the canvas as they move",D:"true"},temperature:{A:"true",M:"Network Graphs",T:"integer",C:"Temperature to limit displacement at later stages of forceDirected and organic layouts. A value based on the number of node and edges will be assigned if not specified",D:"0"},indicatorWidth:{M:"Heatmaps and Networks",T:"integer",C:"Length in pixels for the heatmap indicator line width used for increase the size of the indicator",D:"1"},panningStep:{A:"true",M:"Zooming and Panning",T:"float",C:"Percentage step for panning networks.",D:"0.2"},featureTypeDefault:{O:["box","bar","heatmap","sequence","triangle","line"],M:"Genome Browser",T:"option",C:"Default type for the feature in the genome browser",D:"line"},sequenceFontSize:{A:"true",M:"Genome Browser",T:"integer",C:"Size in pixels for the font size of text of the sequence in the genome browser",D:"10"},zAxisValues:{A:"true",M:"Axes",T:"array",C:"Values for the ticks in the Z axis",D:"[]"},allVsAllType:{O:["both","upper","lower"],M:"2D Scatter Plot",T:"option",C:"Type for the n-1 x n-1 matrix of 2D sccaterplots",D:"both"},overlayFontSize:{A:"true",M:"Overlays",T:"integer",C:"Font size for the overlays in one dimensional plots",D:"6"},backgroundWindowGradientOrientation:{A:"true",S:["backgroundType"],O:["vertical","horizontal"],M:"General",T:"string",C:"The orientation for the gradient if the background type is windowGradient or windowGradient2.",D:"vertical"},yAxisTransformTicks:{M:"Axes",T:"boolean",C:"Flag to transform the values of the ticks in the Y axis",D:"true"},zAxisTransform:{O:["false","log2","log10","exp2","exp10","percentile"],M:"Axes",T:"option",C:"Tranformation for the values in the Z axis.",D:"false"},isCreateHistogram:{A:"true",Z:"true",M:"2D Scatter Plot",T:"boolean",C:"Flag to indicate there is a histogram",D:"false"},rAxisValues:{A:"true",M:"Axes",T:"array",C:"Values for the ticks in the R axis",D:"[]"},autoScaleFont:{A:"true",S:["smpLabelFontSize","varLabelFontSize","legendFontSize","axisTickFontSize","axisTitleFontSize"],M:"Text",T:"boolean",C:"Flag to automatically adjust the font size in many visualization. Please be aware that scaling factors can still modify the font size. This flag needs to be false for the text to accept the specified font size.",D:"true"},varIndicesStart:{A:"true",Z:"true",M:"Heatmaps",T:"integer",C:"Number that indicates starting point for variables in heatmaps when the canvas is zoom in."},backgroundGradient2Color:{S:["backgroundType","backgroundGradient1Color"],M:"General",T:"color",C:"The second color of the gradient if the background is a type of gradient.",D:"rgb(0,0,36)"},videoGrid:{M:"General",T:"boolean",C:"Flag to show grid in video",D:"false"},smpLabelCircular:{M:"Samples",T:"boolean",C:"Flag to show the sample names in a circular orientation in circular plots.",D:"false"},dataFilterWidth:{A:"true",M:"Events",T:"integer",C:"Size in pixels for the data filters.",D:"300"},transparency:{A:"true",M:"General",T:"float",C:"Percentage of transparency applied to all elements in the visualiztionss",D:"null"},useSmpVarIndexOnClustering:{M:"Clustering",T:"boolean",C:"Flag to indicate to use variable or sample index rather than names when clustering. This allows to use '(', ')' and ':' in the variable or sample name",D:"false"},zAxisTickColor:{M:"Axes",T:"color",C:"Color for the tick lines in the Z axis",D:"rgb(204,204,204)"},transform:{S:["transformType","transformBase","ratioReference","zscoreAxis"],O:["false","log2","log10","exp2","exp10","percentile","zscore","ratio","ratio2","ratio10","save","reset","undo"],M:"Functions",T:"option",C:"Transform all the data. Warning: the option 'save' overwrites the original data",U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},transformType:{O:["false","log2","log10","exp2","exp10","percentile","zscore","ratio","ratio2","ratio10","save","reset","undo"],M:"Data",T:"option",C:"Default transformation type.",D:"false"},timeValues:{A:"true",M:"Axes",T:"array",C:"Array containig the tick values when the the graph is a time series",D:"[]"},sequenceKColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate G/T and lysines in the genome browser",D:"rgb(255,0,0)"},backgroundWindowGradient1Color:{A:"true",S:["backgroundType"],M:"General",T:"color",C:"The first color of the gradient if the background is a type of window gradient.",D:"rgb(0,0,200)"},disableDataTable:{A:"true",M:"Events",T:"boolean",C:"Flag to disable showing data table",D:"false"},maxFeatureStringLen:{M:"Genome Browser",T:"integer",C:"Maximum length in characters a feature label can have so anything above is truncated.",D:"50"},yAxis:{A:"true",M:"Axes",T:"array",C:"Name of the samples groups or variables to be displayed in the Y axis",X:"getSamplesAsArray",D:"[]"},setMinX:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data in the X axis",D:"null"},sizeBy:{O:["false","variable"],M:"Scatter and One-D Plots",T:"option",C:"Name of a variable annotation or a sample name or the string 'variable' to size the variables.",D:"false",X:"getXZData"},featureTranslateShow:{M:"Genome Browser",T:"boolean",C:"Flag use to show tranlation",D:"true"},varTitleFont:{A:"true",Z:"true",M:"Variables",T:"font",C:"Font for the variable titles in one dimensional plots"},videoClassName:{M:"General",T:"string",C:"Video class name / css for videos",D:"video-js vjs-default-skin"},preScaleNetwork:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to prescale or not the network. This is a aesthetic parameter to make the graph look nicer... Sometimes...",D:"false"},sequencePColor:{M:"Genome Browser",T:"color",C:"Color for the prolines in the genome browser",D:"rgb(255,165,0)"},isHistogram:{A:"true",M:"2D Scatter Plot",T:"boolean",C:"Flag to convert the 2D scatter plot into a histogram. That is, the points in the scatter plot are converted to bars that start at the bottom of the Y axis. It is useful to represent proteomics spectra or histograms.",D:"false"},xRotate:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Number of degrees to rotate graph arround the X axis",D:"45"},weight:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Fraction of the canvas to be used (a value between 0 and 1). Used when multiple graphs are displayed in one canvas. Could be an number or an array of numbers."},showLegend:{M:"Legends",T:"boolean",C:"Flag to show or not the legend in the graphs",D:"true"},indicatorCenter:{O:["white","black","rainbow","rainbow-red","rainbow-green"],M:"Heatmaps and Networks",T:"option",C:"Color for the center of the heatmap indicator. If rainbow-red is specified the order of the colors to generate the gradient will be: red - blue - green. If rainbow-green is specified then the order of the colors to generate the gradient will be: green - blue - red. The option rainbow is an alias for rainbow-red.",D:"white"},sequenceYColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate C/T and tyrosines in the genome browser",D:"rgb(0,0,255)"},histogramBins:{A:"true",M:"2D Scatter Plot",T:"integer",C:"Number of bins in histogram",D:"20"},yAxisTickStyle:{A:"true",O:["solid","dotted"],M:"Axes",T:"option",C:"Style for the tick lines in the Y axis",D:"solid"},varTitle:{M:"Variables",T:"integer",C:"Title for the sample axis in one dimensional plots",D:"10"},networkFreeze:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to prevent autoscaling for the network layout.",D:"false"},stockIndicators:{O:["Sma5","Sma10","Sma20","Sma25","Sma50"],M:"Candlestick Plots",T:"array",C:"Stock technical indicators",D:"[]"},colorNodeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to color the nodes.",D:"false"},backgroundImage:{S:["backgroundType"],M:"General",T:"url",C:"Url for the background image",D:"false"},showPieSampleLabel:{M:"Pie Charts",T:"boolean",C:"A flag to show the sample label when plotting mutliple pies",D:"true"},minTextSize:{A:"true",M:"Text",T:"integer",C:"Minimum size for any text in the canvas.",D:"4"},isBoxPlotCalc:{A:"true",Z:"true",M:"Data",T:"boolean",C:"Flag to indicate if the iqr has been calculated if the graph type is Boxplot."},blockFactor:{A:"true",S:["autoAdjust","blockSeparationFactor"],M:"One dimentional plots",T:"int",C:"Factor to adjust the size of the sample blocks in the one dimensional graphs. The default is 1. If you want to make the blocks wider then increase this parameter (2 is twice as big). This only works if the auto adjust property is set to 'false'",D:"1"},pieSegmentSeparation:{M:"Pie Charts",T:"integer",C:"Length in pixels for the separation of the pieces of the pie charts",D:"3"},timeTicksFirst:{A:"true",M:"Axes",T:"boolean",C:"Flag to indicate whether to use the first date on a time graph or the last",D:"false"},remoteParams:{A:"true",M:"Remote Procedures",T:"object",C:"Object to hold parameters used to obtain data remotely. The target property will be always added to the method as well as the direction [next|prev] (see below.",D:"{}"},dotLength:{A:"true",M:"Attributes",T:"integer",C:"Size in pixels of the length between dots in the doted lines.",D:"1"},zAxisMinorValues:{A:"true",M:"Axes",T:"array",C:"Values for the minor ticks in the Z axis",D:"[]"},smpHighlightColor:{M:"Samples",T:"color",C:"The color for the higlighted samples.",D:"rgb(255,0,0)"},network2DRotate:{A:"true",Z:"true",M:"Network Graphs",T:"integer",C:"Number of degrees to rotate network arround the X axis"},clusterSamples:{S:["distance","linkage","clusterAxis","imputeMethod","centerData"],M:"Functions",T:"void",C:"Cluster samples based on data and generate a dendrogram on the sample axis. It takes no parameters",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",StackedPercentLine:"true",Area:"true",Line:"true",StackedLine:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},arrowPointSize:{A:"true",M:"Attributes",T:"integer",C:"Size in pixels of the arrow head in arrow lines.",D:"10"},yAxisValues:{A:"true",M:"Axes",T:"array",C:"Values for the ticks in the Y axis",D:"[]"},sma25Color:{M:"Candlestick Plots",T:"color",C:"The color for the 25 day single moving average",D:"rgb(255,0,255)"},sequenceFill:{M:"Genome Browser",T:"color",C:"Color for the background when showing sequnces in the box or sequence object in the Genome. The default is to use the background of the object. If specied a valid color then all the background of sequences will be uniform",D:"false"},titleColor:{S:["subtitle","subtitleHeight"],M:"Titles",T:"color",C:"Color for the subtitle",D:"rgb(0,0,0)"},outlineBy:{M:"Scatter and One-D Plots",T:"string",C:"Name of the annotation for the outline when drawing a multidimensional Heatmap",D:"false"},cullingThreshold:{A:"true",M:"3D Scatter Plot and Networks",T:"integer",C:"Number of data point to start culling data",D:"1000"},setMax2:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data in the 2nd axis",D:"null"},sortVariablesByCategory:{S:["sortDir","sortVariablesBySample"],M:"Functions",T:"array",C:"Sort the variables by a variable category (data.z object)",X:"getZData",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},desegregateVariables:{S:["segregateVariables"],M:"Functions",T:"void",C:"Desegregate variables previously segregated based on a variable category (data.z object)",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},setMax:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data",D:"null"},selectDataModeDescription:{O:["false"],M:"Scatter Plots",T:"option",C:"Variable label to display when highlihting selected data points that must be in the 'data.z' object",D:"false",X:"getZData"},tickRotate:{M:"Ticks and Axis Titles",T:"integer",C:"Rotation for graph ticks in degrees. It could be positive or negative.",D:"0"},networkLayoutType:{O:["forceDirected","organic","radial"],M:"Network Graphs",T:"option",C:"Type of network layout.",D:"forceDirected"},zoom:{A:"true",M:"Zooming and Panning",T:"float",C:"Zoom factor for the networks. A number greater than zero",D:"1"},legendBackgroundColor:{S:["legendBox"],M:"Legends",T:"color",C:"Color for the legend background",D:"background color"},citationFont:{A:"true",Z:"true",M:"Titles",T:"font",C:"Font for the reference citation"},initialTemperature:{A:"true",M:"Network Graphs",T:"integer",C:"Initial temperature to limit displacement at later stages of forceDirected and organic layouts. A value based on the number of node and edges will be assigned if not specified",D:"0"},overlayScaleFontFactor:{A:"true",M:"Overlays",T:"float",C:"Scaling factor used to increse or decrease overlays font size in the canvas in one dimensional plots",D:"1"},showNetworkNodesLegend:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to show node legends in the networks",D:"true"},shadowBlur:{A:"true",S:["showShadow"],M:"General",T:"integer",C:"Amount in blur for the shadow.",D:"2"},varTitleLabelOverlayPosition:{O:["botom","top"],M:"Variables",T:"option",C:"Position for variable labels in heatmaps",D:"bottom"},remoteAutoPlay:{A:"true",M:"Remote Procedures",T:"boolean",C:"Flag to iterate over remote data sets",D:"false"},recalculateLayout:{M:"Functions",T:"void",C:"Recalculate the network layout",U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},sequenceXColor:{M:"Genome Browser",T:"color",C:"Color for the any aminoacid code in the genome browser",D:"rgb(0,0,0)"},overlayFontColor:{A:"true",M:"Overlays",T:"color",C:"Color for the overlays in one dimensional plots",D:"foregroung color"},sizeNodeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to size the nodes.",D:"false"},snapshotCopyChangeOnly:{A:"true",M:"Animation",T:"boolean",C:"Flag to indicate whether to copy all or only the changed attributes in the network animation. This optimizes memory usage for snapshots.",D:"true"},axisTickFontSize:{A:"true",S:["autoScaleFont","tickScaleFontFactor"],M:"Ticks and Axis Titles",T:"integer",C:"Font size for the axis ticks in one and two dimensional plots. Be aware that auto scaling font must be turned off for this property to take effect. A more convenient way to modify the size is to use the tick scaling factor",D:"10"},xAxisMinorTicks:{A:"true",M:"Axes",T:"boolean",C:"A flag to show minor tick lines in the X axis",D:"true"},sequenceGColor:{M:"Genome Browser",T:"color",C:"Color for the guanines and glycines in the genome browser",
D:"rgb(0,0,0)"},legendPosition:{O:["right","bottom"],M:"Legends",T:"option",C:"Position for the legend in the graphs",D:"right"},dashLength:{A:"true",M:"Attributes",T:"integer",C:"Size in pixels of the length of the dashes and the separation between the dashes in the dashed lines.",D:"8"},zAxisTitle:{M:"Axes",T:"string",C:"Title for the Z axis",D:"false"},dotPlotJitter:{A:"true",M:"Dot Plots",T:"boolean",C:"Flag to jitter the point in dotplots",D:"false"},remoteParentId:{A:"true",Z:"true",M:"Remote Procedures",T:"string",C:"Id for the parent holding the remoteWindow to prevent id collisions"},groupingFactors:{M:"Data",T:"array",C:"An array that holds the group names used for grouping the data. It must be a category in the 'data.x' object",D:"[]",X:"getXData"},configuratorWidth:{A:"true",M:"Events",T:"integer",C:"Size in pixels for the configurator.",D:"300"},translateX:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Amount to translate for the X axis."},networkRoot:{M:"Network Graphs",T:"string",C:"Node Id of the network root.",D:"false"},varOverlays:{M:"Overlays",T:"array",C:"Variable annotations included in the 'data.z' object used in one dimensional plots",D:"[]",X:"getZData"},z3DRatio:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Value between 0 - 1 for adjusting the 3D of the Z Axis",D:"1"},remoteUpdating:{A:"true",Z:"true",M:"Remote Procedures",T:"boolean",C:"Flag to indicate that updating data is in progress"},foreground:{M:"General",T:"color",C:"Foreground color for the canvas",D:"rgb(0,0,0)"},filterFeatureBy:{M:"Genome Browser",T:"filter",C:"Filter features by their properties used in genome browser      *",D:"[]",X:"getFeatureData"},plotByVariable:{M:"One dimentional plots",T:"boolean",C:"Flag to indicate whether to group the data variable rather than by sample",D:"false"},rowHeight:{A:"true",M:"Data table",T:"integer",C:"Mumber of pixels for the height of cells in the data table",D:"100"},blockSeparationFactor:{A:"true",S:["autoAdjust","blockFactor"],M:"One dimentional plots",T:"int",C:"Factor to adjust the spacing between the sample blocks in the one dimensional graphs. The default is 1. If you  want to make the blocks wider apart then increse this parameter (2 is twice as much). This only works if the auto adjust property is set to 'false'",D:"1"},smpHairlineWidth:{M:"One dimentional plots",T:"float",C:"The width for the thin line that appears in the middle of the sample block just for aesthetics.",D:"0.3"},scatterType:{O:["false","line","bar","image","lineImage","lineStep"],M:"Scatter Plots",T:"option",C:"Type of scatter plot",D:"false"},videoCurrentTime:{M:"General",T:"boolean",C:"Flag to show video current time",D:"false"},dendrogramHang:{M:"Dendrograms",T:"boolean",C:"Flag to show or not the nodes in the dendrogram as hanging or not similar to that one in R",D:"false"},featureQualityValues:{M:"Genome Browser",T:"boolean",C:"Flag use to show values for the quality",D:"false"},bar3DInverseWeight:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Value for adjusting the thickness of 3D bars. The larger the value the the thinner the bar",D:"1"},resizerPosition:{A:"true",O:["top","rigth","bottom","left"],M:"Axis Resizer",T:"option",C:"Position for the axis resizer in complex plots",D:"bottom"},repulsiveForceFunction:{A:"true",O:["square","log","pow","sqrt"],M:"Network Graphs",T:"option",C:"Type of function to apply when calculating repulsive force in forceDirected network layouts",D:"square"},vennGroups:{M:"Venn Diagrams",T:"integer",C:"Number of groups in the Venn diagram",D:"4"},zAxis:{A:"true",M:"Axes",T:"array",C:"Name of the samples groups or variables to be displayed in the Z axis",X:"getSamplesAsArray",D:"[]"},videoPlaybackRate:{M:"General",T:"float",C:"Video Playback Rate",D:"1"},lineType:{O:["rect","spline"],M:"Line Graphs",T:"option",C:"Type of line used to join the points in line graphs",D:"rect"},y3DRatio:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Value between 0 - 1 for adjusting the 3D of the Y Axis",D:"1"},zscoreAxis:{O:["samples","variables"],M:"Data",T:"option",C:"Default axis to use to zsore the data.",D:"samples"},rAxisCurrent:{A:"true",M:"Axes",T:"integer",C:"Index of the sample that is currently displayed displayed in the R axis",D:"0"},decorationsWidth:{A:"true",M:"Decorations",T:"integer",C:"Length in pixels of the width for the decorations in the networks",D:"10"},featureStaggered:{M:"Genome Browser",T:"boolean",C:"Flag use to stagger the features in the genome panel",D:"false"},filterVarBy:{M:"Variables",T:"filter",C:"Filter variables by their annotation included in the 'data.z' object used in one dimensional plots",D:"[]",X:"getZData"},moveParentsWithChildren:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to make parents move when a child is moved",D:"false"},yAxisAbsMax:{A:"true",Z:"true",M:"Axes",T:"float",C:"Maximum unfiltered value for the Y axis"},maxPieSectors:{M:"Pie Charts",T:"float",C:"Max pie sectors. After that number the sectors will be put in a sector named 'other'.",D:"20"},xAxisAbsMin:{A:"true",Z:"true",M:"Axes",T:"float",C:"Minimum unfiltered value for the X axis"},filterSkipNullKeys:{M:"Data Filters",T:"boolean",C:"Flag to indicate to bypass filtering when a key is non existent in the data objects",D:"false"},correlationLabelInterval:{A:"true",M:"Correlation Graphs",T:"integer",C:"Interval for the sample or variable labels in the correlation plot",D:"1"},ringSegmentSeparation:{M:"Circular Graphs",T:"int",C:"Number of degrees to separate the segments in the circular plots",D:"4"},networkForceConstant:{A:"true",M:"Network Graphs",T:"float",C:"Constant used for calculating attractive and repulsive forces in forcedDirected and organic layouts. A value based on the average area per node will be assigned if not specified",D:"0"},networkShowDataTable:{A:"true",O:["nodes","edges"],M:"Data table",T:"option",C:"Show nodes or edges on data table",D:"nodes"},vennColors:{A:"true",S:["colors"],M:"Venn Diagrams",T:"array",C:"Colors for the Venn bubles. If not specified the colors will be chosen from the colors array. Colors in this array need to be at least the same number of groups in the Venn diagram",D:"[]"},skipConfigurableProperties:{M:"Data Table/Filter",T:"boolean",C:"Flag to indicate to exclude configurable parameters in the data table and the data filters in Networks and Genome Browser",D:"true"},scaleX:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Scale factor for the X axis"},overlaysWidth:{A:"true",M:"Overlays",T:"integer",C:"Length in pixels of the width for the colored boxes to clasify samples and or variables in one dimensional plots",D:"30"},gradientType:{A:"true",S:["gradient"],O:["linear","radial"],M:"General",T:"option",C:"Type of patern used for the gradients applied to all elements in the visualizations",D:"radial"},"this":{A:"true",Z:"true",M:"Events",T:"time",C:"Time in milliseconds to keep track of time"},resizerType:{A:"true",O:["false","samples","box"],M:"Axis Resizer",T:"option",C:"String to indicate the type of axis resizer in complex plots",D:"false"},showDataValues:{M:"Bar Graphs",T:"boolean",C:"Flag to indicate whether to show data values in the one bar graphs.",D:"false"},allVsAll:{M:"2D Scatter Plot",T:"boolean",C:"Flag to plot an n-1 x n-1 matrix of 2D sccaterplots",D:"false"},toolbarPermanent:{A:"true",M:"Events",T:"boolean",C:"Flag to make the toolbar permanently visible.",D:"false"},featureTracesShow:{M:"Genome Browser",T:"boolean",C:"Flag use to show traces",D:"true"},hideUnhideSmps:{M:"Functions",T:"array",C:"Hide or unhide samples. It works like a switch",X:"getSamplesAsArray",U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},decorationsColors:{A:"true",M:"Decorations",T:"array",C:"Array of colors used for selection in network decorations not to be confused by its singular form 'decorationsColor' above",D:"[]"},zAxisAbsMax:{A:"true",Z:"true",M:"Axes",T:"float",C:"Maximum unfiltered value for the Z axis"},imputeMethod:{S:["distance","linkage","clusterAxis","centerData","clusterSamples","clusterVariables"],O:["mean","median"],M:"Clustering",T:"option",C:"Imputation method for missing data when clustering",D:"mean"},isMarketSwitched:{A:"true",Z:"true",M:"Data",T:"boolean",C:"Flag to indicate if the data is a Candlestick."},randomMissingDataPercentage:{A:"true",M:"Data",T:"integer",C:"Default percentege of missing values when creating random data",D:"0"},videoPreload:{O:["Auto","Metadata","none"],M:"General",T:"option",C:"Data for videos @cfg {string object} videoData",D:"{}"},highlightVar:{M:"Variables",T:"array",C:"Name of variables in the 'data.y' object to highlight.",D:"[]",X:"getVariablesAsArray"},smpHairline:{O:["false","solid","dotted"],M:"One dimentional plots",T:"option",C:"This is a thin line that appears in the middle of the bar graphs just for aesthetics.",D:"dotted"},sortSamplesByCategory:{S:["sortDir","sortSamplesByVariable"],M:"Functions",T:"array",C:"Sort the samples by a sample category (data.x object)",X:"getXData",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},featuresProperties:{M:"Data Table/Filter",T:"array",C:"Two dimensional array with object properties not at the root level for the features in the Genome graph to include in the Data table and the data filter",D:"[]"},smpOverlayRecycleColors:{M:"Overlays",T:"boolean",C:"Flag to indicate to recycle sample overlay colors with each overlay",D:"false"},sequenceWColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/T and tryptophans in the genome browser",D:"rgb(0,0,255)"},fontStyle:{A:"true",O:["false","bold","italic"],M:"Text",T:"option",C:"Font style. Not implemented yet.",D:"false"},ringWeight:{M:"Circular Graphs",T:"array",C:"Array containing the dimensions for each ring in the circular plots",D:"[]"},showBoxplotOriginalData:{A:"true",S:["dotPlotDataPointRatio","dotPlotDataPointTransparency"],M:"Box Plots",T:"boolean",C:"Flag to show original data in boxplots",D:"false"},rAxisTickColor:{M:"Axes",T:"color",C:"Color for the tick lines in the R axis",D:"rgb(204,204,204)"},showGraph:{M:"General",T:"boolean",C:"Flag to show the graph",D:"true"},videoControls:{M:"General",T:"boolean",C:"Flag to show controls in videos default true"},showVolume:{M:"Candlestick Plots",T:"boolean",C:"Flag to show or not volume in the candlestick graphs",D:"true"},sma10Color:{M:"Candlestick Plots",T:"color",C:"The color for the 5 day single moving average",D:"rgb(0,255,0)"},gradientOrientation:{A:"true",S:["backgroundType"],O:["vertical","horizontal"],M:"General",T:"option",C:"The orientation for the gradient if the background type is windowGradient or windowGradient2.",D:"vertical"},refresehDataTableOnDraw:{A:"true",M:"Data table",T:"boolean",C:"Flag to indicate to refresh data after drawing the plot",D:"true"},smpLabelFontSize:{A:"true",S:["autoScaleFont","smpLabelScaleFontFactor"],M:"Samples",T:"integer",C:"Size for the sample labels in one dimensional plots. Be aware that auto scaling font must be turned off for this property to take effect. A more convenient way to modify the size is to use the sample label scaling factor",D:"10"},varLabelFontSize:{A:"true",S:["autoScaleFont","varLabelScaleFontFactor"],M:"Variables",T:"integer",C:"Size for the variable labels in one dimensional plots. Be aware that auto scaling font must be turned off for this property to take effect. A more convenient way to modify the size is to use the variable label scaling factor",D:"10"},maxRotate:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Maximum number of degrees to rotate graph arround axes",D:"false"},sequenceAColor:{M:"Genome Browser",T:"color",C:"Color for the adenines and alanines in the genome browser",D:"rgb(0,103,0)"},clusterVariables:{S:["distance","linkage","clusterAxis","imputeMethod","centerData"],M:"Functions",T:"void",C:"Cluster variables based on data and generate a dendrogram on the variable axis. It takes no parameters",U:{Heatmap:"true"}},xAxis2TickFormat:{A:"true",M:"Axes",T:"string",C:"Format for the tick values in the second X axis",D:"false"},dataEvent:{A:"true",Z:"true",M:"Events",T:"array",C:"Array to store the areas that will trigger an event"},highlightNode:{M:"Network Graphs",T:"array",C:"Name of nodes in the 'data.nodes' object to highlight.",D:"[]"},snapshots:{A:"true",Z:"true",M:"Snapshots",T:"array",C:"Array to hold the data used in the animation"}},G:{name:{M:"Genome",T:"string",C:"Track name"}},E:{cap:{O:"butt, round, square",M:"Network",T:"option",C:"Type of cap for the end of the lines"},width:{M:"Network",T:"integer",C:"Pixel width for the edges between nodes"},anchor:{M:"Network",T:"boolean",C:"Flag make the edge transparent"},color:{M:"Network",T:"color",C:"Color for the edge"},hide:{M:"Network",T:"boolean",C:"Flag to hide the edge"},exact:{M:"Network",T:"boolean",C:"Flag to indicate to create the edge between nodes without subtracting the size of the nodes"},type:{M:"Network",T:"string",C:"Type of line use to join the nodes"}}};
