<?php

namespace webservices\export;

require_once __DIR__ . '/../../config.php';
require_once __DIR__ . '/../../../db/cvterms.php';
require_once __DIR__ . DIRECTORY_SEPARATOR . 'overload_header_function.php';

/**
 * @backupGlobals disabled
 */
class FastaTest extends \PHPUnit_Framework_TestCase
{
    public function testExecute()
    {
        $expected_output = <<<EOF
>gi|351629470|gb|JP482353.1|
TAATCATAATTAATCTTTTGGGATTATTGGAGGGAATGGTTGAGCGGTTAATTTAACTCTCTCTCTTTCTCTCTCTATATTCTTTCTCTCTCTAAAGTGGTGTGTTAGCTTGAAGAAGAAGAAGGTGTGCGCAGGTTAAGCGAATCTGCTTTAGTCAGTAGTGGCGTAGGTTAAGGAGTTTGGTTTTGGTGGTGGTGGTGGTCGACGGAGGAGGAAGAAGAGGAGAGAATCTTTGAATTGATTGATTGATGATCGATGTCGAAAATGAAGCATCTACTGAGGAAGCTCCACATCGGAGGCGGTGGTATCAATGAGCAGCAACACCAAAGATTGGGTGAGACTACGAGACCTGTTACTACTCCGATTTCGAATCAGAGTTCTAGTTCGGCTTCGATTCCTTCGACTTCTAGTTCGGCTACAATGGTGGGGAGAATCGGAGTCGTTGATTCTTCGATTGGTGATCGTACGGTTGTTGATGGTGGTAGTGGTAGTGGTAGCGGTGGCGGTGGTGGTGGTGGTGGTGAGTGTGTGGATTTTAATTTCTTGGAGGAGGAGTTTCAGGTGCAGTTGGCTTTAGCGATTAGTGCTTCCGATCCCGATTCGCGTGAGGATCCTGAGTCGGCTCAGATCGATGCTGCGAAGCGGATTAGTTTGGGTTGTTCGGCTGCGGTTTCTGATAATAAAGGCCGCGTCGATATTCTTTCGCTTCATTATTGGAGCTATAATGTTGTAAATTACACTGAGAAAGTGGTGGATGGGTTTTATGACGTATATACTGTTTCTTCAAACTCACTTGCCCAAGGAAGGATGCCATTATTGGCTGATCTCCAAGTACTATCTGTTTCAGATAATGTTGATTATGAAGTAATTTTGGTTAACCGAATGTTGGATTCTGAACTACGACAGCTTGAGAAAAGGGCATCTGATATATCATTGGAGTGTCAAGGTTCTGACCATGGTCTAATTTTTAGTGGATTGATACAGAAAATTGCTGACATTGTTGTGGATAGAATGGGTGGTCCGGTTGGTGATGCTGATGATATGACTAGAAAATGGACCATGCGGAGGAATGAGTTACGGAATACTTTAAAAACTATTATACTTCCCATTGGACGTCTTGATTTTGGACTATCACGCCACAGGGCCTTGCTCTTTAAGGTCCTAGCTGATAGGATAAATCTTCCATGTATGCTGGTCAAAGGAAGTTACTACACCGGTACCGATGATGGAGCTGTGAACTTGATTAAAATTGAAGATGGAAGTGAATACATCATTGATCTTATGGGTGCTCCGGGCACCCTGATACCTGCGGAGGTACCCAGTAGTCAGCTTCCTAGTTCGTTCCTTGATATAAGGAGCTTAGCAGATGTCACTGTAATGCCCACGGGTCTGAGAATGTTGCATGATGAAGGAGTTGAAACACCACTGTCAAAAGATGGGAGTTCAAGATCAGATGAAGCATTATTTTTGGACACTCAGGCAACAGAGGATGCAAGGCGTTTGGTTGAAGAAAATCAAAATGAGAGATGTGAAAATGAATTTGCAAAGTACTTTCCATCACCCCAGAGATCAGGTCAGAGTTCCTTGGTTGCTGGTGGAAAAGCATCTTCTGCACAAAAGAAGAGAGTTAAGAATGTATCAAAGTATGTTATCAGTGCTGCAAAAGACCCAGAATTTGCACAGAAACTACATGCTGTCTTGTTAGAAAGTGGAGCAACACCTCCTCCCGATTTGTTTTCGGATATACCACAGGATGTTGATGAAGACAGAATGGGAGATCGAAGAATTGTGGTTGATGGGGTTCAATATCACCAGGATAACTTGTTTTCATACCAGGAACAGTCTCTTGTGCCCATTTCTGAAGGGGATTGCCCAAGCTATATTGATAGCGATATAGTTCAAAAACAAGCTGCTGAAGGTTTTGCTCAGAAACAAAATGAACTGGATATTATGTCTAAACTTCCCCTGACATCCGATGCCACTGACCAGGGATACATGTTTGCTGCTAATAATATTGACGAACCTATCCAGACTGATTCTTTAAGTGTAGCTATGGTTCCTGTTAACCCACCAAGACAATACCCAAGTGCTCTGCGAGAGGAGCAAGTTAATGAGCATGCCTTTCCTTTCGAAGCTAACTCTTTTCGAAGACATGTTGATACTGCCTATTTTAGTGATAGAAAGAAGTTCTCCCAGGATACAAATAAATTTGATTTGGGAAAGGTATCTGCAGCTAAAGGAATGGAAATGGCCACAAGTCGATTGTGTTCTGACTCTGAAAATGAGAGAATCAATGCTGTTCTCGGGGAAGCTCCAGAGTGGGAAATTCAGTGGGAGGATCTTCGGATTGGTGAGCGAATTGGTATTGGTTCATATGGAGAGGTTTATCATGGTGATTGGAATGGCACTGAAGTTGCTGTGAAGAAGTTTTTAAATCAAGATTTTTCTGGGGAGGCATTACTTCAGTTTAGAAGTGAAGTTGAAATCATGTTGAGACTCAGACATCCAAATGTAGTCCTTTTCATGGGAGCAGTTACTCGGTCCCCGCATTTCTCTATACTGACTGAGTTCCTTCCCAGGGGGAGTTTATTTAAACTACTGCATCGTCCTAACCCGCAACTTGACGAAAAGAGAAGAATGAAAATGGCGCTGGATGTGGCCAAGGGAATGAATTACTTGCACACCAGCCATCCTACAATTGTTCATCGAGATTTGAAGTCTCCAAATCTCCTAGTTGATAAAAATTGGGTTGTTAAGGTTTGTGATTTTGGTTTGTCGCGCATGAAGCACCACACTTTTCTGTCGTCAAAGTCCACTGCTGGAACGCCTGAATGGATGGCACCAGAGGTGTTAAGGAACGAACCAGCCAATGAAAAGTGTGATGTGTACAGTTTTGGCGTGATATTATGGGAATTGACCACTGCTTGTATTCCATGGAAAGGATTGAACCCGATGCAGGTTGTTGGAGCTGTCGGATTCCAGAATAGGCGTCTAGAAATTCCAGAAGAGGTTGATCCAGAATTAGCCCAGATAATCCGTGATTGTTGGGAAAGAGATCCGAACTTAAGACCATCATTCTCACAGCTCATGGTTCGTCTCCGGCGTCTCCAACATCTTGTTGAGAGAAAAAACTCTAATAAGTAAACAACCGAACAACCGATAAATAAAAGTAAAGAAAAAAAAAAGGATTTGTCCCCCTATGCTCGAAGAGTTAGGGGTTTGATTAGTTAATTTTCCTTCAATACAAAAGAAAAAGAAGGAAAAAAAAAGAAGAAAGAAAGTTGAATTGGATTGGGAAGTGTTAGGCTCATTCAAAGTGGGGGCTGAGCATAGCCTAATCCCTTCTATTGAAGATTTTTAGTCTTTACTAGAAAGAAAACTAGTACAACTTATCTTAGTAGTGAGGTACCAAGGTAGTATGGTACATCAATCCAAGTGTAAGAAAATTTTCTTTTGAAAAAAAGGAAAAAAAAAAAGAAAAAGAAAAAAAGATGAAAAGAAACAAACAATAAATTTGTTATTGTGTATCTGTAGAGATCTAGTTAGGGAATTGTAAACATGTGATCTCTGCAGATTATTGTGAAGAATTAAAAAAAAAATACCCCAAAAAAATGAGAATTTGAAACAAAGAAATTATGCAACAAAAAAGCTTCCAA
>gi|351629442|gb|JP482325.1|
ACGGCCTAGTTACGGGGAAAAAAGAAAAAAGCTTCGATTTTTATATTTTTACAGAGAGACCCAAAAATGGTGACAGAGAAGAAAATGGTTTCAGAGAAAGAGAAAATGGTGAAATTGATCTTCACCTACGGAACATTGAAGCAAGGATTCTCCAACCATGTCCTCTTACAAGATCTAATCACAACAGGAGACGCTCTCTTCATCGGAAACTACAAAACCCATCTCAATTACCCTCTTGTTTGCGGTCCATACAGAGTTCCTTTTCTCATCAACCTTCCCGGCTCCGGTCAAAAAGTCATCGGAGAATTGTACGCAGTTTCATCCTCCGGCTTATCTCGATTAGATGAACTCGAGGGCATCACTCGTTCTCATTACCAAAGACTCCCAATTCAATTATCACCGTTGGATCATCAAGATGATGATGGTGTTGTTCTCACCGCCGGTGAGGCTTATTTCGCTCATTCTAGCTACGCCGGTAAGCTTTGGAACAAGAATGGACGACAAGGGTTGGTTGGGTATACAGAGGAGGTGGCTCGTGGGTATGTCAAACGGAAAGATAGGCCTCAAGATCGAACCTTTATGGATCATATTCGTTCTTTTTTAGAATCTCAGTAATGGTTTTTTTTATTTTGTTTTTAGGGTTAGAACAGAAGAAGAAGAAGAAGAAGAATTGGGATTTGATTAGATAAGAATAATATGATT

EOF;
        $this->expectOutputString($expected_output);
        list($service) = \WebService::factory('export/Fasta');
        $results = ($service->execute(array("terms"=>array(7, 35))));

    }
}
